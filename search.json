[{"path":"https://package.epinowcast.org/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021 epinowcast authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://package.epinowcast.org/articles/distributions.html","id":"available-distributions","dir":"Articles","previous_headings":"","what":"Available distributions","title":"Discretised distributions","text":"currently available parametric delay distributions continuous probability distributions () two parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\). table provides link definition distribution, specifies parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\) mapped parameters distribution (according referenced definition), states resulting mean distribution (discretization adjustment assumed maximum delay).","code":""},{"path":"https://package.epinowcast.org/articles/distributions.html","id":"discretisation-and-adjustment-for-maximum-delay","dir":"Articles","previous_headings":"","what":"Discretisation and adjustment for maximum delay","title":"Discretised distributions","text":"epinowcast, delays modeled discrete time assumed maximum delay (specified via max_delay argument). Therefore, continuous delay distributions must discretised adjusted maximum delay. exact form discretisation complex due interaction primary secondary events. Rather modelling explicitly, approximate assuming uniform censoring interval 2 days delay. comes assuming daily censoring primary secondary events, together define delay distribution, ignoring potential interactions primary secondary events. result, probability reporting delay \\(d\\) days equals probability reporting delay \\(d+1\\) days less, minus probability reporting delay \\(d-1\\) days less. normalised overall probability reporting delay maximum observed delay, \\(D\\). formally, define terms cumulative distribution function delay distribution. Let \\(F^{\\mu_{g,t}, \\upsilon_{g,t}}\\) cumulative distribution function continuous probability distribution delays parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\). , probability reporting delay \\(d\\) days \\[p_{g,t,d} = \\frac{F^{\\mu_{g,t}, \\upsilon_{g,t}}(d+1) - F^{\\mu_{g,t}, \\upsilon_{g,t}}(d-1)}{F^{\\mu_{g,t}, \\upsilon_{g,t}}(D + 1 ) + F^{\\mu_{g,t}, \\upsilon_{g,t}}(D)}.\\] Unless \\(d = 0\\) instead \\[p_{g,t,0} = \\frac{F^{\\mu_{g,t}, \\upsilon_{g,t}}(1)}{F^{\\mu_{g,t}, \\upsilon_{g,t}}(D + 1 ) + F^{\\mu_{g,t}, \\upsilon_{g,t}}(D)}.\\] Normalising \\(F^{\\mu_{g,t}, \\upsilon_{g,t}}(D+1) + F^{\\mu_{g,t}, \\upsilon_{g,t}}(D)\\), ensures \\(p^{\\prime}_{g,t,d}\\) sum 1. Since \\(F^{\\mu_{g,t}, \\upsilon_{g,t}}(D)\\) probability reporting maximum delay, can also interpreted conditioning distribution maximum delay. Note discretisation normalization, discrete delay distribution obtain approximates original continuous distribution, approximation worse shorter delays.","code":""},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick start","title":"Getting Started with Epinowcast: Nowcasting","text":"quick start, demonstrate using epinowcast specify fit minimal nowcasting model COVID-19 hospitalisations Germany. Examples using complex models available package vignettes papers referenced literature vignette.","code":""},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"package","dir":"Articles","previous_headings":"","what":"Package","title":"Getting Started with Epinowcast: Nowcasting","text":"quick start, also use data.table ggplot2 packages. installed dependencies epinowcast installed. Note output epinowcast readily useable tools, including tidyverse packages (see comparison).","code":"library(epinowcast) library(data.table) library(ggplot2)"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"Getting Started with Epinowcast: Nowcasting","text":"Nowcasting right-truncated case counts involves estimation reporting delays recently reported data. , need case counts diagnosed (e.g. someone tests positive; often called “reference date”) reported (.e. administratively recorded via public health surveillance; often called “report date”). difference reference date report date reporting delay. quick start, use data Robert Koch Institute via Germany Nowcasting hub. data represent hospitalisation counts date positive test date test report Germany October 1, 2021.","code":""},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"filtering","dir":"Articles","previous_headings":"Data","what":"Filtering","title":"Getting Started with Epinowcast: Nowcasting","text":"first filter create snapshot retrospective data available 40 days October 1, 2021 contains 40 days data. , create nowcast target latest available hospitalisations date positive test. allow us visualise nowcast made time compares ultimately reported. data already format can used epinowcast, contains reference date (column reference_date): date observation, example date positive test report date (column report_date): date report given set observations reference date count (column confirm): total (.e. cumulative) number hospitalisations reference date report date. package also provides range tools convert data line list, incidence, common formats required format (see Data converters).","code":"nat_germany_hosp <-   germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] |>   enw_filter_report_dates(latest_date = \"2021-10-01\")  retro_nat_germany <- nat_germany_hosp |>   enw_filter_report_dates(remove_days = 40) |>   enw_filter_reference_dates(include_days = 40) retro_nat_germany #>      reference_date location age_group confirm report_date #>              <IDat>   <fctr>    <fctr>   <int>      <IDat> #>   1:     2021-07-13       DE       00+      21  2021-07-13 #>   2:     2021-07-14       DE       00+      22  2021-07-14 #>   3:     2021-07-15       DE       00+      28  2021-07-15 #>   4:     2021-07-16       DE       00+      19  2021-07-16 #>   5:     2021-07-17       DE       00+      20  2021-07-17 #>  ---                                                       #> 857:     2021-07-14       DE       00+      72  2021-08-21 #> 858:     2021-07-15       DE       00+      69  2021-08-22 #> 859:     2021-07-13       DE       00+      59  2021-08-21 #> 860:     2021-07-14       DE       00+      72  2021-08-22 #> 861:     2021-07-13       DE       00+      59  2021-08-22 latest_germany_hosp <- nat_germany_hosp |>   enw_latest_data() |>   enw_filter_reference_dates(remove_days = 40, include_days = 40) head(latest_germany_hosp, n = 10) #>     reference_date location age_group confirm report_date #>             <IDat>   <fctr>    <fctr>   <int>      <IDat> #>  1:     2021-07-13       DE       00+      60  2021-10-01 #>  2:     2021-07-14       DE       00+      74  2021-10-01 #>  3:     2021-07-15       DE       00+      69  2021-10-01 #>  4:     2021-07-16       DE       00+      49  2021-10-01 #>  5:     2021-07-17       DE       00+      67  2021-10-01 #>  6:     2021-07-18       DE       00+      51  2021-10-01 #>  7:     2021-07-19       DE       00+      36  2021-10-01 #>  8:     2021-07-20       DE       00+      96  2021-10-01 #>  9:     2021-07-21       DE       00+      94  2021-10-01 #> 10:     2021-07-22       DE       00+      99  2021-10-01"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"preprocessing","dir":"Articles","previous_headings":"Data","what":"Preprocessing","title":"Getting Started with Epinowcast: Nowcasting","text":"modelling, input data needs converted “reporting triangle” format (see model description details). also need determine metadata facilitate model specification. includes number days data use reference report modules, maximum delay consider, , optionally, grouping (.e. age group, location, ) observations. process reported data format required epinowcast return data.table. stage, need specify grouping (.e age, location) . returned output form data.table metadata stored variables. can useful check output specifying model, just make sure everything expected.","code":"pobs <- enw_preprocess_data(retro_nat_germany, max_delay = 40) pobs #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[860x9]> <data.table[860x11]> <data.table[41x10]> #>    missing_reference  reporting_triangle      metareference #>               <list>              <list>             <list> #> 1: <data.table[0x6]> <data.table[41x42]> <data.table[41x9]> #>             metareport          metadelay  time snapshots     by groups #>                 <list>             <list> <int>     <int> <list>  <int> #> 1: <data.table[80x12]> <data.table[40x5]>    41        41             1 #>    max_delay   max_date timestep #>        <num>     <IDat>   <char> #> 1:        40 2021-08-22      day"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"model-specification","dir":"Articles","previous_headings":"","what":"Model specification","title":"Getting Started with Epinowcast: Nowcasting","text":"epinowcast package designed provide users flexible customizable modelling framework. package comes equipped several modules users can utilize construct models, also allows users create modules. ensures models can tailored user’s specific data context.","code":""},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"default-nowcasting-model","dir":"Articles","previous_headings":"Model specification","what":"Default nowcasting model","title":"Getting Started with Epinowcast: Nowcasting","text":"default nowcasting model epinowcast consists three modules: process (expectation) module models expected counts date reference (reference_date) parametric reference reporting model models reporting delay distribution date reference non-parametric reporting model models differences reporting delay distribution date report (report_date), example, day---week effects reporting delay. following sections, specify simple models modules. appropriateness specifications vary depending context. See vignettes details model specification examples complex models.","code":""},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"process-model","dir":"Articles","previous_headings":"Model specification","what":"Process model","title":"Getting Started with Epinowcast: Nowcasting","text":"commonly used process model nowcasting model expected counts date reference via geometric random walk acts minimally informed smoothing prior thus gives lot weight observed data. default process model epinowcast. Users may also specify model using enw_expectation() function. , day refers number days start data. underlying process model exponential growth rate model (\\(C_t = C_{t-1} \\exp^{r_t}\\)), specifying random effect (.e. (1 | day)) growth rate equivalent geometric random walk expected counts reference date.","code":"expectation_module <- enw_expectation(   ~ 0 + (1 | day), data = pobs )"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"reporting-model-by-reference-date","dir":"Articles","previous_headings":"Model specification","what":"Reporting model by reference date","title":"Getting Started with Epinowcast: Nowcasting","text":"baseline assumption reporting delay log-normally distributed, static time strata. can specify model using enw_reference() function, Note default distribution log-normal, hence distribution argument omitted . Alternatively model reporting delay non-parametrically using hazard model (see model description details). following equivalent cox proportional hazards model single baseline hazard function. Advanced users may wish combine parametric non-parametric reference date reporting models. example, model reporting delay log-normal delays 10 days use hazard model longer delays.","code":"reference_module <- enw_reference(~1, distribution = \"lognormal\", data = pobs) np_reference_module <- enw_reference(   parametric = ~0, non_parametric = ~ 0 + delay, data = pobs )"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"reporting-effects-by-report-date","dir":"Articles","previous_headings":"Model specification","what":"Reporting effects by report date","title":"Getting Started with Epinowcast: Nowcasting","text":"Even evidence reporting processes can approximated single distribution, may additional reporting effects captured reference model. example, reporting may lower weekends holidays. can specify model effects using hazard formulation (captures conditional relationship different reporting delays, see model description details) using enw_report() function. specify model random effect day week capture weekly seasonality reporting delay.","code":"report_module <- enw_report(~ (1 | day_of_week), data = pobs)"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"precompiling-the-model","dir":"Articles","previous_headings":"","what":"Precompiling the model","title":"Getting Started with Epinowcast: Nowcasting","text":"epinowcast uses cmdstan fit models, necessary first compile model. can done using enw_model() function. Note step can left epinowcast, want use multiple cores per chain speed model fitting therefore compile model feature turned .","code":"model <- enw_model(threads = TRUE)"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"bringing-it-all-together-fitting-the-model","dir":"Articles","previous_headings":"","what":"Bringing it all together: Fitting the model","title":"Getting Started with Epinowcast: Nowcasting","text":"can now fit model using “-U-Turn Sampler Markov chain Monte Carlo” method. type Hamiltonian Monte Carlo (HMC) algorithm core fitting method used cmdstan. NUTS MCMC method efficient, automatically tunes parameters robust correlations parameters, making fast effective generating samples posterior distribution. specify fitting options using enw_fit_opts() (note settings shown tuned speed may appropriate many real world use cases). also pass preprocessed data (pobs), pre-compiled model (model), model modules (expectation_module, reference_module, report_module) epinowcast, combined used fit model.","code":"options(mc.cores = 2) nowcast <- epinowcast(data = pobs,   expectation = expectation_module,   reference = reference_module,   report = report_module,   fit = enw_fit_opts(     save_warmup = FALSE, pp = TRUE,     chains = 2, threads_per_chain = 2,     iter_sampling = 500, iter_warmup = 500,     show_messages = FALSE   ),   model = model )"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"the-epinowcast-object","dir":"Articles","previous_headings":"","what":"The epinowcast object","title":"Getting Started with Epinowcast: Nowcasting","text":"epinowcast() function returns epinowcast object includes diagnostic information, data used fitting, underlying CmdStanModel object.","code":"nowcast #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[860x9]> <data.table[860x11]> <data.table[41x10]> #>    missing_reference  reporting_triangle      metareference #>               <list>              <list>             <list> #> 1: <data.table[0x6]> <data.table[41x42]> <data.table[41x9]> #>             metareport          metadelay  time snapshots     by groups #>                 <list>             <list> <int>     <int> <list>  <int> #> 1: <data.table[80x12]> <data.table[40x5]>    41        41             1 #>    max_delay   max_date timestep             priors #>        <num>     <IDat>   <char>             <list> #> 1:        40 2021-08-22      day <data.table[14x6]> #>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 fit #>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <list> #> 1: <CmdStanMCMC>\\n  Inherits from: <CmdStanFit>\\n  Public:\\n    clone: function (deep = FALSE) \\n    cmdstan_diagnose: function () \\n    cmdstan_summary: function (flags = NULL) \\n    code: function () \\n    constrain_variables: function (unconstrained_variables, transformed_parameters = TRUE, \\n    data_file: function () \\n    diagnostic_summary: function (diagnostics = c(\"divergences\", \"treedepth\", \"ebfmi\"), \\n    draws: function (variables = NULL, inc_warmup = FALSE, format = getOption(\"cmdstanr_draws_format\", \\n    expose_functions: function (global = FALSE, verbose = FALSE) \\n    functions: environment\\n    grad_log_prob: function (unconstrained_variables, jacobian = TRUE, jacobian_adjustment = NULL) \\n    hessian: function (unconstrained_variables, jacobian = TRUE, jacobian_adjustment = NULL) \\n    init: function () \\n    init_model_methods: function (seed = 0, verbose = FALSE, hessian = FALSE) \\n    initialize: function (runset) \\n    inv_metric: function (matrix = TRUE) \\n    latent_dynamics_files: function (include_failed = FALSE) \\n    log_prob: function (unconstrained_variables, jacobian = TRUE, jacobian_adjustment = NULL) \\n    loo: function (variables = \"log_lik\", r_eff = TRUE, moment_match = FALSE, \\n    lp: function () \\n    metadata: function () \\n    num_chains: function () \\n    num_procs: function () \\n    output: function (id = NULL) \\n    output_files: function (include_failed = FALSE) \\n    print: function (variables = NULL, ..., digits = 2, max_rows = getOption(\"cmdstanr_max_rows\", \\n    profile_files: function (include_failed = FALSE) \\n    profiles: function () \\n    return_codes: function () \\n    runset: CmdStanRun, R6\\n    sampler_diagnostics: function (inc_warmup = FALSE, format = getOption(\"cmdstanr_draws_format\", \\n    save_data_file: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_latent_dynamics_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_object: function (file, ...) \\n    save_output_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_profile_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    summary: function (variables = NULL, ...) \\n    time: function () \\n    unconstrain_draws: function (files = NULL, draws = NULL, format = getOption(\"cmdstanr_draws_format\", \\n    unconstrain_variables: function (variables) \\n    variable_skeleton: function (transformed_parameters = TRUE, generated_quantities = TRUE) \\n  Private:\\n    draws_: -1475.14 -1481.86 -1476.55 -1486.67 -1478.49 -1482.47 -1 ...\\n    init_: NULL\\n    inv_metric_: list\\n    metadata_: list\\n    model_methods_env_: environment\\n    profiles_: NULL\\n    read_csv_: function (variables = NULL, sampler_diagnostics = NULL, format = getOption(\"cmdstanr_draws_format\", \\n    return_codes_: 0 0\\n    sampler_diagnostics_: 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7  ...\\n    warmup_draws_: NULL\\n    warmup_sampler_diagnostics_: NULL #>           data  fit_args samples max_rhat divergent_transitions #>         <list>    <list>   <int>    <num>                 <num> #> 1: <list[116]> <list[7]>    1000     1.02                     0 #>    per_divergent_transitions max_treedepth no_at_max_treedepth #>                        <num>         <num>               <int> #> 1:                         0             8                   4 #>    per_at_max_treedepth run_time #>                   <num>    <num> #> 1:                0.004     41.9"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"summarising-and-plotting-the-nowcast","dir":"Articles","previous_headings":"","what":"Summarising and plotting the nowcast","title":"Getting Started with Epinowcast: Nowcasting","text":"nowcast (combination currently observed predicted unobserved data) can summarised using Similarly, summarised nowcast can plotted latest observed data using plot chunk nowcast","code":"nowcast |>   summary(probs = c(0.05, 0.95)) |>   head(n = 10) #>     reference_date report_date .group max_confirm location age_group #>             <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr> #>  1:     2021-07-14  2021-08-22      1          72       DE       00+ #>  2:     2021-07-15  2021-08-22      1          69       DE       00+ #>  3:     2021-07-16  2021-08-22      1          47       DE       00+ #>  4:     2021-07-17  2021-08-22      1          65       DE       00+ #>  5:     2021-07-18  2021-08-22      1          50       DE       00+ #>  6:     2021-07-19  2021-08-22      1          36       DE       00+ #>  7:     2021-07-20  2021-08-22      1          94       DE       00+ #>  8:     2021-07-21  2021-08-22      1          91       DE       00+ #>  9:     2021-07-22  2021-08-22      1          99       DE       00+ #> 10:     2021-07-23  2021-08-22      1          86       DE       00+ #>     confirm cum_prop_reported delay prop_reported    mean median        sd #>       <int>             <num> <num>         <num>   <num>  <num>     <num> #>  1:      72                 1    39             0  72.000     72 0.0000000 #>  2:      69                 1    38             0  69.039     69 0.2180058 #>  3:      47                 1    37             0  47.090     47 0.2966277 #>  4:      65                 1    36             0  65.241     65 0.5011688 #>  5:      50                 1    35             0  50.288     50 0.5507807 #>  6:      36                 1    34             0  36.278     36 0.5504716 #>  7:      94                 1    33             0  94.517     94 0.7498488 #>  8:      91                 1    32             0  91.794     92 0.9297464 #>  9:      99                 1    31             0 100.142    100 1.1203085 #> 10:      86                 1    30             0  87.383     87 1.2449341 #>        mad    q5   q95      rhat  ess_bulk  ess_tail #>      <num> <num> <num>     <num>     <num>     <num> #>  1: 0.0000    72    72        NA        NA        NA #>  2: 0.0000    69    69 1.0006406 1074.7070 1061.6479 #>  3: 0.0000    47    48 1.0001351 1037.1523 1013.5831 #>  4: 0.0000    65    66 1.0016224 1002.5895  972.2167 #>  5: 0.0000    50    51 0.9998357  948.7085  955.4453 #>  6: 0.0000    36    37 1.0017104  866.5944  880.2667 #>  7: 0.0000    94    96 1.0003799  986.0193  835.5012 #>  8: 1.4826    91    94 0.9990671 1182.9177 1028.3864 #>  9: 1.4826    99   102 1.0004965 1012.8400 1025.7233 #> 10: 1.4826    86    90 1.0004209 1015.0868  861.2164 plot(nowcast, latest_obs = latest_germany_hosp)"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"plotting-posterior-predictions","dir":"Articles","previous_headings":"Summarising and plotting the nowcast","what":"Plotting posterior predictions","title":"Getting Started with Epinowcast: Nowcasting","text":"Plotting posterior predictions can useful way assessing performance checking model capturing underlying data generation process adequately. can directly output epinowcast() using plot chunk pp","code":"plot(nowcast, type = \"posterior\") +   facet_wrap(vars(reference_date), scale = \"free\")"},{"path":"https://package.epinowcast.org/articles/epinowcast.html","id":"using-package-functions-rather-than-s3-methods","dir":"Articles","previous_headings":"Summarising and plotting the nowcast","what":"Using package functions rather than S3 methods","title":"Getting Started with Epinowcast: Nowcasting","text":"Rather using S3 methods supplied epinowcast() directly, package functions can also used extract nowcast posterior samples, summarise , plot . demonstrated plotting 7 day incidence hospitalisations. plot chunk week_nowcast see model underestimating incidence hospitalisations ultimately reported. range potential reasons , first process model fully capture trend day week periodicity present data. See case study vignettes ideas deal issues.","code":"# extract samples samples <- summary(nowcast, type = \"nowcast_samples\")  # Take a 7 day rolling sum of both samples and observations cols <- c(\"confirm\", \"sample\") samples[, (cols) := lapply(.SD, frollsum, n = 7),   .SDcols = cols, by = \".draw\" ][!is.na(sample)] #>        reference_date report_date .group max_confirm location age_group #>                <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr> #>     1:     2021-07-20  2021-08-22      1          94       DE       00+ #>     2:     2021-07-20  2021-08-22      1          94       DE       00+ #>     3:     2021-07-20  2021-08-22      1          94       DE       00+ #>     4:     2021-07-20  2021-08-22      1          94       DE       00+ #>     5:     2021-07-20  2021-08-22      1          94       DE       00+ #>    ---                                                                  #> 33996:     2021-08-22  2021-08-22      1          45       DE       00+ #> 33997:     2021-08-22  2021-08-22      1          45       DE       00+ #> 33998:     2021-08-22  2021-08-22      1          45       DE       00+ #> 33999:     2021-08-22  2021-08-22      1          45       DE       00+ #> 34000:     2021-08-22  2021-08-22      1          45       DE       00+ #>        confirm cum_prop_reported delay prop_reported .chain .iteration #>          <int>             <num> <num>         <num>  <int>      <int> #>     1:     433                 1    33             0      1          1 #>     2:     433                 1    33             0      1          2 #>     3:     433                 1    33             0      1          3 #>     4:     433                 1    33             0      1          4 #>     5:     433                 1    33             0      1          5 #>    ---                                                                 #> 33996:    1093                 1     0             1      2        496 #> 33997:    1093                 1     0             1      2        497 #> 33998:    1093                 1     0             1      2        498 #> 33999:    1093                 1     0             1      2        499 #> 34000:    1093                 1     0             1      2        500 #>        .draw sample #>        <int>  <num> #>     1:     1    438 #>     2:     2    433 #>     3:     3    433 #>     4:     4    434 #>     5:     5    433 #>    ---              #> 33996:   996   2083 #> 33997:   997   2394 #> 33998:   998   2335 #> 33999:   999   2421 #> 34000:  1000   2203 latest_germany_hosp_7day <- copy(latest_germany_hosp)[   ,   confirm := frollsum(confirm, n = 7) ][!is.na(confirm)]  # Summarise samples sum_across_last_7_days <- enw_summarise_samples(samples)  # Plot samples enw_plot_nowcast_quantiles(sum_across_last_7_days, latest_germany_hosp_7day)"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"packages","dir":"Articles","previous_headings":"","what":"Packages","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"use epinowcast package, data.table purrr data manipulation, ggplot2 plotting, knitr produce tables output, loo approximately evaluate sample performance scoringutils evaluate sample forecast performance. vignette includes several models take upwards 30 minutes fit data moderately equipped laptop. speed model fitting CPUs available set number threads used per chain half number real cores available (6 using 2 MCMC chains 12 real cores available). Note may cause conflicts processes running computer issue reduce number threads used.","code":"library(epinowcast) library(data.table) library(purrr) library(ggplot2) library(loo) library(scoringutils) library(knitr) threads <- 6 options(mc.cores = 2)"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"Nowcasting effectively estimation reporting patterns recently reported data. requires data patterns previous observations, typically means time series data reported multiple consecutive days (theory non-consecutive days used yet supported epinowcast). use COVID-19 hospitalisations date positive test Germany stratified age group available 1st September 2020 (40 days data included prior ) example data available real-time hospitalisations date positive test available 20th October represent hospitalisations finally reported. data sourced Robert Koch Institute via Germany Nowcasting hub deconvolved weekly data days negative reported hospitalisations adjusted. first filter data available 1st September last 40 days. Similarly find data available 20th October dates, serve target “true” data.","code":"nat_germany_hosp <- epinowcast::germany_covid19_hosp[location == \"DE\"]  retro_nat_germany <- nat_germany_hosp |>   enw_filter_report_dates(latest_date = \"2021-09-01\") |>   enw_filter_reference_dates(include_days = 40) retro_nat_germany #>       reference_date location age_group confirm report_date #>               <IDat>   <fctr>    <fctr>   <int>      <IDat> #>    1:     2021-07-23       DE       00+      30  2021-07-23 #>    2:     2021-07-24       DE       00+      31  2021-07-24 #>    3:     2021-07-25       DE       00+       8  2021-07-25 #>    4:     2021-07-26       DE       00+       9  2021-07-26 #>    5:     2021-07-27       DE       00+      35  2021-07-27 #>   ---                                                       #> 6023:     2021-07-23       DE     05-14       1  2021-09-01 #> 6024:     2021-07-23       DE     15-34      21  2021-09-01 #> 6025:     2021-07-23       DE     35-59      39  2021-09-01 #> 6026:     2021-07-23       DE     60-79      21  2021-09-01 #> 6027:     2021-07-23       DE       80+       5  2021-09-01 latest_nat_germany <- nat_germany_hosp |>   enw_filter_report_dates(latest_date =\"2021-10-20\") |>   enw_latest_data() |>   enw_filter_reference_dates(latest_date = \"2021-09-01\", include_days = 40)"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"data-preprocessing","dir":"Articles","previous_headings":"","what":"Data preprocessing","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"epinowcast works assuming data preprocessed reporting format requires, coupled meta data reference report dates. enw_preprocess_data() can used , although users can also use internal functions produce custom preprocessing steps. stage arbitrary groupings observations can defined, propagated throughout subsequent modelling steps. data stratified age, hence grouped age group, principle grouping combination groups independent reference report date models. furthermore assume maximum delay required make model identifiable. set 40 days due evidence long reporting delays example data. However, note cases majority right truncation occurs first days increasing maximum delay non-linear effect run-time (.e. model maximum delay 20 days much faster fit 40 days). Note also current formulation delays longer maximum ignored adjusted estimate really data reported maximum delay rather finally reported data. Another key modelling choice make stage model overall hospitalisations jointly age groups rather aggregation age group estimates. implicitly assumes aggregated non-aggregated data comparable (may may case) reporting process shares mechanisms. Another way approach model age stratified hospitalisations aggregate nowcast estimates total counts fitting model.","code":"pobs <- enw_preprocess_data(retro_nat_germany, max_delay = 40, by = \"age_group\") pobs #>                     obs           new_confirm               latest #>                  <list>                <list>               <list> #> 1: <data.table[6020x9]> <data.table[6020x11]> <data.table[287x10]> #>    missing_reference   reporting_triangle       metareference #>               <list>               <list>              <list> #> 1: <data.table[0x6]> <data.table[287x42]> <data.table[287x9]> #>              metareport          metadelay max_delay  time snapshots #>                  <list>             <list>     <num> <int>     <int> #> 1: <data.table[560x12]> <data.table[40x5]>        40    41       287 #>           by groups   max_date timestep #>       <list>  <int>     <IDat>   <char> #> 1: age_group      7 2021-09-01      day"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"models","dir":"Articles","previous_headings":"","what":"Models","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"explore range increasingly complex models using subject area knowledge posterior predictive checks motivate modelling choices.","code":""},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"shared-reporting-delay-distribution","dir":"Articles","previous_headings":"Models","what":"Shared reporting delay distribution","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"first explore relatively simple model assumes reporting delays fixed across age groups time. Note use two chains using 6 threads demonstration general using 4 chains recommended. Also note warm-sampling iterations set default values reduce compute requirements may sufficient many real world use cases. Finally, note silenced fitting progress potential warning messages general done. first visualise observations available model, nowcast final reported hospitalisations actual reported observations. plot chunk nowcast","code":"fit <- enw_fit_opts(   save_warmup = FALSE, output_loglik = TRUE, pp = TRUE,   chains = 2, threads_per_chain = threads,    iter_sampling = 500, iter_warmup = 500,   show_messages = FALSE, refresh = 0,   adapt_delta = 0.98, max_treedepth = 15 ) nowcast <- epinowcast(pobs,   fit = fit ) plot(nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"using-the-inflated-posterior-as-a-prior","dir":"Articles","previous_headings":"Models","what":"Using the inflated posterior as a prior","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"speed model fitting make use posterior information previous model (inflation) parameters. Note truly Bayesian approach situations may problematic.","code":"priors <- summary(   nowcast,   type = \"fit\",   variables = c( \"refp_mean_int\", \"refp_sd_int\", \"sqrt_phi\") ) priors[, sd := sd * 2] priors #>            variable      mean   median         sd        mad        q5 #>              <char>     <num>    <num>      <num>      <num>     <num> #> 1: refp_mean_int[1] 1.1167832 1.111870 0.24248462 0.11899348 0.9284217 #> 2:   refp_sd_int[1] 2.5955542 2.588280 0.26455284 0.13387878 2.3955630 #> 3:      sqrt_phi[1] 0.6448124 0.644006 0.03615668 0.01768964 0.6163595 #>         q20       q80       q95      rhat  ess_bulk ess_tail #>       <num>     <num>     <num>     <num>     <num>    <num> #> 1: 1.017246 1.2131640 1.3149310 0.9995619  999.0599 644.8333 #> 2: 2.481026 2.7066080 2.8196515 0.9988661  926.5156 509.1504 #> 3: 0.629706 0.6606462 0.6747629 1.0016629 1162.1300 810.0894"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"reference-day-of-the-week-effect","dir":"Articles","previous_headings":"Models","what":"Reference day of the week effect","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"underlying data trying nowcast clearly day week periodicity. default model, group specific random walk log notified cases, accounted . Accounting , using random effect day week likely improve nowcast performance reduce computation needed fit model. can specify using enw_expectation() module formula interface follows. visualise nowcasts plot chunk exp_nowcast","code":"expectation_module <- enw_expectation(   ~ 0 + (1 | day_of_week) + (1 | day:.group), data = pobs )  exp_nowcast <- epinowcast(pobs,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(exp_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"posterior-predictions","dir":"Articles","previous_headings":"Models","what":"Posterior predictions","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"order identify areas current model poorly reproducing data plot posterior predictions data. plot faceted age group reference data y axis showing number observations reported given day given reference day x axis showing report date. see fairly clearly oscillations reported cases every 7 days expressed plot oscillations facet appear move left right across facets. indicates kind week day adjustment may needed. plot chunk simple_pp","code":"plot(exp_nowcast, type = \"posterior\") +   facet_wrap(vars(age_group, reference_date), scales = \"free\")"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"reporting-day-of-the-week-effect","dir":"Articles","previous_headings":"Models","what":"Reporting day of the week effect","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"noted using posterior predictions simple model fit appears day week effect reported observations. adjust introduce random effect day week date report using following helper function uses metadata produced enw_preprocess_data(). Note epinowcast uses sparse design matrix reduce runtimes modules design matrix shows unique rows index containing mapping full design matrix. now repeat nowcasting step day week reporting model included. Nowcast performance looks visually improved notable variation across age groups 35-59 year old nowcast appearing quite poor (result aggregate nowcast also showing great performance). also plot posterior predictions model way previous model. plot chunk dow_nowcast","code":"report_module_dow <- enw_report(~ (1 | day_of_week), data = pobs) dow_nowcast <- epinowcast(pobs,   report = report_module_dow,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(dow_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"age-group-variation","dir":"Articles","previous_headings":"Models","what":"Age group variation","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"quite likely variation reporting delay age may driving variation nowcast performance noted last model. model using random effect 5 year age group (groups supplied data). nowcast time using age adjusted reference date model day week adjusted report date model. Fit looks slightly better adjustment though uncertainty also increased age groups performance final day data may reduced compared first model. plot chunk age_nowcast","code":"reference_module_age <- enw_reference(~ 1 + (1 | age_group), data = pobs) age_nowcast <- epinowcast(pobs,   reference = reference_module_age,   report = report_module_dow,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(age_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"variation-based-on-reference-date","dir":"Articles","previous_headings":"Models","what":"Variation based on reference date","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"case reporting delays change time well across age groups. One way modelling assume piecewise constant variation time modelled first order weekly random walk. attractive property approach limits number report date distributions need evaluated model number weeks data expensive computational step using approach introducing time-varying parameter limits additional computational overhead. fit nowcasting model, comparison previous model looks like introduction variation time introduce slight improvement capturing hospitalisations age groups. plot chunk week_nowcast","code":"reference_module_age_week <- enw_reference(   ~ 1 + (1 | age_group) + rw(week), data = pobs ) week_nowcast <- epinowcast(pobs,   reference = reference_module_age_week,   report = report_module_dow,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(week_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"variation-based-on-reference-date-stratified-by-age","dir":"Articles","previous_headings":"Models","what":"Variation based on reference date stratified by age","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"final hierarchical model makes sense explore whether evidence reporting delays vary week age group jointly. scenario assumption delays may evolve differently time age group reporting effects measurement error still shared across data sets. can now fit model . comparison previous model looks like introduction variation time introduce slight improvement capturing hospitalisations age groups. plot chunk age_week_nowcast","code":"reference_module_week_by_age <- enw_reference(   ~ 1 + (1 | age_group) + rw(week, by = age_group), data = pobs ) age_week_nowcast <- epinowcast(pobs,   reference = reference_module_week_by_age,   report = report_module_dow,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(age_week_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"independent-models-for-each-age-group-","dir":"Articles","previous_headings":"Models","what":"Independent models for each age group.","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"obvious question ask stage using model jointly fits age groups actually beneficial. explore fitting model previously (day week effect report date random walk week reference date stratified age) age group independently. define model single call epinowcast fitting dataset independently joint setting likely lead long fit times real benefit. Instead write small helper function preprocess input data, define report reference date models run nowcast. can now use wrapper function data available age group, summarise resulting nowcast, join single data.frame. now summarised nowcasts rather object class epinowcast need make use underlying plot function . see performance generally quite good across board though width credible intervals also increased. Importantly 35-59 year old age group captured least well hierarchical models minor reductions performance age groups. suggests dataset nowcast date may relatively little benefit jointly modelling age groups. plot chunk ind_nowcast","code":"independent_epinowcast <- function(obs, max_delay = 40, ...) {   pobs_ind <- enw_preprocess_data(obs, max_delay = max_delay)    nowcast <- epinowcast(     data = pobs_ind,     reference = enw_reference(~ rw(week), data = pobs_ind),     report = enw_report(~ (1 | day_of_week), data = pobs_ind),     expectation = enw_expectation(       ~ 0 + (1 | day_of_week) + (1 | day), data = pobs_ind     ),      ...   )    nowcast_summary <- summary(     nowcast,     probs = c(0.025, 0.05, seq(0.1, 0.9, by = 0.1), 0.95, 0.975)   )   return(nowcast_summary) } options(mc.cores = 2)  independent_nowcast <- map(   split(retro_nat_germany, by = \"age_group\"),   independent_epinowcast,   fit = enw_fit_opts(     save_warmup = FALSE, output_loglik = TRUE, pp = TRUE,     chains = 2, threads_per_chain = threads,      iter_sampling = 500, iter_warmup = 500,     show_messages = FALSE, refresh = 0,     adapt_delta = 0.95, max_treedepth = 12   ),   priors = priors ) independent_nowcast <- rbindlist(independent_nowcast) enw_plot_nowcast_quantiles(   independent_nowcast, latest_obs = latest_nat_germany ) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"alternative-models","dir":"Articles","previous_headings":"Models","what":"Alternative models","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"models defined assumed delay distribution, aside report date effects, parametric lognormal distribution. assumptions may less optimal. Alternatives include assuming different distributional form (gamma distribution also supported epinowcast) assuming report delay fully non-parametric yet supported future package versions. number additional models explore within framework supported epinowcast well large number alternative parameterisations yet supported. example, explore models complex reporting day effects, including holidays (supported epinowcast either separate effect assuming reporting hazard Sundays) variation time represent reporting delays changing independently reference date (similar time varying model defined effect occurring report date model rather reference date model). choices data dependent domain knowledge needs used assess likely mechanisms. interested expanding functionality underlying model address issues note epinowcast allows users pass models meaning alternative parameterisations may easily tested within package infrastructure. testing done alterations increase flexibility package model improves defaults welcome pull requests.","code":""},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"evaluation","dir":"Articles","previous_headings":"","what":"Evaluation","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"nowcast single date, visualised performance went, evaluation anything complete rigorous can give examples might evaluate performance generally potentially draw useful initial conclusions. first list models (including simplest case) give informative names, summarise nowcast posterior model join tidy data.frame make analysis easier. allows us plot nowcasts model age group compared latest data. Looking plot shows small differences across models uncertainty generally decreasing model complexity increases. age groups clearly better nowcast others 35-59 year old age group particular poor nowcast coverage. plot chunk unnamed-chunk-18 crude measure general sample performance can use leave one information criterion supplied loo package though note typically appropriate time series data (approximate LFO cross validation likely perform better), approximation used avoid refitting likely poor, accounting refitting model required. see model includes day week effects date report substantially outperformed baseline model adjustment complex models adjusted variation age week date test improved estimated sample performance uncertainty around estimates wide. rigorously, can evaluate nowcasts using proper scoring rules scoringutils package including weighted interval score. limit nowcasts scored last 7 days data make interpretation easier, transform nowcasts format required scoringutils, link latest available data, finally call scoringutils::eval_forecasts(). Note scoring single nowcasts difficult generalise findings one day reporting may unusual. informed view model pick ideally nowcast range dates evaluate . first step score overall performance. see baseline model variation actually performs well models include least day week, age groups variation week performing comparably. performance characteristics relatively similar across models (models biased towards underprediction example). Finally look across scores relative simple model variation. nicely captures role last data point performance also highlights variation across reference dates age groups models. difference performance hierarchical age models model treats age groups independently also clear. plot chunk performance","code":"nowcasts <- list(   \"Reference: Fixed, Report: Fixed\" = exp_nowcast,   \"Reference: Fixed, Report: Day of week\" = dow_nowcast,   \"Reference: Age, Report: Day of week\" = age_nowcast,   \"Reference: Age and week, Report: Day of week\" = week_nowcast,   \"Reference: Age and week by age, Report: Day of week\" = age_week_nowcast ) summarised_nowcasts <- map(   nowcasts, summary,   probs = c(0.025, 0.05, seq(0.1, 0.9, by = 0.1), 0.95, 0.975) ) summarised_nowcasts$`Independent by age, Reference: Week, Report: Day of week` <- independent_nowcast # nolint  summarised_nowcasts <- rbindlist(summarised_nowcasts, idcol = \"model\",                                  use.names = TRUE) summarised_nowcasts[, `:=`(   model = factor(     model,     levels = c(\"Reference: Fixed, Report: Fixed\",                \"Reference: Fixed, Report: Day of week\",                \"Reference: Age, Report: Day of week\",                \"Reference: Age and week, Report: Day of week\",                \"Reference: Age and week by age, Report: Day of week\",                \"Independent by age, Reference: Week, Report: Day of week\")),   age_group = factor(     age_group,     levels = c(\"00+\", \"00-04\", \"05-14\", \"15-34\", \"35-59\", \"60-79\", \"80+\")) )] enw_plot_nowcast_quantiles(   summarised_nowcasts, latest_obs = latest_nat_germany ) +   facet_grid(vars(age_group), vars(model), scales = \"free_y\") loos <- map(nowcasts, ~ .$fit[[1]]$loo()) loo_compare(loos) #>                                                     elpd_diff se_diff #> Reference: Age and week, Report: Day of week           0.0       0.0  #> Reference: Age, Report: Day of week                   -4.5       6.3  #> Reference: Age and week by age, Report: Day of week   -5.0       3.7  #> Reference: Fixed, Report: Day of week                -87.1      12.2  #> Reference: Fixed, Report: Fixed                     -646.8      48.3 score <- enw_score_nowcast(  summarised_nowcasts,  latest_nat_germany[reference_date > (max(reference_date) - 7)] )  score |>   summarise_scores(by = \"model\") |>   kable() age_date_score <- score |>   summarise_scores(by = c(\"model\", \"reference_date\", \"age_group\")) fixed_score <- age_date_score[   model == \"Reference: Fixed, Report: Fixed\",   .(reference_date, age_group, fixed_is = interval_score) ] age_date_score <- merge(   age_date_score, fixed_score, by = c(\"reference_date\", \"age_group\") )  age_date_score <- age_date_score[, interval_score := interval_score / fixed_is] age_date_score <- age_date_score[!model == \"Reference: Fixed, Report: Fixed\"] plot <- ggplot(age_date_score) +   aes(x = reference_date, y = interval_score, col = model) +   geom_hline(yintercept = 1, linetype = 2, linewidth = 1.2, alpha = 0.5) +   geom_line(linewidth = 1.1, alpha = 0.6) +   geom_point(size = 1.2) +   facet_wrap(vars(age_group)) +   scale_color_brewer(palette = \"Dark2\") +   scale_y_log10(labels = scales::percent)  plot <- enw_plot_theme(plot) +   labs(x = \"Reference date\",        y = \"Weighted interval score (relative to Reference: Fixed, Report: Fixed model)\") + # nolint   guides(col = guide_legend(title = \"Model\", ncol = 2)) plot"},{"path":"https://package.epinowcast.org/articles/germany-age-stratified-nowcasting.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"vignette showcased using epinowcast nowcast age stratified COVID-19 hospitalisations Germany date test series increasingly complex models motivated data. also showed simple methods exploring nowcasts evaluating . Using limited information available us (nowcast single date used performance date motivate new models) appears models performed acceptably , aside last data point, models age day week effects likely performed better. also fairly clear performance degrades amount reported data reduced intuitively makes sense performance particularly sensitive first day reported data available (.e “now”). apparent finding delays evolve fairly independently across age groups motivates choosing model flexible , least date reference model. Despite independent model fixed effect model well overall, applications choosing model based evaluation, likely select relatively flexible model (day week, age group, age stratified weekly variation) relying hierarchical structure limit overfitting, excepting small reduction performance edge cases (hope edge cases common feature data). However practice, want explore nowcasting evaluating dates possible greater range model structures (discussed alternative modelling section vignette). Note proper scoring approach taken understand model performance (commonly used literature) ranking models based absolute errors groups high counts (35-59 age group) important nowcast correctly groups smaller counts (aged 80+).","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Model definition and implementation","text":"epinowcast package aims modular toolbox real-time infectious disease surveillance outbreak routine contexts. provide modular modelling framework optimised range common surveillance tasks whilst maintaining flexibility supporting user extension. provide flexible semi-parametric model underlying generative process similar implemented real-time infectious disease modelling packages[1,2]. optionally includes renewal process[3,4] latent reporting process[1,5,6]. Combined appropriate generation time distribution approach shown correspond Susceptible-Exposed-Infected-Recovered (SEIR) model[7] addition reporting delays. However, default model contains minimal mechanism order flexibly fit highly informative data. nowcasting approach extension proposed Günther et al.[8] extension model proposed Höhle Heiden[9] implemented surveillance R package[10]. Compared model proposed Günther et al.[8], epinowcast adds support jointly nowcasting multiple related datasets, flexible formula interface allowing specification large range models, optional parametric assumption underlying reporting delay. also support flexible joint modelling missing data assuming reporting delay consistent reported unreported observations following methodology Lison et al.[11]. modelling framework implemented stan probabilistic programming language via cmdstanr[12,13] focus computational efficiency robustness. following sections outline modelling methodology, current feature set stratified module, highlight implementation details. module present default implementation well generic framework support. Note extensions methodology warmly welcomed community site good first point contact.","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"decomposition-into-expected-final-notifications-and-report-delay-components","dir":"Articles","previous_headings":"","what":"Decomposition into expected final notifications and report delay components","title":"Model definition and implementation","text":"concerned outcomes occur time reference (e.g., date symptom onset test disease) reported delay, time report (e.g., date onsets entered central database become available analysis). assume times measured discrete time steps, usually day (case times dates). follow approach Höhle Heiden[9] consider distribution notifications (\\(n_{g,t,d}\\)) date reference (\\(t\\)) reporting delay (\\(d\\)) conditional final observed count \\(N_{g,t}\\) dataset (\\(g\\)) , \\[\\begin{equation}   N_{g,t} = \\sum_{d=0}^{D} n_{g,t,d} \\end{equation}\\] \\(D\\) represents maximum delay date reference time report theory infinite practice set finite value order make model identifiable computationally feasible. \\(t\\) \\(g\\) notifications assumed drawn multinomial distribution \\(N_{g,t}\\) trials probability vector (\\(p_{g,t,d}\\)) length \\(D\\). aim nowcasting predict final observed counts \\(N_{g,t}\\) given information available time \\(t\\). estimating components probability vector jointly expected number final notifications (\\(\\lambda_{g,t} = \\mathbb{E}[N_{g,t}]\\)) dataset \\(g\\) time \\(t\\). alternative approach consider \\(n_{g,t,d}\\) independently point model can defined regression can fit using standard software appropriate observation model adjustment reporting delay (.e., becomes Poisson Negative Binomial regression). implementation approach available Bastos et al.[14]. downside simplified approach reporting conditionally dependent may make specifying models complex reporting distributions difficult.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/articles/model.html","id":"default-model","dir":"Articles","previous_headings":"Expected final notifications","what":"Default model","title":"Model definition and implementation","text":"follow approach Günther et al.[8] specify model expected final notifications first order random walk. simple model highly flexible good fit nowcasting problems data highly informative. \\[\\begin{align}   \\log (\\lambda_{g,t}) &\\sim \\text{Normal}\\left(\\log (\\lambda_{g,t-1}) , \\sigma^{\\lambda}_{g} \\right) \\\\   \\log (\\lambda_{g,0}) &\\sim \\text{Normal}\\left(\\log (N_{g,0} + 1), 1 \\right) \\\\ \\sigma^{\\lambda}_{g} &\\sim \\text{Half-Normal}\\left(0, 1\\right) \\end{align}\\] \\(N_{g0}\\), first time point expected observations dataset \\(d\\), assumed completely observed.","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"generalised-model","dir":"Articles","previous_headings":"Expected final notifications","what":"Generalised model","title":"Model definition and implementation","text":"settings data sparse users want understand underlying generative process flexible default model likely good choice. settings generic model offers range options context specific. generic model currently based renewal process[3,4] additional latent reporting delays[1,5,6]. previously noted[7], corresponds commonly used Susceptible-Exposed-Infected-Recovered (SEIR) model appropriate generation time specified[7]","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"instantaneous-reproduction-numbergrowth-rate","dir":"Articles","previous_headings":"Expected final notifications","what":"Instantaneous reproduction number/growth rate","title":"Model definition and implementation","text":"model instantaneous reproduction number (\\(R_t\\)) log scale (though support link functions planned). generation time fixed day can interpreted instantaneous growth rate (\\(r_t\\)) defined difference log expected number final notifications time \\(t\\) \\(t-1\\). \\[\\begin{equation}   \\text{log} (R_{g,t}) = r_0 + \\beta_{f,r} X_{r} + \\beta_{r,r} Z_{r} \\end{equation}\\] \\(r_0\\) optional intercept, \\(X_{r}\\) design matrix fixed effects (\\(\\beta_{f,r}\\)), \\(Z_{r}\\) design matrix random effects (\\(\\beta_{r,r}\\). Within specification default model can specified random effect day intercept. Alternative specifications may interest include weekly random walk (specified ~ 1 + rw(week)), piecewise linear model (specified ~ 1 + day:week), group specific random effect (specified ~ 1 + (1 | .group)).","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"latent-infectionsnotifications","dir":"Articles","previous_headings":"Expected final notifications","what":"Latent infections/notifications","title":"Model definition and implementation","text":"model expected number infections/latent notifications (\\(\\lambda^l\\)) using renewal process[3,4]. model generalisation default model can used model expected number latent notifications setting generation time fixed day. implies current infections/notifications dependent past infections/notifications based kernel (usually interpreted generation time serial interval). instantaneous daily growth rate model can recovered setting generation time fixed 1 day. model defined follows, \\[\\begin{align}   \\lambda^l_{g,t} &\\sim \\text{LogNormal}\\left(\\mu^{l}_{g,t}, \\sigma^{l}_{g,t} \\right),\\ t \\leq P \\\\   \\lambda^l_{g,t} &= R_{g,t} \\sum_{p = 1}^{P} G_{g}\\left(p, t - p \\right)  \\lambda^l_{g, t-p},\\ t \\gt P   \\end{align}\\] \\(G_{g}\\left(p, t - p \\right)\\) probability infection \\(p\\) days infection \\(t - p\\) days ago group \\(g\\), \\(P\\) maximum generation time. initialise model assume first \\(P\\) latent notifications log-normally distributed mean \\(\\mu^{l}_{g,t}\\) standard deviation \\(\\sigma^{l}_{g,t}\\). equivalent assuming first \\(P\\) latent notifications independent identically distributed. mean log-normal distribution group log latest reported case count first reference date group scaled sum latent reporting delay. standard deviation assumed 1. assumptions can altered user.","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"latent-reporting-delay-and-ascertainment","dir":"Articles","previous_headings":"Expected final notifications","what":"Latent reporting delay and ascertainment","title":"Model definition and implementation","text":"settings may additional reporting delays top directly observed data, therefore “nowcastable”, common example delay exposure symptom onset. settings support modelling “latent” reporting delays convolution underlying expected counts potential delays vary time group. implementation similar implemented EpiNow2 epidemia well similar models[1,5,6,11]. addition support modelling ascertainment use improper probability mass functions (.e., enforcing sum 1 constraint) inferring ascertainment possible (example day week reporting patterns). \\[\\begin{align}   \\lambda_{g,t} &= \\upsilon_{g,t} \\sum_{\\tau = 0}^{L - 1} F_{g}\\left(\\tau + 1, t - \\tau \\right)  \\lambda^l_{g, t - \\tau} \\\\   \\nu_{g,t} &= \\nu_0 + \\beta_{f,\\nu} X_{\\nu} + \\beta_{r,\\nu} Z_{\\nu} \\end{align}\\] \\(\\nu_{g,t}\\) inferred ascertainment modelled flexibly using optional intercept (\\(\\nu_0\\)), design matrix (\\(X_{\\nu}\\)) fixed effects (\\(\\beta_{f,\\nu}\\)), design matrix (\\(Z_{\\nu}\\)) random effects (\\(\\beta_{r,\\nu}\\).","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"delay-distribution","dir":"Articles","previous_headings":"","what":"Delay distribution","title":"Model definition and implementation","text":"Given case counts date reference date report, can estimate reporting delay distribution directly jointly underlying process model, rather relying external estimates sources (though may want account external information priors). following section, describe default parametric delay distribution model extension generic, highly flexible delay model based discrete time--event modelling.","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"default-model-1","dir":"Articles","previous_headings":"Delay distribution","what":"Default model","title":"Model definition and implementation","text":"default model, consider reporting delay follow \\(\\text{LogNormal} \\left(\\mu^d, \\sigma^d \\right)\\) distribution, parameters \\[\\begin{align}   \\mu^d &\\sim \\text{Normal} \\left(0, 1 \\right) \\\\   \\sigma^d &\\sim \\text{Half-Normal} \\left(0, 1 \\right). \\end{align}\\] distribution discretised daily probabilities \\(p_{g,t,d}\\) (case group \\(g\\) reference date \\(t\\) reported delay \\(d\\)) adjusted maximum delay, see vignette(\"distributions\") details.","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"generalised-model-1","dir":"Articles","previous_headings":"Delay distribution","what":"Generalised model","title":"Model definition and implementation","text":"generalise model order support range delay distributions well effects reporting process delay. Following approach Günther et al.[8] others, parameterise delay probability (\\(p_{g,t,d}\\)) via discrete-time hazard model, .e., \\[\\begin{equation}   p_{g,t,0} = h_{g,t,0},\\ p_{g,t,d} = \\left(1 -\\sum^{d-1}_{d^{\\prime}=0} p_{g,t,d^{\\prime}} \\right) \\times h_{g,t,d}, \\end{equation}\\] \\[ h_{g,t,d} =\\text{P} \\left(\\text{delay}=d|\\text{delay} \\geq d, W_{g,t,d}\\right), \\] -called reporting hazard. case group \\(g\\) reference date \\(t\\), hazard \\(h_{g,t,d}\\) states probability reported delay \\(d\\), given case reported earlier. hazard depends design matrix \\(W_{g,t,d}\\), encodes baseline delay distribution covariates affect reporting delay. extend model Günther et al. decomposing hazard three components, Parametric baseline hazard \\(\\gamma_{g,t,d}\\): hazard derived parametric delay distribution, parameters depending covariates date reference Non-parametric reference date effect \\(\\delta_{g,t,d}\\): effect hazard depends covariates date reference Non-parametric report date effect \\(\\epsilon_{g,t,d}\\): effect hazard depends covariates date report component adds overall hazard regression logit link \\[\\begin{equation}   \\text{logit} (h_{g,t,d}) = \\gamma_{g,t,d} + \\delta_{g,t,d} + \\epsilon_{g,t,d}, \\end{equation}\\] maximum delay hazard \\(h_{g,t,D}=1\\), order enforce assumption observations reported within specified maximum delay. following, describe parameterisation different components.","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"parametric-baseline-hazard","dir":"Articles","previous_headings":"Delay distribution > Generalised model","what":"Parametric baseline hazard","title":"Model definition and implementation","text":"parametric baseline hazard \\(\\gamma_{g,t,d}\\) case group \\(g\\) reference date \\(t\\) modelled according certain discretised parametric probability distribution parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\). Currently, epinowcast supports four different parametric distributions: () log-normal (default), (ii) exponential, (iii) gamma, (iv) log-logistic. distributions discretised adjusted assumed maximum delay, see vignette(\"distributions\") details. delay probabilities \\(p^{\\prime}_{g,t,d}\\) obtained discretised delay distribution converted hazards logit scale using \\[\\begin{equation}   \\gamma_{g,t,d} = \\text{logit} \\left(\\frac{p^{\\prime}_{g,t,d}}{\\left(1 -\\sum^{d-1}_{d^{\\prime}=0} p^{\\prime}_{g,t,d^{\\prime}} \\right)} \\right). \\end{equation}\\] default case log-normal distribution, parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\) represent log mean log standard deviation. parameter defined using (log-)linear model. model consists intercept number arbitrary, shared covariates, indexed reference date. covariates multiplied fixed (\\(\\beta_{f,}\\)) random (\\(\\beta_{r,}\\)) coefficients (note can include auto-regressive terms), .e., \\[\\begin{align}   \\mu_{g,t} &= \\mu_0 + \\beta_{f,\\mu} X_{\\gamma} + \\beta_{r,\\mu} Z_{\\gamma} \\\\   \\text{log} (\\upsilon_{g,t}) &= \\upsilon_0 + \\beta_{f,\\upsilon} X_{\\gamma} + \\beta_{r,\\upsilon} Z_{\\gamma} \\end{align}\\]","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"non-parametric-reference-date-effect-delta_gtd-and-report-date-effect-epsilon_gtd","dir":"Articles","previous_headings":"Delay distribution > Generalised model","what":"Non-parametric reference date effect \\(\\delta_{g,t,d}\\) and report date effect \\(\\epsilon_{g,t,d}\\)","title":"Model definition and implementation","text":"addition parametric reporting effects may also non-parametric effects referenced reference report dates. represented non-distributional logit hazard components date reference report, defined using intercept (\\(\\delta_0\\)) arbitrary, shared covariates fixed (\\(\\beta_{f,}\\)) random (\\(\\beta_{r,}\\)) coefficients (note can include auto-regressive terms). \\[\\begin{align}   \\delta_{g,t,d} &= \\delta_0 + \\beta_{f,\\delta} X_{\\delta} + \\beta_{r,\\delta} Z_{\\delta} \\\\   \\epsilon_{g,t,d} &= \\beta_{f,\\epsilon} X_{\\epsilon} + \\beta_{r,\\epsilon} Z_{\\epsilon} \\end{align}\\] fixed (\\(\\beta_{f,}\\)) random (\\(\\beta_{r,}\\)) coefficients standard normal priors default standard half-normal priors pooled standard deviations. implementation details see enw_reference() delays linked date reference, enw_report() delays linked date report.","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"observation-model-and-nowcast","dir":"Articles","previous_headings":"","what":"Observation model and nowcast","title":"Model definition and implementation","text":"Expected notifications date reference (\\(t\\)) reporting delay can now found multiplying expected final notifications \\(t\\) probability reporting day delay (\\(p_{g,t,d}\\)). assume negative binomial observation model, default, joint overdispersion parameter (standard half normal prior 1 square root overdispersion[15]) produce nowcast final observed notifications reference date summing posterior estimates unobserved notification observed notifications reference date. \\[\\begin{align}   n_{g,t,d} \\mid \\lambda_{g,t},p_{g,t,d}  &\\sim \\text{NB} \\left((1 - \\alpha_{g,t})\\lambda_{g,t} \\times p_{g,t,d}, \\phi \\right),\\ t=1,...,T. \\\\     \\frac{1}{\\sqrt{\\phi}} &\\sim \\text{Half-Normal}(0, 1) \\\\   N_{g,t} &= \\sum_{d=0}^{D} n_{g,t,d} \\end{align}\\] \\(\\alpha_{g,t}\\) proportion cases reference date report reference date. default modelled set zero , see accounting reported cases missing reference date section defaults. observation models Poisson distribution also supported. See documentation enw_obs() details. order make best use observed data nowcasting use observations available reported given report reference date use posterior prediction observation model . means nowcast dates become increasingly truncated depend modelled estimates whereas complete majority final count known. Depending use case posterior predictions alone may also interest.","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"accounting-for-reported-cases-with-a-missing-reference-date","dir":"Articles","previous_headings":"","what":"Accounting for reported cases with a missing reference date","title":"Model definition and implementation","text":"real-world settings observations may reported without linked reference date. common example cases date symptom onset report date often known onset date may . account support modelling missing process assuming cases missing reference date reporting delay distribution cases known reference date processes drive probability missing reference date (\\(\\alpha_{g,t}\\)) linked unknown date reference rather date report based Lison et al.[11]. model probability flexibly logit scale follows, \\[\\begin{equation}   \\text{logit} (\\alpha_{g,t}) = \\alpha_0 + \\beta_{f,\\alpha} X_{\\alpha} + \\beta_{r,\\alpha} Z_{\\alpha} \\end{equation}\\] \\(\\alpha_0\\) represents intercept, \\(\\beta_{f,\\alpha}\\) fixed effects, \\(\\beta_{r,\\alpha}\\) random effects. link observations date report missing reference date (\\(M_{g,t}\\)) convolve expected notifications probability missing reference date probability reporting given day follows, \\[\\begin{equation}   M_{g,t} \\mid \\lambda_{g,t},p_{g,t,d}, \\alpha_{g,t}  \\sim \\text{NB} \\left( \\sum^D_{d=0} \\alpha_{g,t-d} \\lambda_{g,t-d} p_{g,t-d,d}, \\phi \\right),\\ t=1,...,T. \\end{equation}\\] cases known reference dates observation models supported. implementation details see enw_missing().","code":""},{"path":"https://package.epinowcast.org/articles/model.html","id":"implementation","dir":"Articles","previous_headings":"","what":"Implementation","title":"Model definition and implementation","text":"model implemented probabilistic programming language stan use cmdstanr interact model[12,13]. Optional within chain parallelisation available across times reference reduce runtimes. Sparse design matrices used covariates limit number probability mass functions need calculated. epinowcast incorporates additional functionality written R[16] enable plotting nowcasts posterior predictions, summarising nowcasts, scoring using scoringutils[17]. flexible formula interface provided enable easier implementation complex user specified models without interacting underlying code base. functionality modular allowing users extend alter underlying model whilst continuing use package framework.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"use-case","dir":"Articles","previous_headings":"","what":"Use case","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"epidemic progress. want know effective reproduction number current time. average number secondary infections caused single infected individual given point time measure transmissibility infection population time. Unfortunately, can’t directly observe infections data observe suffers reporting delays.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"what-we-have","dir":"Articles","previous_headings":"","what":"What we have","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"linelist cases date interest (example test positive date) date report (example date hospitalisation report); estimate distribution times infection positive test; estimate generation time distribution, distribution time intervals infection primary case infection secondary cases caused primary case. estimate ascertainment rate, proportion infections reported hospitalisations.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"what-do-we-do","dir":"Articles","previous_headings":"","what":"What do we do","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Visualise contextualise data case study uses (COVID-19 hospitalisations Germany); Specify joint model effective reproduction number, delay infection hospitalisation delay hospitalisation report; Fit model data available real-time, retrospectively; Visualise nowcast real-time data comparison data ultimately observed; Compare real-time retrospective reproduction number estimates delay distribution estimates; Outline limitations strengths approach highlight areas can extended.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"getting-setup","dir":"Articles","previous_headings":"","what":"Getting setup","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"See package documentation guidance installing package getting setup cmdstanr (backend used fitting models). well epinowcast package use following packages vignette. make use data.table simple data transformations tools tidyverse base R tools just easily used; also use purrr make use partial() function allows us partially specify function later reuse. useful specifying model can specify parts model common models specify parts specific model call updated function; Finally, use ggplot2 plotting.","code":"library(epinowcast) library(data.table) library(purrr) library(ggplot2)"},{"path":[]},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"overview","dir":"Articles","previous_headings":"Introducing the data: COVID-19 hospitalisations in Germany","what":"Overview","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"case study, use data sourced Robert Koch Institute via Germany Nowcasting hub. data represent hospitalisation counts date positive test date test report Germany. data used extensively nowcasting forecasting COVID-19 hospitalisations Germany described detail Wolffram et al. (2023). use data good example type data available many settings. first summarise data, case study consider national level data without stratification age group. can filter data using data.table follows,","code":"summary(germany_covid19_hosp) #>  reference_date          location      age_group         confirm        #>  Min.   :2021-04-06   DE     : 90405   00-04:219555   Min.   :   0.00   #>  1st Qu.:2021-05-15   DE-BB  : 90405   00+  :219555   1st Qu.:   0.00   #>  Median :2021-06-23   DE-BE  : 90405   05-14:219555   Median :   1.00   #>  Mean   :2021-06-25   DE-BW  : 90405   15-34:219555   Mean   :  11.44   #>  3rd Qu.:2021-08-02   DE-BY  : 90405   35-59:219555   3rd Qu.:   6.00   #>  Max.   :2021-10-20   DE-HB  : 90405   60-79:219555   Max.   :1552.00   #>                       (Other):994455   80+  :219555                     #>   report_date         #>  Min.   :2021-04-06   #>  1st Qu.:2021-06-24   #>  Median :2021-08-03   #>  Mean   :2021-07-31   #>  3rd Qu.:2021-09-11   #>  Max.   :2021-10-20   #> germany_hosp <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] germany_hosp <- germany_hosp[, .(reference_date, report_date, confirm)] germany_hosp #>        reference_date report_date confirm #>                <IDat>      <Date>   <int> #>     1:     2021-04-06  2021-04-06     149 #>     2:     2021-04-07  2021-04-07     312 #>     3:     2021-04-08  2021-04-08     424 #>     4:     2021-04-09  2021-04-09     288 #>     5:     2021-04-10  2021-04-10     273 #>    ---                                    #> 12911:     2021-07-27  2021-10-16      81 #> 12912:     2021-07-28  2021-10-17     159 #> 12913:     2021-07-29  2021-10-18     145 #> 12914:     2021-07-30  2021-10-19     117 #> 12915:     2021-07-31  2021-10-20     132"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"data-transformations","dir":"Articles","previous_headings":"Introducing the data: COVID-19 hospitalisations in Germany","what":"Data transformations","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"data already format can used epinowcast, contains reference date (column reference_date): date observation, example date positive test report date (column report_date): date report given set observations reference date count (column confirm): total number hospitalisations reference date report date. Note cumulative report date. package also provides range tools convert data line list, incidence, common formats required format (see Data converters). example convert data individual case linelist, linelist converted format epinowcast requires using enw_linelist_to_incidence() function, specified reference_date report_date columns, columns (used group data), max_delay maximum delay reference date report date (note observed delay longer specified delay used instead). enw_linelist_to_incidence() function calculate incidence reference date report date group.","code":"germany_covid19_hosp_linelist <- germany_covid19_hosp |>   enw_add_incidence() |>   enw_incidence_to_linelist()  germany_covid19_hosp_linelist #>                 id reference_date location age_group report_date delay #>              <int>         <IDat>   <fctr>    <fctr>      <IDat> <int> #>        1:        1     2021-04-06       DE       00+  2021-04-06     0 #>        2:        2     2021-04-06       DE       00+  2021-04-06     0 #>        3:        3     2021-04-06       DE       00+  2021-04-06     0 #>        4:        4     2021-04-06       DE       00+  2021-04-06     0 #>        5:        5     2021-04-06       DE       00+  2021-04-06     0 #>       ---                                                              #> 11486202: 11486202     2021-10-20    DE-TH     15-34  2021-10-20   115 #> 11486203: 11486203     2021-10-20    DE-TH     60-79  2021-10-20   117 #> 11486204: 11486204     2021-10-20    DE-TH     60-79  2021-10-20   117 #> 11486205: 11486205     2021-10-20    DE-TH     60-79  2021-10-20   117 #> 11486206: 11486206     2021-10-20    DE-TH     60-79  2021-10-20   117 incidence_from_linelist <- enw_linelist_to_incidence(   germany_covid19_hosp_linelist,   reference_date = \"reference_date\",   report_date = \"report_date\",   by = c(\"age_group\", \"location\"),   max_delay = 30 )  incidence_from_linelist #> Key: <age_group, location> #>          age_group location report_date reference_date new_confirm confirm #>             <fctr>   <fctr>      <IDat>         <IDat>       <int>   <int> #>       1:     00-04    DE-BY  2021-04-06           <NA>           0       0 #>       2:     00-04    DE-BY  2021-04-07           <NA>           0       0 #>       3:     00-04    DE-BY  2021-04-08           <NA>           0       0 #>       4:     00-04    DE-BY  2021-04-09           <NA>           0       0 #>       5:     00-04    DE-BY  2021-04-10           <NA>           0       0 #>      ---                                                                   #> 2049593:       80+    DE-TH  2021-10-19     2021-10-18           0       0 #> 2049594:       80+    DE-TH  2021-10-20     2021-10-18           0       0 #> 2049595:       80+    DE-TH  2021-10-19     2021-10-19           1       1 #> 2049596:       80+    DE-TH  2021-10-20     2021-10-19           0       1 #> 2049597:       80+    DE-TH  2021-10-20     2021-10-20           0       0 #>          delay #>          <int> #>       1:     0 #>       2:     1 #>       3:     2 #>       4:     3 #>       5:     4 #>      ---       #> 2049593:     1 #> 2049594:     2 #> 2049595:     0 #> 2049596:     1 #> 2049597:     0"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"filtering-the-data","dir":"Articles","previous_headings":"Introducing the data: COVID-19 hospitalisations in Germany","what":"Filtering the data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"case study consider data 1st March 2020 onwards. first step, filter data include observations 1st May 2021 1st August 2021. using enw_filter_report_dates() enw_filter_reference_dates() functions, also used enw_complete_dates() make sure complete data dates earliest latest dates. also used enw_add_incidence() add incidence column data. Next split data two parts, data available time used fit model (rt_nat_germany) data available retrospectively time period used evaluate model (retro_nat_germany). using enw_filter_report_dates() enw_filter_reference_dates() functions follows: Create real-time dataset (rt_nat_germany) filtering data include reported observations 1st May 2021 1st July 2021; Create retrospective dataset (retro_germany) filtering data include observations reference dates (.e. may reported anytime 1st August 2021) 1st May 2021 1st July 2021; Finally can create dataset contains latest data available reference date. using enw_latest_data() function,","code":"complete_germany_hosp <- germany_hosp |>   enw_filter_report_dates(latest_date = \"2021-08-01\") |>   enw_filter_reference_dates(earliest_date = \"2021-05-01\") |>   enw_complete_dates(missing_reference = FALSE) |>   enw_add_incidence() rt_germany <- complete_germany_hosp |>   enw_filter_report_dates(latest_date = \"2021-07-01\") rt_germany #>       report_date reference_date confirm new_confirm delay #>            <IDat>         <IDat>   <int>       <int> <int> #>    1:  2021-05-01     2021-05-01     234         234     0 #>    2:  2021-05-02     2021-05-01     352         118     1 #>    3:  2021-05-03     2021-05-01     391          39     2 #>    4:  2021-05-04     2021-05-01     464          73     3 #>    5:  2021-05-05     2021-05-01     507          43     4 #>   ---                                                      #> 1949:  2021-06-30     2021-06-29      31          11     1 #> 1950:  2021-07-01     2021-06-29      35           4     2 #> 1951:  2021-06-30     2021-06-30      20          20     0 #> 1952:  2021-07-01     2021-06-30      37          17     1 #> 1953:  2021-07-01     2021-07-01      20          20     0 retro_germany <- complete_germany_hosp |>   enw_filter_reference_dates(latest_date = \"2021-07-01\") retro_germany #>       report_date reference_date confirm new_confirm delay #>            <IDat>         <IDat>   <int>       <int> <int> #>    1:  2021-05-01     2021-05-01     234         234     0 #>    2:  2021-05-02     2021-05-01     352         118     1 #>    3:  2021-05-03     2021-05-01     391          39     2 #>    4:  2021-05-04     2021-05-01     464          73     3 #>    5:  2021-05-05     2021-05-01     507          43     4 #>   ---                                                      #> 3871:  2021-07-28     2021-07-01      57           0    27 #> 3872:  2021-07-29     2021-07-01      57           0    28 #> 3873:  2021-07-30     2021-07-01      57           0    29 #> 3874:  2021-07-31     2021-07-01      57           0    30 #> 3875:  2021-08-01     2021-07-01      57           0    31 latest_germany_hosp <- retro_germany |>   enw_latest_data() head(latest_germany_hosp, n = 10) #>     reference_date report_date confirm new_confirm delay #>             <IDat>      <IDat>   <int>       <int> <int> #>  1:     2021-05-01  2021-08-01    1007           0    92 #>  2:     2021-05-02  2021-08-01     781           0    91 #>  3:     2021-05-03  2021-08-01     467           0    90 #>  4:     2021-05-04  2021-08-01     823           0    89 #>  5:     2021-05-05  2021-08-01    1028           0    88 #>  6:     2021-05-06  2021-08-01    1016           0    87 #>  7:     2021-05-07  2021-08-01     892           0    86 #>  8:     2021-05-08  2021-08-01     822           0    85 #>  9:     2021-05-09  2021-08-01     561           0    84 #> 10:     2021-05-10  2021-08-01     364           0    83"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"visualising-the-data","dir":"Articles","previous_headings":"Introducing the data: COVID-19 hospitalisations in Germany","what":"Visualising the data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"define, fit, model visualise data get idea trends data reporting structure. currently function epinowcast visualise data, can use ggplot2 package manually follows,","code":"gh_vis_cohorts <- copy(retro_germany)[   ,   report_date := fcase(     report_date <= as.Date(\"2021-05-15\"), as.Date(\"2021-05-15\"),     report_date <= as.Date(\"2021-06-01\"), as.Date(\"2021-06-01\"),     report_date <= as.Date(\"2021-06-15\"), as.Date(\"2021-06-15\"),     report_date <= as.Date(\"2021-07-01\"), as.Date(\"2021-07-01\"),     report_date <= as.Date(\"2021-07-15\"), as.Date(\"2021-07-15\"),     report_date <= as.Date(\"2021-08-01\"), as.Date(\"2021-08-01\")   ) |>     factor(levels = rev(c(       \"2021-05-15\", \"2021-06-01\", \"2021-06-15\", \"2021-07-01\",       \"2021-07-15\", \"2021-08-01\"     ))) ]  gh_vis_cohorts_by_reference <- gh_vis_cohorts[,   .(confirm = sum(new_confirm)),   by = .(reference_date) ]  gh_vis_cohorts_by_ref_rep <- gh_vis_cohorts[,   .(confirm = sum(new_confirm)),   by = .(reference_date, report_date) ]  gh_vis_cohorts_by_ref_rep |>   ggplot() +   aes(     x = reference_date, y = confirm, fill = report_date, group = report_date   ) +   geom_col(position = \"stack\", alpha = 1, col = \"grey\") +   geom_vline(     aes(xintercept = as.Date(report_date)),     linetype = 2, alpha = 0.9   ) +   scale_y_continuous(labels = \\(x)(scales::comma(x, accuracy = 1))) +   scale_fill_brewer(     palette = \"Blues\", aesthetics = c(\"color\", \"fill\")   ) +   theme_bw() +   labs(     x = \"Date of positive test\",     y = \"Hospitalised cases by date of positive test\",     fill = \"Report date\"   ) +   guides(fill = guide_legend(reverse = TRUE)) +   theme(legend.position = \"bottom\")"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"model","dir":"Articles","previous_headings":"","what":"Model","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"epinowcast package provides flexible framework modelling incidence infections subsequent measures hospitalisations reported delay. framework based generative model describes hypothesised process data generated. generative model used define likelihood function describes probability observing data given model parameters. likelihood function combined prior information used fit model parameters data. following sections describe generative model incidence infections hospitalisations. like know general framework see model vignette.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"expected-hospitalisations","dir":"Articles","previous_headings":"Model","what":"Expected hospitalisations","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"first part generative process consider expected number hospitalisations date positive test. number hospitalisations expect observe perfect reporting hospitalisations unmodelled variance. part model also decomposed three parts: expected number infections, delay infection positive test, probability hospitalisation given infection. three parts combined give expected number hospitalisations date positive test. describe parts turn.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"expected-infections","dir":"Articles","previous_headings":"Model > Expected hospitalisations","what":"Expected infections","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"model expected infections function effective (instantaneous) reproduction number previous infections weighted generation time using renewal equation[1,2]. corresponds commonly used Susceptible-Exposed-Infected-Recovered (SEIR) model appropriate generation time specified[3].","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"instantaneous-reproduction-number","dir":"Articles","previous_headings":"Model > Expected hospitalisations > Expected infections","what":"Instantaneous reproduction number","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"model instantaneous reproduction number (\\(R_t\\)) log scale weekly random walk follows \\[\\begin{align}   \\text{log} (R_{t}) &= r_0 + \\sum_{= 0}^{t \\% 7} \\epsilon_i \\\\   \\epsilon_i &\\sim \\text{Normal}\\left(0, \\sigma_{\\epsilon} \\right) \\\\   \\sigma_{\\epsilon} &\\sim \\text{HalfNormal}\\left(0, 1 \\right) \\end{align}\\] \\(r_0\\) intercept, \\(\\sum_{= 0}^{t \\% 7} \\epsilon_i\\) weekly random walk. choose model flexible, can used model range different scenarios, parsimonious. example, set \\(\\sigma_{\\epsilon} = 0\\) model reduces constant reproduction number. set \\(\\sigma_{\\epsilon} > 0\\) model allows changes reproduction number time. sensible choices model include random walk longer time scale (e.g. monthly) shorter time scale (e.g. daily), random walk drift term, random walk drift term seasonal component.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"latent-infections","dir":"Articles","previous_headings":"Model > Expected hospitalisations > Expected infections","what":"Latent infections","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"model expected number infections/latent notifications (\\(\\lambda^l\\)) using renewal process[1,2]. model generalisation default epinowcast model implies current infections/notifications dependent past infections/notifications based kernel. kernel defined generation time distribution, probability distribution time infection subsequent infectiousness, previously defined model effective reproduction number. model defined follows, \\[\\begin{align}   \\lambda^l_{t} &\\sim \\text{LogNormal}\\left(\\mu^{l}, \\sigma^{l} \\right),\\ t \\leq P \\\\   \\lambda^l_{t} &= R_{t} \\sum_{p = 1}^{P} g\\left(t - p \\right)  \\lambda^l_{t-p},\\ t \\gt P   \\end{align}\\] assume generation time (\\(g\\)) gamma distribution mean 4 days standard deviation 3 days. initialise model assume first \\(P\\) latent notifications log-normally distributed mean \\(\\mu^{l}_{g,t}\\) standard deviation \\(\\sigma^{l}_{g,t}\\). equivalent assuming first \\(P\\) latent notifications independent identically distributed. mean log-normal distribution group log latest reported case count first reference date group scaled sum latent reporting delay. standard deviation assumed 1.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"latent-reporting-delay-and-ascertainment","dir":"Articles","previous_headings":"Model > Expected hospitalisations","what":"Latent reporting delay and ascertainment","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"many settings, case study, may additional reporting delays top directly observed data, therefore “nowcastable”, common example delay exposure symptom onset. settings support modelling “latent” reporting delays convolution underlying expected counts potential delays vary time group. implementation similar implemented EpiNow2 epidemia well similar models[4–7]. addition , support modelling ascertainment use improper probability mass functions (.e. enforcing sum 1 constraint) inferring ascertainment possible (example day week reporting patterns). assume infection hospitalisation ratio 2% modified random effect day week account within week reporting periodicity. also assume lognormal reporting delay mean 5 days standard deviation 2 days, representing delay infection positive test. assume reporting delay days week. model defined follows, \\[\\begin{align}   \\lambda_{t} &= \\nu_{t \\% 7} \\sum_{\\tau = 0}^{L - 1} f_{g}\\left(t - \\tau \\right)  \\lambda^l_{t - \\tau} \\\\   \\text{log} (\\nu_{}) &\\sim \\text{Normal}\\left(-3.91, \\sigma_{\\nu} \\right) \\\\   \\sigma_{\\nu} &\\sim \\text{HalfNormal}\\left(0, 1 \\right) \\\\ \\end{align}\\] \\(\\nu_{}\\) random effect day week represents reporting periodicity.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"specifying-the-model-using-epinowcastenw_expectation","dir":"Articles","previous_headings":"Model > Expected hospitalisations","what":"Specifying the model using epinowcast::enw_expectation()","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"first need define weekly random walk model effective reproduction number. can using formula interface follows, Next define generation time distribution. already discussed, assume gamma distribution mean 4 days standard deviation 3 days. summary parameters first need transformed shape scale parameters used gamma distribution. need account daily censoring finally normalise probability mass function (PMF) account right truncation. PMFs set maximum delay 15 days gives good coverage majority distribution limits computational burden fitting model. Now define latent reporting delay similar way remembering specified lognormal distribution mean 5 days standard deviation 2 days. also need account daily censoring normalise PMF account right truncation. last part model define remaining part ascertainment model expected hospitalisations. already defined base ascertainment ratio (.e. 2% infection hospitalisation ratio) need define day week random effect. can using formula interface follows, Finally, can combine four parts model define expected hospitalisations date positive test. using epinowcast::enw_expectation() function follows,","code":"rt_formula <- ~ 1 + rw(week) # first transform mean and sd to shape and scale gamma_mean <- 4 gamma_sd <- 3 gamma_shape <- gamma_mean^2 / gamma_sd^2 gamma_scale <- gamma_sd^2 / gamma_mean  # then discretise the distribution gt_pmf <- simulate_double_censored_pmf(   max = 15, shape = gamma_shape, scale = gamma_scale, fun_dist = rgamma ) |> # and normalise it to account for right truncation   (\\(x) x / sum(x))()  plot(gt_pmf) lgn_mean <- 5 lgn_sd <- 2 meanlog <- log(lgn_mean^2 / sqrt(lgn_sd^2 + lgn_mean^2)) sdlog <- sqrt(log(1 + lgn_sd^2 / lgn_mean^2))  # then discretise the distribution reporting_pmf <- simulate_double_censored_pmf(   max = 15, meanlog = meanlog, sdlog = sdlog, fun_dist = rlnorm ) |> # normalise it to account for right truncation   (\\(x) x / sum(x))() |> # and scale it by the infection to hospitalisation ration (2%)   (\\(x) x * 0.02)()  plot(reporting_pmf) observation_formula <- ~ 1 + (1 | day_of_week) expectation_module <- partial(   epinowcast::enw_expectation,   r = rt_formula,   generation_time = gt_pmf,   latent_reporting_delay = reporting_pmf,   observation = observation_formula )"},{"path":[]},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"defining-the-delay-distribution","dir":"Articles","previous_headings":"Model > Delay distribution","what":"Defining the delay distribution","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Given case counts date reference date report, can estimate reporting delay distribution directly jointly underlying process model, rather relying external estimates sources (though may want account external information priors). consider reporting delay follow \\(\\text{LogNormal} \\left(\\mu^d, \\sigma^d \\right)\\) distribution, parameters \\[\\begin{align}   \\mu^d &\\sim \\text{Normal} \\left(0, 1 \\right) \\\\   \\sigma^d &\\sim \\text{Half-Normal} \\left(0, 1 \\right). \\end{align}\\] distribution discretised daily probabilities \\(p_{t,d}\\) adjusted maximum delay, see vignette(\"distributions\") details.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"specifying-the-model-using-epinowcastenw_reference","dir":"Articles","previous_headings":"Model > Delay distribution","what":"Specifying the model using epinowcast::enw_reference()","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"can define reporting delay distribution using epinowcast::enw_reference() function follows,","code":"reference_module <- partial(enw_reference, ~1, distribution = \"lognormal\")"},{"path":[]},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"defining-the-observation-model","dir":"Articles","previous_headings":"Model > Observation model and nowcast","what":"Defining the observation model","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Expected notifications date positive test (\\(t\\)) reporting date can now found multiplying expected final notifications date positive test \\(t\\) probability reporting day delay (\\(p_{t,d}\\)). assume Poisson observation model produce nowcast final observed hospitalisations reference date summing posterior estimates unobserved notification observed notifications reference date. \\[\\begin{align}   n_{t,d} \\mid \\lambda_{t},p_{t,d}  &\\sim \\text{Poisson} \\left(\\lambda_{t} \\times p_{t,d} \\right),\\ t=1,...,T. \\\\   N_{t} &= \\sum_{d=0}^{D} n_{t,d} \\end{align}\\]","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"specifying-the-model-using-epinowcastenw_obs","dir":"Articles","previous_headings":"Model > Observation model and nowcast","what":"Specifying the model using epinowcast::enw_obs()","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"","code":"obs_module <- partial(enw_obs, family = \"poisson\")"},{"path":[]},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"preprocess-the-data","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Preprocess the data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"fitting model just defined need preprocess data order correct format work epinowcast produce metadata describes aspects data use model (example maximum delay, number groups, number observations group). using enw_preprocess_data() function follows real-time retrospective datasets. Note set max_delay = 30 constrain modelled maximum delay 30 days. pragmatic choice ensure model can fit reasonable amount time, also set longer wanted data suggested longer delay possible. retrospective data","code":"rt_germany_pobs <- enw_preprocess_data(rt_germany, max_delay = 30) rt_germany_pobs #>                     obs          new_confirm             latest #>                  <list>               <list>             <list> #> 1: <data.table[1425x8]> <data.table[1425x9]> <data.table[62x8]> #>    missing_reference  reporting_triangle      metareference #>               <list>              <list>             <list> #> 1: <data.table[0x4]> <data.table[62x32]> <data.table[62x8]> #>             metareport          metadelay max_delay  time snapshots     by #>                 <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[91x10]> <data.table[30x5]>        30    62        62        #>    groups   max_date timestep #>     <int>     <IDat>   <char> #> 1:      1 2021-07-01      day retro_germany_pobs <- enw_preprocess_data(retro_germany, max_delay = 30) retro_germany_pobs #>                     obs          new_confirm             latest #>                  <list>               <list>             <list> #> 1: <data.table[1860x8]> <data.table[1860x9]> <data.table[62x8]> #>    missing_reference  reporting_triangle      metareference #>               <list>              <list>             <list> #> 1: <data.table[0x4]> <data.table[62x32]> <data.table[62x8]> #>              metareport          metadelay max_delay  time snapshots #>                  <list>             <list>     <num> <int>     <int> #> 1: <data.table[120x10]> <data.table[30x5]>        30    62        62 #>        by groups   max_date timestep #>    <list>  <int>     <IDat>   <char> #> 1:             1 2021-07-30      day"},{"path":[]},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"specifying-the-fitting-options","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Fitting the epinowcast model","what":"Specifying the fitting options","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"ready fit model need first specify fitting options using cmdstanr (information options can found cmdstanr documentation). use 2 chains 2 threads per chain (using 4 CPU cores total) 500 warmup samples 1000 iterations per chain. complex model set adapt_delta 0.98 (default 0.8) Hamiltonian Monte Carlo sampler can explore posterior distribution efficiently. reason, also set max_treedepth 15 (default 10). Finally, set save_warmup FALSE save space (don’t need warmup samples analysis), pp TRUE can use posterior predictive checks assess model fit. 4 CPU cores available can increase number threads per chain make use additional cores. example 8 CPU cores available set threads_per_chain = 4 use 8 cores (2 chains).","code":"fit_module <- partial(enw_fit_opts,   chains = 2,   parallel_chains = 2,   threads_per_chain = 2,   iter_warmup = 500,   iter_sampling = 1000,   adapt_delta = 0.98,   max_treedepth = 15,   save_warmup = FALSE,   pp = TRUE,   show_messages = FALSE, # set this to TRUE to show fitting messages   refresh = 0 # remove this to show fitting progress )"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"compiling-the-model","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Fitting the epinowcast model","what":"Compiling the model","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"also need compile model using cmdstanr fitting (installing package). order line work followed installation guide README. take around minute run called first time.","code":"epinowcast_model <- enw_model(profile = FALSE)"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"fitting-the-model","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Fitting the epinowcast model","what":"Fitting the model","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Now ready bring together modules specified, combine model just compiled, fit synthetic data. first fit data available real-time, Fitting model default options take around 5 minutes run laptop 4 CPU cores. CPU cores available can reduce time takes fit model increasing number threads per chain (see fitting options section ). retrospectively observed data. may see number warning messages cmdstanr fitting model. generally occur model initialised due process currently optimised epinowcast. model still fit correctly unless warnings continue fitting process (outside warmup phase). something actively working improving future versions epinowcast.","code":"germany_nowcast <- epinowcast(   data = rt_germany_pobs,   expectation = expectation_module(data = rt_germany_pobs),   reference = reference_module(data = rt_germany_pobs),   obs = obs_module(data = rt_germany_pobs),   fit = fit_module(),   model = epinowcast_model ) #> Error in expectation_module(data = rt_germany_pobs): object 'rt_formula' not found retro_germany_nowcast <- epinowcast(   data = retro_germany_pobs,   expectation = expectation_module(data = retro_germany_pobs),   reference = reference_module(data = retro_germany_pobs),   obs = obs_module(data = retro_germany_pobs),   fit = fit_module(),   model = epinowcast_model ) #> Error in expectation_module(data = retro_germany_pobs): object 'rt_formula' not found"},{"path":[]},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"plotting-the-nowcast-based-on-real-time-data","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Visualising the Nowcast","what":"Plotting the nowcast based on real-time data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"first plot nowcast based real-time data. Effectively trying use model estimate hospitalisations ultimately reported based data currently available. can compare recent observations see well model . Internally, plotting function (see ?plot.epinowcast()) sums observed data posterior estimates unobserved data produce nowcast number hospitalisations ultimately reported. instance, model done good job estimating number hospitalisations ultimately reported based data currently available. always case, model can sometimes estimate number hospitalisations ultimately reported. important thing note model clearly perfect complete data less well estimated model. likely indicates misspecification reporting delay model fixed making complex even making entirely non-parametric (vs based LogNormal).","code":"plot(   germany_nowcast, latest_germany_hosp[reference_date > as.Date(\"2021-06-01\")] )"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"plotting-the-nowcast-based-on-retrospective-data","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Visualising the Nowcast","what":"Plotting the nowcast based on retrospective data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"can also plot nowcast based retrospective data. plot uses observed data available effectively plotting observed data 30 day delay (maximum specified) compared data ultimately observed. can used get feel well specified maximum delay . see small number hospitalisations reported 30 days. impact performance even ideal model able predict hospitalisations accounted model evaluation.","code":"plot(   retro_germany_nowcast,   latest_germany_hosp[reference_date > as.Date(\"2021-06-01\")] )"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"posterior-predictions-for-cases-by-date-of-positive-test-and-report","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Posterior predictions for cases by date of positive test and report","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"better understand fit model data can instead plot posterior predictions observed data. effectively plot instead plotting posterior predictions unobserved data plot posterior predictions observed data. can used get feel well model able predict observed data. Rather using build plot function (changing type = \"posterior_prediction\") instead use enw_plot_pp_quantiles() can control number references dates plot (otherwise plot quite overwhelming!). clear plot example dates model main able predict observed data well. However, also aspects data model less well able predict, particular apparent periodicity reporting delay. likely due model able account day week reporting periodicity. fixed adding day week random effect reporting delay model demonstrate package README.","code":"plot_select_pp_dates <- function(nowcast, dates) {   nowcast |>     summary(type = \"posterior_prediction\") |>     (\\(x) x[reference_date %in% dates])() |>     enw_plot_pp_quantiles() +     facet_wrap(vars(reference_date), scales = \"free\") } plot_select_pp_dates(   retro_germany_nowcast,   as.Date(c(\"2021-05-01\", \"2021-05-14\", \"2021-06-01\", \"2021-07-01\")) )"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"real-time-and-retrospective-estimates-of-the-effective-reproduction-number","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Real-time and retrospective estimates of the effective reproduction number","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"key output model posterior distribution effective reproduction number. can plot real-time retrospective data see estimates change data becomes available. Ideally, hope real-time estimates overlap retrospective estimates. indicate model able accurately estimate hospitalisations ultimately reported based already reported. see good agreement real-time retrospective estimates effective reproduction number dates earlier time expect given data near complete models. Closer date estimation see real-time model good job estimating trend shown retrospective model tendency overpredict. caused changes reporting delay time, model able account day week reporting periodicity, model able account change underlying process time.","code":"get_rt_posterior <- function(nowcast, expectation = expectation_module) {   rt <- enw_posterior(nowcast$fit[[1]], variables = \"r\")   cols <- c(\"mean\", \"median\", \"q5\", \"q20\", \"q80\", \"q95\")   rt[, (cols) := lapply(.SD, exp), .SDcols = cols]   rt <- cbind(     expectation(data = nowcast)$data_raw$r[, .(date)], rt   )   return(rt) }  rt <- rbind(   get_rt_posterior(germany_nowcast)[, Data := \"Real-time\"],   get_rt_posterior(retro_germany_nowcast)[, Data := \"Retrospective\"] )  ggplot(rt) +   aes(x = date, col = Data, fill = Data) +   geom_line(aes(y = median), linewidth = 1, alpha = 0.6) +   geom_line(aes(y = mean), linetype = 2) +   geom_ribbon(aes(ymin = q5, ymax = q95), alpha = 0.2, linewidth = 0.2) +   geom_ribbon(aes(ymin = q20, ymax = q80, col = NULL), alpha = 0.2) +   geom_hline(yintercept = 1, linetype = 2) +   scale_y_continuous(trans = \"log\") +   scale_fill_brewer(palette = \"Dark2\", aesthetics = c(\"color\", \"fill\")) +   theme_bw() +   labs(     x = \"Date of infection\",     y = \"Effective reproduction number\"   ) +   theme(legend.position = \"bottom\")"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"estimates-of-the-delay-from-testing-positive-to-hospitalisation-both-in-real-time-and-retrospectively","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Estimates of the delay from testing positive to hospitalisation both in real-time and retrospectively","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"can also plot posterior distribution delay testing positive hospitalisation. delay used estimate number hospitalisations ultimately reported based number positive tests reported. can plot real-time retrospective data see estimates change data becomes available. Ideally, hope real-time estimates overlap retrospective estimates. indicate model able accurately estimate hospitalisations ultimately reported based already reported. estimates fairly good match indicating delay well estimated real-time model compared retrospective model delay unlikely changing rapidly time example (otherwise expect estimated delays diverge time).","code":"extract_epinowcast_cdf <- function(nowcast) {   draws <- nowcast |>     (\\(x)       x$fit[[1]]$draws(variables = c(\"refp_mean\", \"refp_sd\"), format = \"df\")     )() |>     as.data.table()    draws[     ,     cdf := purrr::map2(       `refp_mean[1]`, `refp_sd[1]`,       ~ data.table(         delay = 1:30, cdf = plnorm(1:30, .x, .y) / plnorm(30, .x, .y)       )     )   ]   draws <- draws[, rbindlist(cdf)]   draws <- draws[,     .(       mean = mean(cdf),       lower_90 = quantile(cdf, probs = 0.05),       upper_90 = quantile(cdf, probs = 0.95)     ),     by = \"delay\"   ] }  nowcast_cdf <- list(   \"Real-time\" = germany_nowcast,   \"Retrospective\" = retro_germany_nowcast ) |>   map(extract_epinowcast_cdf) |>   rbindlist(idcol = \"Data\")  ggplot(nowcast_cdf) +   aes(x = delay, y = mean, col = Data, fill = Data) +   geom_line(size = 1.1, alpha = 0.7) +   geom_ribbon(     aes(ymin = lower_90, ymax = upper_90),     alpha = 0.25   ) +   theme_bw() +   theme(legend.position = \"bottom\") +   scale_fill_brewer(palette = \"Dark2\", aesthetics = c(\"color\", \"fill\")) +   guides(     fill = guide_legend(nrow = 1),     col = guide_legend(nrow = 1)   ) +   labs(     x = \"Delay between positive test and hospitalisation\",     y = \"Cumulative density function of the reporting distribution\"   )"},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"estimates-of-the-number-of-expected-hospitalisations-both-in-real-time-and-retrospectively","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Estimates of the number of expected hospitalisations both in real-time and retrospectively","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"can also plot posterior predictions number expected hospitalisations. number hospitalisations reported observation error. can compare number hospitalisations ultimately reported see well model . Retrospectively, expect model fit well data differences due observation error. case indicates may need revisit expected hospitalisation model specification make closer generative process data . real-time, expect model fit less well data trying estimate number hospitalisations ultimately reported based data currently available (.e. also account reporting delay now partially unobserved). expected retrospective estimates fit well data. real-time estimates slightly less good, still capture recent change trend data possible without nowcast (estimates biased towards underpredicting due delay reporting leading right truncation).","code":"get_expected_infections <- function(nowcast, expectation = expectation_module) {   exp_cases <- enw_posterior(     nowcast$fit[[1]],     variables = \"exp_lobs\"   )   cols <- c(\"mean\", \"median\", \"q5\", \"q20\", \"q80\", \"q95\")   exp_cases[, (cols) := lapply(.SD, exp), .SDcols = cols]   exp_cases <- cbind(     expectation(data = nowcast)$data_raw$observation,     exp_cases   )   return(exp_cases) }  exp_cases <- rbind(   get_expected_infections(germany_nowcast)[, Data := \"Real-time\"],   get_expected_infections(retro_germany_nowcast)[, Data := \"Retrospective\"] )  exp_cases <- enw_latest_data(germany_hosp)[, date := reference_date][   exp_cases,   on = \"date\" ]  ggplot(exp_cases) +   aes(x = date, fill = Data, col = Data) +   geom_point(aes(y = confirm), col = \"Black\") +   geom_line(aes(y = median), linewidth = 1, alpha = 0.6) +   geom_line(aes(y = mean), linetype = 2) +   geom_ribbon(aes(ymin = q5, ymax = q95), alpha = 0.2, linewidth = 0.2) +   geom_ribbon(aes(ymin = q20, ymax = q80, col = NULL), alpha = 0.2) +   theme_bw() +   labs(     x = \"Date of positive test\",     y = \"Expected hospitalisations\"   ) +   scale_fill_brewer(palette = \"Dark2\", aesthetics = c(\"color\", \"fill\")) +   theme(legend.position = \"bottom\")"},{"path":[]},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"summary","dir":"Articles","previous_headings":"Wrapping up","what":"Summary","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"case study shown use epinowcast estimate effective reproduction number expected number latent reported cases right truncated data. also shown use package perform retrospective real-time nowcasts can useful way understanding real-time performance model.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"strengths","dir":"Articles","previous_headings":"Wrapping up","what":"Strengths","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"used single model estimate effective reproduction number expected number latent reported cases right truncated data. means propagated uncertainty estimation effective reproduction number estimation expected number latent reported cases difficult using multi-stage approach. used flexible model effective reproduction number allows us estimate effective reproduction number time incorporate uncertainty estimation effective reproduction number estimation expected number latent reported cases. accounted delay infection hospitalisation delay hospitalisation reporting estimation expected number reported cases. means reproduction number estimates currently indexed date infection.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"limitations","dir":"Articles","previous_headings":"Wrapping up","what":"Limitations","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Assumed known static generation time distribution latent reporting delay distribution. reality need estimated data, uncertainty, liable change time. Used fixed parametric reporting delay distribution. reality likely vary time depend things like day week reporting effects. addressed using flexible reporting delay distribution supported epinowcast. Used observation model account overdispersion number reported cases. addressed using flexible observation model supported epinowcast.","code":""},{"path":"https://package.epinowcast.org/articles/single-timeseries-rt-estimation.html","id":"alternative-packages","dir":"Articles","previous_headings":"Wrapping up","what":"Alternative packages","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"EpiNow2: precursor epinowcast developed members epinowcast community. flexible toolset real-time analysis infectious diseases. less complex epinowcast focus robust default settings also less flexible. time functionality incorporated epinowcast. epidemia: another flexible package estimating effective reproduction number forecasting. designed flexible EpiNow2, similar way epinowcast, potentially difficult use. also generally less functionality dealing delays epinowcast. However, extension rstanarm comes number useful features familiar interface users rstanarm EpiEstim: mature package estimating effective reproduction number. exploits mathematically relationship fit renewal equation uncertainty quickly currently able handle reporting delays aspects real-world data discussed case study. also able perform nowcasts. However, useful package estimating effective reproduction number settings aspects important can handled means.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"epinowcast-and-stan","dir":"Articles","previous_headings":"","what":"Epinowcast and Stan","title":"Resources to help with model fitting using Stan","text":"Stan probabilistic programming language statistical platform statistical modelling powers Bayesian inference epinowcast. statistical models used epinowcast primarily written Stan programming language, statically typed programming language syntax similar C/C++. epinowcast utilises {cmdstanr} package interface CmdStan, program executes models written Stan programming language. important understand CmdStan program distinct interfaced R. R calling separate program execute calculations similar {rjags} relies JAGS library R-INLA. described epinowcast project README, need install {cmdstanr} R package also ability install CmdStan using R interface. Additionally, need make sure software required CmdStan installed configured machine.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"ensuring-you-have-the-proper-toolchain","dir":"Articles","previous_headings":"Epinowcast and Stan","what":"Ensuring you have the proper toolchain","title":"Resources to help with model fitting using Stan","text":"Stan code written epinowcast package converted1 optimised C++ code compiled machine-readable instructions. Stan needs several programs execute compilation process build tool make C++ compiler, need ensure system appropriate supporting software, known toolchain. steps install additional software addition R platform specific. reminder, installation steps occur outside R. Stan team assembled detailed instructions platform: Windows MacOS Linux completing platform-specific toolchain installation, can move R.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"now-install-cmdstanr-and-cmdstan","dir":"Articles","previous_headings":"Epinowcast and Stan","what":"Now install CmdStanR and CmdStan","title":"Resources to help with model fitting using Stan","text":"Now can open session R using favourite IDE like Rstudio Vscode. ’ll need install CmdStanR package, R package allows interface CmdStan R code. detailed installation guide available CmdStanR provides authoritative installation instructions. cmdstanr package installed dependency install epinowcast. ensure toolchain installation occurred successfully, run following code R terminal: function report back toolchain available set follows: get message, return installation instructions ensure steps followed. Assuming toolchain installed, can install CmdStanR.","code":"library(cmdstanr) check_cmdstan_toolchain() #> The C++ toolchain required for CmdStan is set up properly! cmdstanr::install_cmdstan(cores = 2)"},{"path":[]},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"installation","dir":"Articles","previous_headings":"Epinowcast modelling","what":"Installation","title":"Resources to help with model fitting using Stan","text":"described project README, can install \"{epinowcast}\" package within R.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"running-your-first-model","dir":"Articles","previous_headings":"Epinowcast modelling","what":"Running your first model","title":"Resources to help with model fitting using Stan","text":"reminder, session, time run model, Stan compile model code. first time run model take moment compilation occur.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"setting-enw_fit_opts","dir":"Articles","previous_headings":"Epinowcast modelling","what":"Setting enw_fit_opts","title":"Resources to help with model fitting using Stan","text":"enw_fit_opts allows set several critical components Stan computational engine. parameters passed Stan model fitting process influence computation time quality model fit. options inference engine agnostic parsed depending sampler choose (e.g., epinowcast::enw_sample full Bayesian inference). Knowing defaults need changed important part Bayesian workflow.[1] parameters passed sampling function available {cmdstanr} used default approach epinowcast::enw_sample.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"investigating-the-quality-of-the-model-fit","dir":"Articles","previous_headings":"","what":"Investigating the quality of the model fit","title":"Resources to help with model fitting using Stan","text":"section discuss common approaches working epinowcast specifically CmdStan/ Bayesian inference generally. major component Bayesian inference key component Bayesian workflow validating quality model fit. consequence, Bayesian workflow utilises tools make issues fit apparent.[1] Additionally, epinowcast provides supplemental information complement existing Stan messages help spot diagnose potential model fitting issues. solutions issues typically require investigate sampler settings, model settings, interrogate data . also important examine posterior predictive","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"sampler-settings","dir":"Articles","previous_headings":"Investigating the quality of the model fit","what":"Sampler settings","title":"Resources to help with model fitting using Stan","text":"epinowcast provides users ability pass arguments directly CmdStan can improve model run time produce better inferences. parameters can passed enw_fit_opts function.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"chains","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"chains","title":"Resources to help with model fitting using Stan","text":"One key components Bayesian inference creating draws independent Markov chains (See post Michael Betancourt detailed introduction). assess convergence reliability given posterior distribution least two chains must used 4 chains common default.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"threads_per_chain","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"threads_per_chain","title":"Resources to help with model fitting using Stan","text":"Stan allows multi-threading Stan code used within epinowcast tried take advantage capabilities possible. Multi-threading allows calculations spread across multiple threads, accelerate inference allowing embarrassingly parallel calculations spread across threads later combined. possible, good default 2, however, available compute machine, can increase higher value may see fit time reductions. Please note theads_per_chain impact model convergence fittings purely means speeding model fitting time. product thread_per_chain chains arguments equal less number cores machine!","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"iter_warmup-and-iter_sampling","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"iter_warmup and iter_sampling","title":"Resources to help with model fitting using Stan","text":"number samples used warmup phase Stan number sampling iterations controlled iter_warmup iter_sampling arguments, respectively. Stan requires sufficient number warmup iterations dynamically estimate step change sizes model fitting. Unlike Gibbs sampling (method used JAGS), generally need set large values iter_warmup iter_sampling, can vary based match data model. Conversely, setting large values iterations sign poor model fit indicates approaches need employed (e.g., priors, adapt_delta, max_treedepth). general heuristic bulk tail effective sample sizes (ESS) greater 100. However, depending complexity problem increasing number iterations can appropriate (.e., \\(\\hat{R}\\) values near 1, Monte Carlo Standard errors low) especially want make inferences regarding tail behaviours. initial model fitting process, may want start lower number iter_warmup 500 iterations per chain increase 750-1000 per chain () needed. Starting slightly short warm-ups can speed model development timelines. Typically found 1000-2000 samples per chain iter_sampling good starting values initial model fitting.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"max_treedepth","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"max_treedepth","title":"Resources to help with model fitting using Stan","text":"value controls maximum size trajectory taken sample (power 2) step. value low, sampler may terminate early causing excess runtimes. necessarily indicate model fit issues, represent runtime performance opportunity (.e., efficient sampling). can increase max_treedepth integer value greater 10 15 (lower). models used epinowcast common max_treedepth set 12 15.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"adapt_delta","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"adapt_delta","title":"Resources to help with model fitting using Stan","text":"parameter sets target average proposal acceptance probability NUTS sampling (real number value 0 1). Higher values adapt_delta result smaller step sizes sampling slow model fitting time can help address divergent transitions. default value 0.8, likely need set slightly higher like 0.9 0.99 given complexity models fit.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"some-decent-defaults","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"Some decent defaults","title":"Resources to help with model fitting using Stan","text":"computer 8 cores, reasonable configuration following: simple models threads_per_chain = 1 may lead models fitting faster even cores available due overhead within chain multi-threading. may also case models complex generative processes (.e. models use complex \\(R_t\\) formulas). suggest explore works best data models.","code":"enw_fit_opts(     save_warmup = FALSE,     pp = TRUE,     chains = 4,     threads_per_chain = 2,     adapt_delta = 0.95,     max_treedepth = 12,     iter_sampling = 2000,     iter_warmup = 1000,     show_messages = FALSE )"},{"path":[]},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"setting-priors","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Model settings","what":"Setting priors","title":"Resources to help with model fitting using Stan","text":"Setting sensible priors important Bayesian inference. pre-processing data, can retrieve prior arguments using enw_reference function. shown , can retrieve current files manipulate needed. example, reason believe standard deviation means used smaller, reduce half 0.5. pass new priors epinowcast function. Similarly, take empirical Bayes approach use posteriors fitted model described another vignette.","code":"default_priors <- enw_reference(data = enw_example(\"preprocessed\")) default_priors new_priors <- default_priors$priors  new_priors[ ,sd := 0.5] epinowcast(pobs,   expectation = expectation_module,   fit = fit,   model = multithread_model,   priors = new_priors )"},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"exploring-your-data","dir":"Articles","previous_headings":"Investigating the quality of the model fit","what":"Exploring your data","title":"Resources to help with model fitting using Stan","text":"important understand data passed epinowcast ideas regarding data-generating process data. instance, significant changes reporting triangle, manifest multi-modality posterior distribution (.e., Stan trying fit two different reporting delays parameters). different reporting regimes result long model run times, wide posteriors, ultimately nonsensical inferences. Given nuances data, may need identify fit different regimes data. problems can also manifest longer timescales, data generally better, much data can result ill-fitting models. Sometimes easier examine features fit model due domain knowledge; however, key component Bayesian Workflow examine posterior predictions.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"posterior-predictions","dir":"Articles","previous_headings":"Investigating the quality of the model fit","what":"Posterior predictions","title":"Resources to help with model fitting using Stan","text":"Posterior predictions, addition model fitting diagnostics, provides way examine well model captured data. model poorly captured data (e.g., data points consistently outside posterior credible intervals), model likely lead poor inferences. However, examining posterior predictions data, may able qualitatively quantitatively discern posteriors captured data patterns hint issues. Issues posterior predictions without warnings diagnostics indicate need examine priors underlying data. Utilise enw_plot_pp_quantiles examine posterior predictive quantiles nowcast fits.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"my-model-takes-too-long-to-run","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Approaches to solve common problems","what":"My model takes too long to run","title":"Resources to help with model fitting using Stan","text":"One common issues Bayesian inference sampler may take long time run. can occur sampler difficulty exploring posterior parameter space given model data (.e., Folk Theorem Statistical Computing “computational problems, often ’s problem model”). words, may mismatch data model trying fit. simple steps assist : Increase max_treedepth argument 15 allow longer trajectories used steps sampling. especially important per_at_max_treedepth value high returned CmdStan diagnostics. Use informative priors. Try simplify model understand potential degeneracies. Reduce amount data trying fit. might include reducing duration time points trying fit. can confirm model fit data, may just question computational power fitting larger data. Head community forum ask assistance.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"divergent-transitions","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Approaches to solve common problems","what":"Divergent transitions","title":"Resources to help with model fitting using Stan","text":"CmdStan may alert “divergent transitions” detected model fit. higher number divergent transitions indicates model outputs trusted. first step addressing increase adapt_delta argument numeric near one (e.g., 0.99 0.99). allow smaller step size may result reliable inferences. Importantly, number divergent transitions remains high, model may misspecified given available data. Regardless resolves problem, exploring divergent transitions can helpful way improve models don’t recommend just setting adapt_delta high without checking see can improve things! Sensible places start investigate model parameterisation correct data available priors reasonable.","code":"#>1: There were 32 divergent transitions after warmup."},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"my-hatrs-are-high-and-my-esss-are-low","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Approaches to solve common problems","what":"My \\(\\hat{R}\\)s are high and my esss are low","title":"Resources to help with model fitting using Stan","text":"High values \\(\\hat{R}\\), Gelman-Rubin statistic used measure convergence, indicate lack convergence different model chains. Values greater 1.01 1.05 considered unreliable. used \\(\\hat{R}\\) assess convergence important measures effective sample size MCSE. Lower values effective sample size especially problematic. effective sample size provides insight many independent samples drawn posterior, accounting autocorrelation within Markov chains. Ideally, want values near total number samples passed iter_sample argument. r_hat large ess_bulk/ ess_tail low, consider: Increasing adapt_delta argument numeric value near 1 (e.g., 0.99). reduce step size help sampling risk possible increases runtime. Use informative priors.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"the-posterior-estimates-are-very-wide","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Approaches to solve common problems","what":"The posterior estimates are very wide","title":"Resources to help with model fitting using Stan","text":"Wide posterior values indicate high degree uncertainty given data model. warnings shown (e.g., divergent transitions, low ESS), result simply inference given available data prior likelihood. However, Bayesian model building often iterative process[1] , practice, ’s common realize model’s prior likelihood doesn’t accurately reflect prior beliefs. Priors thought non-informative can turn strongly influence posterior, often unexpected undesirable ways. suspect might case, can make sense revisit priors, iteratively inspecting joint prior model prior predictive simulation tweaking marginal distributions individual parameters. (Stan Prior Choice wiki)[https://github.com/stan-dev/stan/wiki/Prior-Choice-Recommendations] often useful guide process.","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"other-resources","dir":"Articles","previous_headings":"","what":"Other resources","title":"Resources to help with model fitting using Stan","text":"Epinowcast Stan communities pretty warm open places receptive helping others. find issues epinowcast, reach !","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"technical-issues","dir":"Articles","previous_headings":"Other resources","what":"Technical issues","title":"Resources to help with model fitting using Stan","text":"epinowcast forum epinowcast issues Stan forums Stan guide warnings","code":""},{"path":"https://package.epinowcast.org/articles/stan-help.html","id":"learning-more-about-stan-and-bayesian-inference","dir":"Articles","previous_headings":"Other resources","what":"Learning more about Stan and Bayesian inference","title":"Resources to help with model fitting using Stan","text":"Michael Betancourt’s case studies Aki Vehtari Bayesian Data Analysis case studies","code":""},{"path":"https://package.epinowcast.org/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sam Abbott. Author, maintainer. Adrian Lison. Author. Sebastian Funk. Author. Carl Pearson. Author. Hugo Gruson. Author. Felix Guenther. Author. Michael DeWitt. Author. Hannah Choi. Contributor. Pratik Gupte. Contributor. Joel Hellewell. Contributor. Luis Rivas. Contributor. Sang Woo Park. Contributor. Nathan McIntosh. Contributor. James Mba Azam. Contributor. Kath Sherratt. Contributor. Nikos Bosse. Contributor.","code":""},{"path":"https://package.epinowcast.org/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Sam Abbott, Lison , Funk S, Pearson C, Gruson H, Guenther F, DeWitt M (NULL). epinowcast: Flexible Hierarchical Nowcasting. doi:10.5281/zenodo.5637165.","code":"@Manual{,   title = {epinowcast: Flexible Hierarchical Nowcasting},   author = {{Sam Abbott} and Adrian Lison and Sebastian Funk and Carl Pearson and Hugo Gruson and Felix Guenther and Michael DeWitt},   year = {NULL},   doi = {10.5281/zenodo.5637165}, }"},{"path":[]},{"path":"https://package.epinowcast.org/index.html","id":"summary","dir":"","previous_headings":"","what":"Summary","title":"Flexible Hierarchical Nowcasting","text":"Tools enable flexible efficient hierarchical nowcasting right-truncated epidemiological time-series using semi-mechanistic Bayesian model support range reporting generative processes. Nowcasting, context, gaining situational awareness using currently available observations reporting patterns historical observations. can useful tracking spread infectious disease real-time: without nowcasting, changes trends can obfuscated partial reporting detection may delayed due use simpler methods like truncation. package designed epidemiological applications mind, applied set right-truncated time-series count data.","code":""},{"path":"https://package.epinowcast.org/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Flexible Hierarchical Nowcasting","text":"can install latest released version using normal R function, though need point r-universe instead CRAN: Alternatively, can use remotes package install development version Github (warning! version may contain breaking changes /bugs): Similarly, can install historical versions specifying release tag (e.g. installs 0.2.0): Note: can also use last approach install specific commit needed, e.g. want try specific unreleased feature, absolute latest developmental version. wish model fitting nowcasting, need install CmdStan, also entails suitable C++ toolchain setup. recommend using cmdstanr package. Stan team provides instructions Getting started cmdstanr vignette, details support package site along key instructions available Stan resources package vignette, brief version : Note: can speed CmdStan installation using cores argument. installing particular version epinowcast, may also need install past version CmdStan, can version argument. also provide Docker image epinowcast dependencies installed. can use image run epinowcast without installing dependencies.","code":"install.packages(   \"epinowcast\", repos = \"https://epinowcast.r-universe.dev\" ) remotes::install_github(   \"epinowcast/epinowcast\", dependencies = TRUE ) remotes::install_github(   \"epinowcast/epinowcast\", dependencies = TRUE, ref = \"v0.2.0\" ) # if you not yet installed `epinowcast`, or you installed it without `Suggests` dependencies install.packages(\"cmdstanr\", repos = c(\"https://mc-stan.org/r-packages/\", getOption(\"repos\"))) # once `cmdstanr` is installed: cmdstanr::install_cmdstan()"},{"path":"https://package.epinowcast.org/index.html","id":"resources","dir":"","previous_headings":"","what":"Resources","title":"Flexible Hierarchical Nowcasting","text":"use package, documentation available via ?enw_ first stop troubleshooting. also provide range documentation, case studies, community spaces ask (answer!) questions: epinowcast website includes function reference, model outline, case studies using package. site mainly concerns release version, can also find documentation latest development version. created package vignettes help get started nowcasting highlight features case studies. organisation website includes links resources, guest posts, seminar schedule upcoming past recordings. community forum areas question answer considering new methods tools, among others. generally interested real-time analysis infectious disease, may find useful even use epinowcast. addition vignettes, package also comes example analyses. polished vignettes, typically explore new features may help using development version. installing epinowcast, can find via:","code":"list.files(   system.file(\"examples\", package = \"epinowcast\"), full.names = TRUE )"},{"path":"https://package.epinowcast.org/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"Flexible Hierarchical Nowcasting","text":"welcome contributions new contributors! particularly appreciate help identifying identified issues. Please check add issues, /add pull request see contributing guide information. need different underlying model work: epinowcast lets pass models! try new model parameterisations expand overall flexibility improve defaults, please let us know either community forum. always like hear new use-cases, whether directed core epinowcast applications.","code":""},{"path":"https://package.epinowcast.org/index.html","id":"how-to-make-a-bug-report-or-feature-request","dir":"","previous_headings":"Contributing","what":"How to make a bug report or feature request","title":"Flexible Hierarchical Nowcasting","text":"Please briefly describe problem output expect issue. question, please don’t open issue. Instead, ask Q page. See contributing guide information.","code":""},{"path":"https://package.epinowcast.org/index.html","id":"code-of-conduct","dir":"","previous_headings":"Contributing","what":"Code of Conduct","title":"Flexible Hierarchical Nowcasting","text":"Please note epinowcast project released Contributor Code Conduct. contributing project, agree abide terms.","code":""},{"path":"https://package.epinowcast.org/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Flexible Hierarchical Nowcasting","text":"making use methodology methodology based, please cite relevant papers model outline. use epinowcast work, please consider citing citation(\"epinowcast\").","code":""},{"path":"https://package.epinowcast.org/index.html","id":"contributors","dir":"","previous_headings":"","what":"Contributors","title":"Flexible Hierarchical Nowcasting","text":"contributions project gratefully acknowledged using allcontributors package following -contributors specification. Contributions kind welcome!","code":""},{"path":"https://package.epinowcast.org/index.html","id":"code","dir":"","previous_headings":"Contributors","what":"Code","title":"Flexible Hierarchical Nowcasting","text":"seabbs, adrian-lison, sbfnk, Bisaloo, pearsonca, choi-hannah, medewitt, pitmonticone, jamesmbaazam, kathsherratt, Lnrivas, natemcintosh, nikosbosse, pratikunterwegs","code":""},{"path":"https://package.epinowcast.org/index.html","id":"issue-authors","dir":"","previous_headings":"Contributors","what":"Issue Authors","title":"Flexible Hierarchical Nowcasting","text":"teojcryan, FelixGuenther, beansrowning, jbracher, zsusswein","code":""},{"path":"https://package.epinowcast.org/index.html","id":"issue-contributors","dir":"","previous_headings":"Contributors","what":"Issue Contributors","title":"Flexible Hierarchical Nowcasting","text":"jhellewell14, Gulfa, parksw3, TimTaylor, WardBrian, jimrothstein","code":""},{"path":"https://package.epinowcast.org/reference/add_max_observed_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Add maximum observed delay — add_max_observed_delay","title":"Add maximum observed delay — add_max_observed_delay","text":"function calculates adds maximum observed delay group reference date provided dataset. first checks validity observation indicator computes maximum delay. observation indicator provided, adjusts maximum observed delay unobserved data negative 1 (indicating maximum observed).","code":""},{"path":"https://package.epinowcast.org/reference/add_max_observed_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add maximum observed delay — add_max_observed_delay","text":"","code":"add_max_observed_delay(new_confirm, observation_indicator = NULL)"},{"path":"https://package.epinowcast.org/reference/add_max_observed_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add maximum observed delay — add_max_observed_delay","text":"new_confirm data.table containing columns: \"reference_date\", \"delay\", \".group\", \"new_confirm\", \"max_obs_delay\". produced enw_preprocess_data() new_confirm output addition \"max_obs_delay\" column produced add_max_observed_delay(). observation_indicator character string specifying column name new_confirm indicates whether observation observed . column logical vector. NULL (default), observations considered observed.","code":""},{"path":"https://package.epinowcast.org/reference/add_max_observed_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add maximum observed delay — add_max_observed_delay","text":"data.table original columns new_confirm additional \"max_obs_delay\" column representing maximum observed delay group reference date. observation indicator provided, unobserved data \"max_obs_delay\" value -1.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/add_pmfs.html","id":null,"dir":"Reference","previous_headings":"","what":"Add probability mass functions — add_pmfs","title":"Add probability mass functions — add_pmfs","text":"function allows addition probability mass functions (PMFs) produce new PMF. useful example context reporting delays PMF sum two Poisson distributions convolution PMFs.","code":""},{"path":"https://package.epinowcast.org/reference/add_pmfs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add probability mass functions — add_pmfs","text":"","code":"add_pmfs(pmfs)"},{"path":"https://package.epinowcast.org/reference/add_pmfs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add probability mass functions — add_pmfs","text":"pmfs list vectors describing probability mass functions ","code":""},{"path":"https://package.epinowcast.org/reference/add_pmfs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add probability mass functions — add_pmfs","text":"vector describing probability mass function sum ","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/add_pmfs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add probability mass functions — add_pmfs","text":"","code":"# Sample and analytical PMFs for two Poisson distributions x <- rpois(10000, 5) xpmf <- dpois(0:20, 5) y <- rpois(10000, 7) ypmf <- dpois(0:20, 7) # Add sampled Poisson distributions up to get combined distribution z <- x + y # Analytical convolution of PMFs conv_pmf <- add_pmfs(list(xpmf, ypmf)) conv_cdf <- cumsum(conv_pmf) # Empirical convolution of PMFs cdf <- ecdf(z)(0:42) # Compare sampled and analytical CDFs plot(conv_cdf) lines(cdf, col = \"black\")"},{"path":"https://package.epinowcast.org/reference/aggregate_rolling_sum.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal function to perform rolling sum aggregation — aggregate_rolling_sum","title":"Internal function to perform rolling sum aggregation — aggregate_rolling_sum","text":"function takes data.table applies rolling sum given timestep, aggregating specified columns. particularly useful aggregating observations certain periods.","code":""},{"path":"https://package.epinowcast.org/reference/aggregate_rolling_sum.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal function to perform rolling sum aggregation — aggregate_rolling_sum","text":"","code":"aggregate_rolling_sum(dt, internal_timestep, by = NULL)"},{"path":"https://package.epinowcast.org/reference/aggregate_rolling_sum.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal function to perform rolling sum aggregation — aggregate_rolling_sum","text":"dt data.table aggregated. internal_timestep integer indicating period aggregate. character vector specifying columns aggregate .","code":""},{"path":"https://package.epinowcast.org/reference/aggregate_rolling_sum.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal function to perform rolling sum aggregation — aggregate_rolling_sum","text":"modified data.table aggregated observations.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/as_string_formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Converts formulas to strings — as_string_formula","title":"Converts formulas to strings — as_string_formula","text":"Converts formulas strings","code":""},{"path":"https://package.epinowcast.org/reference/as_string_formula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Converts formulas to strings — as_string_formula","text":"","code":"as_string_formula(formula)"},{"path":"https://package.epinowcast.org/reference/as_string_formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Converts formulas to strings — as_string_formula","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function.","code":""},{"path":"https://package.epinowcast.org/reference/as_string_formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Converts formulas to strings — as_string_formula","text":"character string supplied formula","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/as_string_formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Converts formulas to strings — as_string_formula","text":"","code":"epinowcast:::as_string_formula(~ 1 + age_group) #> [1] \"~1 + age_group\""},{"path":"https://package.epinowcast.org/reference/cache_location_message.html","id":null,"dir":"Reference","previous_headings":"","what":"Cache location message for epinowcast package — cache_location_message","title":"Cache location message for epinowcast package — cache_location_message","text":"function generates message epinowcast() package regarding cache location. checks environment setting cache location provides guidance user managing setting.","code":""},{"path":"https://package.epinowcast.org/reference/cache_location_message.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cache location message for epinowcast package — cache_location_message","text":"","code":"cache_location_message()"},{"path":"https://package.epinowcast.org/reference/cache_location_message.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cache location message for epinowcast package — cache_location_message","text":"character vector containing messages. enw_cache_location set, returns instructions setting cache location find details. set, function returns confirmation message current cache location.","code":""},{"path":"https://package.epinowcast.org/reference/cache_location_message.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Cache location message for epinowcast package — cache_location_message","text":"cache_location_message() examines enw_cache_location environment variable. variable set, advises user set cache location using enw_set_cache() optimize stan compilation times. enw_cache_location set, confirms current cache location user. Management setting cache location can done using enw_set_cache().","code":""},{"path":"https://package.epinowcast.org/reference/check_calendar_timestep.html","id":null,"dir":"Reference","previous_headings":"","what":"Check calendar timestep — check_calendar_timestep","title":"Check calendar timestep — check_calendar_timestep","text":"function verifies difference calendar dates provided observations corresponds provided timestep \"month\".","code":""},{"path":"https://package.epinowcast.org/reference/check_calendar_timestep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check calendar timestep — check_calendar_timestep","text":"","code":"check_calendar_timestep(dates, date_var, exact = TRUE)"},{"path":"https://package.epinowcast.org/reference/check_calendar_timestep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check calendar timestep — check_calendar_timestep","text":"dates Vector Date class representing dates. date_var variable obs representing dates. exact Logical, TRUE``, checks differences exactly match timestep. FALSE``, checks sum differences modulo timestep equals zero. Default TRUE.","code":""},{"path":"https://package.epinowcast.org/reference/check_calendar_timestep.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check calendar timestep — check_calendar_timestep","text":"function used side effect stopping check fails. check passes, function returns invisibly.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_environment_unset.html","id":null,"dir":"Reference","previous_headings":"","what":"Check environment setting — check_environment_unset","title":"Check environment setting — check_environment_unset","text":"internal function checks whether given environment variable set . returns TRUE variable either null empty string, indicating environment variable set. Otherwise, returns FALSE.","code":""},{"path":"https://package.epinowcast.org/reference/check_environment_unset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check environment setting — check_environment_unset","text":"","code":"check_environment_unset(x)"},{"path":"https://package.epinowcast.org/reference/check_environment_unset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check environment setting — check_environment_unset","text":"x environment variable checked.","code":""},{"path":"https://package.epinowcast.org/reference/check_environment_unset.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check environment setting — check_environment_unset","text":"Logical value indicating whether environment variable set (either null empty string).","code":""},{"path":"https://package.epinowcast.org/reference/check_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Check observations for reserved grouping variables — check_group","title":"Check observations for reserved grouping variables — check_group","text":"Check observations reserved grouping variables","code":""},{"path":"https://package.epinowcast.org/reference/check_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check observations for reserved grouping variables — check_group","text":"","code":"check_group(obs)"},{"path":"https://package.epinowcast.org/reference/check_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check observations for reserved grouping variables — check_group","text":"obs object coerce_dtd place, contain .group, .old_group, .new_group. reserved names.","code":""},{"path":"https://package.epinowcast.org/reference/check_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check observations for reserved grouping variables — check_group","text":"obs object, modifiable place.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_group_date_unique.html","id":null,"dir":"Reference","previous_headings":"","what":"Check observations for uniqueness of grouping variables with respect to reference_date and report_date — check_group_date_unique","title":"Check observations for uniqueness of grouping variables with respect to reference_date and report_date — check_group_date_unique","text":"function checks input data stratified reference_date, report_date, .group. counting number observations combination variables, throwing warning combination one observation.","code":""},{"path":"https://package.epinowcast.org/reference/check_group_date_unique.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check observations for uniqueness of grouping variables with respect to reference_date and report_date — check_group_date_unique","text":"","code":"check_group_date_unique(obs)"},{"path":"https://package.epinowcast.org/reference/check_group_date_unique.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check observations for uniqueness of grouping variables with respect to reference_date and report_date — check_group_date_unique","text":"obs object coerce_dtd place, contains .group, reference_date, report_date columns.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_max_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Check appropriateness of maximum delay — check_max_delay","title":"Check appropriateness of maximum delay — check_max_delay","text":"Check maximum delay specified user long enough raise potential warnings. achieved computing share reference dates cumulative case count aspired coverage.","code":""},{"path":"https://package.epinowcast.org/reference/check_max_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check appropriateness of maximum delay — check_max_delay","text":"","code":"check_max_delay(   data,   max_delay = data$max_delay,   cum_coverage = 0.8,   maxdelay_quantile_outlier = 0.97,   warn = TRUE,   warn_internal = FALSE )"},{"path":"https://package.epinowcast.org/reference/check_max_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check appropriateness of maximum delay — check_max_delay","text":"data Output enw_preprocess_data(). max_delay maximum number days model delay distribution. Must integer greater equal 1. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Consider delays realistic application, doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 days (.e. max_delay 1 corresponds delay). can use check_max_delay() check coverage delay distribution different maximum delays. cum_coverage aspired percentage cases maximum delay cover. Defaults 0.8 (80%). maxdelay_quantile_outlier reference dates sufficiently far past, determined based maximum observed delay, included (see details). Instead overall maximum observed delay, quantile maximum observed delay reference dates used. robust outliers. Defaults 0.97 (97%). warn warning issued cumulative case count cum_coverage majority reference dates? warn_internal TRUE function called internally another epinowcast function. , warnings adjusted avoid confusing user.","code":""},{"path":"https://package.epinowcast.org/reference/check_max_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check appropriateness of maximum delay — check_max_delay","text":"data.table share reference dates cumulative case count cum_coverage, stratified group.","code":""},{"path":"https://package.epinowcast.org/reference/check_max_delay.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check appropriateness of maximum delay — check_max_delay","text":"coverage respect maximum observed case count corresponding reference date. maximum observed case count likely smaller true overall case count yet fully observed reference dates (due right truncation), reference dates maximum observed delay ago included. Still, can use maximum observed delay, unknown true maximum delay, computed coverage values interpreted care, proxies true coverage.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_max_delay.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check appropriateness of maximum delay — check_max_delay","text":"","code":"pobs <- enw_example(type = \"preprocessed_observations\") check_max_delay(pobs, max_delay = 20, cum_coverage = 0.8) #>    .group coverage below_coverage #>    <char>    <num>          <num> #> 1:      1      0.8              0 #> 2:    all      0.8              0"},{"path":"https://package.epinowcast.org/reference/check_module.html","id":null,"dir":"Reference","previous_headings":"","what":"Check a model module contains the required components — check_module","title":"Check a model module contains the required components — check_module","text":"Check model module contains required components","code":""},{"path":"https://package.epinowcast.org/reference/check_module.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check a model module contains the required components — check_module","text":"","code":"check_module(module)"},{"path":"https://package.epinowcast.org/reference/check_module.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check a model module contains the required components — check_module","text":"module model module. example enw_expectation().","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_modules_compatible.html","id":null,"dir":"Reference","previous_headings":"","what":"Check that model modules have compatible specifications — check_modules_compatible","title":"Check that model modules have compatible specifications — check_modules_compatible","text":"Check model modules compatible specifications","code":""},{"path":"https://package.epinowcast.org/reference/check_modules_compatible.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check that model modules have compatible specifications — check_modules_compatible","text":"","code":"check_modules_compatible(modules)"},{"path":"https://package.epinowcast.org/reference/check_modules_compatible.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check that model modules have compatible specifications — check_modules_compatible","text":"modules list model modules.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_numeric_timestep.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Numeric Timestep — check_numeric_timestep","title":"Check Numeric Timestep — check_numeric_timestep","text":"function verifies difference numeric dates provided observations corresponds provided timestep.","code":""},{"path":"https://package.epinowcast.org/reference/check_numeric_timestep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Numeric Timestep — check_numeric_timestep","text":"","code":"check_numeric_timestep(dates, date_var, timestep, exact = TRUE)"},{"path":"https://package.epinowcast.org/reference/check_numeric_timestep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Numeric Timestep — check_numeric_timestep","text":"dates Vector Date class representing dates. date_var variable obs representing dates. timestep Numeric timestep date difference. exact Logical, TRUE``, checks differences exactly match timestep. FALSE``, checks sum differences modulo timestep equals zero. Default TRUE.","code":""},{"path":"https://package.epinowcast.org/reference/check_numeric_timestep.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Numeric Timestep — check_numeric_timestep","text":"function used side effect stopping check fails. check passes, function returns invisibly.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_observation_indicator.html","id":null,"dir":"Reference","previous_headings":"","what":"Check observation indicator — check_observation_indicator","title":"Check observation indicator — check_observation_indicator","text":"function verifies observation_indicator within provided new_confirm observations logical. check performed ensure observation_indicator correct type.","code":""},{"path":"https://package.epinowcast.org/reference/check_observation_indicator.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check observation indicator — check_observation_indicator","text":"","code":"check_observation_indicator(new_confirm, observation_indicator = NULL)"},{"path":"https://package.epinowcast.org/reference/check_observation_indicator.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check observation indicator — check_observation_indicator","text":"new_confirm data frame containing observations checked. observation_indicator character string specifying column name new_confirm represents observation indicator. column logical type. NULL, check performed.","code":""},{"path":"https://package.epinowcast.org/reference/check_observation_indicator.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check observation indicator — check_observation_indicator","text":"function used side effect checking observation indicator new_confirm. check passes, function returns invisibly. Otherwise, stops returns error message.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_quantiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Check required quantiles are present — check_quantiles","title":"Check required quantiles are present — check_quantiles","text":"Check required quantiles present","code":""},{"path":"https://package.epinowcast.org/reference/check_quantiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check required quantiles are present — check_quantiles","text":"","code":"check_quantiles(posterior, req_probs = c(0.5, 0.95, 0.2, 0.8))"},{"path":"https://package.epinowcast.org/reference/check_quantiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check required quantiles are present — check_quantiles","text":"posterior data.table coerce_dt()d place; must contain quantiles identified using q5 naming scheme. req_probs numeric vector required probabilities. Default: c(0.5, 0.95, 0.2, 0.8).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_renviron_for_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Check .Renviron for cache location setting — check_renviron_for_cache","title":"Check .Renviron for cache location setting — check_renviron_for_cache","text":"Check .Renviron cache location setting","code":""},{"path":"https://package.epinowcast.org/reference/check_renviron_for_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check .Renviron for cache location setting — check_renviron_for_cache","text":"","code":"check_renviron_for_cache(environ)"},{"path":"https://package.epinowcast.org/reference/check_renviron_for_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check .Renviron for cache location setting — check_renviron_for_cache","text":"environ list containing contents .Renviron file path. output get_renviron_contents() function.","code":""},{"path":"https://package.epinowcast.org/reference/check_timestep.html","id":null,"dir":"Reference","previous_headings":"","what":"Check timestep — check_timestep","title":"Check timestep — check_timestep","text":"function verifies difference dates provided observations corresponds provided timestep. exact argument set TRUE, function checks differences exactly match timestep; otherwise, checks sum differences modulo timestep equals zero. check fails, function stops returns error message.","code":""},{"path":"https://package.epinowcast.org/reference/check_timestep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check timestep — check_timestep","text":"","code":"check_timestep(   obs,   date_var,   timestep = \"day\",   exact = TRUE,   check_nrow = TRUE )"},{"path":"https://package.epinowcast.org/reference/check_timestep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check timestep — check_timestep","text":"obs types supported data.table::.data.table(). date_var variable obs representing dates. timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days. exact Logical, TRUE``, checks differences exactly match timestep. FALSE``, checks sum differences modulo timestep equals zero. Default TRUE. check_nrow Logical, TRUE, checks least two observations. Default TRUE. FALSE, function returns invisibly one observation.","code":""},{"path":"https://package.epinowcast.org/reference/check_timestep.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check timestep — check_timestep","text":"function used side effect stopping check fails. check passes, function returns invisibly.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_timestep_by_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Check timestep by date — check_timestep_by_date","title":"Check timestep by date — check_timestep_by_date","text":"function verifies difference dates within date provided observations corresponds provided timestep. check performed report_date reference_date group obs.","code":""},{"path":"https://package.epinowcast.org/reference/check_timestep_by_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check timestep by date — check_timestep_by_date","text":"","code":"check_timestep_by_date(obs, timestep = \"day\", exact = TRUE)"},{"path":"https://package.epinowcast.org/reference/check_timestep_by_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check timestep by date — check_timestep_by_date","text":"obs types supported data.table::.data.table(). timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days. exact Logical, TRUE``, checks differences exactly match timestep. FALSE``, checks sum differences modulo timestep equals zero. Default TRUE.","code":""},{"path":"https://package.epinowcast.org/reference/check_timestep_by_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check timestep by date — check_timestep_by_date","text":"function used side effect checking timestep date obs. check passes dates, function returns invisibly. Otherwise, stops returns error message.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/check_timestep_by_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Check timestep by group — check_timestep_by_group","title":"Check timestep by group — check_timestep_by_group","text":"function verifies difference dates within group provided observations corresponds provided timestep. check performed specified date_var group obs.","code":""},{"path":"https://package.epinowcast.org/reference/check_timestep_by_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check timestep by group — check_timestep_by_group","text":"","code":"check_timestep_by_group(obs, date_var, timestep = \"day\", exact = TRUE)"},{"path":"https://package.epinowcast.org/reference/check_timestep_by_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check timestep by group — check_timestep_by_group","text":"obs types supported data.table::.data.table(). date_var variable obs representing dates. timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days. exact Logical, TRUE``, checks differences exactly match timestep. FALSE``, checks sum differences modulo timestep equals zero. Default TRUE.","code":""},{"path":"https://package.epinowcast.org/reference/check_timestep_by_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check timestep by group — check_timestep_by_group","text":"function used side effect checking timestep group obs. check passes groups, function returns invisibly. Otherwise, stops returns error message.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/coerce_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce Dates — coerce_date","title":"Coerce Dates — coerce_date","text":"Provides consistent coercion inputs IDate error handling","code":""},{"path":"https://package.epinowcast.org/reference/coerce_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce Dates — coerce_date","text":"","code":"coerce_date(dates = NULL)"},{"path":"https://package.epinowcast.org/reference/coerce_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce Dates — coerce_date","text":"dates vector-like input, function attempts coerce via data.table::.IDate(). Defaults NULL.","code":""},{"path":"https://package.epinowcast.org/reference/coerce_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce Dates — coerce_date","text":"IDate vector.","code":""},{"path":"https://package.epinowcast.org/reference/coerce_date.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Coerce Dates — coerce_date","text":"elements dates coerced, function result error, indicating indices coerced IDate. Internal methods epinowcast assume dates represented IDate.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/coerce_date.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce Dates — coerce_date","text":"","code":"# works coerce_date(c(\"2020-05-28\", \"2020-05-29\")) #> [1] \"2020-05-28\" \"2020-05-29\" # does not, indicates index 2 is problem tryCatch(   coerce_date(c(\"2020-05-28\", \"2020-o5-29\")),   error = function(e) {     print(e)   } ) #> <error/rlang_error> #> Error in `coerce_date()`: #> ! Failed to parse with `as.IDate`: 2020-o5-29 (indices 2). #> --- #> Backtrace: #>      ▆ #>   1. └─pkgdown::build_site_github_pages(new_process = FALSE, install = FALSE) #>   2.   └─pkgdown::build_site(...) #>   3.     └─pkgdown:::build_site_local(...) #>   4.       └─pkgdown::build_reference(...) #>   5.         └─purrr::map(...) #>   6.           └─purrr:::map_(\"list\", .x, .f, ..., .progress = .progress) #>   7.             ├─purrr:::with_indexed_errors(...) #>   8.             │ └─base::withCallingHandlers(...) #>   9.             ├─purrr:::call_with_cleanup(...) #>  10.             └─pkgdown (local) .f(.x[[i]], ...) #>  11.               ├─base::withCallingHandlers(...) #>  12.               └─pkgdown:::data_reference_topic(...) #>  13.                 └─pkgdown:::run_examples(...) #>  14.                   └─pkgdown:::highlight_examples(code, topic, env = env) #>  15.                     └─downlit::evaluate_and_highlight(...) #>  16.                       └─evaluate::evaluate(code, child_env(env), new_device = TRUE, output_handler = output_handler) #>  17.                         └─evaluate:::evaluate_call(...) #>  18.                           ├─evaluate (local) timing_fn(...) #>  19.                           ├─evaluate (local) handle(...) #>  20.                           │ └─base::try(f, silent = TRUE) #>  21.                           │   └─base::tryCatch(...) #>  22.                           │     └─base (local) tryCatchList(expr, classes, parentenv, handlers) #>  23.                           │       └─base (local) tryCatchOne(expr, names, parentenv, handlers[[1L]]) #>  24.                           │         └─base (local) doTryCatch(return(expr), name, parentenv, handler) #>  25.                           ├─base::withCallingHandlers(...) #>  26.                           ├─base::withVisible(...) #>  27.                           └─evaluate:::eval_with_user_handlers(expr, envir, enclos, user_handlers) #>  28.                             └─base::eval(expr, envir, enclos) #>  29.                               └─base::eval(expr, envir, enclos) #>  30.                                 ├─base::tryCatch(...) #>  31.                                 │ └─base (local) tryCatchList(expr, classes, parentenv, handlers) #>  32.                                 │   └─base (local) tryCatchOne(expr, names, parentenv, handlers[[1L]]) #>  33.                                 │     └─base (local) doTryCatch(return(expr), name, parentenv, handler) #>  34.                                 └─epinowcast::coerce_date(c(\"2020-05-28\", \"2020-o5-29\"))"},{"path":"https://package.epinowcast.org/reference/coerce_dt.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce data.tables — coerce_dt","title":"Coerce data.tables — coerce_dt","text":"Provides consistent coercion inputs data.table error handling, column checking, optional selection.","code":""},{"path":"https://package.epinowcast.org/reference/coerce_dt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce data.tables — coerce_dt","text":"","code":"coerce_dt(   data,   select = NULL,   required_cols = select,   forbidden_cols = NULL,   group = FALSE,   dates = FALSE,   copy = TRUE,   msg_required = \"The following columns are required: \",   msg_forbidden = \"The following columns are forbidden: \" )"},{"path":"https://package.epinowcast.org/reference/coerce_dt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce data.tables — coerce_dt","text":"data types supported data.table::.data.table() select optional character vector columns return; unchecked n.b. error include \".group\"; use group argument required_cols optional character vector required columns forbidden_cols optional character vector forbidden columns group logical; ensure presence .group column? dates logical; ensure presence report_date reference_date? TRUE (default), columns coerced data.table::.IDate(). copy logical; TRUE (default), new data.table returned msg_required character string; required_cols-related error message msg_forbidden character string; forbidden_cols-related error message","code":""},{"path":"https://package.epinowcast.org/reference/coerce_dt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce data.tables — coerce_dt","text":"data.table; returned object copy, unless copy = FALSE, case modifications made -place","code":""},{"path":"https://package.epinowcast.org/reference/coerce_dt.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Coerce data.tables — coerce_dt","text":"function provides single-point function getting \"local\" version data provided user, internally used data.table format. also enables selectively copying versus , well checking presence /absence various columns. intended address garbage user, generally attempt address garbage developer - e.g. asking overlapping required forbidden columns (though lead always-error condition).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/construct_re.html","id":null,"dir":"Reference","previous_headings":"","what":"Constructs random effect terms — construct_re","title":"Constructs random effect terms — construct_re","text":"Constructs random effect terms","code":""},{"path":"https://package.epinowcast.org/reference/construct_re.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Constructs random effect terms — construct_re","text":"","code":"construct_re(re, data)"},{"path":"https://package.epinowcast.org/reference/construct_re.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Constructs random effect terms — construct_re","text":"re random effect defined using re() takes random effects specified model formula using lme4 syntax. data data.frame observations used define random effects. Must contain variables specified re() term.","code":""},{"path":"https://package.epinowcast.org/reference/construct_re.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Constructs random effect terms — construct_re","text":"list containing transformed data (\"data\"), fixed effects terms (\"terms\")  data.frame specifying random effect structure terms (effects). Note specified random effect factor converted one.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/construct_re.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Constructs random effect terms — construct_re","text":"","code":"# Simple examples form <- epinowcast:::parse_formula(~ 1 + (1 | day_of_week)) data <- enw_example(\"prepr\")$metareference[[1]] random_effect <- re(form$random[[1]]) epinowcast:::construct_re(random_effect, data) #> $data #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-13      1       DE       00+     0     Tuesday     0     0     0 #>  2: 2021-07-14      1       DE       00+     0   Wednesday     1     0     0 #>  3: 2021-07-15      1       DE       00+     0    Thursday     2     0     0 #>  4: 2021-07-16      1       DE       00+     0      Friday     3     0     0 #>  5: 2021-07-17      1       DE       00+     0    Saturday     4     0     0 #>  6: 2021-07-18      1       DE       00+     0      Sunday     5     0     0 #>  7: 2021-07-19      1       DE       00+     0      Monday     6     0     0 #>  8: 2021-07-20      1       DE       00+     0     Tuesday     7     1     0 #>  9: 2021-07-21      1       DE       00+     0   Wednesday     8     1     0 #> 10: 2021-07-22      1       DE       00+     0    Thursday     9     1     0 #> 11: 2021-07-23      1       DE       00+     0      Friday    10     1     0 #> 12: 2021-07-24      1       DE       00+     0    Saturday    11     1     0 #> 13: 2021-07-25      1       DE       00+     0      Sunday    12     1     0 #> 14: 2021-07-26      1       DE       00+     0      Monday    13     1     0 #> 15: 2021-07-27      1       DE       00+     0     Tuesday    14     2     0 #> 16: 2021-07-28      1       DE       00+     0   Wednesday    15     2     0 #> 17: 2021-07-29      1       DE       00+     0    Thursday    16     2     0 #> 18: 2021-07-30      1       DE       00+     0      Friday    17     2     0 #> 19: 2021-07-31      1       DE       00+     0    Saturday    18     2     0 #> 20: 2021-08-01      1       DE       00+     0      Sunday    19     2     1 #> 21: 2021-08-02      1       DE       00+     0      Monday    20     2     1 #> 22: 2021-08-03      1       DE       00+     0     Tuesday    21     3     1 #> 23: 2021-08-04      1       DE       00+     0   Wednesday    22     3     1 #> 24: 2021-08-05      1       DE       00+     0    Thursday    23     3     1 #> 25: 2021-08-06      1       DE       00+     0      Friday    24     3     1 #> 26: 2021-08-07      1       DE       00+     0    Saturday    25     3     1 #> 27: 2021-08-08      1       DE       00+     0      Sunday    26     3     1 #> 28: 2021-08-09      1       DE       00+     0      Monday    27     3     1 #> 29: 2021-08-10      1       DE       00+     0     Tuesday    28     4     1 #> 30: 2021-08-11      1       DE       00+     0   Wednesday    29     4     1 #> 31: 2021-08-12      1       DE       00+     0    Thursday    30     4     1 #> 32: 2021-08-13      1       DE       00+     0      Friday    31     4     1 #> 33: 2021-08-14      1       DE       00+     0    Saturday    32     4     1 #> 34: 2021-08-15      1       DE       00+     0      Sunday    33     4     1 #> 35: 2021-08-16      1       DE       00+     0      Monday    34     4     1 #> 36: 2021-08-17      1       DE       00+     0     Tuesday    35     5     1 #> 37: 2021-08-18      1       DE       00+     0   Wednesday    36     5     1 #> 38: 2021-08-19      1       DE       00+     0    Thursday    37     5     1 #> 39: 2021-08-20      1       DE       00+     0      Friday    38     5     1 #> 40: 2021-08-21      1       DE       00+     0    Saturday    39     5     1 #> 41: 2021-08-22      1       DE       00+     0      Sunday    40     5     1 #>           date .group location age_group delay day_of_week   day  week month #>  #> $terms #> [1] \"day_of_week\" #>  #> $effects #>                 effects fixed day_of_week #>                  <char> <num>       <num> #> 1:    day_of_weekFriday     0           1 #> 2:    day_of_weekMonday     0           1 #> 3:  day_of_weekSaturday     0           1 #> 4:    day_of_weekSunday     0           1 #> 5:  day_of_weekThursday     0           1 #> 6:   day_of_weekTuesday     0           1 #> 7: day_of_weekWednesday     0           1 #>   # A more complex example form <- epinowcast:::parse_formula(   ~ 1 + disp + (1 + gear | cyl) + (0 + wt | am) ) random_effect <- re(form$random[[1]]) epinowcast:::construct_re(random_effect, mtcars) #> $data #>       mpg    cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb #>     <num> <fctr> <num> <num> <num> <num> <num> <num> <num> <num> <num> #>  1:  21.0      6 160.0   110  3.90 2.620 16.46     0     1     4     4 #>  2:  21.0      6 160.0   110  3.90 2.875 17.02     0     1     4     4 #>  3:  22.8      4 108.0    93  3.85 2.320 18.61     1     1     4     1 #>  4:  21.4      6 258.0   110  3.08 3.215 19.44     1     0     3     1 #>  5:  18.7      8 360.0   175  3.15 3.440 17.02     0     0     3     2 #>  6:  18.1      6 225.0   105  2.76 3.460 20.22     1     0     3     1 #>  7:  14.3      8 360.0   245  3.21 3.570 15.84     0     0     3     4 #>  8:  24.4      4 146.7    62  3.69 3.190 20.00     1     0     4     2 #>  9:  22.8      4 140.8    95  3.92 3.150 22.90     1     0     4     2 #> 10:  19.2      6 167.6   123  3.92 3.440 18.30     1     0     4     4 #> 11:  17.8      6 167.6   123  3.92 3.440 18.90     1     0     4     4 #> 12:  16.4      8 275.8   180  3.07 4.070 17.40     0     0     3     3 #> 13:  17.3      8 275.8   180  3.07 3.730 17.60     0     0     3     3 #> 14:  15.2      8 275.8   180  3.07 3.780 18.00     0     0     3     3 #> 15:  10.4      8 472.0   205  2.93 5.250 17.98     0     0     3     4 #> 16:  10.4      8 460.0   215  3.00 5.424 17.82     0     0     3     4 #> 17:  14.7      8 440.0   230  3.23 5.345 17.42     0     0     3     4 #> 18:  32.4      4  78.7    66  4.08 2.200 19.47     1     1     4     1 #> 19:  30.4      4  75.7    52  4.93 1.615 18.52     1     1     4     2 #> 20:  33.9      4  71.1    65  4.22 1.835 19.90     1     1     4     1 #> 21:  21.5      4 120.1    97  3.70 2.465 20.01     1     0     3     1 #> 22:  15.5      8 318.0   150  2.76 3.520 16.87     0     0     3     2 #> 23:  15.2      8 304.0   150  3.15 3.435 17.30     0     0     3     2 #> 24:  13.3      8 350.0   245  3.73 3.840 15.41     0     0     3     4 #> 25:  19.2      8 400.0   175  3.08 3.845 17.05     0     0     3     2 #> 26:  27.3      4  79.0    66  4.08 1.935 18.90     1     1     4     1 #> 27:  26.0      4 120.3    91  4.43 2.140 16.70     0     1     5     2 #> 28:  30.4      4  95.1   113  3.77 1.513 16.90     1     1     5     2 #> 29:  15.8      8 351.0   264  4.22 3.170 14.50     0     1     5     4 #> 30:  19.7      6 145.0   175  3.62 2.770 15.50     0     1     5     6 #> 31:  15.0      8 301.0   335  3.54 3.570 14.60     0     1     5     8 #> 32:  21.4      4 121.0   109  4.11 2.780 18.60     1     1     4     2 #>       mpg    cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb #>  #> $terms #> [1] \"cyl\"      \"gear:cyl\" #>  #> $effects #>      effects fixed   cyl gear__cyl #>       <char> <num> <num>     <num> #> 1:      cyl4     0     1         0 #> 2:      cyl6     0     1         0 #> 3:      cyl8     0     1         0 #> 4: cyl4:gear     0     0         1 #> 5: cyl6:gear     0     0         1 #> 6: cyl8:gear     0     0         1 #>   random_effect2 <- re(form$random[[2]]) epinowcast:::construct_re(random_effect2, mtcars) #> $data #>       mpg   cyl  disp    hp  drat    wt  qsec    vs     am  gear  carb #>     <num> <num> <num> <num> <num> <num> <num> <num> <fctr> <num> <num> #>  1:  21.0     6 160.0   110  3.90 2.620 16.46     0      1     4     4 #>  2:  21.0     6 160.0   110  3.90 2.875 17.02     0      1     4     4 #>  3:  22.8     4 108.0    93  3.85 2.320 18.61     1      1     4     1 #>  4:  21.4     6 258.0   110  3.08 3.215 19.44     1      0     3     1 #>  5:  18.7     8 360.0   175  3.15 3.440 17.02     0      0     3     2 #>  6:  18.1     6 225.0   105  2.76 3.460 20.22     1      0     3     1 #>  7:  14.3     8 360.0   245  3.21 3.570 15.84     0      0     3     4 #>  8:  24.4     4 146.7    62  3.69 3.190 20.00     1      0     4     2 #>  9:  22.8     4 140.8    95  3.92 3.150 22.90     1      0     4     2 #> 10:  19.2     6 167.6   123  3.92 3.440 18.30     1      0     4     4 #> 11:  17.8     6 167.6   123  3.92 3.440 18.90     1      0     4     4 #> 12:  16.4     8 275.8   180  3.07 4.070 17.40     0      0     3     3 #> 13:  17.3     8 275.8   180  3.07 3.730 17.60     0      0     3     3 #> 14:  15.2     8 275.8   180  3.07 3.780 18.00     0      0     3     3 #> 15:  10.4     8 472.0   205  2.93 5.250 17.98     0      0     3     4 #> 16:  10.4     8 460.0   215  3.00 5.424 17.82     0      0     3     4 #> 17:  14.7     8 440.0   230  3.23 5.345 17.42     0      0     3     4 #> 18:  32.4     4  78.7    66  4.08 2.200 19.47     1      1     4     1 #> 19:  30.4     4  75.7    52  4.93 1.615 18.52     1      1     4     2 #> 20:  33.9     4  71.1    65  4.22 1.835 19.90     1      1     4     1 #> 21:  21.5     4 120.1    97  3.70 2.465 20.01     1      0     3     1 #> 22:  15.5     8 318.0   150  2.76 3.520 16.87     0      0     3     2 #> 23:  15.2     8 304.0   150  3.15 3.435 17.30     0      0     3     2 #> 24:  13.3     8 350.0   245  3.73 3.840 15.41     0      0     3     4 #> 25:  19.2     8 400.0   175  3.08 3.845 17.05     0      0     3     2 #> 26:  27.3     4  79.0    66  4.08 1.935 18.90     1      1     4     1 #> 27:  26.0     4 120.3    91  4.43 2.140 16.70     0      1     5     2 #> 28:  30.4     4  95.1   113  3.77 1.513 16.90     1      1     5     2 #> 29:  15.8     8 351.0   264  4.22 3.170 14.50     0      1     5     4 #> 30:  19.7     6 145.0   175  3.62 2.770 15.50     0      1     5     6 #> 31:  15.0     8 301.0   335  3.54 3.570 14.60     0      1     5     8 #> 32:  21.4     4 121.0   109  4.11 2.780 18.60     1      1     4     2 #>       mpg   cyl  disp    hp  drat    wt  qsec    vs     am  gear  carb #>  #> $terms #> [1] \"wt:am\" #>  #> $effects #>    effects fixed wt__am #>     <char> <num>  <num> #> 1:  wt:am0     0      1 #> 2:  wt:am1     0      1 #>"},{"path":"https://package.epinowcast.org/reference/construct_rw.html","id":null,"dir":"Reference","previous_headings":"","what":"Constructs random walk terms — construct_rw","title":"Constructs random walk terms — construct_rw","text":"function takes random walks defined rw(), produces required additional variables (denoted using \"c\" prefix constructed using enw_add_cumulative_membership()), returns extended data.frame along new fixed effects random effect structure.","code":""},{"path":"https://package.epinowcast.org/reference/construct_rw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Constructs random walk terms — construct_rw","text":"","code":"construct_rw(rw, data)"},{"path":"https://package.epinowcast.org/reference/construct_rw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Constructs random walk terms — construct_rw","text":"rw random walk term defined rw(). data data.frame observations used define random walk term. Must contain time grouping variables defined rw() term specified.","code":""},{"path":"https://package.epinowcast.org/reference/construct_rw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Constructs random walk terms — construct_rw","text":"list containing following: data: input data.frame addition new variables required specified random walk. added using enw_add_cumulative_membership(). -terms: character vector new fixed effects terms add model formula. effects: data.frame describing random effect structure new effects.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/construct_rw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Constructs random walk terms — construct_rw","text":"","code":"data <- enw_example(\"preproc\")$metareference[[1]]  epinowcast:::construct_rw(rw(week), data) #> $data #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-13      1       DE       00+     0     Tuesday     0     0     0 #>  2: 2021-07-14      1       DE       00+     0   Wednesday     1     0     0 #>  3: 2021-07-15      1       DE       00+     0    Thursday     2     0     0 #>  4: 2021-07-16      1       DE       00+     0      Friday     3     0     0 #>  5: 2021-07-17      1       DE       00+     0    Saturday     4     0     0 #>  6: 2021-07-18      1       DE       00+     0      Sunday     5     0     0 #>  7: 2021-07-19      1       DE       00+     0      Monday     6     0     0 #>  8: 2021-07-20      1       DE       00+     0     Tuesday     7     1     0 #>  9: 2021-07-21      1       DE       00+     0   Wednesday     8     1     0 #> 10: 2021-07-22      1       DE       00+     0    Thursday     9     1     0 #> 11: 2021-07-23      1       DE       00+     0      Friday    10     1     0 #> 12: 2021-07-24      1       DE       00+     0    Saturday    11     1     0 #> 13: 2021-07-25      1       DE       00+     0      Sunday    12     1     0 #> 14: 2021-07-26      1       DE       00+     0      Monday    13     1     0 #> 15: 2021-07-27      1       DE       00+     0     Tuesday    14     2     0 #> 16: 2021-07-28      1       DE       00+     0   Wednesday    15     2     0 #> 17: 2021-07-29      1       DE       00+     0    Thursday    16     2     0 #> 18: 2021-07-30      1       DE       00+     0      Friday    17     2     0 #> 19: 2021-07-31      1       DE       00+     0    Saturday    18     2     0 #> 20: 2021-08-01      1       DE       00+     0      Sunday    19     2     1 #> 21: 2021-08-02      1       DE       00+     0      Monday    20     2     1 #> 22: 2021-08-03      1       DE       00+     0     Tuesday    21     3     1 #> 23: 2021-08-04      1       DE       00+     0   Wednesday    22     3     1 #> 24: 2021-08-05      1       DE       00+     0    Thursday    23     3     1 #> 25: 2021-08-06      1       DE       00+     0      Friday    24     3     1 #> 26: 2021-08-07      1       DE       00+     0    Saturday    25     3     1 #> 27: 2021-08-08      1       DE       00+     0      Sunday    26     3     1 #> 28: 2021-08-09      1       DE       00+     0      Monday    27     3     1 #> 29: 2021-08-10      1       DE       00+     0     Tuesday    28     4     1 #> 30: 2021-08-11      1       DE       00+     0   Wednesday    29     4     1 #> 31: 2021-08-12      1       DE       00+     0    Thursday    30     4     1 #> 32: 2021-08-13      1       DE       00+     0      Friday    31     4     1 #> 33: 2021-08-14      1       DE       00+     0    Saturday    32     4     1 #> 34: 2021-08-15      1       DE       00+     0      Sunday    33     4     1 #> 35: 2021-08-16      1       DE       00+     0      Monday    34     4     1 #> 36: 2021-08-17      1       DE       00+     0     Tuesday    35     5     1 #> 37: 2021-08-18      1       DE       00+     0   Wednesday    36     5     1 #> 38: 2021-08-19      1       DE       00+     0    Thursday    37     5     1 #> 39: 2021-08-20      1       DE       00+     0      Friday    38     5     1 #> 40: 2021-08-21      1       DE       00+     0    Saturday    39     5     1 #> 41: 2021-08-22      1       DE       00+     0      Sunday    40     5     1 #>           date .group location age_group delay day_of_week   day  week month #>     cweek1 cweek2 cweek3 cweek4 cweek5 #>      <num>  <num>  <num>  <num>  <num> #>  1:      0      0      0      0      0 #>  2:      0      0      0      0      0 #>  3:      0      0      0      0      0 #>  4:      0      0      0      0      0 #>  5:      0      0      0      0      0 #>  6:      0      0      0      0      0 #>  7:      0      0      0      0      0 #>  8:      1      0      0      0      0 #>  9:      1      0      0      0      0 #> 10:      1      0      0      0      0 #> 11:      1      0      0      0      0 #> 12:      1      0      0      0      0 #> 13:      1      0      0      0      0 #> 14:      1      0      0      0      0 #> 15:      1      1      0      0      0 #> 16:      1      1      0      0      0 #> 17:      1      1      0      0      0 #> 18:      1      1      0      0      0 #> 19:      1      1      0      0      0 #> 20:      1      1      0      0      0 #> 21:      1      1      0      0      0 #> 22:      1      1      1      0      0 #> 23:      1      1      1      0      0 #> 24:      1      1      1      0      0 #> 25:      1      1      1      0      0 #> 26:      1      1      1      0      0 #> 27:      1      1      1      0      0 #> 28:      1      1      1      0      0 #> 29:      1      1      1      1      0 #> 30:      1      1      1      1      0 #> 31:      1      1      1      1      0 #> 32:      1      1      1      1      0 #> 33:      1      1      1      1      0 #> 34:      1      1      1      1      0 #> 35:      1      1      1      1      0 #> 36:      1      1      1      1      1 #> 37:      1      1      1      1      1 #> 38:      1      1      1      1      1 #> 39:      1      1      1      1      1 #> 40:      1      1      1      1      1 #> 41:      1      1      1      1      1 #>     cweek1 cweek2 cweek3 cweek4 cweek5 #>  #> $terms #> [1] \"cweek1\" \"cweek2\" \"cweek3\" \"cweek4\" \"cweek5\" #>  #> $effects #>    effects fixed rw__week #>     <char> <num>    <num> #> 1:  cweek1     0        1 #> 2:  cweek2     0        1 #> 3:  cweek3     0        1 #> 4:  cweek4     0        1 #> 5:  cweek5     0        1 #>   epinowcast:::construct_rw(rw(week, day_of_week), data) #> $data #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-13      1       DE       00+     0     Tuesday     0     0     0 #>  2: 2021-07-14      1       DE       00+     0   Wednesday     1     0     0 #>  3: 2021-07-15      1       DE       00+     0    Thursday     2     0     0 #>  4: 2021-07-16      1       DE       00+     0      Friday     3     0     0 #>  5: 2021-07-17      1       DE       00+     0    Saturday     4     0     0 #>  6: 2021-07-18      1       DE       00+     0      Sunday     5     0     0 #>  7: 2021-07-19      1       DE       00+     0      Monday     6     0     0 #>  8: 2021-07-20      1       DE       00+     0     Tuesday     7     1     0 #>  9: 2021-07-21      1       DE       00+     0   Wednesday     8     1     0 #> 10: 2021-07-22      1       DE       00+     0    Thursday     9     1     0 #> 11: 2021-07-23      1       DE       00+     0      Friday    10     1     0 #> 12: 2021-07-24      1       DE       00+     0    Saturday    11     1     0 #> 13: 2021-07-25      1       DE       00+     0      Sunday    12     1     0 #> 14: 2021-07-26      1       DE       00+     0      Monday    13     1     0 #> 15: 2021-07-27      1       DE       00+     0     Tuesday    14     2     0 #> 16: 2021-07-28      1       DE       00+     0   Wednesday    15     2     0 #> 17: 2021-07-29      1       DE       00+     0    Thursday    16     2     0 #> 18: 2021-07-30      1       DE       00+     0      Friday    17     2     0 #> 19: 2021-07-31      1       DE       00+     0    Saturday    18     2     0 #> 20: 2021-08-01      1       DE       00+     0      Sunday    19     2     1 #> 21: 2021-08-02      1       DE       00+     0      Monday    20     2     1 #> 22: 2021-08-03      1       DE       00+     0     Tuesday    21     3     1 #> 23: 2021-08-04      1       DE       00+     0   Wednesday    22     3     1 #> 24: 2021-08-05      1       DE       00+     0    Thursday    23     3     1 #> 25: 2021-08-06      1       DE       00+     0      Friday    24     3     1 #> 26: 2021-08-07      1       DE       00+     0    Saturday    25     3     1 #> 27: 2021-08-08      1       DE       00+     0      Sunday    26     3     1 #> 28: 2021-08-09      1       DE       00+     0      Monday    27     3     1 #> 29: 2021-08-10      1       DE       00+     0     Tuesday    28     4     1 #> 30: 2021-08-11      1       DE       00+     0   Wednesday    29     4     1 #> 31: 2021-08-12      1       DE       00+     0    Thursday    30     4     1 #> 32: 2021-08-13      1       DE       00+     0      Friday    31     4     1 #> 33: 2021-08-14      1       DE       00+     0    Saturday    32     4     1 #> 34: 2021-08-15      1       DE       00+     0      Sunday    33     4     1 #> 35: 2021-08-16      1       DE       00+     0      Monday    34     4     1 #> 36: 2021-08-17      1       DE       00+     0     Tuesday    35     5     1 #> 37: 2021-08-18      1       DE       00+     0   Wednesday    36     5     1 #> 38: 2021-08-19      1       DE       00+     0    Thursday    37     5     1 #> 39: 2021-08-20      1       DE       00+     0      Friday    38     5     1 #> 40: 2021-08-21      1       DE       00+     0    Saturday    39     5     1 #> 41: 2021-08-22      1       DE       00+     0      Sunday    40     5     1 #>           date .group location age_group delay day_of_week   day  week month #>     cweek1 cweek2 cweek3 cweek4 cweek5 #>      <num>  <num>  <num>  <num>  <num> #>  1:      0      0      0      0      0 #>  2:      0      0      0      0      0 #>  3:      0      0      0      0      0 #>  4:      0      0      0      0      0 #>  5:      0      0      0      0      0 #>  6:      0      0      0      0      0 #>  7:      0      0      0      0      0 #>  8:      1      0      0      0      0 #>  9:      1      0      0      0      0 #> 10:      1      0      0      0      0 #> 11:      1      0      0      0      0 #> 12:      1      0      0      0      0 #> 13:      1      0      0      0      0 #> 14:      1      0      0      0      0 #> 15:      1      1      0      0      0 #> 16:      1      1      0      0      0 #> 17:      1      1      0      0      0 #> 18:      1      1      0      0      0 #> 19:      1      1      0      0      0 #> 20:      1      1      0      0      0 #> 21:      1      1      0      0      0 #> 22:      1      1      1      0      0 #> 23:      1      1      1      0      0 #> 24:      1      1      1      0      0 #> 25:      1      1      1      0      0 #> 26:      1      1      1      0      0 #> 27:      1      1      1      0      0 #> 28:      1      1      1      0      0 #> 29:      1      1      1      1      0 #> 30:      1      1      1      1      0 #> 31:      1      1      1      1      0 #> 32:      1      1      1      1      0 #> 33:      1      1      1      1      0 #> 34:      1      1      1      1      0 #> 35:      1      1      1      1      0 #> 36:      1      1      1      1      1 #> 37:      1      1      1      1      1 #> 38:      1      1      1      1      1 #> 39:      1      1      1      1      1 #> 40:      1      1      1      1      1 #> 41:      1      1      1      1      1 #>     cweek1 cweek2 cweek3 cweek4 cweek5 #>  #> $terms #> [1] \"day_of_week:cweek1\" \"day_of_week:cweek2\" \"day_of_week:cweek3\" #> [4] \"day_of_week:cweek4\" \"day_of_week:cweek5\" #>  #> $effects #>                         effects fixed rw__day_of_weekTuesday__week #>                          <char> <num>                        <num> #>  1:    day_of_weekFriday:cweek1     0                            0 #>  2:    day_of_weekMonday:cweek1     0                            0 #>  3:  day_of_weekSaturday:cweek1     0                            0 #>  4:    day_of_weekSunday:cweek1     0                            0 #>  5:  day_of_weekThursday:cweek1     0                            0 #>  6:   day_of_weekTuesday:cweek1     0                            1 #>  7: day_of_weekWednesday:cweek1     0                            0 #>  8:    day_of_weekFriday:cweek2     0                            0 #>  9:    day_of_weekMonday:cweek2     0                            0 #> 10:  day_of_weekSaturday:cweek2     0                            0 #> 11:    day_of_weekSunday:cweek2     0                            0 #> 12:  day_of_weekThursday:cweek2     0                            0 #> 13:   day_of_weekTuesday:cweek2     0                            1 #> 14: day_of_weekWednesday:cweek2     0                            0 #> 15:    day_of_weekFriday:cweek3     0                            0 #> 16:    day_of_weekMonday:cweek3     0                            0 #> 17:  day_of_weekSaturday:cweek3     0                            0 #> 18:    day_of_weekSunday:cweek3     0                            0 #> 19:  day_of_weekThursday:cweek3     0                            0 #> 20:   day_of_weekTuesday:cweek3     0                            1 #> 21: day_of_weekWednesday:cweek3     0                            0 #> 22:    day_of_weekFriday:cweek4     0                            0 #> 23:    day_of_weekMonday:cweek4     0                            0 #> 24:  day_of_weekSaturday:cweek4     0                            0 #> 25:    day_of_weekSunday:cweek4     0                            0 #> 26:  day_of_weekThursday:cweek4     0                            0 #> 27:   day_of_weekTuesday:cweek4     0                            1 #> 28: day_of_weekWednesday:cweek4     0                            0 #> 29:    day_of_weekFriday:cweek5     0                            0 #> 30:    day_of_weekMonday:cweek5     0                            0 #> 31:  day_of_weekSaturday:cweek5     0                            0 #> 32:    day_of_weekSunday:cweek5     0                            0 #> 33:  day_of_weekThursday:cweek5     0                            0 #> 34:   day_of_weekTuesday:cweek5     0                            1 #> 35: day_of_weekWednesday:cweek5     0                            0 #>                         effects fixed rw__day_of_weekTuesday__week #>     rw__day_of_weekWednesday__week rw__day_of_weekThursday__week #>                              <num>                         <num> #>  1:                              0                             0 #>  2:                              0                             0 #>  3:                              0                             0 #>  4:                              0                             0 #>  5:                              0                             1 #>  6:                              0                             0 #>  7:                              1                             0 #>  8:                              0                             0 #>  9:                              0                             0 #> 10:                              0                             0 #> 11:                              0                             0 #> 12:                              0                             1 #> 13:                              0                             0 #> 14:                              1                             0 #> 15:                              0                             0 #> 16:                              0                             0 #> 17:                              0                             0 #> 18:                              0                             0 #> 19:                              0                             1 #> 20:                              0                             0 #> 21:                              1                             0 #> 22:                              0                             0 #> 23:                              0                             0 #> 24:                              0                             0 #> 25:                              0                             0 #> 26:                              0                             1 #> 27:                              0                             0 #> 28:                              1                             0 #> 29:                              0                             0 #> 30:                              0                             0 #> 31:                              0                             0 #> 32:                              0                             0 #> 33:                              0                             1 #> 34:                              0                             0 #> 35:                              1                             0 #>     rw__day_of_weekWednesday__week rw__day_of_weekThursday__week #>     rw__day_of_weekFriday__week rw__day_of_weekSaturday__week #>                           <num>                         <num> #>  1:                           1                             0 #>  2:                           0                             0 #>  3:                           0                             1 #>  4:                           0                             0 #>  5:                           0                             0 #>  6:                           0                             0 #>  7:                           0                             0 #>  8:                           1                             0 #>  9:                           0                             0 #> 10:                           0                             1 #> 11:                           0                             0 #> 12:                           0                             0 #> 13:                           0                             0 #> 14:                           0                             0 #> 15:                           1                             0 #> 16:                           0                             0 #> 17:                           0                             1 #> 18:                           0                             0 #> 19:                           0                             0 #> 20:                           0                             0 #> 21:                           0                             0 #> 22:                           1                             0 #> 23:                           0                             0 #> 24:                           0                             1 #> 25:                           0                             0 #> 26:                           0                             0 #> 27:                           0                             0 #> 28:                           0                             0 #> 29:                           1                             0 #> 30:                           0                             0 #> 31:                           0                             1 #> 32:                           0                             0 #> 33:                           0                             0 #> 34:                           0                             0 #> 35:                           0                             0 #>     rw__day_of_weekFriday__week rw__day_of_weekSaturday__week #>     rw__day_of_weekSunday__week rw__day_of_weekMonday__week #>                           <num>                       <num> #>  1:                           0                           0 #>  2:                           0                           1 #>  3:                           0                           0 #>  4:                           1                           0 #>  5:                           0                           0 #>  6:                           0                           0 #>  7:                           0                           0 #>  8:                           0                           0 #>  9:                           0                           1 #> 10:                           0                           0 #> 11:                           1                           0 #> 12:                           0                           0 #> 13:                           0                           0 #> 14:                           0                           0 #> 15:                           0                           0 #> 16:                           0                           1 #> 17:                           0                           0 #> 18:                           1                           0 #> 19:                           0                           0 #> 20:                           0                           0 #> 21:                           0                           0 #> 22:                           0                           0 #> 23:                           0                           1 #> 24:                           0                           0 #> 25:                           1                           0 #> 26:                           0                           0 #> 27:                           0                           0 #> 28:                           0                           0 #> 29:                           0                           0 #> 30:                           0                           1 #> 31:                           0                           0 #> 32:                           1                           0 #> 33:                           0                           0 #> 34:                           0                           0 #> 35:                           0                           0 #>     rw__day_of_weekSunday__week rw__day_of_weekMonday__week #>"},{"path":"https://package.epinowcast.org/reference/convolution_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Construct a convolution matrix — convolution_matrix","title":"Construct a convolution matrix — convolution_matrix","text":"function allows construction convolution matrices can combined vector primary events produce vector secondary events example form renewal equation simulate reporting delays. Time-varying delays supported well distribution padding (allow use renewal equation like approaches).","code":""},{"path":"https://package.epinowcast.org/reference/convolution_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Construct a convolution matrix — convolution_matrix","text":"","code":"convolution_matrix(dist, t, include_partial = FALSE)"},{"path":"https://package.epinowcast.org/reference/convolution_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Construct a convolution matrix — convolution_matrix","text":"dist vector list vectors describing distribution convolved probability mass function. t Integer value indicating number time steps convolve . include_partial Logical, defaults FALSE. TRUE, convolution include partially complete secondary events.","code":""},{"path":"https://package.epinowcast.org/reference/convolution_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Construct a convolution matrix — convolution_matrix","text":"matrix column indicating primary event row indicating secondary event.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/convolution_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Construct a convolution matrix — convolution_matrix","text":"","code":"# Simple convolution matrix with a static distribution convolution_matrix(c(1, 2, 3), 10) #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] #>  [1,]    0    0    0    0    0    0    0    0    0     0 #>  [2,]    0    0    0    0    0    0    0    0    0     0 #>  [3,]    3    2    1    0    0    0    0    0    0     0 #>  [4,]    0    3    2    1    0    0    0    0    0     0 #>  [5,]    0    0    3    2    1    0    0    0    0     0 #>  [6,]    0    0    0    3    2    1    0    0    0     0 #>  [7,]    0    0    0    0    3    2    1    0    0     0 #>  [8,]    0    0    0    0    0    3    2    1    0     0 #>  [9,]    0    0    0    0    0    0    3    2    1     0 #> [10,]    0    0    0    0    0    0    0    3    2     1 # Include partially reported convolutions convolution_matrix(c(1, 2, 3), 10, include_partial = TRUE) #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] #>  [1,]    1    0    0    0    0    0    0    0    0     0 #>  [2,]    2    1    0    0    0    0    0    0    0     0 #>  [3,]    3    2    1    0    0    0    0    0    0     0 #>  [4,]    0    3    2    1    0    0    0    0    0     0 #>  [5,]    0    0    3    2    1    0    0    0    0     0 #>  [6,]    0    0    0    3    2    1    0    0    0     0 #>  [7,]    0    0    0    0    3    2    1    0    0     0 #>  [8,]    0    0    0    0    0    3    2    1    0     0 #>  [9,]    0    0    0    0    0    0    3    2    1     0 #> [10,]    0    0    0    0    0    0    0    3    2     1 # Use a list of distributions convolution_matrix(rep(list(c(1, 2, 3)), 10), 10) #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] #>  [1,]    0    0    0    0    0    0    0    0    0     0 #>  [2,]    0    0    0    0    0    0    0    0    0     0 #>  [3,]    3    2    1    0    0    0    0    0    0     0 #>  [4,]    0    3    2    1    0    0    0    0    0     0 #>  [5,]    0    0    3    2    1    0    0    0    0     0 #>  [6,]    0    0    0    3    2    1    0    0    0     0 #>  [7,]    0    0    0    0    3    2    1    0    0     0 #>  [8,]    0    0    0    0    0    3    2    1    0     0 #>  [9,]    0    0    0    0    0    0    3    2    1     0 #> [10,]    0    0    0    0    0    0    0    3    2     1 # Use a time-varying list of distributions convolution_matrix(c(rep(list(c(1, 2, 3)), 10), list(c(4, 5, 6))), 11) #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] #>  [1,]    0    0    0    0    0    0    0    0    0     0     0 #>  [2,]    0    0    0    0    0    0    0    0    0     0     0 #>  [3,]    3    2    1    0    0    0    0    0    0     0     0 #>  [4,]    0    3    2    1    0    0    0    0    0     0     0 #>  [5,]    0    0    3    2    1    0    0    0    0     0     0 #>  [6,]    0    0    0    3    2    1    0    0    0     0     0 #>  [7,]    0    0    0    0    3    2    1    0    0     0     0 #>  [8,]    0    0    0    0    0    3    2    1    0     0     0 #>  [9,]    0    0    0    0    0    0    3    2    1     0     0 #> [10,]    0    0    0    0    0    0    0    3    2     1     0 #> [11,]    0    0    0    0    0    0    0    0    3     2     4"},{"path":"https://package.epinowcast.org/reference/create_cache_dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Stan cache directory — create_cache_dir","title":"Create Stan cache directory — create_cache_dir","text":"function creates cache directory Stan models already exist. useful users want set persistent cache location want create directory manually.","code":""},{"path":"https://package.epinowcast.org/reference/create_cache_dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Stan cache directory — create_cache_dir","text":"","code":"create_cache_dir(path)"},{"path":"https://package.epinowcast.org/reference/create_cache_dir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Stan cache directory — create_cache_dir","text":"path valid filepath representing desired cache location. directory exist created.","code":""},{"path":"https://package.epinowcast.org/reference/create_cache_dir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Stan cache directory — create_cache_dir","text":"NULL","code":""},{"path":"https://package.epinowcast.org/reference/date_to_numeric_modulus.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","title":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","text":"function processes date column data.table, converting numeric representation computing modulus provided timestep.","code":""},{"path":"https://package.epinowcast.org/reference/date_to_numeric_modulus.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","text":"","code":"date_to_numeric_modulus(dt, date_column, timestep)"},{"path":"https://package.epinowcast.org/reference/date_to_numeric_modulus.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","text":"dt data.table. date_column character string representing name date column dt. timestep integer representing internal timestep.","code":""},{"path":"https://package.epinowcast.org/reference/date_to_numeric_modulus.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","text":"modified data.table two new columns: one numeric representation date minus minimum date another modulus timestep.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"Calculate cumulative reported cases incidence new reports","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"","code":"enw_add_cumulative(obs, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), new_confirm (incident observations reference report date). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"input data.frame new variable confirm.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"","code":"# Default reconstruct incidence dt <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] dt <- enw_add_incidence(dt) dt <- dt[, confirm := NULL] enw_add_cumulative(dt) #> Key: <reference_date, report_date> #>        reference_date location age_group report_date new_confirm delay confirm #>                <IDat>   <fctr>    <fctr>      <IDat>       <int> <int>   <int> #>     1:     2021-04-06       DE       00+  2021-04-06         149     0     149 #>     2:     2021-04-06       DE       00+  2021-04-07         140     1     289 #>     3:     2021-04-06       DE       00+  2021-04-08          61     2     350 #>     4:     2021-04-06       DE       00+  2021-04-09          52     3     402 #>     5:     2021-04-06       DE       00+  2021-04-10          36     4     438 #>    ---                                                                         #> 12911:     2021-10-18       DE       00+  2021-10-19          70     1     113 #> 12912:     2021-10-18       DE       00+  2021-10-20          29     2     142 #> 12913:     2021-10-19       DE       00+  2021-10-19         223     0     223 #> 12914:     2021-10-19       DE       00+  2021-10-20         164     1     387 #> 12915:     2021-10-20       DE       00+  2021-10-20         235     0     235  # Make use of maximum reported to calculate empirical daily reporting enw_add_cumulative(dt) #> Key: <reference_date, report_date> #>        reference_date location age_group report_date new_confirm delay confirm #>                <IDat>   <fctr>    <fctr>      <IDat>       <int> <int>   <int> #>     1:     2021-04-06       DE       00+  2021-04-06         149     0     149 #>     2:     2021-04-06       DE       00+  2021-04-07         140     1     289 #>     3:     2021-04-06       DE       00+  2021-04-08          61     2     350 #>     4:     2021-04-06       DE       00+  2021-04-09          52     3     402 #>     5:     2021-04-06       DE       00+  2021-04-10          36     4     438 #>    ---                                                                         #> 12911:     2021-10-18       DE       00+  2021-10-19          70     1     113 #> 12912:     2021-10-18       DE       00+  2021-10-20          29     2     142 #> 12913:     2021-10-19       DE       00+  2021-10-19         223     0     223 #> 12914:     2021-10-19       DE       00+  2021-10-20         164     1     387 #> 12915:     2021-10-20       DE       00+  2021-10-20         235     0     235"},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative_membership.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"function adds cumulative membership effect data frame. useful specifying models random walks (using rw()) features can used design matrix appropriate formula. Supports grouping via optional .group column. Note cumulative membership indexed start zero (.e. first observation assigned cumulative membership zero).","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative_membership.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"","code":"enw_add_cumulative_membership(metaobs, feature, copy = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative_membership.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"metaobs data.frame column named feature contains numeric vector values. feature name column metaobs contains numeric vector values. copy metaobs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative_membership.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"data.frame new columns cfeature$ contain cumulative membership effect value feature. example original feature week (numeric entries 1, 2, 3) new columns cweek1, cweek2, cweek3.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_add_cumulative_membership.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"","code":"metaobs <- data.frame(week = 1:2) enw_add_cumulative_membership(metaobs, \"week\") #>     week .group cweek2 #>    <int>  <num>  <num> #> 1:     1      1      0 #> 2:     2      1      1  metaobs <- data.frame(week = 1:3, .group = c(1,1,2)) enw_add_cumulative_membership(metaobs, \"week\") #>     week .group cweek2 cweek3 #>    <int>  <num>  <num>  <num> #> 1:     1      1      0      0 #> 2:     2      1      1      0 #> 3:     3      2      0      1"},{"path":"https://package.epinowcast.org/reference/enw_add_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a delay variable to the observations — enw_add_delay","title":"Add a delay variable to the observations — enw_add_delay","text":"helper function takes data.frame data.table observations adds delay (numeric, days) reference_date report_date observation.","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a delay variable to the observations — enw_add_delay","text":"","code":"enw_add_delay(obs, timestep = \"day\", copy = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_add_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a delay variable to the observations — enw_add_delay","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days. copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add a delay variable to the observations — enw_add_delay","text":"data.table observations new column delay.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_add_delay.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a delay variable to the observations — enw_add_delay","text":"","code":"obs <- data.frame(report_date = as.Date(\"2021-01-01\") + -2:0) obs$reference_date <- as.Date(\"2021-01-01\") enw_add_delay(obs) #>    report_date reference_date delay #>         <IDat>         <IDat> <num> #> 1:  2020-12-30     2021-01-01    -2 #> 2:  2020-12-31     2021-01-01    -1 #> 3:  2021-01-01     2021-01-01     0"},{"path":"https://package.epinowcast.org/reference/enw_add_incidence.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"Calculate incidence new reports cumulative reports","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_incidence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"","code":"enw_add_incidence(obs, set_negatives_to_zero = TRUE, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_add_incidence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). set_negatives_to_zero Logical, defaults TRUE. negative counts (calculated incidence observations) set zero? Currently downstream modelling support negative counts setting must TRUE intending use epinowcast(). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_incidence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"input data.frame new variable new_confirm. max_confirm present data.frame, proportion reported day (prop_reported) also added.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_add_incidence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"","code":"# Default reconstruct incidence dt <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] enw_add_incidence(dt) #> Key: <reference_date, report_date> #>        reference_date location age_group confirm report_date new_confirm delay #>                <IDat>   <fctr>    <fctr>   <int>      <IDat>       <int> <int> #>     1:     2021-04-06       DE       00+     149  2021-04-06         149     0 #>     2:     2021-04-06       DE       00+     289  2021-04-07         140     1 #>     3:     2021-04-06       DE       00+     350  2021-04-08          61     2 #>     4:     2021-04-06       DE       00+     402  2021-04-09          52     3 #>     5:     2021-04-06       DE       00+     438  2021-04-10          36     4 #>    ---                                                                         #> 12911:     2021-10-18       DE       00+     113  2021-10-19          70     1 #> 12912:     2021-10-18       DE       00+     142  2021-10-20          29     2 #> 12913:     2021-10-19       DE       00+     223  2021-10-19         223     0 #> 12914:     2021-10-19       DE       00+     387  2021-10-20         164     1 #> 12915:     2021-10-20       DE       00+     235  2021-10-20         235     0  # Make use of maximum reported to calculate empirical daily reporting dt <- enw_add_max_reported(dt) enw_add_incidence(dt) #> Key: <reference_date, report_date> #>        reference_date report_date .group max_confirm location age_group confirm #>                <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     1:     2021-04-06  2021-04-06      1         708       DE       00+     149 #>     2:     2021-04-06  2021-04-07      1         708       DE       00+     289 #>     3:     2021-04-06  2021-04-08      1         708       DE       00+     350 #>     4:     2021-04-06  2021-04-09      1         708       DE       00+     402 #>     5:     2021-04-06  2021-04-10      1         708       DE       00+     438 #>    ---                                                                          #> 12911:     2021-10-18  2021-10-19      1         142       DE       00+     113 #> 12912:     2021-10-18  2021-10-20      1         142       DE       00+     142 #> 12913:     2021-10-19  2021-10-19      1         387       DE       00+     223 #> 12914:     2021-10-19  2021-10-20      1         387       DE       00+     387 #> 12915:     2021-10-20  2021-10-20      1         235       DE       00+     235 #>        cum_prop_reported new_confirm delay prop_reported #>                    <num>       <int> <int>         <num> #>     1:         0.2104520         149     0    0.21045198 #>     2:         0.4081921         140     1    0.19774011 #>     3:         0.4943503          61     2    0.08615819 #>     4:         0.5677966          52     3    0.07344633 #>     5:         0.6186441          36     4    0.05084746 #>    ---                                                   #> 12911:         0.7957746          70     1    0.49295775 #> 12912:         1.0000000          29     2    0.20422535 #> 12913:         0.5762274         223     0    0.57622739 #> 12914:         1.0000000         164     1    0.42377261 #> 12915:         1.0000000         235     0    1.00000000"},{"path":"https://package.epinowcast.org/reference/enw_add_latest_obs_to_nowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"Add latest observations nowcast output. useful plotting nowcast latest observations.","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_latest_obs_to_nowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"","code":"enw_add_latest_obs_to_nowcast(nowcast, obs)"},{"path":"https://package.epinowcast.org/reference/enw_add_latest_obs_to_nowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"nowcast data.frame nowcast output enw_nowcast_summary(). obs observation data.frame containing reference_date columns length number rows posterior date observation date. used align posterior observations. easiest source data output latest output enw_preprocess_data() enw_latest_data().","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_latest_obs_to_nowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"data.frame nowcast output latest observations added.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_add_latest_obs_to_nowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"","code":"fit <- enw_example(\"nowcast\") obs <- enw_example(\"obs\") nowcast <- summary(fit, type = \"nowcast\") enw_add_latest_obs_to_nowcast(nowcast, obs) #> Key: <reference_date, .group> #>     reference_date .group latest_confirm confirm report_date max_confirm #>             <IDat>  <num>          <int>   <int>      <IDat>       <int> #>  1:     2021-08-03      1            156     149  2021-08-22         149 #>  2:     2021-08-04      1            183     166  2021-08-22         166 #>  3:     2021-08-05      1            147     133  2021-08-22         133 #>  4:     2021-08-06      1            155     137  2021-08-22         137 #>  5:     2021-08-07      1            159     139  2021-08-22         139 #>  6:     2021-08-08      1            119      97  2021-08-22          97 #>  7:     2021-08-09      1             65      58  2021-08-22          58 #>  8:     2021-08-10      1            204     175  2021-08-22         175 #>  9:     2021-08-11      1            275     233  2021-08-22         233 #> 10:     2021-08-12      1            273     237  2021-08-22         237 #> 11:     2021-08-13      1            270     204  2021-08-22         204 #> 12:     2021-08-14      1            262     189  2021-08-22         189 #> 13:     2021-08-15      1            192     125  2021-08-22         125 #> 14:     2021-08-16      1            140      98  2021-08-22          98 #> 15:     2021-08-17      1            323     242  2021-08-22         242 #> 16:     2021-08-18      1            409     223  2021-08-22         223 #> 17:     2021-08-19      1            370     202  2021-08-22         202 #> 18:     2021-08-20      1            361     171  2021-08-22         171 #> 19:     2021-08-21      1            339     112  2021-08-22         112 #> 20:     2021-08-22      1            258      45  2021-08-22          45 #>     reference_date .group latest_confirm confirm report_date max_confirm #>     location age_group cum_prop_reported delay prop_reported    mean median #>       <fctr>    <fctr>             <num> <num>         <num>   <num>  <num> #>  1:       DE       00+                 1    19   0.000000000 149.000    149 #>  2:       DE       00+                 1    18   0.000000000 167.426    167 #>  3:       DE       00+                 1    17   0.000000000 135.789    136 #>  4:       DE       00+                 1    16   0.000000000 141.288    141 #>  5:       DE       00+                 1    15   0.007194245 146.019    146 #>  6:       DE       00+                 1    14   0.000000000 103.853    104 #>  7:       DE       00+                 1    13   0.000000000  62.766     63 #>  8:       DE       00+                 1    12   0.000000000 185.035    185 #>  9:       DE       00+                 1    11   0.000000000 256.031    256 #> 10:       DE       00+                 1    10   0.004219409 267.692    267 #> 11:       DE       00+                 1     9   0.000000000 236.057    235 #> 12:       DE       00+                 1     8   0.015873016 231.407    231 #> 13:       DE       00+                 1     7   0.040000000 164.876    164 #> 14:       DE       00+                 1     6   0.010204082 128.858    128 #> 15:       DE       00+                 1     5   0.012396694 293.309    292 #> 16:       DE       00+                 1     4   0.017937220 293.042    292 #> 17:       DE       00+                 1     3   0.019801980 291.478    290 #> 18:       DE       00+                 1     2   0.070175439 293.178    291 #> 19:       DE       00+                 1     1   0.383928571 308.518    302 #> 20:       DE       00+                 1     0   1.000000000 375.644    363 #>     location age_group cum_prop_reported delay prop_reported    mean median #>             sd     mad     q5   q20    q35   q50    q65   q80    q95      rhat #>          <num>   <num>  <num> <num>  <num> <num>  <num> <num>  <num>     <num> #>  1:   0.000000  0.0000 149.00   149 149.00   149 149.00   149 149.00        NA #>  2:   1.318432  1.4826 166.00   166 167.00   167 168.00   168 170.00 0.9997778 #>  3:   1.854162  1.4826 133.00   134 135.00   136 136.00   137 139.00 1.0005878 #>  4:   2.378805  1.4826 138.00   139 140.00   141 142.00   143 146.00 1.0056729 #>  5:   3.079630  2.9652 141.00   143 145.00   146 147.00   148 152.00 1.0001025 #>  6:   2.969884  2.9652 100.00   101 102.65   104 105.00   106 109.00 0.9991163 #>  7:   2.432110  2.9652  59.00    61  62.00    63  63.00    65  67.00 1.0009067 #>  8:   3.847932  4.4478 179.00   182 183.00   185 186.00   188 192.00 1.0002531 #>  9:   6.498790  5.9304 246.00   251 253.00   256 258.00   261 268.00 0.9997137 #> 10:   7.713536  7.4130 256.00   261 265.00   267 270.00   274 282.00 1.0004951 #> 11:   8.508004  7.4130 223.00   229 233.00   235 239.00   243 251.00 0.9985724 #> 12:  10.083304 10.3782 216.00   222 227.00   231 234.00   240 250.00 1.0035756 #> 13:   9.848127 10.3782 150.00   157 160.00   164 168.00   173 181.00 1.0025186 #> 14:   8.134495  7.4130 117.00   122 125.00   128 131.00   135 143.00 1.0010009 #> 15:  11.938427 11.8608 276.00   283 288.00   292 297.00   303 315.00 1.0002316 #> 16:  15.799489 14.8260 268.00   280 286.00   292 299.00   306 320.00 1.0047058 #> 17:  21.108128 19.2738 260.00   274 282.00   290 298.35   308 330.00 1.0002334 #> 18:  29.440398 28.1694 250.00   269 280.00   291 301.00   316 344.00 0.9993186 #> 19:  51.151522 46.7019 239.00   267 286.00   302 322.00   343 399.10 0.9992178 #> 20: 103.424281 91.1799 233.95   292 327.00   363 397.00   447 565.05 0.9991666 #>             sd     mad     q5   q20    q35   q50    q65   q80    q95      rhat #>      ess_bulk  ess_tail #>         <num>     <num> #>  1:        NA        NA #>  2: 1003.5643  828.2026 #>  3:  991.0805  916.0962 #>  4: 1041.2029  872.9772 #>  5:  991.1639  885.1056 #>  6:  982.3833  917.3468 #>  7:  911.2098  793.6687 #>  8: 1004.7790  972.0392 #>  9: 1025.3311  936.5679 #> 10: 1040.1417 1008.8448 #> 11: 1201.4893  863.9704 #> 12:  751.4194  655.0188 #> 13:  927.9122  920.9413 #> 14: 1080.4014  964.2083 #> 15: 1159.2978  984.6276 #> 16: 1087.6045  957.9921 #> 17: 1129.6391  914.6275 #> 18: 1126.3831  903.3288 #> 19: 1328.2832  998.7573 #> 20: 1554.0485  999.3402 #>      ess_bulk  ess_tail"},{"path":"https://package.epinowcast.org/reference/enw_add_max_reported.html","id":null,"dir":"Reference","previous_headings":"","what":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"helper function adds maximum (sense latest observed) number reported cases reference_date computes proportion already reported cases combination reference_date report_date.","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_max_reported.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"","code":"enw_add_max_reported(obs, copy = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_add_max_reported.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_max_reported.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"data.table new columns max_confirm cum_prop_reported. max_confirm maximum number cases reported certain reference_date. cum_prop_reported proportion cases certain reference_date reported given report_day, relative cases far observed reference_date.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_add_max_reported.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"","code":"obs <- data.frame(report_date = as.Date(\"2021-01-01\") + 0:2) obs$reference_date <- as.Date(\"2021-01-01\") obs$confirm <- 1:3 enw_add_max_reported(obs) #>    reference_date report_date .group max_confirm confirm cum_prop_reported #>            <IDat>      <IDat>  <num>       <int>   <int>             <num> #> 1:     2021-01-01  2021-01-01      1           3       1         0.3333333 #> 2:     2021-01-01  2021-01-02      1           3       2         0.6666667 #> 3:     2021-01-01  2021-01-03      1           3       3         1.0000000"},{"path":"https://package.epinowcast.org/reference/enw_add_metaobs_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Add common metadata variables — enw_add_metaobs_features","title":"Add common metadata variables — enw_add_metaobs_features","text":"already present, annotates time series data metadata commonly used models: day week, days, weeks, months since start time series.","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_metaobs_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add common metadata variables — enw_add_metaobs_features","text":"","code":"enw_add_metaobs_features(   metaobs,   holidays = NULL,   holidays_to = \"Sunday\",   datecol = \"date\" )"},{"path":"https://package.epinowcast.org/reference/enw_add_metaobs_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add common metadata variables — enw_add_metaobs_features","text":"metaobs Raw data, coercible via data.table::.data.table(). Coerced object must Dates column corresponding datecol name. holidays (potentially empty) vector dates (input coercible ; see coerce_date()). day_of_week column set holidays_to dates. holidays_to character string assign holidays, holidays argument non-empty. Replaces day_of_week column value datecol column metaobs corresponding pertinent dates.","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_metaobs_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add common metadata variables — enw_add_metaobs_features","text":"copy metaobs input, additional columns: day_of_week, factor values output weekdays() possibly holiday_to distinct weekdays values day, numeric, 0 based start time series week, numeric, 0 based start time series month, numeric, 0 based start time series","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_metaobs_features.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add common metadata variables — enw_add_metaobs_features","text":"Effects models often need include covariates time-based features, day week (e.g. reflect different care-seeking /reporting behaviour). function called within enw_preprocess_data() systematically annotate metaobs commonly used metadata, already present. However, can also used directly data.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_add_metaobs_features.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add common metadata variables — enw_add_metaobs_features","text":"","code":"# make some example date nat_germany_hosp <- subset(   germany_covid19_hosp,   location == \"DE\" & age_group == \"80+\" )[1:40]  basemeta <- enw_add_metaobs_features(   nat_germany_hosp,   datecol = \"report_date\" ) basemeta #> Key: <report_date> #>     reference_date location age_group confirm report_date day_of_week   day #>             <IDat>   <fctr>    <fctr>   <int>      <Date>      <fctr> <num> #>  1:     2021-04-06       DE       80+      35  2021-04-06     Tuesday     0 #>  2:     2021-04-07       DE       80+      81  2021-04-07   Wednesday     1 #>  3:     2021-04-08       DE       80+      85  2021-04-08    Thursday     2 #>  4:     2021-04-09       DE       80+      62  2021-04-09      Friday     3 #>  5:     2021-04-10       DE       80+      45  2021-04-10    Saturday     4 #>  6:     2021-04-11       DE       80+      23  2021-04-11      Sunday     5 #>  7:     2021-04-12       DE       80+      33  2021-04-12      Monday     6 #>  8:     2021-04-13       DE       80+      66  2021-04-13     Tuesday     7 #>  9:     2021-04-14       DE       80+      50  2021-04-14   Wednesday     8 #> 10:     2021-04-15       DE       80+      66  2021-04-15    Thursday     9 #> 11:     2021-04-16       DE       80+      67  2021-04-16      Friday    10 #> 12:     2021-04-17       DE       80+      50  2021-04-17    Saturday    11 #> 13:     2021-04-18       DE       80+      33  2021-04-18      Sunday    12 #> 14:     2021-04-19       DE       80+      25  2021-04-19      Monday    13 #> 15:     2021-04-20       DE       80+      53  2021-04-20     Tuesday    14 #> 16:     2021-04-21       DE       80+      68  2021-04-21   Wednesday    15 #> 17:     2021-04-22       DE       80+      56  2021-04-22    Thursday    16 #> 18:     2021-04-23       DE       80+      61  2021-04-23      Friday    17 #> 19:     2021-04-24       DE       80+      45  2021-04-24    Saturday    18 #> 20:     2021-04-25       DE       80+      35  2021-04-25      Sunday    19 #> 21:     2021-04-26       DE       80+      17  2021-04-26      Monday    20 #> 22:     2021-04-27       DE       80+      50  2021-04-27     Tuesday    21 #> 23:     2021-04-28       DE       80+      56  2021-04-28   Wednesday    22 #> 24:     2021-04-29       DE       80+      44  2021-04-29    Thursday    23 #> 25:     2021-04-30       DE       80+      54  2021-04-30      Friday    24 #> 26:     2021-05-01       DE       80+      48  2021-05-01    Saturday    25 #> 27:     2021-05-02       DE       80+      27  2021-05-02      Sunday    26 #> 28:     2021-05-03       DE       80+      26  2021-05-03      Monday    27 #> 29:     2021-05-04       DE       80+      55  2021-05-04     Tuesday    28 #> 30:     2021-05-05       DE       80+      59  2021-05-05   Wednesday    29 #> 31:     2021-05-06       DE       80+      58  2021-05-06    Thursday    30 #> 32:     2021-05-07       DE       80+      48  2021-05-07      Friday    31 #> 33:     2021-05-08       DE       80+      34  2021-05-08    Saturday    32 #> 34:     2021-05-09       DE       80+      10  2021-05-09      Sunday    33 #> 35:     2021-05-10       DE       80+      24  2021-05-10      Monday    34 #> 36:     2021-05-11       DE       80+      49  2021-05-11     Tuesday    35 #> 37:     2021-05-12       DE       80+      42  2021-05-12   Wednesday    36 #> 38:     2021-05-13       DE       80+      39  2021-05-13    Thursday    37 #> 39:     2021-05-14       DE       80+      15  2021-05-14      Friday    38 #> 40:     2021-05-15       DE       80+      23  2021-05-15    Saturday    39 #>     reference_date location age_group confirm report_date day_of_week   day #>      week month #>     <num> <num> #>  1:     0     0 #>  2:     0     0 #>  3:     0     0 #>  4:     0     0 #>  5:     0     0 #>  6:     0     0 #>  7:     0     0 #>  8:     1     0 #>  9:     1     0 #> 10:     1     0 #> 11:     1     0 #> 12:     1     0 #> 13:     1     0 #> 14:     1     0 #> 15:     2     0 #> 16:     2     0 #> 17:     2     0 #> 18:     2     0 #> 19:     2     0 #> 20:     2     0 #> 21:     2     0 #> 22:     3     0 #> 23:     3     0 #> 24:     3     0 #> 25:     3     0 #> 26:     3     1 #> 27:     3     1 #> 28:     3     1 #> 29:     4     1 #> 30:     4     1 #> 31:     4     1 #> 32:     4     1 #> 33:     4     1 #> 34:     4     1 #> 35:     4     1 #> 36:     5     1 #> 37:     5     1 #> 38:     5     1 #> 39:     5     1 #> 40:     5     1 #>      week month  # with holidays - n.b.: holidays not found are silently ignored holidaymeta <- enw_add_metaobs_features(   nat_germany_hosp,   datecol = \"report_date\",   holidays = c(     \"2021-04-04\", \"2021-04-05\",     \"2021-05-01\", \"2021-05-13\",     \"2021-05-24\"   ),   holidays_to = \"Holiday\" ) holidaymeta #> Key: <report_date> #>     reference_date location age_group confirm report_date day_of_week   day #>             <IDat>   <fctr>    <fctr>   <int>      <Date>      <fctr> <num> #>  1:     2021-04-06       DE       80+      35  2021-04-06     Tuesday     0 #>  2:     2021-04-07       DE       80+      81  2021-04-07   Wednesday     1 #>  3:     2021-04-08       DE       80+      85  2021-04-08    Thursday     2 #>  4:     2021-04-09       DE       80+      62  2021-04-09      Friday     3 #>  5:     2021-04-10       DE       80+      45  2021-04-10    Saturday     4 #>  6:     2021-04-11       DE       80+      23  2021-04-11      Sunday     5 #>  7:     2021-04-12       DE       80+      33  2021-04-12      Monday     6 #>  8:     2021-04-13       DE       80+      66  2021-04-13     Tuesday     7 #>  9:     2021-04-14       DE       80+      50  2021-04-14   Wednesday     8 #> 10:     2021-04-15       DE       80+      66  2021-04-15    Thursday     9 #> 11:     2021-04-16       DE       80+      67  2021-04-16      Friday    10 #> 12:     2021-04-17       DE       80+      50  2021-04-17    Saturday    11 #> 13:     2021-04-18       DE       80+      33  2021-04-18      Sunday    12 #> 14:     2021-04-19       DE       80+      25  2021-04-19      Monday    13 #> 15:     2021-04-20       DE       80+      53  2021-04-20     Tuesday    14 #> 16:     2021-04-21       DE       80+      68  2021-04-21   Wednesday    15 #> 17:     2021-04-22       DE       80+      56  2021-04-22    Thursday    16 #> 18:     2021-04-23       DE       80+      61  2021-04-23      Friday    17 #> 19:     2021-04-24       DE       80+      45  2021-04-24    Saturday    18 #> 20:     2021-04-25       DE       80+      35  2021-04-25      Sunday    19 #> 21:     2021-04-26       DE       80+      17  2021-04-26      Monday    20 #> 22:     2021-04-27       DE       80+      50  2021-04-27     Tuesday    21 #> 23:     2021-04-28       DE       80+      56  2021-04-28   Wednesday    22 #> 24:     2021-04-29       DE       80+      44  2021-04-29    Thursday    23 #> 25:     2021-04-30       DE       80+      54  2021-04-30      Friday    24 #> 26:     2021-05-01       DE       80+      48  2021-05-01     Holiday    25 #> 27:     2021-05-02       DE       80+      27  2021-05-02      Sunday    26 #> 28:     2021-05-03       DE       80+      26  2021-05-03      Monday    27 #> 29:     2021-05-04       DE       80+      55  2021-05-04     Tuesday    28 #> 30:     2021-05-05       DE       80+      59  2021-05-05   Wednesday    29 #> 31:     2021-05-06       DE       80+      58  2021-05-06    Thursday    30 #> 32:     2021-05-07       DE       80+      48  2021-05-07      Friday    31 #> 33:     2021-05-08       DE       80+      34  2021-05-08    Saturday    32 #> 34:     2021-05-09       DE       80+      10  2021-05-09      Sunday    33 #> 35:     2021-05-10       DE       80+      24  2021-05-10      Monday    34 #> 36:     2021-05-11       DE       80+      49  2021-05-11     Tuesday    35 #> 37:     2021-05-12       DE       80+      42  2021-05-12   Wednesday    36 #> 38:     2021-05-13       DE       80+      39  2021-05-13     Holiday    37 #> 39:     2021-05-14       DE       80+      15  2021-05-14      Friday    38 #> 40:     2021-05-15       DE       80+      23  2021-05-15    Saturday    39 #>     reference_date location age_group confirm report_date day_of_week   day #>      week month #>     <num> <num> #>  1:     0     0 #>  2:     0     0 #>  3:     0     0 #>  4:     0     0 #>  5:     0     0 #>  6:     0     0 #>  7:     0     0 #>  8:     1     0 #>  9:     1     0 #> 10:     1     0 #> 11:     1     0 #> 12:     1     0 #> 13:     1     0 #> 14:     1     0 #> 15:     2     0 #> 16:     2     0 #> 17:     2     0 #> 18:     2     0 #> 19:     2     0 #> 20:     2     0 #> 21:     2     0 #> 22:     3     0 #> 23:     3     0 #> 24:     3     0 #> 25:     3     0 #> 26:     3     1 #> 27:     3     1 #> 28:     3     1 #> 29:     4     1 #> 30:     4     1 #> 31:     4     1 #> 32:     4     1 #> 33:     4     1 #> 34:     4     1 #> 35:     4     1 #> 36:     5     1 #> 37:     5     1 #> 38:     5     1 #> 39:     5     1 #> 40:     5     1 #>      week month subset(holidaymeta, day_of_week == \"Holiday\") #> Key: <report_date> #>    reference_date location age_group confirm report_date day_of_week   day #>            <IDat>   <fctr>    <fctr>   <int>      <Date>      <fctr> <num> #> 1:     2021-05-01       DE       80+      48  2021-05-01     Holiday    25 #> 2:     2021-05-13       DE       80+      39  2021-05-13     Holiday    37 #>     week month #>    <num> <num> #> 1:     3     1 #> 2:     5     1"},{"path":"https://package.epinowcast.org/reference/enw_add_pooling_effect.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a pooling effect to model design metadata — enw_add_pooling_effect","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"function adds pooling effect metadata returned enw_effects_metadata(). updating fixed column 0 effects match string argument adding new column var_name 1 effects match string argument 0 otherwise.","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_pooling_effect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"","code":"enw_add_pooling_effect(effects, var_name = \"sd\", finder_fn = startsWith, ...)"},{"path":"https://package.epinowcast.org/reference/enw_add_pooling_effect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"effects data.table following columns: effects: name effect fixed: logical indicating whether effect fixed (1) random (0). output enw_effects_metadata(). var_name name new column added effects data.table. column 1 effects match string 0 otherwise. Defaults 'sd'. finder_fn function used find effects match string. Defaults startsWith(). can function takes character first argument (effects$effects column) arguments ... returns logical vector indicating whether effects matched. ... Additional arguments finder_fn. E.g. finder_fn = startsWith default, prefix = \"somestring\".","code":""},{"path":"https://package.epinowcast.org/reference/enw_add_pooling_effect.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"data.table following columns: effects: name effect fixed: logical indicating whether effect fixed (1) random (0). Argument supplied var_name: logical indicating whether effect pooled (1) (0).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_add_pooling_effect.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"","code":"data <- data.frame(a = 1:3, b = as.character(1:3), c = c(1,1,2)) design <- enw_design(a ~ b + c, data)$design effects <- enw_effects_metadata(design) enw_add_pooling_effect(effects, prefix = \"b\") #>    effects fixed    sd #>     <char> <num> <num> #> 1:      b2     0     1 #> 2:      b3     0     1 #> 3:       c     1     0"},{"path":"https://package.epinowcast.org/reference/enw_aggregate_cumulative.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"function aggregates observations specified timestep, ensuring alignment day week report reference dates.  useful aggregating data weekly timestep, example may desirable testing using weekly timestep concerned runtime. Note start timestep determined min_date + single timestep (.e. first timestep \"2022-10-23\" minimum reference date \"2022-10-16\").","code":""},{"path":"https://package.epinowcast.org/reference/enw_aggregate_cumulative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"","code":"enw_aggregate_cumulative(   obs,   timestep = \"day\",   by = NULL,   min_reference_date = min(obs$reference_date, na.rm = TRUE),   copy = TRUE )"},{"path":"https://package.epinowcast.org/reference/enw_aggregate_cumulative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"obs object coercible data.table (data.frame) must new_confirm numeric column, report_date reference_date date columns. input must timestep day complete. See enw_complete_dates() information. NA values present confirm column set zero aggregation may desirable missingness meaningful. timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days. character vector variables also aggregate (.e. well using reference_date report_date). supplied function aggregate just reference_date report_date. min_reference_date minimum reference date start aggregation . Note timestep start minimum reference date + single time step (.e. first timestep \"2022-10-23\" minimum reference date \"2022-10-16\"). default minimum reference date obs object. sensible values minimum report date obs object + 1 day reporting already weekly wish ensure timestep output matches reporting timestep. copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/reference/enw_aggregate_cumulative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"data.table aggregated observations.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_aggregate_cumulative.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"","code":"nat_hosp <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] enw_aggregate_cumulative(nat_hosp, timestep = \"week\") #>      reference_date location age_group confirm report_date #>              <IDat>   <fctr>    <fctr>   <int>      <IDat> #>   1:     2021-04-12       DE       00+    3505  2021-04-12 #>   2:     2021-04-12       DE       00+    5276  2021-04-19 #>   3:     2021-04-12       DE       00+    5993  2021-04-26 #>   4:     2021-04-12       DE       00+    6362  2021-05-03 #>   5:     2021-04-12       DE       00+    6594  2021-05-10 #>  ---                                                       #> 266:     2021-10-04       DE       00+    2091  2021-10-11 #> 267:     2021-10-04       DE       00+    2346  2021-10-18 #> 268:     2021-10-11       DE       00+    1312  2021-10-11 #> 269:     2021-10-11       DE       00+    2163  2021-10-18 #> 270:     2021-10-18       DE       00+    1597  2021-10-18"},{"path":"https://package.epinowcast.org/reference/enw_assign_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Assign a group to each row of a data.table — enw_assign_group","title":"Assign a group to each row of a data.table — enw_assign_group","text":"Assign group row data.table. specified, unique combination columns assigned unique group. specified, rows assigned group.","code":""},{"path":"https://package.epinowcast.org/reference/enw_assign_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assign a group to each row of a data.table — enw_assign_group","text":"","code":"enw_assign_group(obs, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_assign_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assign a group to each row of a data.table — enw_assign_group","text":"obs data.table data.frame without .group column. character vector column names group . Defaults empty vector. copy logical; make copy (default) obs modify place?","code":""},{"path":"https://package.epinowcast.org/reference/enw_assign_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assign a group to each row of a data.table — enw_assign_group","text":"data.table .group column added ordered .group existing key obs.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_assign_group.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assign a group to each row of a data.table — enw_assign_group","text":"","code":"obs <- data.frame(x = 1:3, y = 1:3) enw_assign_group(obs) #> Key: <.group> #>        x     y .group #>    <int> <int>  <num> #> 1:     1     1      1 #> 2:     2     2      1 #> 3:     3     3      1 enw_assign_group(obs, by = \"x\") #> Key: <.group> #>        x     y .group #>    <int> <int>  <int> #> 1:     1     1      1 #> 2:     2     2      2 #> 3:     3     3      3"},{"path":"https://package.epinowcast.org/reference/enw_complete_dates.html","id":null,"dir":"Reference","previous_headings":"","what":"Complete missing reference and report dates — enw_complete_dates","title":"Complete missing reference and report dates — enw_complete_dates","text":"Ensures reference report dates present groups based maximum minimum dates found data. function may use users preprocessing data. general features may consider using grouping variables covariates need included variable.","code":""},{"path":"https://package.epinowcast.org/reference/enw_complete_dates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Complete missing reference and report dates — enw_complete_dates","text":"","code":"enw_complete_dates(   obs,   by = NULL,   max_delay,   min_date = min(obs$reference_date, na.rm = TRUE),   max_date = max(obs$report_date, na.rm = TRUE),   timestep = \"day\",   missing_reference = TRUE,   completion_beyond_max_report = FALSE,   flag_observation = FALSE )"},{"path":"https://package.epinowcast.org/reference/enw_complete_dates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Complete missing reference and report dates — enw_complete_dates","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling max_delay maximum number days model delay distribution. Must integer greater equal 1. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Consider delays realistic application, doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 days (.e. max_delay 1 corresponds delay). can use check_max_delay() check coverage delay distribution different maximum delays. min_date minimum date include data. Defaults minimum reference date found data. max_date maximum date include data. Defaults maximum report date found data. timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days. missing_reference Logical, entries cases missing reference date completed well?, Default: TRUE completion_beyond_max_report Logical, entries completed beyond maximum date found data? Default: FALSE flag_observation Logical, observations imputed missing flagged observed?. Makes use enw_flag_observed_observations() add .observed logical vector indicates observations imputed. vector can passed observation_indicator argument enw_obs() control observations used likelihood. Default: FALSE","code":""},{"path":"https://package.epinowcast.org/reference/enw_complete_dates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Complete missing reference and report dates — enw_complete_dates","text":"data.table completed entries combinations reference dates, groups possible report dates.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_complete_dates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Complete missing reference and report dates — enw_complete_dates","text":"","code":"obs <- data.frame(   report_date = c(\"2021-10-01\", \"2021-10-03\"), reference_date = \"2021-10-01\",   confirm = 1 ) enw_complete_dates(obs) #> Key: <reference_date, report_date> #>    report_date reference_date confirm #>         <IDat>         <IDat>   <num> #> 1:  2021-10-01           <NA>       0 #> 2:  2021-10-02           <NA>       0 #> 3:  2021-10-03           <NA>       0 #> 4:  2021-10-01     2021-10-01       1 #> 5:  2021-10-02     2021-10-01       1 #> 6:  2021-10-03     2021-10-01       1 #> 7:  2021-10-02     2021-10-02       0 #> 8:  2021-10-03     2021-10-02       0 #> 9:  2021-10-03     2021-10-03       0  # Allow completion beyond the maximum date found in the data enw_complete_dates(obs, completion_beyond_max_report = TRUE, max_delay = 10) #> Key: <reference_date, report_date> #>     report_date reference_date confirm #>          <IDat>         <IDat>   <num> #>  1:  2021-10-01           <NA>       0 #>  2:  2021-10-02           <NA>       0 #>  3:  2021-10-03           <NA>       0 #>  4:  2021-10-01     2021-10-01       1 #>  5:  2021-10-02     2021-10-01       1 #>  6:  2021-10-03     2021-10-01       1 #>  7:  2021-10-04     2021-10-01       1 #>  8:  2021-10-05     2021-10-01       1 #>  9:  2021-10-06     2021-10-01       1 #> 10:  2021-10-07     2021-10-01       1 #> 11:  2021-10-08     2021-10-01       1 #> 12:  2021-10-09     2021-10-01       1 #> 13:  2021-10-10     2021-10-01       1 #> 14:  2021-10-11     2021-10-01       1 #> 15:  2021-10-02     2021-10-02       0 #> 16:  2021-10-03     2021-10-02       0 #> 17:  2021-10-04     2021-10-02       0 #> 18:  2021-10-05     2021-10-02       0 #> 19:  2021-10-06     2021-10-02       0 #> 20:  2021-10-07     2021-10-02       0 #> 21:  2021-10-08     2021-10-02       0 #> 22:  2021-10-09     2021-10-02       0 #> 23:  2021-10-10     2021-10-02       0 #> 24:  2021-10-11     2021-10-02       0 #> 25:  2021-10-12     2021-10-02       0 #> 26:  2021-10-03     2021-10-03       0 #> 27:  2021-10-04     2021-10-03       0 #> 28:  2021-10-05     2021-10-03       0 #> 29:  2021-10-06     2021-10-03       0 #> 30:  2021-10-07     2021-10-03       0 #> 31:  2021-10-08     2021-10-03       0 #> 32:  2021-10-09     2021-10-03       0 #> 33:  2021-10-10     2021-10-03       0 #> 34:  2021-10-11     2021-10-03       0 #> 35:  2021-10-12     2021-10-03       0 #> 36:  2021-10-13     2021-10-03       0 #>     report_date reference_date confirm"},{"path":"https://package.epinowcast.org/reference/enw_construct_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Construct preprocessed data — enw_construct_data","title":"Construct preprocessed data — enw_construct_data","text":"function used internally enw_preprocess_data() combine various pieces processed observed data single object. exposed user order allow modular data preprocessing though currently recommended. See documentation code enw_preprocess_data() expected inputs.","code":""},{"path":"https://package.epinowcast.org/reference/enw_construct_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Construct preprocessed data — enw_construct_data","text":"","code":"enw_construct_data(   obs,   new_confirm,   latest,   missing_reference,   reporting_triangle,   metareport,   metareference,   metadelay,   max_delay,   timestep,   by )"},{"path":"https://package.epinowcast.org/reference/enw_construct_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Construct preprocessed data — enw_construct_data","text":"obs Observations addition empirical reporting proportions restricted specified maximum delay. new_confirm Incidence notifications reference report date. Empirical reporting distributions also added. latest latest available observations. missing_reference data.frame reported observations missing reference date. reporting_triangle Incident observations report reference date standard reporting triangle matrix format. metareport Metadata report dates. metareference Metadata reference dates derived observations. metadelay Metadata reporting delays produced using enw_metadata_delay(). max_delay Maximum delay modelled epinowcast. timestep timestep used process model (.e. reference date model). can string (\"day\", \"week\", \"month\") numeric whole number representing number days. data timestep may wish make use enw_aggregate_cumulative() aggregate data desired timestep. character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling","code":""},{"path":"https://package.epinowcast.org/reference/enw_construct_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Construct preprocessed data — enw_construct_data","text":"data.table containing processed observations series nested data.frames well variables containing metadata. : obs: (observations addition empirical reporting proportions restricted specified maximum delay). new_confirm: Incidence notifications reference report date. Empirical reporting distributions also added. latest: latest available observations. missing_reference: Observations missing reference dates. reporting_triangle: Incident observations report reference date standard reporting triangle matrix format. metareference: Metadata reference dates derived observations. metrareport: Metadata report dates. metadelay: Metadata reporting delays produced using enw_metadata_delay(). max_delay: Maximum delay modelled epinowcast. time: Numeric, number timepoints data. snapshots: Numeric, number available data snapshots use nowcasting. groups: Numeric, Number groups/strata supplied observations (set using ). max_date: maximum available report date.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_construct_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Construct preprocessed data — enw_construct_data","text":"","code":"pobs <- enw_example(\"preprocessed\") enw_construct_data(   obs = pobs$obs[[1]],   new_confirm = pobs$new_confirm[[1]],   latest = pobs$latest[[1]],   missing_reference = pobs$missing_reference[[1]],   reporting_triangle = pobs$reporting_triangle[[1]],   metareport = pobs$metareport[[1]],   metareference = pobs$metareference[[1]],   metadelay = pobs$metadelay[[1]],   max_delay = pobs$max_delay,   timestep = pobs$timestep[[1]],   by = c() ) #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[671x9]> <data.table[630x11]> <data.table[41x10]> #>     missing_reference  reporting_triangle      metareference #>                <list>              <list>             <list> #> 1: <data.table[41x6]> <data.table[41x22]> <data.table[41x9]> #>             metareport          metadelay max_delay  time snapshots     by #>                 <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[60x12]> <data.table[20x5]>        20    41        41        #>    groups   max_date timestep #>     <int>     <IDat>   <char> #> 1:      1 2021-08-22      day"},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_cumulative_to_incidence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate incidence of new reports from cumulative reports — enw_cumulative_to_incidence","text":"","code":"enw_cumulative_to_incidence(obs, set_negatives_to_zero = TRUE, by = NULL)"},{"path":"https://package.epinowcast.org/reference/enw_cumulative_to_incidence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate incidence of new reports from cumulative reports — enw_cumulative_to_incidence","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). set_negatives_to_zero Logical, defaults TRUE. negative counts (calculated incidence observations) set zero. Currently downstream modelling support negative counts setting must TRUE intending use epinowcast(). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling","code":""},{"path":"https://package.epinowcast.org/reference/enw_cumulative_to_incidence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate incidence of new reports from cumulative reports — enw_cumulative_to_incidence","text":"input data.frame new variable new_confirm. max_confirm present data.frame proportion reported day (prop_reported) also added.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_cumulative_to_incidence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate incidence of new reports from cumulative reports — enw_cumulative_to_incidence","text":"","code":"# Default reconstruct incidence dt <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] enw_add_incidence(dt) #> Key: <reference_date, report_date> #>        reference_date location age_group confirm report_date new_confirm delay #>                <IDat>   <fctr>    <fctr>   <int>      <IDat>       <int> <int> #>     1:     2021-04-06       DE       00+     149  2021-04-06         149     0 #>     2:     2021-04-06       DE       00+     289  2021-04-07         140     1 #>     3:     2021-04-06       DE       00+     350  2021-04-08          61     2 #>     4:     2021-04-06       DE       00+     402  2021-04-09          52     3 #>     5:     2021-04-06       DE       00+     438  2021-04-10          36     4 #>    ---                                                                         #> 12911:     2021-10-18       DE       00+     113  2021-10-19          70     1 #> 12912:     2021-10-18       DE       00+     142  2021-10-20          29     2 #> 12913:     2021-10-19       DE       00+     223  2021-10-19         223     0 #> 12914:     2021-10-19       DE       00+     387  2021-10-20         164     1 #> 12915:     2021-10-20       DE       00+     235  2021-10-20         235     0  # Make use of maximum reported to calculate empirical daily reporting dt <- enw_add_max_reported(dt) enw_add_incidence(dt) #> Key: <reference_date, report_date> #>        reference_date report_date .group max_confirm location age_group confirm #>                <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     1:     2021-04-06  2021-04-06      1         708       DE       00+     149 #>     2:     2021-04-06  2021-04-07      1         708       DE       00+     289 #>     3:     2021-04-06  2021-04-08      1         708       DE       00+     350 #>     4:     2021-04-06  2021-04-09      1         708       DE       00+     402 #>     5:     2021-04-06  2021-04-10      1         708       DE       00+     438 #>    ---                                                                          #> 12911:     2021-10-18  2021-10-19      1         142       DE       00+     113 #> 12912:     2021-10-18  2021-10-20      1         142       DE       00+     142 #> 12913:     2021-10-19  2021-10-19      1         387       DE       00+     223 #> 12914:     2021-10-19  2021-10-20      1         387       DE       00+     387 #> 12915:     2021-10-20  2021-10-20      1         235       DE       00+     235 #>        cum_prop_reported new_confirm delay prop_reported #>                    <num>       <int> <int>         <num> #>     1:         0.2104520         149     0    0.21045198 #>     2:         0.4081921         140     1    0.19774011 #>     3:         0.4943503          61     2    0.08615819 #>     4:         0.5677966          52     3    0.07344633 #>     5:         0.6186441          36     4    0.05084746 #>    ---                                                   #> 12911:         0.7957746          70     1    0.49295775 #> 12912:         1.0000000          29     2    0.20422535 #> 12913:         0.5762274         223     0    0.57622739 #> 12914:         1.0000000         164     1    0.42377261 #> 12915:         1.0000000         235     0    1.00000000"},{"path":"https://package.epinowcast.org/reference/enw_delay_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate reporting delay metadata for a given maximum delay — enw_delay_metadata","title":"Calculate reporting delay metadata for a given maximum delay — enw_delay_metadata","text":"Calculate delay metadata based supplied maximum delay independent metadata date indexing. data meant used conjunction metadata date reference. Users can build additional features  data.frame  regenerate using function output enw_preprocess_data(). enw_delay_metadata() renamed enw_metadata_delay() better consistency.","code":""},{"path":"https://package.epinowcast.org/reference/enw_delay_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate reporting delay metadata for a given maximum delay — enw_delay_metadata","text":"","code":"enw_delay_metadata(max_delay = 20, breaks = 4)"},{"path":"https://package.epinowcast.org/reference/enw_delay_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate reporting delay metadata for a given maximum delay — enw_delay_metadata","text":"max_delay maximum number days model delay distribution. Must integer greater equal 1. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Consider delays realistic application, doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 days (.e. max_delay 1 corresponds delay). can use check_max_delay() check coverage delay distribution different maximum delays. breaks Numeric, defaults 4. number breaks use constructing categorised version numeric delays.","code":""},{"path":"https://package.epinowcast.org/reference/enw_delay_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate reporting delay metadata for a given maximum delay — enw_delay_metadata","text":" data.frame  delay metadata. includes: delay: numeric delay reference date report. delay_cat: categorised delay. may useful model building. delay_week: numeric week since delay reported. may useful model building. delay_tail: logical variable defining delay upper 75% potential delays. may particularly useful building models assume parametric distribution order increase weight tail reporting distribution pragmatic way.","code":""},{"path":"https://package.epinowcast.org/reference/enw_delay_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate reporting delay metadata for a given maximum delay — enw_delay_metadata","text":"","code":"enw_delay_metadata(max_delay = 20, breaks = 4) #> Warning: `enw_delay_metadata()` was deprecated in epinowcast 0.2.3. #> ℹ Please use `enw_metadata_delay()` instead. #>     delay delay_cat delay_week delay_head delay_tail #>     <int>    <fctr>      <int>     <lgcl>     <lgcl> #>  1:     0     [0,5)          0       TRUE      FALSE #>  2:     1     [0,5)          0       TRUE      FALSE #>  3:     2     [0,5)          0       TRUE      FALSE #>  4:     3     [0,5)          0       TRUE      FALSE #>  5:     4     [0,5)          0       TRUE      FALSE #>  6:     5    [5,10)          0      FALSE      FALSE #>  7:     6    [5,10)          0      FALSE      FALSE #>  8:     7    [5,10)          1      FALSE      FALSE #>  9:     8    [5,10)          1      FALSE      FALSE #> 10:     9    [5,10)          1      FALSE      FALSE #> 11:    10   [10,15)          1      FALSE      FALSE #> 12:    11   [10,15)          1      FALSE      FALSE #> 13:    12   [10,15)          1      FALSE      FALSE #> 14:    13   [10,15)          1      FALSE      FALSE #> 15:    14   [10,15)          2      FALSE      FALSE #> 16:    15   [15,20)          2      FALSE       TRUE #> 17:    16   [15,20)          2      FALSE       TRUE #> 18:    17   [15,20)          2      FALSE       TRUE #> 19:    18   [15,20)          2      FALSE       TRUE #> 20:    19   [15,20)          2      FALSE       TRUE #>     delay delay_cat delay_week delay_head delay_tail"},{"path":"https://package.epinowcast.org/reference/enw_design.html","id":null,"dir":"Reference","previous_headings":"","what":"A helper function to construct a design matrix from a formula — enw_design","title":"A helper function to construct a design matrix from a formula — enw_design","text":"function wrapper around stats::model.matrix() can optionally return sparse design matrix defined unique number rows design matrix index vector allows full design matrix reconstructed. useful models many repeated rows design matrix computationally expensive fit. function also allows specification contrasts categorical variables.","code":""},{"path":"https://package.epinowcast.org/reference/enw_design.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A helper function to construct a design matrix from a formula — enw_design","text":"","code":"enw_design(formula, data, no_contrasts = FALSE, sparse = TRUE, ...)"},{"path":"https://package.epinowcast.org/reference/enw_design.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A helper function to construct a design matrix from a formula — enw_design","text":"formula R formula. data data.frame containing variables formula. no_contrasts vector variable names converted contrasts. no_contrasts = FALSE categorical variables use contrasts. no_contrasts = TRUE categorical variables use contrasts. sparse Logical, TRUE return sparse design matrix. Defaults TRUE. ... Arguments passed stats::model.matrix object object appropriate class.  default     method, model formula terms object.","code":""},{"path":"https://package.epinowcast.org/reference/enw_design.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A helper function to construct a design matrix from a formula — enw_design","text":"list containing formula, design matrix, index.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_design.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"A helper function to construct a design matrix from a formula — enw_design","text":"","code":"data <- data.frame(a = 1:3, b = as.character(1:3), c = c(1,1,2)) enw_design(a ~ b + c, data) #> $formula #> [1] \"a ~ b + c\" #>  #> $design #>   (Intercept) b2 b3 c #> 1           1  0  0 1 #> 2           1  1  0 1 #> 3           1  0  1 2 #>  #> $index #> [1] 1 2 3 #>  enw_design(a ~ b + c, data, no_contrasts = TRUE) #> $formula #> [1] \"a ~ b + c\" #>  #> $design #>   (Intercept) b1 b2 b3 c #> 1           1  1  0  0 1 #> 2           1  0  1  0 1 #> 3           1  0  0  1 2 #>  #> $index #> [1] 1 2 3 #>  enw_design(a ~ b + c, data, no_contrasts = c(\"b\")) #> $formula #> [1] \"a ~ b + c\" #>  #> $design #>   (Intercept) b1 b2 b3 c #> 1           1  1  0  0 1 #> 2           1  0  1  0 1 #> 3           1  0  0  1 2 #>  #> $index #> [1] 1 2 3 #>  enw_design(a ~ c, data, sparse = TRUE) #> $formula #> [1] \"a ~ c\" #>  #> $design #>   (Intercept) c #> 1           1 1 #> 3           1 2 #>  #> $index #> [1] 1 1 2 #>  enw_design(a ~ c, data, sparse = FALSE) #> $formula #> [1] \"a ~ c\" #>  #> $design #>   (Intercept) c #> 1           1 1 #> 2           1 1 #> 3           1 2 #> attr(,\"assign\") #> [1] 0 1 #>  #> $index #> [1] 1 2 3 #>"},{"path":"https://package.epinowcast.org/reference/enw_effects_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Extracts metadata from a design matrix — enw_effects_metadata","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"function extracts metadata design matrix returns data.table following columns: effects: name effect fixed: logical indicating whether effect fixed (1) random (0). automatically drops intercept (defined \"(Intercept)\"). function useful constructing model design object random effects used combination ewn_add_pooling_effect.","code":""},{"path":"https://package.epinowcast.org/reference/enw_effects_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"","code":"enw_effects_metadata(design)"},{"path":"https://package.epinowcast.org/reference/enw_effects_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"design design matrix returned stats::model.matrix().","code":""},{"path":"https://package.epinowcast.org/reference/enw_effects_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"data.table following columns: effects: name effect fixed: logical indicating whether effect fixed (1) random (0)","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_effects_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"","code":"data <- data.frame(a = 1:3, b = as.character(1:3), c = c(1,1,2)) design <- enw_design(a ~ b + c, data)$design enw_effects_metadata(design) #>    effects fixed #>     <char> <num> #> 1:      b2     1 #> 2:      b3     1 #> 3:       c     1"},{"path":"https://package.epinowcast.org/reference/enw_example.html","id":null,"dir":"Reference","previous_headings":"","what":"Load a package example — enw_example","title":"Load a package example — enw_example","text":"Loads examples nowcasts produced using example scripts. Used streamline examples, package tests enable users explore package functionality without needing install cmdstanr.","code":""},{"path":"https://package.epinowcast.org/reference/enw_example.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load a package example — enw_example","text":"","code":"enw_example(   type = c(\"nowcast\", \"preprocessed_observations\", \"observations\", \"script\") )"},{"path":"https://package.epinowcast.org/reference/enw_example.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load a package example — enw_example","text":"type character string indicating example load. Supported options \"nowcast\", epinowcast() applied germany_covid19_hosp \"preprocessed_observations\", enw_preprocess_data() applied germany_covid19_hosp \"observations\", enw_latest_data() applied germany_covid19_hosp \"script\", code used generate examples.","code":""},{"path":"https://package.epinowcast.org/reference/enw_example.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load a package example — enw_example","text":"Depending type, data.table requested output file name(s) generate outputs (type = \"script\")","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_example.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load a package example — enw_example","text":"","code":"# Load the nowcast enw_example(type = \"nowcast\") #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[671x9]> <data.table[630x11]> <data.table[41x10]> #>     missing_reference  reporting_triangle      metareference #>                <list>              <list>             <list> #> 1: <data.table[41x6]> <data.table[41x22]> <data.table[41x9]> #>             metareport          metadelay max_delay  time snapshots     by #>                 <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[60x12]> <data.table[20x5]>        20    41        41        #>    groups   max_date timestep             priors #>     <int>     <IDat>   <char>             <list> #> 1:      1 2021-08-22      day <data.table[14x6]> #>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          fit #>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       <list> #> 1: <CmdStanMCMC>\\n  Inherits from: <CmdStanFit>\\n  Public:\\n    clone: function (deep = FALSE) \\n    cmdstan_diagnose: function () \\n    cmdstan_summary: function (flags = NULL) \\n    code: function () \\n    constrain_variables: function (unconstrained_variables, transformed_parameters = TRUE, \\n    data_file: function () \\n    diagnostic_summary: function (diagnostics = c(\"divergences\", \"treedepth\", \"ebfmi\"), \\n    draws: function (variables = NULL, inc_warmup = FALSE, format = getOption(\"cmdstanr_draws_format\", \\n    expose_functions: function (global = FALSE, verbose = FALSE) \\n    functions: environment\\n    grad_log_prob: function (unconstrained_variables, jacobian_adjustment = TRUE) \\n    hessian: function (unconstrained_variables, jacobian_adjustment = TRUE) \\n    init: function () \\n    init_model_methods: function (seed = 0, verbose = FALSE, hessian = FALSE) \\n    initialize: function (runset) \\n    inv_metric: function (matrix = TRUE) \\n    latent_dynamics_files: function (include_failed = FALSE) \\n    log_prob: function (unconstrained_variables, jacobian_adjustment = TRUE) \\n    loo: function (variables = \"log_lik\", r_eff = TRUE, moment_match = FALSE, \\n    lp: function () \\n    metadata: function () \\n    num_chains: function () \\n    num_procs: function () \\n    output: function (id = NULL) \\n    output_files: function (include_failed = FALSE) \\n    print: function (variables = NULL, ..., digits = 2, max_rows = getOption(\"cmdstanr_max_rows\", \\n    profile_files: function (include_failed = FALSE) \\n    profiles: function () \\n    return_codes: function () \\n    runset: CmdStanRun, R6\\n    sampler_diagnostics: function (inc_warmup = FALSE, format = getOption(\"cmdstanr_draws_format\", \\n    save_data_file: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_latent_dynamics_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_object: function (file, ...) \\n    save_output_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_profile_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    summary: function (variables = NULL, ...) \\n    time: function () \\n    unconstrain_draws: function (files = NULL, draws = NULL) \\n    unconstrain_variables: function (variables) \\n    variable_skeleton: function (transformed_parameters = TRUE, generated_quantities = TRUE) \\n  Private:\\n    draws_: -1371.04 -1377.39 -1378.06 -1383.26 -1375.59 -1378.01 -1 ...\\n    init_: NULL\\n    inv_metric_: list\\n    metadata_: list\\n    model_methods_env_: environment\\n    profiles_: NULL\\n    read_csv_: function (variables = NULL, sampler_diagnostics = NULL, format = getOption(\"cmdstanr_draws_format\", \\n    sampler_diagnostics_: 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7  ...\\n    warmup_draws_: NULL\\n    warmup_sampler_diagnostics_: NULL #>           data  fit_args samples max_rhat divergent_transitions #>         <list>    <list>   <int>    <num>                 <num> #> 1: <list[116]> <list[6]>    1000     1.02                     0 #>    per_divergent_transitions max_treedepth no_at_max_treedepth #>                        <num>         <num>               <int> #> 1:                         0             7                 993 #>    per_at_max_treedepth run_time #>                   <num>    <num> #> 1:                0.993     70.6  # Load the preprocessed observations enw_example(type = \"preprocessed_observations\") #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[671x9]> <data.table[630x11]> <data.table[41x10]> #>     missing_reference  reporting_triangle      metareference #>                <list>              <list>             <list> #> 1: <data.table[41x6]> <data.table[41x22]> <data.table[41x9]> #>             metareport          metadelay max_delay  time snapshots     by #>                 <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[60x12]> <data.table[20x5]>        20    41        41        #>    groups   max_date timestep #>     <int>     <IDat>   <char> #> 1:      1 2021-08-22      day  # Load the latest observations enw_example(type = \"observations\") #>     reference_date location age_group report_date confirm #>             <IDat>   <fctr>    <fctr>      <IDat>   <int> #>  1:     2021-08-02       DE       00+  2021-10-01      59 #>  2:     2021-08-03       DE       00+  2021-10-01     156 #>  3:     2021-08-04       DE       00+  2021-10-01     183 #>  4:     2021-08-05       DE       00+  2021-10-01     147 #>  5:     2021-08-06       DE       00+  2021-10-01     155 #>  6:     2021-08-07       DE       00+  2021-10-01     159 #>  7:     2021-08-08       DE       00+  2021-10-01     119 #>  8:     2021-08-09       DE       00+  2021-10-01      65 #>  9:     2021-08-10       DE       00+  2021-10-01     204 #> 10:     2021-08-11       DE       00+  2021-10-01     275 #> 11:     2021-08-12       DE       00+  2021-10-01     273 #> 12:     2021-08-13       DE       00+  2021-10-01     270 #> 13:     2021-08-14       DE       00+  2021-10-01     262 #> 14:     2021-08-15       DE       00+  2021-10-01     192 #> 15:     2021-08-16       DE       00+  2021-10-01     140 #> 16:     2021-08-17       DE       00+  2021-10-01     323 #> 17:     2021-08-18       DE       00+  2021-10-01     409 #> 18:     2021-08-19       DE       00+  2021-10-01     370 #> 19:     2021-08-20       DE       00+  2021-10-01     361 #> 20:     2021-08-21       DE       00+  2021-10-01     339 #> 21:     2021-08-22       DE       00+  2021-10-01     258 #>     reference_date location age_group report_date confirm  # Load the script used to generate these examples # Optionally source this script to regenerate the example readLines(enw_example(type = \"script\")) #>  [1] \"# Load epinowcast and data.table\"                                                   #>  [2] \"library(epinowcast)\"                                                                #>  [3] \"library(data.table)\"                                                                #>  [4] \"\"                                                                                   #>  [5] \"# Load and filter germany hospitalisations\"                                         #>  [6] \"nat_germany_hosp <- germany_covid19_hosp[location == \\\"DE\\\"][age_group == \\\"00+\\\"]\" #>  [7] \"nat_germany_hosp <- enw_filter_report_dates(\"                                       #>  [8] \"  nat_germany_hosp, latest_date = \\\"2021-10-01\\\"\"                                   #>  [9] \")\"                                                                                  #> [10] \"\"                                                                                   #> [11] \"# Make sure observations are complete\"                                              #> [12] \"nat_germany_hosp <- enw_complete_dates(\"                                            #> [13] \"  nat_germany_hosp, by = c(\\\"location\\\", \\\"age_group\\\")\"                            #> [14] \")\"                                                                                  #> [15] \"\"                                                                                   #> [16] \"# Make a retrospective dataset\"                                                     #> [17] \"retro_nat_germany <- enw_filter_report_dates(\"                                      #> [18] \"  nat_germany_hosp, remove_days = 40\"                                               #> [19] \")\"                                                                                  #> [20] \"retro_nat_germany <- enw_filter_reference_dates(\"                                   #> [21] \"  retro_nat_germany, include_days = 40\"                                             #> [22] \")\"                                                                                  #> [23] \"\"                                                                                   #> [24] \"# Get latest observations for the same time period\"                                 #> [25] \"latest_obs <- enw_latest_data(nat_germany_hosp)\"                                    #> [26] \"latest_obs <- enw_filter_reference_dates(\"                                          #> [27] \"  latest_obs, remove_days = 40, include_days = 20\"                                  #> [28] \")\"                                                                                  #> [29] \"\"                                                                                   #> [30] \"# Preprocess observations\"                                                          #> [31] \"pobs <- enw_preprocess_data(retro_nat_germany, max_delay = 20)\"                     #> [32] \"\"                                                                                   #> [33] \"# Reference date model\"                                                             #> [34] \"reference_module <- enw_reference(~1, data = pobs)\"                                 #> [35] \"\"                                                                                   #> [36] \"# Report date model\"                                                                #> [37] \"report_module <- enw_report(~ (1 | day_of_week), data = pobs)\"                      #> [38] \"\"                                                                                   #> [39] \"# Fit nowcast model and produce a nowcast\"                                          #> [40] \"# Note that we have reduced samples for this example to reduce runtimes\"            #> [41] \"nowcast <- epinowcast(pobs,\"                                                        #> [42] \"  reference = reference_module,\"                                                    #> [43] \"  report = report_module,\"                                                          #> [44] \"  fit = enw_fit_opts(\"                                                              #> [45] \"    save_warmup = FALSE, pp = TRUE,\"                                                #> [46] \"    chains = 2, threads_per_chain = 2,\"                                             #> [47] \"    iter_warmup = 500, iter_sampling = 500\"                                         #> [48] \"  )\"                                                                                #> [49] \")\""},{"path":"https://package.epinowcast.org/reference/enw_expectation.html","id":null,"dir":"Reference","previous_headings":"","what":"Expectation model module — enw_expectation","title":"Expectation model module — enw_expectation","text":"Expectation model module","code":""},{"path":"https://package.epinowcast.org/reference/enw_expectation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Expectation model module — enw_expectation","text":"","code":"enw_expectation(   r = ~0 + (1 | day:.group),   generation_time = 1,   observation = ~1,   latent_reporting_delay = 1,   data,   ... )"},{"path":"https://package.epinowcast.org/reference/enw_expectation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Expectation model module — enw_expectation","text":"r formula (implemented enw_formula()) describing generative process used expected incidence. can use features defined reference date defined metareference produced enw_preprocess_data(). default set use daily random effect group. parameterisation highly flexible may appropriate choice data sparsely reported reporting delays substantially. settings alternative group specific weekly random walk (specified rw(week, = .group). generation_time numeric vector sums 1 defaults 1. Describes weighting apply previous generations (.e part renewal equation). set 1 (default) corresponds modelling daily growth rate. observation formula (implemented enw_formula()) describing modifiers used adjust expected observations. can use features defined reference date defined metareference produced enw_preprocess_data(). default modifiers used common choice might adjust day week. Note baseline modification intercept always used set 0. latent_reporting_delay numeric vector defaults 1. Describes weighting apply past current latent expected observations (recent least). can used convolve based assumed reporting delay rescale observations (multiplying probability mass function fraction) account ascertainment etc. list PMFs can provided allow time-varying PMFs. length modelled time period plus length generation time supplied. data Output enw_preprocess_data(). ... Additional parameters passed enw_add_metaobs_features(). arguments passed enw_preprocess_data() used .","code":""},{"path":"https://package.epinowcast.org/reference/enw_expectation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Expectation model module — enw_expectation","text":"list containing supplied formulas, data passed list describing models, data.frame describing priors used, function takes output data priors returns function can used sample tightened version prior distribution.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_expectation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Expectation model module — enw_expectation","text":"","code":"enw_expectation(data = enw_example(\"preprocessed\")) #> A random effect using .group is not possible as this variable has fewer than 2 #> unique values. #> $formula #> $formula$r #> [1] \"~0 + (1 | day:.group)\" #>  #> $formula$observation #> [1] \"~1\" #>  #>  #> $data_raw #> $data_raw$r #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-14      1       DE       00+     0   Wednesday     1     0     0 #>  2: 2021-07-15      1       DE       00+     0    Thursday     2     0     0 #>  3: 2021-07-16      1       DE       00+     0      Friday     3     0     0 #>  4: 2021-07-17      1       DE       00+     0    Saturday     4     0     0 #>  5: 2021-07-18      1       DE       00+     0      Sunday     5     0     0 #>  6: 2021-07-19      1       DE       00+     0      Monday     6     0     0 #>  7: 2021-07-20      1       DE       00+     0     Tuesday     7     1     0 #>  8: 2021-07-21      1       DE       00+     0   Wednesday     8     1     0 #>  9: 2021-07-22      1       DE       00+     0    Thursday     9     1     0 #> 10: 2021-07-23      1       DE       00+     0      Friday    10     1     0 #> 11: 2021-07-24      1       DE       00+     0    Saturday    11     1     0 #> 12: 2021-07-25      1       DE       00+     0      Sunday    12     1     0 #> 13: 2021-07-26      1       DE       00+     0      Monday    13     1     0 #> 14: 2021-07-27      1       DE       00+     0     Tuesday    14     2     0 #> 15: 2021-07-28      1       DE       00+     0   Wednesday    15     2     0 #> 16: 2021-07-29      1       DE       00+     0    Thursday    16     2     0 #> 17: 2021-07-30      1       DE       00+     0      Friday    17     2     0 #> 18: 2021-07-31      1       DE       00+     0    Saturday    18     2     0 #> 19: 2021-08-01      1       DE       00+     0      Sunday    19     2     1 #> 20: 2021-08-02      1       DE       00+     0      Monday    20     2     1 #> 21: 2021-08-03      1       DE       00+     0     Tuesday    21     3     1 #> 22: 2021-08-04      1       DE       00+     0   Wednesday    22     3     1 #> 23: 2021-08-05      1       DE       00+     0    Thursday    23     3     1 #> 24: 2021-08-06      1       DE       00+     0      Friday    24     3     1 #> 25: 2021-08-07      1       DE       00+     0    Saturday    25     3     1 #> 26: 2021-08-08      1       DE       00+     0      Sunday    26     3     1 #> 27: 2021-08-09      1       DE       00+     0      Monday    27     3     1 #> 28: 2021-08-10      1       DE       00+     0     Tuesday    28     4     1 #> 29: 2021-08-11      1       DE       00+     0   Wednesday    29     4     1 #> 30: 2021-08-12      1       DE       00+     0    Thursday    30     4     1 #> 31: 2021-08-13      1       DE       00+     0      Friday    31     4     1 #> 32: 2021-08-14      1       DE       00+     0    Saturday    32     4     1 #> 33: 2021-08-15      1       DE       00+     0      Sunday    33     4     1 #> 34: 2021-08-16      1       DE       00+     0      Monday    34     4     1 #> 35: 2021-08-17      1       DE       00+     0     Tuesday    35     5     1 #> 36: 2021-08-18      1       DE       00+     0   Wednesday    36     5     1 #> 37: 2021-08-19      1       DE       00+     0    Thursday    37     5     1 #> 38: 2021-08-20      1       DE       00+     0      Friday    38     5     1 #> 39: 2021-08-21      1       DE       00+     0    Saturday    39     5     1 #> 40: 2021-08-22      1       DE       00+     0      Sunday    40     5     1 #>           date .group location age_group delay day_of_week   day  week month #>  #> $data_raw$observation #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-13      1       DE       00+     0     Tuesday     0     0     0 #>  2: 2021-07-14      1       DE       00+     0   Wednesday     1     0     0 #>  3: 2021-07-15      1       DE       00+     0    Thursday     2     0     0 #>  4: 2021-07-16      1       DE       00+     0      Friday     3     0     0 #>  5: 2021-07-17      1       DE       00+     0    Saturday     4     0     0 #>  6: 2021-07-18      1       DE       00+     0      Sunday     5     0     0 #>  7: 2021-07-19      1       DE       00+     0      Monday     6     0     0 #>  8: 2021-07-20      1       DE       00+     0     Tuesday     7     1     0 #>  9: 2021-07-21      1       DE       00+     0   Wednesday     8     1     0 #> 10: 2021-07-22      1       DE       00+     0    Thursday     9     1     0 #> 11: 2021-07-23      1       DE       00+     0      Friday    10     1     0 #> 12: 2021-07-24      1       DE       00+     0    Saturday    11     1     0 #> 13: 2021-07-25      1       DE       00+     0      Sunday    12     1     0 #> 14: 2021-07-26      1       DE       00+     0      Monday    13     1     0 #> 15: 2021-07-27      1       DE       00+     0     Tuesday    14     2     0 #> 16: 2021-07-28      1       DE       00+     0   Wednesday    15     2     0 #> 17: 2021-07-29      1       DE       00+     0    Thursday    16     2     0 #> 18: 2021-07-30      1       DE       00+     0      Friday    17     2     0 #> 19: 2021-07-31      1       DE       00+     0    Saturday    18     2     0 #> 20: 2021-08-01      1       DE       00+     0      Sunday    19     2     1 #> 21: 2021-08-02      1       DE       00+     0      Monday    20     2     1 #> 22: 2021-08-03      1       DE       00+     0     Tuesday    21     3     1 #> 23: 2021-08-04      1       DE       00+     0   Wednesday    22     3     1 #> 24: 2021-08-05      1       DE       00+     0    Thursday    23     3     1 #> 25: 2021-08-06      1       DE       00+     0      Friday    24     3     1 #> 26: 2021-08-07      1       DE       00+     0    Saturday    25     3     1 #> 27: 2021-08-08      1       DE       00+     0      Sunday    26     3     1 #> 28: 2021-08-09      1       DE       00+     0      Monday    27     3     1 #> 29: 2021-08-10      1       DE       00+     0     Tuesday    28     4     1 #> 30: 2021-08-11      1       DE       00+     0   Wednesday    29     4     1 #> 31: 2021-08-12      1       DE       00+     0    Thursday    30     4     1 #> 32: 2021-08-13      1       DE       00+     0      Friday    31     4     1 #> 33: 2021-08-14      1       DE       00+     0    Saturday    32     4     1 #> 34: 2021-08-15      1       DE       00+     0      Sunday    33     4     1 #> 35: 2021-08-16      1       DE       00+     0      Monday    34     4     1 #> 36: 2021-08-17      1       DE       00+     0     Tuesday    35     5     1 #> 37: 2021-08-18      1       DE       00+     0   Wednesday    36     5     1 #> 38: 2021-08-19      1       DE       00+     0    Thursday    37     5     1 #> 39: 2021-08-20      1       DE       00+     0      Friday    38     5     1 #> 40: 2021-08-21      1       DE       00+     0    Saturday    39     5     1 #> 41: 2021-08-22      1       DE       00+     0      Sunday    40     5     1 #>           date .group location age_group delay day_of_week   day  week month #>  #>  #> $data #> $data$expr_r_seed #> [1] 1 #>  #> $data$expr_gt_n #> [1] 1 #>  #> $data$expr_lrgt #> [1] 0 #>  #> $data$expr_t #> [1] 40 #>  #> $data$expr_obs #> [1] 0 #>  #> $data$expr_g #> [1] 0 #>  #> $data$expr_ft #> [1] 41 #>  #> $data$expr_fdesign #>    day1 day2 day3 day4 day5 day6 day7 day8 day9 day10 day11 day12 day13 day14 #> 1     1    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 2     0    1    0    0    0    0    0    0    0     0     0     0     0     0 #> 3     0    0    1    0    0    0    0    0    0     0     0     0     0     0 #> 4     0    0    0    1    0    0    0    0    0     0     0     0     0     0 #> 5     0    0    0    0    1    0    0    0    0     0     0     0     0     0 #> 6     0    0    0    0    0    1    0    0    0     0     0     0     0     0 #> 7     0    0    0    0    0    0    1    0    0     0     0     0     0     0 #> 8     0    0    0    0    0    0    0    1    0     0     0     0     0     0 #> 9     0    0    0    0    0    0    0    0    1     0     0     0     0     0 #> 10    0    0    0    0    0    0    0    0    0     1     0     0     0     0 #> 11    0    0    0    0    0    0    0    0    0     0     1     0     0     0 #> 12    0    0    0    0    0    0    0    0    0     0     0     1     0     0 #> 13    0    0    0    0    0    0    0    0    0     0     0     0     1     0 #> 14    0    0    0    0    0    0    0    0    0     0     0     0     0     1 #> 15    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 16    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 17    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 18    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 19    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 20    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 21    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 22    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 23    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 24    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 25    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 26    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 27    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 28    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 29    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 30    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 31    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 32    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 33    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 34    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 35    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 36    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 37    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 38    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 39    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 40    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #>    day15 day16 day17 day18 day19 day20 day21 day22 day23 day24 day25 day26 #> 1      0     0     0     0     0     0     0     0     0     0     0     0 #> 2      0     0     0     0     0     0     0     0     0     0     0     0 #> 3      0     0     0     0     0     0     0     0     0     0     0     0 #> 4      0     0     0     0     0     0     0     0     0     0     0     0 #> 5      0     0     0     0     0     0     0     0     0     0     0     0 #> 6      0     0     0     0     0     0     0     0     0     0     0     0 #> 7      0     0     0     0     0     0     0     0     0     0     0     0 #> 8      0     0     0     0     0     0     0     0     0     0     0     0 #> 9      0     0     0     0     0     0     0     0     0     0     0     0 #> 10     0     0     0     0     0     0     0     0     0     0     0     0 #> 11     0     0     0     0     0     0     0     0     0     0     0     0 #> 12     0     0     0     0     0     0     0     0     0     0     0     0 #> 13     0     0     0     0     0     0     0     0     0     0     0     0 #> 14     0     0     0     0     0     0     0     0     0     0     0     0 #> 15     1     0     0     0     0     0     0     0     0     0     0     0 #> 16     0     1     0     0     0     0     0     0     0     0     0     0 #> 17     0     0     1     0     0     0     0     0     0     0     0     0 #> 18     0     0     0     1     0     0     0     0     0     0     0     0 #> 19     0     0     0     0     1     0     0     0     0     0     0     0 #> 20     0     0     0     0     0     1     0     0     0     0     0     0 #> 21     0     0     0     0     0     0     1     0     0     0     0     0 #> 22     0     0     0     0     0     0     0     1     0     0     0     0 #> 23     0     0     0     0     0     0     0     0     1     0     0     0 #> 24     0     0     0     0     0     0     0     0     0     1     0     0 #> 25     0     0     0     0     0     0     0     0     0     0     1     0 #> 26     0     0     0     0     0     0     0     0     0     0     0     1 #> 27     0     0     0     0     0     0     0     0     0     0     0     0 #> 28     0     0     0     0     0     0     0     0     0     0     0     0 #> 29     0     0     0     0     0     0     0     0     0     0     0     0 #> 30     0     0     0     0     0     0     0     0     0     0     0     0 #> 31     0     0     0     0     0     0     0     0     0     0     0     0 #> 32     0     0     0     0     0     0     0     0     0     0     0     0 #> 33     0     0     0     0     0     0     0     0     0     0     0     0 #> 34     0     0     0     0     0     0     0     0     0     0     0     0 #> 35     0     0     0     0     0     0     0     0     0     0     0     0 #> 36     0     0     0     0     0     0     0     0     0     0     0     0 #> 37     0     0     0     0     0     0     0     0     0     0     0     0 #> 38     0     0     0     0     0     0     0     0     0     0     0     0 #> 39     0     0     0     0     0     0     0     0     0     0     0     0 #> 40     0     0     0     0     0     0     0     0     0     0     0     0 #>    day27 day28 day29 day30 day31 day32 day33 day34 day35 day36 day37 day38 #> 1      0     0     0     0     0     0     0     0     0     0     0     0 #> 2      0     0     0     0     0     0     0     0     0     0     0     0 #> 3      0     0     0     0     0     0     0     0     0     0     0     0 #> 4      0     0     0     0     0     0     0     0     0     0     0     0 #> 5      0     0     0     0     0     0     0     0     0     0     0     0 #> 6      0     0     0     0     0     0     0     0     0     0     0     0 #> 7      0     0     0     0     0     0     0     0     0     0     0     0 #> 8      0     0     0     0     0     0     0     0     0     0     0     0 #> 9      0     0     0     0     0     0     0     0     0     0     0     0 #> 10     0     0     0     0     0     0     0     0     0     0     0     0 #> 11     0     0     0     0     0     0     0     0     0     0     0     0 #> 12     0     0     0     0     0     0     0     0     0     0     0     0 #> 13     0     0     0     0     0     0     0     0     0     0     0     0 #> 14     0     0     0     0     0     0     0     0     0     0     0     0 #> 15     0     0     0     0     0     0     0     0     0     0     0     0 #> 16     0     0     0     0     0     0     0     0     0     0     0     0 #> 17     0     0     0     0     0     0     0     0     0     0     0     0 #> 18     0     0     0     0     0     0     0     0     0     0     0     0 #> 19     0     0     0     0     0     0     0     0     0     0     0     0 #> 20     0     0     0     0     0     0     0     0     0     0     0     0 #> 21     0     0     0     0     0     0     0     0     0     0     0     0 #> 22     0     0     0     0     0     0     0     0     0     0     0     0 #> 23     0     0     0     0     0     0     0     0     0     0     0     0 #> 24     0     0     0     0     0     0     0     0     0     0     0     0 #> 25     0     0     0     0     0     0     0     0     0     0     0     0 #> 26     0     0     0     0     0     0     0     0     0     0     0     0 #> 27     1     0     0     0     0     0     0     0     0     0     0     0 #> 28     0     1     0     0     0     0     0     0     0     0     0     0 #> 29     0     0     1     0     0     0     0     0     0     0     0     0 #> 30     0     0     0     1     0     0     0     0     0     0     0     0 #> 31     0     0     0     0     1     0     0     0     0     0     0     0 #> 32     0     0     0     0     0     1     0     0     0     0     0     0 #> 33     0     0     0     0     0     0     1     0     0     0     0     0 #> 34     0     0     0     0     0     0     0     1     0     0     0     0 #> 35     0     0     0     0     0     0     0     0     1     0     0     0 #> 36     0     0     0     0     0     0     0     0     0     1     0     0 #> 37     0     0     0     0     0     0     0     0     0     0     1     0 #> 38     0     0     0     0     0     0     0     0     0     0     0     1 #> 39     0     0     0     0     0     0     0     0     0     0     0     0 #> 40     0     0     0     0     0     0     0     0     0     0     0     0 #>    day39 day40 #> 1      0     0 #> 2      0     0 #> 3      0     0 #> 4      0     0 #> 5      0     0 #> 6      0     0 #> 7      0     0 #> 8      0     0 #> 9      0     0 #> 10     0     0 #> 11     0     0 #> 12     0     0 #> 13     0     0 #> 14     0     0 #> 15     0     0 #> 16     0     0 #> 17     0     0 #> 18     0     0 #> 19     0     0 #> 20     0     0 #> 21     0     0 #> 22     0     0 #> 23     0     0 #> 24     0     0 #> 25     0     0 #> 26     0     0 #> 27     0     0 #> 28     0     0 #> 29     0     0 #> 30     0     0 #> 31     0     0 #> 32     0     0 #> 33     0     0 #> 34     0     0 #> 35     0     0 #> 36     0     0 #> 37     0     0 #> 38     0     0 #> 39     1     0 #> 40     0     1 #> attr(,\"assign\") #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 #> attr(,\"contrasts\") #> attr(,\"contrasts\")$day #>    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #> 1  1 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 2  0 1 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 3  0 0 1 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 4  0 0 0 1 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 5  0 0 0 0 1 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 6  0 0 0 0 0 1 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 7  0 0 0 0 0 0 1 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 8  0 0 0 0 0 0 0 1 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 9  0 0 0 0 0 0 0 0 1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 10 0 0 0 0 0 0 0 0 0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 11 0 0 0 0 0 0 0 0 0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 12 0 0 0 0 0 0 0 0 0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 13 0 0 0 0 0 0 0 0 0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 14 0 0 0 0 0 0 0 0 0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 15 0 0 0 0 0 0 0 0 0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 16 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0 #> 17 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0 #> 18 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0 #> 19 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0 #> 20 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0 #> 21 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0 #> 22 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0 #> 23 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0 #> 24 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0 #> 25 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0 #> 26 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0 #> 27 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0 #> 28 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1 #> 29 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 30 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 31 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 32 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 33 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 34 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 35 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 36 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 37 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 38 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 39 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 40 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #>    29 30 31 32 33 34 35 36 37 38 39 40 #> 1   0  0  0  0  0  0  0  0  0  0  0  0 #> 2   0  0  0  0  0  0  0  0  0  0  0  0 #> 3   0  0  0  0  0  0  0  0  0  0  0  0 #> 4   0  0  0  0  0  0  0  0  0  0  0  0 #> 5   0  0  0  0  0  0  0  0  0  0  0  0 #> 6   0  0  0  0  0  0  0  0  0  0  0  0 #> 7   0  0  0  0  0  0  0  0  0  0  0  0 #> 8   0  0  0  0  0  0  0  0  0  0  0  0 #> 9   0  0  0  0  0  0  0  0  0  0  0  0 #> 10  0  0  0  0  0  0  0  0  0  0  0  0 #> 11  0  0  0  0  0  0  0  0  0  0  0  0 #> 12  0  0  0  0  0  0  0  0  0  0  0  0 #> 13  0  0  0  0  0  0  0  0  0  0  0  0 #> 14  0  0  0  0  0  0  0  0  0  0  0  0 #> 15  0  0  0  0  0  0  0  0  0  0  0  0 #> 16  0  0  0  0  0  0  0  0  0  0  0  0 #> 17  0  0  0  0  0  0  0  0  0  0  0  0 #> 18  0  0  0  0  0  0  0  0  0  0  0  0 #> 19  0  0  0  0  0  0  0  0  0  0  0  0 #> 20  0  0  0  0  0  0  0  0  0  0  0  0 #> 21  0  0  0  0  0  0  0  0  0  0  0  0 #> 22  0  0  0  0  0  0  0  0  0  0  0  0 #> 23  0  0  0  0  0  0  0  0  0  0  0  0 #> 24  0  0  0  0  0  0  0  0  0  0  0  0 #> 25  0  0  0  0  0  0  0  0  0  0  0  0 #> 26  0  0  0  0  0  0  0  0  0  0  0  0 #> 27  0  0  0  0  0  0  0  0  0  0  0  0 #> 28  0  0  0  0  0  0  0  0  0  0  0  0 #> 29  1  0  0  0  0  0  0  0  0  0  0  0 #> 30  0  1  0  0  0  0  0  0  0  0  0  0 #> 31  0  0  1  0  0  0  0  0  0  0  0  0 #> 32  0  0  0  1  0  0  0  0  0  0  0  0 #> 33  0  0  0  0  1  0  0  0  0  0  0  0 #> 34  0  0  0  0  0  1  0  0  0  0  0  0 #> 35  0  0  0  0  0  0  1  0  0  0  0  0 #> 36  0  0  0  0  0  0  0  1  0  0  0  0 #> 37  0  0  0  0  0  0  0  0  1  0  0  0 #> 38  0  0  0  0  0  0  0  0  0  1  0  0 #> 39  0  0  0  0  0  0  0  0  0  0  1  0 #> 40  0  0  0  0  0  0  0  0  0  0  0  1 #>  #>  #> $data$expr_fintercept #> [1] 0 #>  #> $data$expr_fnrow #> [1] 40 #>  #> $data$expr_findex #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #>  #> $data$expr_fnindex #> [1] 40 #>  #> $data$expr_fncol #> [1] 40 #>  #> $data$expr_rdesign #>    fixed day #> 1      0   1 #> 2      0   1 #> 3      0   1 #> 4      0   1 #> 5      0   1 #> 6      0   1 #> 7      0   1 #> 8      0   1 #> 9      0   1 #> 10     0   1 #> 11     0   1 #> 12     0   1 #> 13     0   1 #> 14     0   1 #> 15     0   1 #> 16     0   1 #> 17     0   1 #> 18     0   1 #> 19     0   1 #> 20     0   1 #> 21     0   1 #> 22     0   1 #> 23     0   1 #> 24     0   1 #> 25     0   1 #> 26     0   1 #> 27     0   1 #> 28     0   1 #> 29     0   1 #> 30     0   1 #> 31     0   1 #> 32     0   1 #> 33     0   1 #> 34     0   1 #> 35     0   1 #> 36     0   1 #> 37     0   1 #> 38     0   1 #> 39     0   1 #> 40     0   1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $data$expr_rncol #> [1] 1 #>  #> $data$expl_lrd_n #> [1] 1 #>  #> $data$expl_lrd_nw #> [1] 41 #>  #> $data$expl_lrd_w #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 1 #>  #> $data$expl_lrd_nv #> [1] 41 #>  #> $data$expl_lrd_v #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 #>  #> $data$expl_lrd_nu #> [1] 42 #>  #> $data$expl_lrd_u #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 #>  #> $data$expl_obs #> [1] 0 #>  #> $data$expl_fdesign #>    (Intercept) #> 1            1 #> 2            1 #> 3            1 #> 4            1 #> 5            1 #> 6            1 #> 7            1 #> 8            1 #> 9            1 #> 10           1 #> 11           1 #> 12           1 #> 13           1 #> 14           1 #> 15           1 #> 16           1 #> 17           1 #> 18           1 #> 19           1 #> 20           1 #> 21           1 #> 22           1 #> 23           1 #> 24           1 #> 25           1 #> 26           1 #> 27           1 #> 28           1 #> 29           1 #> 30           1 #> 31           1 #> 32           1 #> 33           1 #> 34           1 #> 35           1 #> 36           1 #> 37           1 #> 38           1 #> 39           1 #> 40           1 #> 41           1 #> attr(,\"assign\") #> [1] 0 #>  #> $data$expl_fintercept #> [1] 1 #>  #> $data$expl_fnrow #> [1] 41 #>  #> $data$expl_findex #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 #>  #> $data$expl_fnindex #> [1] 41 #>  #> $data$expl_fncol #> [1] 0 #>  #> $data$expl_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$expl_rncol #> [1] 0 #>  #>  #> $priors #>             variable dimension #>               <char>     <num> #> 1:        expr_r_int         1 #> 2:      expr_beta_sd         1 #> 3: expr_lelatent_int         1 #> 4:      expl_beta_sd         1 #>                                                                           description #>                                                                                <char> #> 1:                                                   Intercept of the log growth rate #> 2:                        Standard deviation of scaled pooled log growth rate effects #> 3: Intercept for initial log observations (ordered by group and then\\n          time) #> 4:                        Standard deviation of scaled pooled log growth rate effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   0.0   0.2 #> 2: Zero truncated normal   0.0   1.0 #> 3:                Normal   4.1   1.0 #> 4: Zero truncated normal   0.0   1.0 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(expr_beta = numeric(0), expr_beta_sd = numeric(0),  #>             expr_lelatent_int = matrix(purrr::map2_dbl(as.vector(priors$expr_lelatent_int_p[1]),  #>                 as.vector(priors$expr_lelatent_int_p[2]), function(x,  #>                   y) { #>                   rnorm(1, x, y * 0.1) #>                 }), nrow = data$expr_gt_n, ncol = data$g), expr_r_int = numeric(0),  #>             expl_beta = numeric(0), expl_beta_sd = numeric(0)) #>         if (data$expr_fncol > 0) { #>             init$expr_beta <- array(rnorm(data$expr_fncol, 0,  #>                 0.01)) #>         } #>         if (data$expr_rncol > 0) { #>             init$expr_beta_sd <- array(abs(rnorm(data$expr_rncol,  #>                 priors$expr_beta_sd_p[1], priors$expr_beta_sd_p[2]/10))) #>         } #>         if (data$expr_fintercept > 0) { #>             init$expr_r_int <- array(rnorm(1, priors$expr_r_int[1],  #>                 priors$expr_r_int[2] * 0.1)) #>         } #>         if (data$expl_fncol > 0) { #>             init$expl_beta <- array(rnorm(data$expl_fncol, 0,  #>                 0.01)) #>         } #>         if (data$expl_rncol > 0) { #>             init$expl_beta_sd <- array(abs(rnorm(data$expl_rncol,  #>                 priors$expl_beta_sd_p[1], priors$expl_beta_sd_p[2]/10))) #>         } #>         return(init) #>     } #>     return(fn) #> } #> <bytecode: 0x564e66421178> #> <environment: 0x564e665242e0> #>"},{"path":"https://package.epinowcast.org/reference/enw_extend_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Extend a time series with additional dates — enw_extend_date","title":"Extend a time series with additional dates — enw_extend_date","text":"Extend time series additional dates. useful extending report dates time series include future dates nowcasting purposes include additional dates backcasting using renewal process expectation model.","code":""},{"path":"https://package.epinowcast.org/reference/enw_extend_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extend a time series with additional dates — enw_extend_date","text":"","code":"enw_extend_date(   metaobs,   days = 20,   direction = c(\"end\", \"start\"),   timestep = \"day\" )"},{"path":"https://package.epinowcast.org/reference/enw_extend_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extend a time series with additional dates — enw_extend_date","text":"metaobs data.frame date column. days Number days add time series. Defaults 20. direction new dates added beginning end data. Default \"end\" \"start\" also available. timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days.","code":""},{"path":"https://package.epinowcast.org/reference/enw_extend_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extend a time series with additional dates — enw_extend_date","text":"data.table columns metaobs additional rows date range date date + days (date - days direction = \"start\"). additional variable observed added value FALSE new dates TRUE existing dates.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_extend_date.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extend a time series with additional dates — enw_extend_date","text":"","code":"metaobs <- data.frame(date = as.Date(\"2021-01-01\") + 0:4) enw_extend_date(metaobs, days = 2) #> Key: <.group, date> #>          date .group observed #>        <Date>  <num>   <lgcl> #> 1: 2021-01-01      1     TRUE #> 2: 2021-01-02      1     TRUE #> 3: 2021-01-03      1     TRUE #> 4: 2021-01-04      1     TRUE #> 5: 2021-01-05      1     TRUE #> 6: 2021-01-06      1    FALSE #> 7: 2021-01-07      1    FALSE enw_extend_date(metaobs, days = 2, direction = \"start\") #> Key: <.group, date> #>          date .group observed #>        <Date>  <num>   <lgcl> #> 1: 2020-12-30      1    FALSE #> 2: 2020-12-31      1    FALSE #> 3: 2021-01-01      1     TRUE #> 4: 2021-01-02      1     TRUE #> 5: 2021-01-03      1     TRUE #> 6: 2021-01-04      1     TRUE #> 7: 2021-01-05      1     TRUE"},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_filter_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter observations to restrict the maximum reporting delay — enw_filter_delay","text":"","code":"enw_filter_delay(obs, max_delay, timestep = \"day\")  enw_filter_delay(obs, max_delay, timestep = \"day\")"},{"path":"https://package.epinowcast.org/reference/enw_filter_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter observations to restrict the maximum reporting delay — enw_filter_delay","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). max_delay maximum number days model delay distribution. Must integer greater equal 1. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Consider delays realistic application, doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 days (.e. max_delay 1 corresponds delay). can use check_max_delay() check coverage delay distribution different maximum delays. timestep timestep used process model (.e. reference date model). can string (\"day\", \"week\", \"month\") numeric whole number representing number days. data timestep may wish make use enw_aggregate_cumulative() aggregate data desired timestep.","code":""},{"path":"https://package.epinowcast.org/reference/enw_filter_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter observations to restrict the maximum reporting delay — enw_filter_delay","text":"data.frame filtered dates report less equal reference date plus maximum delay. data.frame filtered dates report less equal reference date plus maximum delay.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_filter_delay.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter observations to restrict the maximum reporting delay — enw_filter_delay","text":"","code":"obs <- enw_example(\"preprocessed\")$obs[[1]] enw_filter_delay(obs, max_delay = 2) #>      reference_date .group report_date max_confirm location age_group confirm #>              <IDat>  <num>      <IDat>       <int>   <fctr>    <fctr>   <int> #>   1:           <NA>      1  2021-07-13           0       DE       00+       0 #>   2:           <NA>      1  2021-07-14           0       DE       00+       0 #>   3:           <NA>      1  2021-07-15           0       DE       00+       0 #>   4:           <NA>      1  2021-07-16           0       DE       00+       0 #>   5:           <NA>      1  2021-07-17           0       DE       00+       0 #>  ---                                                                          #> 118:     2021-08-20      1  2021-08-20         171       DE       00+      98 #> 119:     2021-08-20      1  2021-08-21         171       DE       00+     159 #> 120:     2021-08-21      1  2021-08-21         112       DE       00+      69 #> 121:     2021-08-21      1  2021-08-22         112       DE       00+     112 #> 122:     2021-08-22      1  2021-08-22          45       DE       00+      45 #>      cum_prop_reported delay #>                  <num> <num> #>   1:               NaN    NA #>   2:               NaN    NA #>   3:               NaN    NA #>   4:               NaN    NA #>   5:               NaN    NA #>  ---                         #> 118:         0.5730994     0 #> 119:         0.9298246     1 #> 120:         0.6160714     0 #> 121:         1.0000000     1 #> 122:         1.0000000     0"},{"path":"https://package.epinowcast.org/reference/enw_filter_reference_dates.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter by reference dates — enw_filter_reference_dates","title":"Filter by reference dates — enw_filter_reference_dates","text":"helper function allows users filter datasets reference date. useful, example, evaluating nowcast performance fully observed data. Users may wish combine function enw_filter_report_dates(). Note definition assumed report dates must equal greater corresponding reference date (.e report happen event reported occurs). means function also filter report dates earlier corresponding reference date.","code":""},{"path":"https://package.epinowcast.org/reference/enw_filter_reference_dates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter by reference dates — enw_filter_reference_dates","text":"","code":"enw_filter_reference_dates(   obs,   earliest_date,   include_days,   latest_date,   remove_days )"},{"path":"https://package.epinowcast.org/reference/enw_filter_reference_dates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter by reference dates — enw_filter_reference_dates","text":"obs data.frame; must report_date reference_date columns. earliest_date earliest reference date include data set include_days earliest_date given, number reference dates include, ending latest reference date included (determined latest_date remove_days). latest_date Date, latest reference date include returned dataset. remove_days Integer, latest_date given, number reference dates remove, starting latest date included.","code":""},{"path":"https://package.epinowcast.org/reference/enw_filter_reference_dates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter by reference dates — enw_filter_reference_dates","text":"data.table filtered report date","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_filter_reference_dates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter by reference dates — enw_filter_reference_dates","text":"","code":"# Filter by date enw_filter_reference_dates(   germany_covid19_hosp,   earliest_date = \"2021-09-01\",   latest_date = \"2021-10-01\" ) #>         reference_date location age_group confirm report_date #>                 <IDat>   <fctr>    <fctr>   <int>      <IDat> #>      1:     2021-09-01       DE       00+     124  2021-09-01 #>      2:     2021-09-02       DE       00+      94  2021-09-02 #>      3:     2021-09-03       DE       00+     130  2021-09-03 #>      4:     2021-09-04       DE       00+      82  2021-09-04 #>      5:     2021-09-05       DE       00+      42  2021-09-05 #>     ---                                                       #> 129111:     2021-09-01    DE-TH     05-14       0  2021-10-20 #> 129112:     2021-09-01    DE-TH     15-34       0  2021-10-20 #> 129113:     2021-09-01    DE-TH     35-59       1  2021-10-20 #> 129114:     2021-09-01    DE-TH     60-79       2  2021-10-20 #> 129115:     2021-09-01    DE-TH       80+       2  2021-10-20 # # Filter by days enw_filter_reference_dates(   germany_covid19_hosp,   include_days = 10, remove_days = 10 ) #>        reference_date location age_group confirm report_date #>                <IDat>   <fctr>    <fctr>   <int>      <IDat> #>     1:     2021-09-30       DE       00+     110  2021-09-30 #>     2:     2021-10-01       DE       00+     105  2021-10-01 #>     3:     2021-10-02       DE       00+      97  2021-10-02 #>     4:     2021-10-03       DE       00+      41  2021-10-03 #>     5:     2021-10-04       DE       00+      23  2021-10-04 #>    ---                                                       #> 20940:     2021-09-30    DE-TH     05-14       1  2021-10-20 #> 20941:     2021-09-30    DE-TH     15-34       2  2021-10-20 #> 20942:     2021-09-30    DE-TH     35-59       6  2021-10-20 #> 20943:     2021-09-30    DE-TH     60-79       4  2021-10-20 #> 20944:     2021-09-30    DE-TH       80+      10  2021-10-20"},{"path":"https://package.epinowcast.org/reference/enw_filter_report_dates.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter by report dates — enw_filter_report_dates","title":"Filter by report dates — enw_filter_report_dates","text":"helper function allows users create truncated data sets past time points given larger data set. useful evaluating nowcast performance fully observed data. Users may wish combine function enw_filter_reference_dates().","code":""},{"path":"https://package.epinowcast.org/reference/enw_filter_report_dates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter by report dates — enw_filter_report_dates","text":"","code":"enw_filter_report_dates(obs, latest_date, remove_days)"},{"path":"https://package.epinowcast.org/reference/enw_filter_report_dates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter by report dates — enw_filter_report_dates","text":"obs data.frame; must report_date reference_date columns. latest_date Date, latest report date include returned dataset. remove_days Integer, latest_date given, number report dates remove, starting latest date included.","code":""},{"path":"https://package.epinowcast.org/reference/enw_filter_report_dates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter by report dates — enw_filter_report_dates","text":"data.table  filtered report date","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_filter_report_dates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter by report dates — enw_filter_report_dates","text":"","code":"# Filter by date enw_filter_report_dates(germany_covid19_hosp, latest_date = \"2021-09-01\") #>          reference_date location age_group confirm report_date #>                  <IDat>   <fctr>    <fctr>   <int>      <IDat> #>       1:     2021-04-06       DE       00+     149  2021-04-06 #>       2:     2021-04-07       DE       00+     312  2021-04-07 #>       3:     2021-04-08       DE       00+     424  2021-04-08 #>       4:     2021-04-09       DE       00+     288  2021-04-09 #>       5:     2021-04-10       DE       00+     273  2021-04-10 #>      ---                                                       #> 1058739:     2021-06-08    DE-TH       80+       4  2021-08-28 #> 1058740:     2021-06-09    DE-TH       80+       4  2021-08-29 #> 1058741:     2021-06-10    DE-TH       80+       1  2021-08-30 #> 1058742:     2021-06-11    DE-TH       80+       0  2021-08-31 #> 1058743:     2021-06-12    DE-TH       80+       2  2021-09-01  # Filter by days enw_filter_report_dates(germany_covid19_hosp, remove_days = 10) #>          reference_date location age_group confirm report_date #>                  <IDat>   <fctr>    <fctr>   <int>      <IDat> #>       1:     2021-04-06       DE       00+     149  2021-04-06 #>       2:     2021-04-07       DE       00+     312  2021-04-07 #>       3:     2021-04-08       DE       00+     424  2021-04-08 #>       4:     2021-04-09       DE       00+     288  2021-04-09 #>       5:     2021-04-10       DE       00+     273  2021-04-10 #>      ---                                                       #> 1439301:     2021-07-17    DE-TH       80+       1  2021-10-06 #> 1439302:     2021-07-18    DE-TH       80+       0  2021-10-07 #> 1439303:     2021-07-19    DE-TH       80+       0  2021-10-08 #> 1439304:     2021-07-20    DE-TH       80+       0  2021-10-09 #> 1439305:     2021-07-21    DE-TH       80+       0  2021-10-10"},{"path":"https://package.epinowcast.org/reference/enw_fit_opts.html","id":null,"dir":"Reference","previous_headings":"","what":"Format model fitting options for use with stan — enw_fit_opts","title":"Format model fitting options for use with stan — enw_fit_opts","text":"Format model fitting options use stan","code":""},{"path":"https://package.epinowcast.org/reference/enw_fit_opts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format model fitting options for use with stan — enw_fit_opts","text":"","code":"enw_fit_opts(   sampler = epinowcast::enw_sample,   nowcast = TRUE,   pp = FALSE,   likelihood = TRUE,   likelihood_aggregation = c(\"snapshots\", \"groups\"),   threads_per_chain = 1L,   debug = FALSE,   output_loglik = FALSE,   ... )"},{"path":"https://package.epinowcast.org/reference/enw_fit_opts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format model fitting options for use with stan — enw_fit_opts","text":"sampler function creates object used extract posterior samples specified model. default enw_sample() makes use cmdstanr::sample(). nowcast Logical, defaults TRUE. nowcast made using posterior predictions unobserved future reported notifications. pp Logical, defaults FALSE. posterior predictions made observed data. Useful evaluating performance model. likelihood Logical, defaults TRUE. likelihood included model likelihood_aggregation Character string, aggregation stratify likelihood threads_per_chain greater 1; enforced base::match.arg(). Currently supported options: \"snapshots\" aggregates report dates groups (.e lowest level observations reported ), \"groups\" aggregates across user defined groups. Note model modules override setting depending model requirements. example, enw_missing() module model forces \"groups\" option. Generally, Users typically want default \"snapshots\" aggregation. threads_per_chain Integer, defaults 1. number threads use within MCMC chain. greater 1 components likelihood calculated parallel within chain. debug Logical, defaults FALSE. within model debug information returned. output_loglik Logical, defaults FALSE. log-likelihood output. Disabling speed fitting evaluating model fit required. ... Additional arguments pass fitting function used epinowcast(). default enw_sample() cmdstanr options used.","code":""},{"path":"https://package.epinowcast.org/reference/enw_fit_opts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format model fitting options for use with stan — enw_fit_opts","text":"list containing specified sampler function, data list specifying fitting options use, additional arguments pass sampler function called.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_fit_opts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format model fitting options for use with stan — enw_fit_opts","text":"","code":"# Default options along with settings to pass to enw_sample enw_fit_opts(iter_sampling = 1000, iter_warmup = 1000) #> $sampler #> function (data, model = epinowcast::enw_model(), diagnostics = TRUE,  #>     ...)  #> { #>     fit <- model$sample(data = data, ...) #>     out <- data.table(fit = list(fit), data = list(data), fit_args = list(list(...))) #>     if (diagnostics) { #>         diag <- fit$sampler_diagnostics(format = \"df\") #>         diagnostics <- data.table(samples = nrow(diag), max_rhat = round(max(fit$summary(variables = NULL,  #>             posterior::rhat, .args = list(na.rm = TRUE))$`posterior::rhat`,  #>             na.rm = TRUE), 2), divergent_transitions = sum(diag$divergent__),  #>             per_divergent_transitions = sum(diag$divergent__)/nrow(diag),  #>             max_treedepth = max(diag$treedepth__)) #>         diagnostics[, `:=`(no_at_max_treedepth, sum(diag$treedepth__ ==  #>             max_treedepth))] #>         diagnostics[, `:=`(per_at_max_treedepth, no_at_max_treedepth/nrow(diag))] #>         out <- cbind(out, diagnostics) #>         timing <- round(fit$time()$total, 1) #>         out[, `:=`(run_time, timing)] #>     } #>     return(out[]) #> } #> <bytecode: 0x564e5a6fea88> #> <environment: namespace:epinowcast> #>  #> $data #> $data$debug #> [1] 0 #>  #> $data$likelihood #> [1] 1 #>  #> $data$likelihood_aggregation #> [1] 0 #>  #> $data$parallelise_likelihood #> [1] 0 #>  #> $data$pp #> [1] 0 #>  #> $data$cast #> [1] 1 #>  #> $data$ologlik #> [1] 0 #>  #>  #> $args #> $args$threads_per_chain #> [1] 1 #>  #> $args$iter_sampling #> [1] 1000 #>  #> $args$iter_warmup #> [1] 1000 #>  #>"},{"path":"https://package.epinowcast.org/reference/enw_flag_observed_observations.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag observed observations — enw_flag_observed_observations","title":"Flag observed observations — enw_flag_observed_observations","text":"Flags observations based 'confirm' column. '.observed' column exist, created. Observations flagged observed (TRUE) 'confirm' NA.","code":""},{"path":"https://package.epinowcast.org/reference/enw_flag_observed_observations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag observed observations — enw_flag_observed_observations","text":"","code":"enw_flag_observed_observations(obs, copy = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_flag_observed_observations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag observed observations — enw_flag_observed_observations","text":"obs data.frame least confirm column. copy logical; TRUE (default) creates copy; otherwise, modifies obs place.","code":""},{"path":"https://package.epinowcast.org/reference/enw_flag_observed_observations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag observed observations — enw_flag_observed_observations","text":"data.table additional column '.observed' indicating observed observations.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_flag_observed_observations.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag observed observations — enw_flag_observed_observations","text":"","code":"dt <- data.frame(id = 1:3, confirm = c(NA, 1, 2)) enw_flag_observed_observations(dt) #>       id confirm .observed #>    <int>   <num>    <lgcl> #> 1:     1      NA     FALSE #> 2:     2       1      TRUE #> 3:     3       2      TRUE"},{"path":"https://package.epinowcast.org/reference/enw_formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Define a model using a formula interface — enw_formula","title":"Define a model using a formula interface — enw_formula","text":"function allows models defined using flexible formula interface supports fixed effects, random effects (using lme4 syntax). Note returned fixed effects design matrix sparse index supplied required link observations appropriate design matrix row.","code":""},{"path":"https://package.epinowcast.org/reference/enw_formula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define a model using a formula interface — enw_formula","text":"","code":"enw_formula(formula, data, sparse = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define a model using a formula interface — enw_formula","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function. data data.frame observations. must include variables used supplied formula. sparse Logical, defaults  TRUE. fixed effects design matrix sparely defined.","code":""},{"path":"https://package.epinowcast.org/reference/enw_formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define a model using a formula interface — enw_formula","text":"list containing following: formula: user supplied formula parsed_formula: formula parsed parse_formula() extended_formula: flattened version formula user supplied terms terms added user supplied complex model components. fixed:  list containing fixed effect formula, sparse design matrix, index linking design matrix observations. random: list containing random effect formula, sparse design matrix, index linking design matrix random effects.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Define a model using a formula interface — enw_formula","text":"","code":"# Use meta data for references dates from the Germany COVID-19 # hospitalisation data. obs <- enw_filter_report_dates(   germany_covid19_hosp[location == \"DE\"],   remove_days = 40 ) obs <- enw_filter_reference_dates(obs, include_days = 40) pobs <- enw_preprocess_data(   obs, by = c(\"age_group\", \"location\"), max_delay = 20   ) data <- pobs$metareference[[1]]  # Model with fixed effects for age group enw_formula(~ 1 + age_group, data) #> $formula #> [1] \"~1 + age_group\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\"         \"age_group\" #>  #> $parsed_formula$random #> NULL #>  #> $parsed_formula$rw #> character(0) #>  #>  #> $expanded_formula #> [1] \"~1 + age_group\" #>  #> $fixed #> $fixed$formula #> [1] \"~1 + age_group\" #>  #> $fixed$design #>     (Intercept) age_group00+ age_group05-14 age_group15-34 age_group35-59 #> 1             1            1              0              0              0 #> 42            1            0              0              0              0 #> 83            1            0              1              0              0 #> 124           1            0              0              1              0 #> 165           1            0              0              0              1 #> 206           1            0              0              0              0 #> 247           1            0              0              0              0 #>     age_group60-79 age_group80+ #> 1                0            0 #> 42               0            0 #> 83               0            0 #> 124              0            0 #> 165              0            0 #> 206              1            0 #> 247              0            1 #>  #> $fixed$index #>   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #>  [38] 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 #>  [75] 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 #> [112] 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 #> [149] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 #> [186] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 #> [223] 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7 7 7 7 7 7 #> [260] 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 #>  #>  #> $random #> $random$formula #> [1] \"~1\" #>  #> $random$design #>   (Intercept) #> 1           1 #> 2           1 #> 3           1 #> 4           1 #> 5           1 #> 6           1 #> attr(,\"assign\") #> [1] 0 #>  #> $random$index #> [1] 1 2 3 4 5 6 #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Model with random effects for age group enw_formula(~ 1 + (1 | age_group), data) #> $formula #> [1] \"~1 + (1 | age_group)\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> $parsed_formula$random[[1]] #> 1 | age_group #>  #>  #> $parsed_formula$rw #> character(0) #>  #>  #> $expanded_formula #> [1] \"~1 + age_group\" #>  #> $fixed #> $fixed$formula #> [1] \"~1 + age_group\" #>  #> $fixed$design #>     (Intercept) age_group00-04 age_group00+ age_group05-14 age_group15-34 #> 1             1              0            1              0              0 #> 42            1              1            0              0              0 #> 83            1              0            0              1              0 #> 124           1              0            0              0              1 #> 165           1              0            0              0              0 #> 206           1              0            0              0              0 #> 247           1              0            0              0              0 #>     age_group35-59 age_group60-79 age_group80+ #> 1                0              0            0 #> 42               0              0            0 #> 83               0              0            0 #> 124              0              0            0 #> 165              1              0            0 #> 206              0              1            0 #> 247              0              0            1 #>  #> $fixed$index #>   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #>  [38] 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 #>  [75] 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 #> [112] 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 #> [149] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 #> [186] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 #> [223] 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7 7 7 7 7 7 #> [260] 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 #>  #>  #> $random #> $random$formula #> [1] \"~0 + fixed + age_group\" #>  #> $random$design #>   fixed age_group #> 1     0         1 #> 2     0         1 #> 3     0         1 #> 4     0         1 #> 5     0         1 #> 6     0         1 #> 7     0         1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $random$index #> [1] 1 2 3 4 5 6 7 #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Model with a random effect for age group and a random walk enw_formula(~ 1 + (1 | age_group) + rw(week), data) #> $formula #> [1] \"~1 + (1 | age_group) + rw(week)\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> $parsed_formula$random[[1]] #> 1 | age_group #>  #>  #> $parsed_formula$rw #> [1] \"rw(week)\" #>  #>  #> $expanded_formula #> [1] \"~1 + age_group + cweek1 + cweek2 + cweek3 + cweek4 + cweek5\" #>  #> $fixed #> $fixed$formula #> [1] \"~1 + age_group + cweek1 + cweek2 + cweek3 + cweek4 + cweek5\" #>  #> $fixed$design #>     (Intercept) age_group00-04 age_group00+ age_group05-14 age_group15-34 #> 1             1              0            1              0              0 #> 8             1              0            1              0              0 #> 15            1              0            1              0              0 #> 22            1              0            1              0              0 #> 29            1              0            1              0              0 #> 36            1              0            1              0              0 #> 42            1              1            0              0              0 #> 49            1              1            0              0              0 #> 56            1              1            0              0              0 #> 63            1              1            0              0              0 #> 70            1              1            0              0              0 #> 77            1              1            0              0              0 #> 83            1              0            0              1              0 #> 90            1              0            0              1              0 #> 97            1              0            0              1              0 #> 104           1              0            0              1              0 #> 111           1              0            0              1              0 #> 118           1              0            0              1              0 #> 124           1              0            0              0              1 #> 131           1              0            0              0              1 #> 138           1              0            0              0              1 #> 145           1              0            0              0              1 #> 152           1              0            0              0              1 #> 159           1              0            0              0              1 #> 165           1              0            0              0              0 #> 172           1              0            0              0              0 #> 179           1              0            0              0              0 #> 186           1              0            0              0              0 #> 193           1              0            0              0              0 #> 200           1              0            0              0              0 #> 206           1              0            0              0              0 #> 213           1              0            0              0              0 #> 220           1              0            0              0              0 #> 227           1              0            0              0              0 #> 234           1              0            0              0              0 #> 241           1              0            0              0              0 #> 247           1              0            0              0              0 #> 254           1              0            0              0              0 #> 261           1              0            0              0              0 #> 268           1              0            0              0              0 #> 275           1              0            0              0              0 #> 282           1              0            0              0              0 #>     age_group35-59 age_group60-79 age_group80+ cweek1 cweek2 cweek3 cweek4 #> 1                0              0            0      0      0      0      0 #> 8                0              0            0      1      0      0      0 #> 15               0              0            0      1      1      0      0 #> 22               0              0            0      1      1      1      0 #> 29               0              0            0      1      1      1      1 #> 36               0              0            0      1      1      1      1 #> 42               0              0            0      0      0      0      0 #> 49               0              0            0      1      0      0      0 #> 56               0              0            0      1      1      0      0 #> 63               0              0            0      1      1      1      0 #> 70               0              0            0      1      1      1      1 #> 77               0              0            0      1      1      1      1 #> 83               0              0            0      0      0      0      0 #> 90               0              0            0      1      0      0      0 #> 97               0              0            0      1      1      0      0 #> 104              0              0            0      1      1      1      0 #> 111              0              0            0      1      1      1      1 #> 118              0              0            0      1      1      1      1 #> 124              0              0            0      0      0      0      0 #> 131              0              0            0      1      0      0      0 #> 138              0              0            0      1      1      0      0 #> 145              0              0            0      1      1      1      0 #> 152              0              0            0      1      1      1      1 #> 159              0              0            0      1      1      1      1 #> 165              1              0            0      0      0      0      0 #> 172              1              0            0      1      0      0      0 #> 179              1              0            0      1      1      0      0 #> 186              1              0            0      1      1      1      0 #> 193              1              0            0      1      1      1      1 #> 200              1              0            0      1      1      1      1 #> 206              0              1            0      0      0      0      0 #> 213              0              1            0      1      0      0      0 #> 220              0              1            0      1      1      0      0 #> 227              0              1            0      1      1      1      0 #> 234              0              1            0      1      1      1      1 #> 241              0              1            0      1      1      1      1 #> 247              0              0            1      0      0      0      0 #> 254              0              0            1      1      0      0      0 #> 261              0              0            1      1      1      0      0 #> 268              0              0            1      1      1      1      0 #> 275              0              0            1      1      1      1      1 #> 282              0              0            1      1      1      1      1 #>     cweek5 #> 1        0 #> 8        0 #> 15       0 #> 22       0 #> 29       0 #> 36       1 #> 42       0 #> 49       0 #> 56       0 #> 63       0 #> 70       0 #> 77       1 #> 83       0 #> 90       0 #> 97       0 #> 104      0 #> 111      0 #> 118      1 #> 124      0 #> 131      0 #> 138      0 #> 145      0 #> 152      0 #> 159      1 #> 165      0 #> 172      0 #> 179      0 #> 186      0 #> 193      0 #> 200      1 #> 206      0 #> 213      0 #> 220      0 #> 227      0 #> 234      0 #> 241      1 #> 247      0 #> 254      0 #> 261      0 #> 268      0 #> 275      0 #> 282      1 #>  #> $fixed$index #>   [1]  1  1  1  1  1  1  1  2  2  2  2  2  2  2  3  3  3  3  3  3  3  4  4  4  4 #>  [26]  4  4  4  5  5  5  5  5  5  5  6  6  6  6  6  6  7  7  7  7  7  7  7  8  8 #>  [51]  8  8  8  8  8  9  9  9  9  9  9  9 10 10 10 10 10 10 10 11 11 11 11 11 11 #>  [76] 11 12 12 12 12 12 12 13 13 13 13 13 13 13 14 14 14 14 14 14 14 15 15 15 15 #> [101] 15 15 15 16 16 16 16 16 16 16 17 17 17 17 17 17 17 18 18 18 18 18 18 19 19 #> [126] 19 19 19 19 19 20 20 20 20 20 20 20 21 21 21 21 21 21 21 22 22 22 22 22 22 #> [151] 22 23 23 23 23 23 23 23 24 24 24 24 24 24 25 25 25 25 25 25 25 26 26 26 26 #> [176] 26 26 26 27 27 27 27 27 27 27 28 28 28 28 28 28 28 29 29 29 29 29 29 29 30 #> [201] 30 30 30 30 30 31 31 31 31 31 31 31 32 32 32 32 32 32 32 33 33 33 33 33 33 #> [226] 33 34 34 34 34 34 34 34 35 35 35 35 35 35 35 36 36 36 36 36 36 37 37 37 37 #> [251] 37 37 37 38 38 38 38 38 38 38 39 39 39 39 39 39 39 40 40 40 40 40 40 40 41 #> [276] 41 41 41 41 41 41 42 42 42 42 42 42 #>  #>  #> $random #> $random$formula #> [1] \"~0 + fixed + age_group + rw__week\" #>  #> $random$design #>    fixed age_group rw__week #> 1      0         1        0 #> 2      0         1        0 #> 3      0         1        0 #> 4      0         1        0 #> 5      0         1        0 #> 6      0         1        0 #> 7      0         1        0 #> 8      0         0        1 #> 9      0         0        1 #> 10     0         0        1 #> 11     0         0        1 #> 12     0         0        1 #> attr(,\"assign\") #> [1] 1 2 3 #>  #> $random$index #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Model defined without a sparse fixed effects design matrix enw_formula(~1, data[1:20, ]) #> $formula #> [1] \"~1\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> NULL #>  #> $parsed_formula$rw #> character(0) #>  #>  #> $expanded_formula #> [1] \"~1\" #>  #> $fixed #> $fixed$formula #> [1] \"~1\" #>  #> $fixed$design #>   (Intercept) #> 1           1 #>  #> $fixed$index #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #>  #>  #> $random #> $random$formula #> [1] \"~1\" #>  #> $random$design #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $random$index #> integer(0) #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Model using an interaction in the right hand side of a random effect # to specify an independent random effect per strata. enw_formula(~ (1 + day | week:month), data = data) #> $formula #> [1] \"~(1 + day | week:month)\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> $parsed_formula$random[[1]] #> 1 + day | week:month #>  #>  #> $parsed_formula$rw #> character(0) #>  #>  #> $expanded_formula #> [1] \"~1 + week:month + day:week:month\" #>  #> $fixed #> $fixed$formula #> [1] \"~1 + week:month + day:week:month\" #>  #> $fixed$design #>    (Intercept) week0:month0 week1:month0 week2:month0 week3:month0 week4:month0 #> 1            1            1            0            0            0            0 #> 2            1            1            0            0            0            0 #> 3            1            1            0            0            0            0 #> 4            1            1            0            0            0            0 #> 5            1            1            0            0            0            0 #> 6            1            1            0            0            0            0 #> 7            1            1            0            0            0            0 #> 8            1            0            1            0            0            0 #> 9            1            0            1            0            0            0 #> 10           1            0            1            0            0            0 #> 11           1            0            1            0            0            0 #> 12           1            0            1            0            0            0 #> 13           1            0            1            0            0            0 #> 14           1            0            1            0            0            0 #> 15           1            0            0            1            0            0 #> 16           1            0            0            1            0            0 #> 17           1            0            0            1            0            0 #> 18           1            0            0            1            0            0 #> 19           1            0            0            1            0            0 #> 20           1            0            0            1            0            0 #> 21           1            0            0            1            0            0 #> 22           1            0            0            0            1            0 #> 23           1            0            0            0            1            0 #> 24           1            0            0            0            1            0 #> 25           1            0            0            0            1            0 #> 26           1            0            0            0            1            0 #> 27           1            0            0            0            1            0 #> 28           1            0            0            0            1            0 #> 29           1            0            0            0            0            1 #> 30           1            0            0            0            0            1 #> 31           1            0            0            0            0            1 #> 32           1            0            0            0            0            0 #> 33           1            0            0            0            0            0 #> 34           1            0            0            0            0            0 #> 35           1            0            0            0            0            0 #> 36           1            0            0            0            0            0 #> 37           1            0            0            0            0            0 #> 38           1            0            0            0            0            0 #> 39           1            0            0            0            0            0 #> 40           1            0            0            0            0            0 #> 41           1            0            0            0            0            0 #>    week5:month0 week0:month1 week1:month1 week2:month1 week3:month1 #> 1             0            0            0            0            0 #> 2             0            0            0            0            0 #> 3             0            0            0            0            0 #> 4             0            0            0            0            0 #> 5             0            0            0            0            0 #> 6             0            0            0            0            0 #> 7             0            0            0            0            0 #> 8             0            0            0            0            0 #> 9             0            0            0            0            0 #> 10            0            0            0            0            0 #> 11            0            0            0            0            0 #> 12            0            0            0            0            0 #> 13            0            0            0            0            0 #> 14            0            0            0            0            0 #> 15            0            0            0            0            0 #> 16            0            0            0            0            0 #> 17            0            0            0            0            0 #> 18            0            0            0            0            0 #> 19            0            0            0            0            0 #> 20            0            0            0            0            0 #> 21            0            0            0            0            0 #> 22            0            0            0            0            0 #> 23            0            0            0            0            0 #> 24            0            0            0            0            0 #> 25            0            0            0            0            0 #> 26            0            0            0            0            0 #> 27            0            0            0            0            0 #> 28            0            0            0            0            0 #> 29            0            0            0            0            0 #> 30            0            0            0            0            0 #> 31            0            0            0            0            0 #> 32            0            0            0            0            0 #> 33            0            0            0            0            0 #> 34            0            0            0            0            0 #> 35            0            0            0            0            0 #> 36            0            0            0            0            0 #> 37            0            0            0            0            0 #> 38            0            0            0            0            0 #> 39            0            0            0            0            0 #> 40            0            0            0            0            0 #> 41            0            0            0            0            0 #>    week4:month1 week5:month1 week0:month0:day week1:month0:day week2:month0:day #> 1             0            0                0                0                0 #> 2             0            0                1                0                0 #> 3             0            0                2                0                0 #> 4             0            0                3                0                0 #> 5             0            0                4                0                0 #> 6             0            0                5                0                0 #> 7             0            0                6                0                0 #> 8             0            0                0                7                0 #> 9             0            0                0                8                0 #> 10            0            0                0                9                0 #> 11            0            0                0               10                0 #> 12            0            0                0               11                0 #> 13            0            0                0               12                0 #> 14            0            0                0               13                0 #> 15            0            0                0                0               14 #> 16            0            0                0                0               15 #> 17            0            0                0                0               16 #> 18            0            0                0                0               17 #> 19            0            0                0                0               18 #> 20            0            0                0                0               19 #> 21            0            0                0                0               20 #> 22            0            0                0                0                0 #> 23            0            0                0                0                0 #> 24            0            0                0                0                0 #> 25            0            0                0                0                0 #> 26            0            0                0                0                0 #> 27            0            0                0                0                0 #> 28            0            0                0                0                0 #> 29            0            0                0                0                0 #> 30            0            0                0                0                0 #> 31            0            0                0                0                0 #> 32            1            0                0                0                0 #> 33            1            0                0                0                0 #> 34            1            0                0                0                0 #> 35            1            0                0                0                0 #> 36            0            1                0                0                0 #> 37            0            1                0                0                0 #> 38            0            1                0                0                0 #> 39            0            1                0                0                0 #> 40            0            1                0                0                0 #> 41            0            1                0                0                0 #>    week3:month0:day week4:month0:day week5:month0:day week0:month1:day #> 1                 0                0                0                0 #> 2                 0                0                0                0 #> 3                 0                0                0                0 #> 4                 0                0                0                0 #> 5                 0                0                0                0 #> 6                 0                0                0                0 #> 7                 0                0                0                0 #> 8                 0                0                0                0 #> 9                 0                0                0                0 #> 10                0                0                0                0 #> 11                0                0                0                0 #> 12                0                0                0                0 #> 13                0                0                0                0 #> 14                0                0                0                0 #> 15                0                0                0                0 #> 16                0                0                0                0 #> 17                0                0                0                0 #> 18                0                0                0                0 #> 19                0                0                0                0 #> 20                0                0                0                0 #> 21                0                0                0                0 #> 22               21                0                0                0 #> 23               22                0                0                0 #> 24               23                0                0                0 #> 25               24                0                0                0 #> 26               25                0                0                0 #> 27               26                0                0                0 #> 28               27                0                0                0 #> 29                0               28                0                0 #> 30                0               29                0                0 #> 31                0               30                0                0 #> 32                0                0                0                0 #> 33                0                0                0                0 #> 34                0                0                0                0 #> 35                0                0                0                0 #> 36                0                0                0                0 #> 37                0                0                0                0 #> 38                0                0                0                0 #> 39                0                0                0                0 #> 40                0                0                0                0 #> 41                0                0                0                0 #>    week1:month1:day week2:month1:day week3:month1:day week4:month1:day #> 1                 0                0                0                0 #> 2                 0                0                0                0 #> 3                 0                0                0                0 #> 4                 0                0                0                0 #> 5                 0                0                0                0 #> 6                 0                0                0                0 #> 7                 0                0                0                0 #> 8                 0                0                0                0 #> 9                 0                0                0                0 #> 10                0                0                0                0 #> 11                0                0                0                0 #> 12                0                0                0                0 #> 13                0                0                0                0 #> 14                0                0                0                0 #> 15                0                0                0                0 #> 16                0                0                0                0 #> 17                0                0                0                0 #> 18                0                0                0                0 #> 19                0                0                0                0 #> 20                0                0                0                0 #> 21                0                0                0                0 #> 22                0                0                0                0 #> 23                0                0                0                0 #> 24                0                0                0                0 #> 25                0                0                0                0 #> 26                0                0                0                0 #> 27                0                0                0                0 #> 28                0                0                0                0 #> 29                0                0                0                0 #> 30                0                0                0                0 #> 31                0                0                0                0 #> 32                0                0                0               31 #> 33                0                0                0               32 #> 34                0                0                0               33 #> 35                0                0                0               34 #> 36                0                0                0                0 #> 37                0                0                0                0 #> 38                0                0                0                0 #> 39                0                0                0                0 #> 40                0                0                0                0 #> 41                0                0                0                0 #>    week5:month1:day #> 1                 0 #> 2                 0 #> 3                 0 #> 4                 0 #> 5                 0 #> 6                 0 #> 7                 0 #> 8                 0 #> 9                 0 #> 10                0 #> 11                0 #> 12                0 #> 13                0 #> 14                0 #> 15                0 #> 16                0 #> 17                0 #> 18                0 #> 19                0 #> 20                0 #> 21                0 #> 22                0 #> 23                0 #> 24                0 #> 25                0 #> 26                0 #> 27                0 #> 28                0 #> 29                0 #> 30                0 #> 31                0 #> 32                0 #> 33                0 #> 34                0 #> 35                0 #> 36               35 #> 37               36 #> 38               37 #> 39               38 #> 40               39 #> 41               40 #>  #> $fixed$index #>   [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #>  [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  1  2  3  4  5  6  7  8  9 #>  [51] 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #>  [76] 35 36 37 38 39 40 41  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 #> [101] 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  1  2 #> [126]  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #> [151] 28 29 30 31 32 33 34 35 36 37 38 39 40 41  1  2  3  4  5  6  7  8  9 10 11 #> [176] 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 #> [201] 37 38 39 40 41  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 #> [226] 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41  1  2  3  4 #> [251]  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #> [276] 30 31 32 33 34 35 36 37 38 39 40 41 #>  #>  #> $random #> $random$formula #> [1] \"~0 + fixed + week__month0 + week__month1 + day__week__month0 + day__week__month1\" #>  #> $random$design #>    fixed week__month0 week__month1 day__week__month0 day__week__month1 #> 1      0            1            0                 0                 0 #> 2      0            1            0                 0                 0 #> 3      0            1            0                 0                 0 #> 4      0            1            0                 0                 0 #> 5      0            1            0                 0                 0 #> 6      0            1            0                 0                 0 #> 7      0            0            1                 0                 0 #> 8      0            0            1                 0                 0 #> 9      0            0            1                 0                 0 #> 10     0            0            1                 0                 0 #> 11     0            0            1                 0                 0 #> 12     0            0            1                 0                 0 #> 13     0            0            0                 1                 0 #> 14     0            0            0                 1                 0 #> 15     0            0            0                 1                 0 #> 16     0            0            0                 1                 0 #> 17     0            0            0                 1                 0 #> 18     0            0            0                 1                 0 #> 19     0            0            0                 0                 1 #> 20     0            0            0                 0                 1 #> 21     0            0            0                 0                 1 #> 22     0            0            0                 0                 1 #> 23     0            0            0                 0                 1 #> 24     0            0            0                 0                 1 #> attr(,\"assign\") #> [1] 1 2 3 4 5 #>  #> $random$index #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\""},{"path":"https://package.epinowcast.org/reference/enw_formula_as_data_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Format formula data for use with stan — enw_formula_as_data_list","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"Format formula data use stan","code":""},{"path":"https://package.epinowcast.org/reference/enw_formula_as_data_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"","code":"enw_formula_as_data_list(formula, prefix, drop_intercept = FALSE)"},{"path":"https://package.epinowcast.org/reference/enw_formula_as_data_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"formula output enw_formula(). prefix character string indicating variable label use prefix. drop_intercept Logical, defaults FALSE. intercept included fixed effect excluded. used internally model modules intercept must present/absent.","code":""},{"path":"https://package.epinowcast.org/reference/enw_formula_as_data_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"list defining model formula. includes: prefix_fintercept: intercept present fixed effects design matrix. prefix_fdesign: fixed effects design matrix prefix_fnrow: number rows fixed design matrix prefix_findex: index linking design matrix rows  observations prefix_fnindex: length index prefix_fncol: number columns (.e effects) fixed effect design matrix (minus 1 drop_intercept = TRUE). prefix_rdesign: random effects design matrix prefix_rncol: number columns (.e random effects) random effect design matrix (minus 1 intercept dropped).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_formula_as_data_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"","code":"f <- enw_formula(~ 1 + (1 | cyl), mtcars) enw_formula_as_data_list(f, \"mtcars\") #> $mtcars_fdesign #>   (Intercept) cyl4 cyl6 cyl8 #> 1           1    0    1    0 #> 3           1    1    0    0 #> 5           1    0    0    1 #>  #> $mtcars_fintercept #> [1] 1 #>  #> $mtcars_fnrow #> [1] 3 #>  #> $mtcars_findex #>  [1] 1 1 2 1 3 1 3 2 2 1 1 3 3 3 3 3 3 2 2 2 2 3 3 3 3 2 2 2 3 1 3 2 #>  #> $mtcars_fnindex #> [1] 32 #>  #> $mtcars_fncol #> [1] 4 #>  #> $mtcars_rdesign #>   fixed cyl #> 1     0   1 #> 2     0   1 #> 3     0   1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $mtcars_rncol #> [1] 1 #>   # A missing formula produces the default list enw_formula_as_data_list(prefix = \"missing\") #> $missing_fdesign #> numeric(0) #>  #> $missing_fintercept #> [1] 0 #>  #> $missing_fnrow #> [1] 0 #>  #> $missing_findex #> numeric(0) #>  #> $missing_fnindex #> [1] 0 #>  #> $missing_fncol #> [1] 0 #>  #> $missing_rdesign #> numeric(0) #>  #> $missing_rncol #> [1] 0 #>"},{"path":"https://package.epinowcast.org/reference/enw_get_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve Stan cache location — enw_get_cache","title":"Retrieve Stan cache location — enw_get_cache","text":"Retrieves user set cache location Stan models. path can set enw_cache_location function call. environmental variable available output tempdir() returned.","code":""},{"path":"https://package.epinowcast.org/reference/enw_get_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve Stan cache location — enw_get_cache","text":"","code":"enw_get_cache()"},{"path":"https://package.epinowcast.org/reference/enw_get_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve Stan cache location — enw_get_cache","text":"string representing file path cache location","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_impute_na_observations.html","id":null,"dir":"Reference","previous_headings":"","what":"Impute NA observations — enw_impute_na_observations","title":"Impute NA observations — enw_impute_na_observations","text":"Imputes NA values 'confirm' column. NA values replaced last available observation 0.","code":""},{"path":"https://package.epinowcast.org/reference/enw_impute_na_observations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Impute NA observations — enw_impute_na_observations","text":"","code":"enw_impute_na_observations(obs, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_impute_na_observations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Impute NA observations — enw_impute_na_observations","text":"obs data.frame least 'confirm' 'reference_date' columns. character vector column names group . Defaults empty vector. copy logical; TRUE (default) creates copy; otherwise, modifies obs place.","code":""},{"path":"https://package.epinowcast.org/reference/enw_impute_na_observations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Impute NA observations — enw_impute_na_observations","text":"data.table imputed 'confirm' column NA values replaced zero.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_impute_na_observations.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Impute NA observations — enw_impute_na_observations","text":"","code":"dt <- data.frame(  id = 1:3, confirm = c(NA, 1, 2),  reference_date = as.Date(\"2021-01-01\") ) enw_impute_na_observations(dt) #> Key: <reference_date> #>       id confirm reference_date #>    <int>   <num>         <Date> #> 1:     1       0     2021-01-01 #> 2:     2       1     2021-01-01 #> 3:     3       2     2021-01-01"},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_incidence_to_cumulative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate cumulative reported cases from incidence of new reports — enw_incidence_to_cumulative","text":"","code":"enw_incidence_to_cumulative(obs, by = NULL)"},{"path":"https://package.epinowcast.org/reference/enw_incidence_to_cumulative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate cumulative reported cases from incidence of new reports — enw_incidence_to_cumulative","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), new_confirm (incident observations reference report date). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling","code":""},{"path":"https://package.epinowcast.org/reference/enw_incidence_to_cumulative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate cumulative reported cases from incidence of new reports — enw_incidence_to_cumulative","text":"input data.frame new variable confirm.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_incidence_to_cumulative.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate cumulative reported cases from incidence of new reports — enw_incidence_to_cumulative","text":"","code":"# Default reconstruct incidence dt <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] dt <- enw_add_incidence(dt) dt <- dt[, confirm := NULL] enw_add_cumulative(dt) #> Key: <reference_date, report_date> #>        reference_date location age_group report_date new_confirm delay confirm #>                <IDat>   <fctr>    <fctr>      <IDat>       <int> <int>   <int> #>     1:     2021-04-06       DE       00+  2021-04-06         149     0     149 #>     2:     2021-04-06       DE       00+  2021-04-07         140     1     289 #>     3:     2021-04-06       DE       00+  2021-04-08          61     2     350 #>     4:     2021-04-06       DE       00+  2021-04-09          52     3     402 #>     5:     2021-04-06       DE       00+  2021-04-10          36     4     438 #>    ---                                                                         #> 12911:     2021-10-18       DE       00+  2021-10-19          70     1     113 #> 12912:     2021-10-18       DE       00+  2021-10-20          29     2     142 #> 12913:     2021-10-19       DE       00+  2021-10-19         223     0     223 #> 12914:     2021-10-19       DE       00+  2021-10-20         164     1     387 #> 12915:     2021-10-20       DE       00+  2021-10-20         235     0     235  # Make use of maximum reported to calculate empirical daily reporting enw_add_cumulative(dt) #> Key: <reference_date, report_date> #>        reference_date location age_group report_date new_confirm delay confirm #>                <IDat>   <fctr>    <fctr>      <IDat>       <int> <int>   <int> #>     1:     2021-04-06       DE       00+  2021-04-06         149     0     149 #>     2:     2021-04-06       DE       00+  2021-04-07         140     1     289 #>     3:     2021-04-06       DE       00+  2021-04-08          61     2     350 #>     4:     2021-04-06       DE       00+  2021-04-09          52     3     402 #>     5:     2021-04-06       DE       00+  2021-04-10          36     4     438 #>    ---                                                                         #> 12911:     2021-10-18       DE       00+  2021-10-19          70     1     113 #> 12912:     2021-10-18       DE       00+  2021-10-20          29     2     142 #> 12913:     2021-10-19       DE       00+  2021-10-19         223     0     223 #> 12914:     2021-10-19       DE       00+  2021-10-20         164     1     387 #> 12915:     2021-10-20       DE       00+  2021-10-20         235     0     235"},{"path":"https://package.epinowcast.org/reference/enw_incidence_to_linelist.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"function takes data.table aggregate counts something coercible data.table (data.frame) converts line list row represents case.","code":""},{"path":"https://package.epinowcast.org/reference/enw_incidence_to_linelist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"","code":"enw_incidence_to_linelist(   obs,   reference_date = \"reference_date\",   report_date = \"report_date\" )"},{"path":"https://package.epinowcast.org/reference/enw_incidence_to_linelist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"obs object coercible data.table (data.frame) must new_confirm column. reference_date character string variable name use reference_date line list. default \"reference_date\". report_date character string variable name use report_date line list. default \"report_date\".","code":""},{"path":"https://package.epinowcast.org/reference/enw_incidence_to_linelist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"data.table following variables: id, reference_date, report_date, variables obs object. Rows obs duplicated based new_confirm column. reference_date report_date may renamed reference_date report_date supplied.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_incidence_to_linelist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"","code":"incidence <- enw_add_incidence(germany_covid19_hosp) incidence <- enw_filter_reference_dates(   incidence[location == \"DE\"], include_days = 10 ) enw_incidence_to_linelist(incidence, reference_date = \"onset_date\") #>           id onset_date location age_group report_date delay #>        <int>     <IDat>   <fctr>    <fctr>      <IDat> <int> #>     1:     1 2021-10-10       DE       00+  2021-10-10     0 #>     2:     2 2021-10-10       DE       00+  2021-10-10     0 #>     3:     3 2021-10-10       DE       00+  2021-10-10     0 #>     4:     4 2021-10-10       DE       00+  2021-10-10     0 #>     5:     5 2021-10-10       DE       00+  2021-10-10     0 #>    ---                                                       #> 18753: 18753 2021-10-20       DE       80+  2021-10-20     6 #> 18754: 18754 2021-10-20       DE       80+  2021-10-20     6 #> 18755: 18755 2021-10-20       DE       80+  2021-10-20     6 #> 18756: 18756 2021-10-20       DE       80+  2021-10-20     6 #> 18757: 18757 2021-10-20       DE       80+  2021-10-20     6"},{"path":"https://package.epinowcast.org/reference/enw_latest_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter observations to the latest available reported — enw_latest_data","title":"Filter observations to the latest available reported — enw_latest_data","text":"Filter observations latest available reported data reference date. Note filtering maximum report date cases data may updated maximum number days.","code":""},{"path":"https://package.epinowcast.org/reference/enw_latest_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter observations to the latest available reported — enw_latest_data","text":"","code":"enw_latest_data(obs)"},{"path":"https://package.epinowcast.org/reference/enw_latest_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter observations to the latest available reported — enw_latest_data","text":"obs data.frame; must report_date reference_date columns.","code":""},{"path":"https://package.epinowcast.org/reference/enw_latest_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter observations to the latest available reported — enw_latest_data","text":"data.table observations filtered latest available data reference date.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_latest_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter observations to the latest available reported — enw_latest_data","text":"","code":"# Filter for latest reported data enw_latest_data(germany_covid19_hosp) #>        reference_date location age_group confirm report_date #>                <IDat>   <fctr>    <fctr>   <int>      <IDat> #>     1:     2021-04-06       DE       00+     708  2021-06-26 #>     2:     2021-04-06       DE     00-04      11  2021-06-26 #>     3:     2021-04-06       DE     05-14       5  2021-06-26 #>     4:     2021-04-06       DE     15-34      75  2021-06-26 #>     5:     2021-04-06       DE     35-59     192  2021-06-26 #>    ---                                                       #> 23558:     2021-10-20    DE-TH     05-14       1  2021-10-20 #> 23559:     2021-10-20    DE-TH     15-34       2  2021-10-20 #> 23560:     2021-10-20    DE-TH     35-59       1  2021-10-20 #> 23561:     2021-10-20    DE-TH     60-79       5  2021-10-20 #> 23562:     2021-10-20    DE-TH       80+       5  2021-10-20"},{"path":"https://package.epinowcast.org/reference/enw_linelist_to_incidence.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"function takes line list (.e. tabular data row represents case) aggregates count (new_confirm) cases user-specified reference_dates report_dates. enables use enw_preprocess_data() epinowcast() preprocessing functions.","code":""},{"path":"https://package.epinowcast.org/reference/enw_linelist_to_incidence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"","code":"enw_linelist_to_incidence(   linelist,   reference_date = \"reference_date\",   report_date = \"report_date\",   by = NULL,   max_delay,   completion_beyond_max_report = FALSE,   copy = TRUE )"},{"path":"https://package.epinowcast.org/reference/enw_linelist_to_incidence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"linelist object coercible data.table (data.frame) row represents case. Must contain least two date variables variables can coerced dates. reference_date date variable can coerced date represents date interest case. example, reference_date date symptom onset new_confirm number new cases reported (based report_date) day onset day. default \"reference_date\". report_date date variable can coerced date represents date case reported. default \"report_date\". character vector variables also aggregate (.e. well using reference_date report_date). supplied function aggregate just reference_date report_date. max_delay maximum number days reference_date report_date. supplied function use maximum number days reference_date report_date linelist. max_delay less maximum number days reference_date report_date linelist function use value instead inform user. completion_beyond_max_report Logical, entries completed beyond maximum date found data? Default: FALSE copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/reference/enw_linelist_to_incidence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"data.table following variables: reference_date, report_date, new_confirm, confirm, delay, variables specified .","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_linelist_to_incidence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"","code":"linelist <- data.frame(   onset_date = as.Date(c(\"2021-01-02\", \"2021-01-03\", \"2021-01-02\")),   report_date = as.Date(c(\"2021-01-03\", \"2021-01-05\", \"2021-01-04\")) ) enw_linelist_to_incidence(linelist, reference_date = \"onset_date\") #> Using the maximum observed delay of 4 days to complete the incidence data. #> Key: <reference_date, report_date> #>     report_date reference_date new_confirm confirm delay #>          <IDat>         <IDat>       <int>   <int> <int> #>  1:  2021-01-02           <NA>           0       0     0 #>  2:  2021-01-03           <NA>           0       0     1 #>  3:  2021-01-04           <NA>           0       0     2 #>  4:  2021-01-05           <NA>           0       0     3 #>  5:  2021-01-02     2021-01-02           0       0     0 #>  6:  2021-01-03     2021-01-02           1       1     1 #>  7:  2021-01-04     2021-01-02           1       2     2 #>  8:  2021-01-05     2021-01-02           0       2     3 #>  9:  2021-01-03     2021-01-03           0       0     0 #> 10:  2021-01-04     2021-01-03           0       0     1 #> 11:  2021-01-05     2021-01-03           1       1     2 #> 12:  2021-01-04     2021-01-04           0       0     0 #> 13:  2021-01-05     2021-01-04           0       0     1 #> 14:  2021-01-05     2021-01-05           0       0     0  # Specify a custom maximum delay and allow completion beyond the maximum # observed delay enw_linelist_to_incidence(  linelist, reference_date = \"onset_date\", max_delay = 5,  completion_beyond_max_report = TRUE ) #> Key: <reference_date, report_date> #>     report_date reference_date new_confirm confirm delay #>          <IDat>         <IDat>       <int>   <int> <int> #>  1:  2021-01-02           <NA>           0       0     0 #>  2:  2021-01-03           <NA>           0       0     1 #>  3:  2021-01-04           <NA>           0       0     2 #>  4:  2021-01-05           <NA>           0       0     3 #>  5:  2021-01-02     2021-01-02           0       0     0 #>  6:  2021-01-03     2021-01-02           1       1     1 #>  7:  2021-01-04     2021-01-02           1       2     2 #>  8:  2021-01-05     2021-01-02           0       2     3 #>  9:  2021-01-06     2021-01-02           0       2     4 #> 10:  2021-01-07     2021-01-02           0       2     5 #> 11:  2021-01-03     2021-01-03           0       0     0 #> 12:  2021-01-04     2021-01-03           0       0     1 #> 13:  2021-01-05     2021-01-03           1       1     2 #> 14:  2021-01-06     2021-01-03           0       1     3 #> 15:  2021-01-07     2021-01-03           0       1     4 #> 16:  2021-01-08     2021-01-03           0       1     5 #> 17:  2021-01-04     2021-01-04           0       0     0 #> 18:  2021-01-05     2021-01-04           0       0     1 #> 19:  2021-01-06     2021-01-04           0       0     2 #> 20:  2021-01-07     2021-01-04           0       0     3 #> 21:  2021-01-08     2021-01-04           0       0     4 #> 22:  2021-01-09     2021-01-04           0       0     5 #> 23:  2021-01-05     2021-01-05           0       0     0 #> 24:  2021-01-06     2021-01-05           0       0     1 #> 25:  2021-01-07     2021-01-05           0       0     2 #> 26:  2021-01-08     2021-01-05           0       0     3 #> 27:  2021-01-09     2021-01-05           0       0     4 #> 28:  2021-01-10     2021-01-05           0       0     5 #>     report_date reference_date new_confirm confirm delay"},{"path":"https://package.epinowcast.org/reference/enw_manual_formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Define a model manually using fixed and random effects — enw_manual_formula","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"typical use cases enw_formula() provide sufficient flexibility allow models defined. However, may instances manual model specification required. function supports allowing user supply vectors fixed, random, customised random effects (first treated fixed effect terms). Prior 1.0.0 main interface specifying models still used internally handle parts model specification process.","code":""},{"path":"https://package.epinowcast.org/reference/enw_manual_formula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"","code":"enw_manual_formula(   data,   fixed = NULL,   random = NULL,   custom_random = NULL,   no_contrasts = FALSE,   add_intercept = TRUE )"},{"path":"https://package.epinowcast.org/reference/enw_manual_formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"data data.frame observations. must include variables used supplied formula. fixed character vector fixed effects. random character vector random effects. Random effects specified added fixed effects. custom_random vector random effects. Random effects added added vector fixed effects. can used random effects fixed effects partial name match. no_contrasts Logical, defaults FALSE. TRUE means variable uses contrast. Alternatively character vector variables can supplied indicating variables  contrasts. add_intercept Logical, defaults FALSE. intercept added fixed effects.","code":""},{"path":"https://package.epinowcast.org/reference/enw_manual_formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"list specifying fixed effects (formula, design matrix, design matrix index), random effects (formula design matrix).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_manual_formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"","code":"data <- enw_example(\"prep\")$metareference[[1]] enw_manual_formula(data, fixed = \"week\", random = \"day_of_week\") #> $fixed #> $fixed$formula #> [1] \"~1 + week + day_of_week\" #>  #> $fixed$design #>    (Intercept) week day_of_weekFriday day_of_weekMonday day_of_weekSaturday #> 1            1    0                 0                 0                   0 #> 2            1    0                 0                 0                   0 #> 3            1    0                 0                 0                   0 #> 4            1    0                 1                 0                   0 #> 5            1    0                 0                 0                   1 #> 6            1    0                 0                 0                   0 #> 7            1    0                 0                 1                   0 #> 8            1    1                 0                 0                   0 #> 9            1    1                 0                 0                   0 #> 10           1    1                 0                 0                   0 #> 11           1    1                 1                 0                   0 #> 12           1    1                 0                 0                   1 #> 13           1    1                 0                 0                   0 #> 14           1    1                 0                 1                   0 #> 15           1    2                 0                 0                   0 #> 16           1    2                 0                 0                   0 #> 17           1    2                 0                 0                   0 #> 18           1    2                 1                 0                   0 #> 19           1    2                 0                 0                   1 #> 20           1    2                 0                 0                   0 #> 21           1    2                 0                 1                   0 #> 22           1    3                 0                 0                   0 #> 23           1    3                 0                 0                   0 #> 24           1    3                 0                 0                   0 #> 25           1    3                 1                 0                   0 #> 26           1    3                 0                 0                   1 #> 27           1    3                 0                 0                   0 #> 28           1    3                 0                 1                   0 #> 29           1    4                 0                 0                   0 #> 30           1    4                 0                 0                   0 #> 31           1    4                 0                 0                   0 #> 32           1    4                 1                 0                   0 #> 33           1    4                 0                 0                   1 #> 34           1    4                 0                 0                   0 #> 35           1    4                 0                 1                   0 #> 36           1    5                 0                 0                   0 #> 37           1    5                 0                 0                   0 #> 38           1    5                 0                 0                   0 #> 39           1    5                 1                 0                   0 #> 40           1    5                 0                 0                   1 #> 41           1    5                 0                 0                   0 #>    day_of_weekSunday day_of_weekThursday day_of_weekTuesday #> 1                  0                   0                  1 #> 2                  0                   0                  0 #> 3                  0                   1                  0 #> 4                  0                   0                  0 #> 5                  0                   0                  0 #> 6                  1                   0                  0 #> 7                  0                   0                  0 #> 8                  0                   0                  1 #> 9                  0                   0                  0 #> 10                 0                   1                  0 #> 11                 0                   0                  0 #> 12                 0                   0                  0 #> 13                 1                   0                  0 #> 14                 0                   0                  0 #> 15                 0                   0                  1 #> 16                 0                   0                  0 #> 17                 0                   1                  0 #> 18                 0                   0                  0 #> 19                 0                   0                  0 #> 20                 1                   0                  0 #> 21                 0                   0                  0 #> 22                 0                   0                  1 #> 23                 0                   0                  0 #> 24                 0                   1                  0 #> 25                 0                   0                  0 #> 26                 0                   0                  0 #> 27                 1                   0                  0 #> 28                 0                   0                  0 #> 29                 0                   0                  1 #> 30                 0                   0                  0 #> 31                 0                   1                  0 #> 32                 0                   0                  0 #> 33                 0                   0                  0 #> 34                 1                   0                  0 #> 35                 0                   0                  0 #> 36                 0                   0                  1 #> 37                 0                   0                  0 #> 38                 0                   1                  0 #> 39                 0                   0                  0 #> 40                 0                   0                  0 #> 41                 1                   0                  0 #>    day_of_weekWednesday #> 1                     0 #> 2                     1 #> 3                     0 #> 4                     0 #> 5                     0 #> 6                     0 #> 7                     0 #> 8                     0 #> 9                     1 #> 10                    0 #> 11                    0 #> 12                    0 #> 13                    0 #> 14                    0 #> 15                    0 #> 16                    1 #> 17                    0 #> 18                    0 #> 19                    0 #> 20                    0 #> 21                    0 #> 22                    0 #> 23                    1 #> 24                    0 #> 25                    0 #> 26                    0 #> 27                    0 #> 28                    0 #> 29                    0 #> 30                    1 #> 31                    0 #> 32                    0 #> 33                    0 #> 34                    0 #> 35                    0 #> 36                    0 #> 37                    1 #> 38                    0 #> 39                    0 #> 40                    0 #> 41                    0 #>  #> $fixed$index #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 #>  #>  #> $random #> $random$formula #> [1] \"~0 + fixed + day_of_week\" #>  #> $random$design #>   fixed day_of_week #> 1     1           0 #> 2     0           1 #> 3     0           1 #> 4     0           1 #> 5     0           1 #> 6     0           1 #> 7     0           1 #> 8     0           1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $random$index #> [1] 1 2 3 4 5 6 7 8 #>  #>"},{"path":"https://package.epinowcast.org/reference/enw_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract metadata from raw data — enw_metadata","title":"Extract metadata from raw data — enw_metadata","text":"Extract metadata raw data, either reference report date. target date chosen (reference report), confirm, max_confirm``, cum_prop_reported` dropped first observation group date retained.","code":""},{"path":"https://package.epinowcast.org/reference/enw_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract metadata from raw data — enw_metadata","text":"","code":"enw_metadata(obs, target_date = c(\"reference_date\", \"report_date\"))"},{"path":"https://package.epinowcast.org/reference/enw_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract metadata from raw data — enw_metadata","text":"obs data.frame data.table columns: reference_date / report_date; least one must provided, .group, grouping column date, Date column. target_date character string, either \"reference_date\" \"report_date\". column corresponding string used target date metadata extraction.","code":""},{"path":"https://package.epinowcast.org/reference/enw_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract metadata from raw data — enw_metadata","text":"data.table columns: date, Date column .group, grouping column first observation group date. data.table sorted .group date.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract metadata from raw data — enw_metadata","text":"","code":"obs <- data.frame(   reference_date = as.Date(\"2021-01-01\"),   report_date = as.Date(\"2022-01-01\"), x = 1:10 ) enw_metadata(obs, target_date = \"reference_date\") #> Key: <.group, date> #>          date .group     x #>        <Date>  <num> <int> #> 1: 2021-01-01      1     1"},{"path":"https://package.epinowcast.org/reference/enw_metadata_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":"Calculate delay metadata based supplied maximum delay independent metadata date indexing. data meant used conjunction metadata date reference. Users can build additional features  data.frame  regenerate using function output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/reference/enw_metadata_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":"","code":"enw_metadata_delay(max_delay = 20, breaks = 4, timestep = \"day\")"},{"path":"https://package.epinowcast.org/reference/enw_metadata_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":"max_delay maximum number days model delay distribution. Must integer greater equal 1. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Consider delays realistic application, doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 days (.e. max_delay 1 corresponds delay). can use check_max_delay() check coverage delay distribution different maximum delays. breaks Numeric, defaults 4. number breaks use constructing categorised version numeric delays. timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days.","code":""},{"path":"https://package.epinowcast.org/reference/enw_metadata_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":" data.frame  delay metadata. includes: delay: numeric delay reference date report. delay_cat: categorised delay. may useful model building. delay_week: numeric week since delay reported. may useful model building. delay_head: logical variable defining delay lower 25% potential delays. may particularly useful building models assume parametric distribution order increase weight head reporting distribution pragmatic way. delay_tail: logical variable defining delay upper 75% potential delays. may particularly useful building models assume parametric distribution order increase weight tail reporting distribution pragmatic way.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_metadata_delay.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":"","code":"enw_metadata_delay(max_delay = 20, breaks = 4) #>     delay delay_cat delay_week delay_head delay_tail #>     <int>    <fctr>      <int>     <lgcl>     <lgcl> #>  1:     0     [0,5)          0       TRUE      FALSE #>  2:     1     [0,5)          0       TRUE      FALSE #>  3:     2     [0,5)          0       TRUE      FALSE #>  4:     3     [0,5)          0       TRUE      FALSE #>  5:     4     [0,5)          0       TRUE      FALSE #>  6:     5    [5,10)          0      FALSE      FALSE #>  7:     6    [5,10)          0      FALSE      FALSE #>  8:     7    [5,10)          1      FALSE      FALSE #>  9:     8    [5,10)          1      FALSE      FALSE #> 10:     9    [5,10)          1      FALSE      FALSE #> 11:    10   [10,15)          1      FALSE      FALSE #> 12:    11   [10,15)          1      FALSE      FALSE #> 13:    12   [10,15)          1      FALSE      FALSE #> 14:    13   [10,15)          1      FALSE      FALSE #> 15:    14   [10,15)          2      FALSE      FALSE #> 16:    15   [15,20)          2      FALSE       TRUE #> 17:    16   [15,20)          2      FALSE       TRUE #> 18:    17   [15,20)          2      FALSE       TRUE #> 19:    18   [15,20)          2      FALSE       TRUE #> 20:    19   [15,20)          2      FALSE       TRUE #>     delay delay_cat delay_week delay_head delay_tail"},{"path":"https://package.epinowcast.org/reference/enw_missing.html","id":null,"dir":"Reference","previous_headings":"","what":"Missing reference data model module — enw_missing","title":"Missing reference data model module — enw_missing","text":"Missing reference data model module","code":""},{"path":"https://package.epinowcast.org/reference/enw_missing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Missing reference data model module — enw_missing","text":"","code":"enw_missing(formula = ~1, data)"},{"path":"https://package.epinowcast.org/reference/enw_missing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Missing reference data model module — enw_missing","text":"formula formula (implemented enw_formula()) describing missing data proportion logit scale reference date. can use features defined reference date defined metareference produced enw_preprocess_data(). \"~0\" implies model required. Otherwise intercept always needed data Output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/reference/enw_missing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Missing reference data model module — enw_missing","text":"list containing supplied formulas, data passed list describing models, data.frame describing priors used, function takes output data priors returns function can used sample tightened version prior distribution.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_missing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Missing reference data model module — enw_missing","text":"","code":"# Missingness model with a fixed intercept only enw_missing(data = enw_example(\"preprocessed\")) #> $formula #> [1] \"~1\" #>  #> $data #> $data$miss_fdesign #>    (Intercept) #> 1            1 #> 2            1 #> 3            1 #> 4            1 #> 5            1 #> 6            1 #> 7            1 #> 8            1 #> 9            1 #> 10           1 #> 11           1 #> 12           1 #> 13           1 #> 14           1 #> 15           1 #> 16           1 #> 17           1 #> 18           1 #> 19           1 #> 20           1 #> 21           1 #> 22           1 #> 23           1 #> 24           1 #> 25           1 #> 26           1 #> 27           1 #> 28           1 #> 29           1 #> 30           1 #> 31           1 #> 32           1 #> 33           1 #> 34           1 #> 35           1 #> 36           1 #> 37           1 #> 38           1 #> 39           1 #> 40           1 #> 41           1 #> attr(,\"assign\") #> [1] 0 #>  #> $data$miss_fintercept #> [1] 1 #>  #> $data$miss_fnrow #> [1] 41 #>  #> $data$miss_findex #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 #>  #> $data$miss_fnindex #> [1] 41 #>  #> $data$miss_fncol #> [1] 0 #>  #> $data$miss_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$miss_rncol #> [1] 0 #>  #> $data$miss_st #> [1] 22 #>  #> $data$miss_cst #> [1] 22 #>  #> $data$missing_reference #>  [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #>  #> $data$obs_by_report #>         0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17 #>  [1,] 381 362 343 324 305 286 267 248 229 210 191 172 153 134 115  96  77  58 #>  [2,] 401 382 363 344 325 306 287 268 249 230 211 192 173 154 135 116  97  78 #>  [3,] 421 402 383 364 345 326 307 288 269 250 231 212 193 174 155 136 117  98 #>  [4,] 441 422 403 384 365 346 327 308 289 270 251 232 213 194 175 156 137 118 #>  [5,] 461 442 423 404 385 366 347 328 309 290 271 252 233 214 195 176 157 138 #>  [6,] 481 462 443 424 405 386 367 348 329 310 291 272 253 234 215 196 177 158 #>  [7,] 501 482 463 444 425 406 387 368 349 330 311 292 273 254 235 216 197 178 #>  [8,] 521 502 483 464 445 426 407 388 369 350 331 312 293 274 255 236 217 198 #>  [9,] 541 522 503 484 465 446 427 408 389 370 351 332 313 294 275 256 237 218 #> [10,] 561 542 523 504 485 466 447 428 409 390 371 352 333 314 295 276 257 238 #> [11,] 581 562 543 524 505 486 467 448 429 410 391 372 353 334 315 296 277 258 #> [12,] 601 582 563 544 525 506 487 468 449 430 411 392 373 354 335 316 297 278 #> [13,] 621 602 583 564 545 526 507 488 469 450 431 412 393 374 355 336 317 298 #> [14,] 641 622 603 584 565 546 527 508 489 470 451 432 413 394 375 356 337 318 #> [15,] 661 642 623 604 585 566 547 528 509 490 471 452 433 414 395 376 357 338 #> [16,] 681 662 643 624 605 586 567 548 529 510 491 472 453 434 415 396 377 358 #> [17,] 701 682 663 644 625 606 587 568 549 530 511 492 473 454 435 416 397 378 #> [18,] 721 702 683 664 645 626 607 588 569 550 531 512 493 474 455 436 417 398 #> [19,] 741 722 703 684 665 646 627 608 589 570 551 532 513 494 475 456 437 418 #> [20,] 761 742 723 704 685 666 647 628 609 590 571 552 533 514 495 476 457 438 #> [21,] 781 762 743 724 705 686 667 648 629 610 591 572 553 534 515 496 477 458 #> [22,] 801 782 763 744 725 706 687 668 649 630 611 592 573 554 535 516 497 478 #>        18  19 #>  [1,]  39  20 #>  [2,]  59  40 #>  [3,]  79  60 #>  [4,]  99  80 #>  [5,] 119 100 #>  [6,] 139 120 #>  [7,] 159 140 #>  [8,] 179 160 #>  [9,] 199 180 #> [10,] 219 200 #> [11,] 239 220 #> [12,] 259 240 #> [13,] 279 260 #> [14,] 299 280 #> [15,] 319 300 #> [16,] 339 320 #> [17,] 359 340 #> [18,] 379 360 #> [19,] 399 380 #> [20,] 419 400 #> [21,] 439 420 #> [22,] 459 440 #>  #> $data$model_miss #> [1] 1 #>  #> $data$miss_obs #> [1] 22 #>  #>  #> $priors #>        variable #>          <char> #> 1:     miss_int #> 2: miss_beta_sd #>                                                                         description #>                                                                              <char> #> 1:          Intercept on the logit scale for the proportion missing reference dates #> 2: Standard deviation of scaled pooled logit missing reference date\\n       effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal     0     1 #> 2: Zero truncated normal     0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(miss_int = numeric(0), miss_beta = numeric(0),  #>             miss_beta_sd = numeric(0)) #>         if (data$model_miss) { #>             init$miss_int <- array(rnorm(1, priors$miss_int_p[1],  #>                 priors$miss_int_p[2])) #>             if (data$miss_fncol > 0) { #>                 init$miss_beta <- array(rnorm(data$miss_fncol,  #>                   0, 0.01)) #>             } #>             if (data$miss_rncol > 0) { #>                 init$miss_beta_sd <- array(abs(rnorm(data$miss_rncol,  #>                   priors$miss_beta_sd_p[1], priors$miss_beta_sd_p[2]/10))) #>             } #>         } #>         return(init) #>     } #>     return(fn) #> } #> <bytecode: 0x564e63d9c448> #> <environment: 0x564e63d70b48> #>   # No missingness model specified enw_missing(~0, data = enw_example(\"preprocessed\")) #> $formula #> [1] \"~0\" #>  #> $data #> $data$miss_fdesign #> numeric(0) #>  #> $data$miss_fintercept #> [1] 0 #>  #> $data$miss_fnrow #> [1] 0 #>  #> $data$miss_findex #> numeric(0) #>  #> $data$miss_fnindex #> [1] 0 #>  #> $data$miss_fncol #> [1] 0 #>  #> $data$miss_rdesign #> numeric(0) #>  #> $data$miss_rncol #> [1] 0 #>  #> $data$missing_reference #> numeric(0) #>  #> $data$obs_by_report #> numeric(0) #>  #> $data$miss_st #> numeric(0) #>  #> $data$miss_cst #> numeric(0) #>  #> $data$model_miss #> [1] 0 #>  #> $data$miss_obs #> [1] 0 #>  #>  #> $priors #>        variable #>          <char> #> 1:     miss_int #> 2: miss_beta_sd #>                                                                         description #>                                                                              <char> #> 1:          Intercept on the logit scale for the proportion missing reference dates #> 2: Standard deviation of scaled pooled logit missing reference date\\n       effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal     0     1 #> 2: Zero truncated normal     0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(miss_int = numeric(0), miss_beta = numeric(0),  #>             miss_beta_sd = numeric(0)) #>         if (data$model_miss) { #>             init$miss_int <- array(rnorm(1, priors$miss_int_p[1],  #>                 priors$miss_int_p[2])) #>             if (data$miss_fncol > 0) { #>                 init$miss_beta <- array(rnorm(data$miss_fncol,  #>                   0, 0.01)) #>             } #>             if (data$miss_rncol > 0) { #>                 init$miss_beta_sd <- array(abs(rnorm(data$miss_rncol,  #>                   priors$miss_beta_sd_p[1], priors$miss_beta_sd_p[2]/10))) #>             } #>         } #>         return(init) #>     } #>     return(fn) #> } #> <bytecode: 0x564e63d9c448> #> <environment: 0x564e6232d4b8> #>"},{"path":"https://package.epinowcast.org/reference/enw_missing_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract reports with missing reference dates — enw_missing_reference","title":"Extract reports with missing reference dates — enw_missing_reference","text":"Returns reports missing reference dates well calculating proportion reports given reference date missing.","code":""},{"path":"https://package.epinowcast.org/reference/enw_missing_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract reports with missing reference dates — enw_missing_reference","text":"","code":"enw_missing_reference(obs)"},{"path":"https://package.epinowcast.org/reference/enw_missing_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract reports with missing reference dates — enw_missing_reference","text":"obs data.frame produced enw_add_incidence(). Must contain following variables: report_date, reference_date, .group, confirm, new_confirm.","code":""},{"path":"https://package.epinowcast.org/reference/enw_missing_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract reports with missing reference dates — enw_missing_reference","text":"data.table missing counts proportions report date group.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_missing_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract reports with missing reference dates — enw_missing_reference","text":"","code":"obs <- data.frame(   report_date = c(\"2021-10-01\", \"2021-10-03\"), reference_date = \"2021-10-01\",   confirm = 1 ) obs <- rbind(   obs,   data.frame(report_date = \"2021-10-04\", reference_date = NA, confirm = 4) ) obs <- enw_complete_dates(obs) obs <- enw_assign_group(obs) obs <- enw_add_incidence(obs) enw_missing_reference(obs) #> Key: <.group, report_date> #>    report_date .group confirm prop_missing #>         <IDat>  <num>   <num>        <num> #> 1:  2021-10-01      1       0            0 #> 2:  2021-10-02      1       0          NaN #> 3:  2021-10-03      1       0          NaN #> 4:  2021-10-04      1       4            1"},{"path":"https://package.epinowcast.org/reference/enw_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Load and compile the nowcasting model — enw_model","title":"Load and compile the nowcasting model — enw_model","text":"Load compile nowcasting model","code":""},{"path":"https://package.epinowcast.org/reference/enw_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load and compile the nowcasting model — enw_model","text":"","code":"enw_model(   model = system.file(\"stan\", \"epinowcast.stan\", package = \"epinowcast\"),   include = system.file(\"stan\", package = \"epinowcast\"),   compile = TRUE,   threads = TRUE,   profile = FALSE,   target_dir = epinowcast::enw_get_cache(),   stanc_options = list(),   cpp_options = list(),   verbose = TRUE,   ... )"},{"path":"https://package.epinowcast.org/reference/enw_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load and compile the nowcasting model — enw_model","text":"model character string indicating path model. supplied package default model used. include character string specifying path stan files include model. missing package default used. compile Logical, defaults TRUE. model loaded compiled using cmdstanr::cmdstan_model(). threads Logical, defaults TRUE. model compile support multi-thread support chain. Note setting produce warning threads_to_chain set ignored. Changing FALSE expected yield performance benefits even using multithreading thus recommended. profile Logical, defaults FALSE. model profiled? profiling see cmdstanr documentation. # nolint target_dir path directory manipulated .stan files without profiling statements stored. avoid overriding original .stan files, different directory original model include_paths. stanc_options list options pass stanc_options cmdstanr::cmdstan_model(). default nothing passed potentially users may wish pass optimisation flags example. See documentation cmdstanr::cmdstan_model() details. cpp_options list options pass cpp_options cmdstanr::cmdstan_model(). default nothing passed potentially users may wish pass optimisation flags example. See documentation cmdstanr::cmdstan_model() details. Note threads argument replaces stan_threads. verbose Logical, defaults TRUE. verbose messages shown. ... Additional arguments passed cmdstanr::cmdstan_model().","code":""},{"path":"https://package.epinowcast.org/reference/enw_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load and compile the nowcasting model — enw_model","text":"cmdstanr model.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load and compile the nowcasting model — enw_model","text":"","code":"if (FALSE) { # interactive() mod <- enw_model() }"},{"path":"https://package.epinowcast.org/reference/enw_nowcast_samples.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"generic wrapper around posterior::draws_df() opinionated defaults extract posterior samples nowcast (\"pp_inf_obs\" stan code). functionality function can used directly output epinowcast() using supplied summary.epinowcast() method.","code":""},{"path":"https://package.epinowcast.org/reference/enw_nowcast_samples.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"","code":"enw_nowcast_samples(fit, obs, max_delay = NULL, timestep = \"day\")"},{"path":"https://package.epinowcast.org/reference/enw_nowcast_samples.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"fit cmdstanr fit object. obs observation data.frame containing reference_date columns length number rows posterior date observation date. used align posterior observations. easiest source data output latest output enw_preprocess_data() enw_latest_data(). max_delay Maximum delay nowcasts summarised. Must equal (default) larger modelled maximum delay. larger, nowcasts unmodelled dates added assuming case counts beyond modelled maximum delay fully observed. timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days.","code":""},{"path":"https://package.epinowcast.org/reference/enw_nowcast_samples.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"data.frame posterior samples nowcast prediction. uses observed data available posterior prediction .","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_nowcast_samples.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"","code":"fit <- enw_example(\"nowcast\") enw_nowcast_samples(   fit$fit[[1]],   fit$latest[[1]],   fit$max_delay,   \"day\"   ) #>        reference_date report_date .group max_confirm location age_group confirm #>                <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     1:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     2:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     3:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     4:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     5:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>    ---                                                                          #> 19996:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19997:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19998:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19999:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 20000:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>        cum_prop_reported delay prop_reported .chain .iteration .draw sample #>                    <num> <num>         <num>  <int>      <int> <int>  <num> #>     1:                 1    19             0      1          1     1    149 #>     2:                 1    19             0      1          2     2    149 #>     3:                 1    19             0      1          3     3    149 #>     4:                 1    19             0      1          4     4    149 #>     5:                 1    19             0      1          5     5    149 #>    ---                                                                      #> 19996:                 1     0             1      2        496   996    338 #> 19997:                 1     0             1      2        497   997    598 #> 19998:                 1     0             1      2        498   998    219 #> 19999:                 1     0             1      2        499   999    508 #> 20000:                 1     0             1      2        500  1000    297"},{"path":"https://package.epinowcast.org/reference/enw_nowcast_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise the posterior nowcast prediction — enw_nowcast_summary","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"generic wrapper around enw_posterior() opinionated defaults extract posterior prediction nowcast (\"pp_inf_obs\" stan code). functionality function can used directly output epinowcast() using supplied summary.epinowcast() method.","code":""},{"path":"https://package.epinowcast.org/reference/enw_nowcast_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"","code":"enw_nowcast_summary(   fit,   obs,   max_delay = NULL,   timestep = \"day\",   probs = c(0.05, 0.2, 0.35, 0.5, 0.65, 0.8, 0.95) )"},{"path":"https://package.epinowcast.org/reference/enw_nowcast_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"fit cmdstanr fit object. obs observation data.frame containing reference_date columns length number rows posterior date observation date. used align posterior observations. easiest source data output latest output enw_preprocess_data() enw_latest_data(). max_delay Maximum delay nowcasts summarised. Must equal (default) larger modelled maximum delay. larger, nowcasts unmodelled dates added assuming case counts beyond modelled maximum delay fully observed. timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days. probs vector numeric probabilities produce quantile summaries . default 5%, 20%, 80%, 95% quantiles also minimum set required plotting functions work.","code":""},{"path":"https://package.epinowcast.org/reference/enw_nowcast_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"data.frame summarising model posterior nowcast prediction. uses observed data available posterior prediction .","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_nowcast_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"","code":"fit <- enw_example(\"nowcast\") enw_nowcast_summary(   fit$fit[[1]],   fit$latest[[1]],   fit$max_delay   ) #>     reference_date report_date .group max_confirm location age_group confirm #>             <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>  1:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>  2:     2021-08-04  2021-08-22      1         166       DE       00+     166 #>  3:     2021-08-05  2021-08-22      1         133       DE       00+     133 #>  4:     2021-08-06  2021-08-22      1         137       DE       00+     137 #>  5:     2021-08-07  2021-08-22      1         139       DE       00+     139 #>  6:     2021-08-08  2021-08-22      1          97       DE       00+      97 #>  7:     2021-08-09  2021-08-22      1          58       DE       00+      58 #>  8:     2021-08-10  2021-08-22      1         175       DE       00+     175 #>  9:     2021-08-11  2021-08-22      1         233       DE       00+     233 #> 10:     2021-08-12  2021-08-22      1         237       DE       00+     237 #> 11:     2021-08-13  2021-08-22      1         204       DE       00+     204 #> 12:     2021-08-14  2021-08-22      1         189       DE       00+     189 #> 13:     2021-08-15  2021-08-22      1         125       DE       00+     125 #> 14:     2021-08-16  2021-08-22      1          98       DE       00+      98 #> 15:     2021-08-17  2021-08-22      1         242       DE       00+     242 #> 16:     2021-08-18  2021-08-22      1         223       DE       00+     223 #> 17:     2021-08-19  2021-08-22      1         202       DE       00+     202 #> 18:     2021-08-20  2021-08-22      1         171       DE       00+     171 #> 19:     2021-08-21  2021-08-22      1         112       DE       00+     112 #> 20:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>     reference_date report_date .group max_confirm location age_group confirm #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>                 <num> <num>         <num>   <num>  <num>      <num>   <num> #>  1:                 1    19   0.000000000 149.000    149   0.000000  0.0000 #>  2:                 1    18   0.000000000 167.426    167   1.318432  1.4826 #>  3:                 1    17   0.000000000 135.789    136   1.854162  1.4826 #>  4:                 1    16   0.000000000 141.288    141   2.378805  1.4826 #>  5:                 1    15   0.007194245 146.019    146   3.079630  2.9652 #>  6:                 1    14   0.000000000 103.853    104   2.969884  2.9652 #>  7:                 1    13   0.000000000  62.766     63   2.432110  2.9652 #>  8:                 1    12   0.000000000 185.035    185   3.847932  4.4478 #>  9:                 1    11   0.000000000 256.031    256   6.498790  5.9304 #> 10:                 1    10   0.004219409 267.692    267   7.713536  7.4130 #> 11:                 1     9   0.000000000 236.057    235   8.508004  7.4130 #> 12:                 1     8   0.015873016 231.407    231  10.083304 10.3782 #> 13:                 1     7   0.040000000 164.876    164   9.848127 10.3782 #> 14:                 1     6   0.010204082 128.858    128   8.134495  7.4130 #> 15:                 1     5   0.012396694 293.309    292  11.938427 11.8608 #> 16:                 1     4   0.017937220 293.042    292  15.799489 14.8260 #> 17:                 1     3   0.019801980 291.478    290  21.108128 19.2738 #> 18:                 1     2   0.070175439 293.178    291  29.440398 28.1694 #> 19:                 1     1   0.383928571 308.518    302  51.151522 46.7019 #> 20:                 1     0   1.000000000 375.644    363 103.424281 91.1799 #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>         q5   q20    q35   q50    q65   q80    q95      rhat  ess_bulk  ess_tail #>      <num> <num>  <num> <num>  <num> <num>  <num>     <num>     <num>     <num> #>  1: 149.00   149 149.00   149 149.00   149 149.00        NA        NA        NA #>  2: 166.00   166 167.00   167 168.00   168 170.00 0.9997778 1003.5643  828.2026 #>  3: 133.00   134 135.00   136 136.00   137 139.00 1.0005878  991.0805  916.0962 #>  4: 138.00   139 140.00   141 142.00   143 146.00 1.0056729 1041.2029  872.9772 #>  5: 141.00   143 145.00   146 147.00   148 152.00 1.0001025  991.1639  885.1056 #>  6: 100.00   101 102.65   104 105.00   106 109.00 0.9991163  982.3833  917.3468 #>  7:  59.00    61  62.00    63  63.00    65  67.00 1.0009067  911.2098  793.6687 #>  8: 179.00   182 183.00   185 186.00   188 192.00 1.0002531 1004.7790  972.0392 #>  9: 246.00   251 253.00   256 258.00   261 268.00 0.9997137 1025.3311  936.5679 #> 10: 256.00   261 265.00   267 270.00   274 282.00 1.0004951 1040.1417 1008.8448 #> 11: 223.00   229 233.00   235 239.00   243 251.00 0.9985724 1201.4893  863.9704 #> 12: 216.00   222 227.00   231 234.00   240 250.00 1.0035756  751.4194  655.0188 #> 13: 150.00   157 160.00   164 168.00   173 181.00 1.0025186  927.9122  920.9413 #> 14: 117.00   122 125.00   128 131.00   135 143.00 1.0010009 1080.4014  964.2083 #> 15: 276.00   283 288.00   292 297.00   303 315.00 1.0002316 1159.2978  984.6276 #> 16: 268.00   280 286.00   292 299.00   306 320.00 1.0047058 1087.6045  957.9921 #> 17: 260.00   274 282.00   290 298.35   308 330.00 1.0002334 1129.6391  914.6275 #> 18: 250.00   269 280.00   291 301.00   316 344.00 0.9993186 1126.3831  903.3288 #> 19: 239.00   267 286.00   302 322.00   343 399.10 0.9992178 1328.2832  998.7573 #> 20: 233.95   292 327.00   363 397.00   447 565.05 0.9991666 1554.0485  999.3402 #>         q5   q20    q35   q50    q65   q80    q95      rhat  ess_bulk  ess_tail"},{"path":"https://package.epinowcast.org/reference/enw_obs.html","id":null,"dir":"Reference","previous_headings":"","what":"Setup observation model and data — enw_obs","title":"Setup observation model and data — enw_obs","text":"Setup observation model data","code":""},{"path":"https://package.epinowcast.org/reference/enw_obs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Setup observation model and data — enw_obs","text":"","code":"enw_obs(family = c(\"negbin\", \"poisson\"), observation_indicator = NULL, data)"},{"path":"https://package.epinowcast.org/reference/enw_obs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Setup observation model and data — enw_obs","text":"family Character string, observation model use likelihood; enforced base::match.arg(). default negative binomial (\"negbin\") Poisson (\"poisson\") also available. Support additional observation models planned, please open issue suggestions. observation_indicator character string, name column data indicates whether observation observed (using logical variable) therefore whether used likelihood. variable present data input enw_preprocess_data(). can generated using flag_observation enw_complete_dates() can created directly using enw_flag_observed_observations(). either approaches used variable name .observed. Default NULL. data Output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/reference/enw_obs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Setup observation model and data — enw_obs","text":"list required stan.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_obs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Setup observation model and data — enw_obs","text":"","code":"enw_obs(data = enw_example(\"preprocessed\")) #> $family #> [1] \"negbin\" #>  #> $data #> $data$n #> [1] 630 #>  #> $data$t #> [1] 41 #>  #> $data$s #> [1] 41 #>  #> $data$g #> [1] 1 #>  #> $data$groups #> [1] 1 #>  #> $data$st #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 #>  #> $data$ts #>        1 #>  [1,]  1 #>  [2,]  2 #>  [3,]  3 #>  [4,]  4 #>  [5,]  5 #>  [6,]  6 #>  [7,]  7 #>  [8,]  8 #>  [9,]  9 #> [10,] 10 #> [11,] 11 #> [12,] 12 #> [13,] 13 #> [14,] 14 #> [15,] 15 #> [16,] 16 #> [17,] 17 #> [18,] 18 #> [19,] 19 #> [20,] 20 #> [21,] 21 #> [22,] 22 #> [23,] 23 #> [24,] 24 #> [25,] 25 #> [26,] 26 #> [27,] 27 #> [28,] 28 #> [29,] 29 #> [30,] 30 #> [31,] 31 #> [32,] 32 #> [33,] 33 #> [34,] 34 #> [35,] 35 #> [36,] 36 #> [37,] 37 #> [38,] 38 #> [39,] 39 #> [40,] 40 #> [41,] 41 #>  #> $data$sl #>  [1] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 19 18 17 #> [26] 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1 #>  #> $data$csl #>  [1]  20  40  60  80 100 120 140 160 180 200 220 240 260 280 300 320 340 360 380 #> [20] 400 420 440 459 477 494 510 525 539 552 564 575 585 594 602 609 615 620 624 #> [39] 627 629 630 #>  #> $data$lsl #>  [1] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 19 18 17 #> [26] 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1 #>  #> $data$clsl #>  [1]  20  40  60  80 100 120 140 160 180 200 220 240 260 280 300 320 340 360 380 #> [20] 400 420 440 459 477 494 510 525 539 552 564 575 585 594 602 609 615 620 624 #> [39] 627 629 630 #>  #> $data$nsl #>  [1] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 19 18 17 #> [26] 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1 #>  #> $data$cnsl #>  [1]  20  40  60  80 100 120 140 160 180 200 220 240 260 280 300 320 340 360 380 #> [20] 400 420 440 459 477 494 510 525 539 552 564 575 585 594 602 609 615 620 624 #> [39] 627 629 630 #>  #> $data$sg #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 1 #>  #> $data$dmax #> [1] 20 #>  #> $data$sdmax #>  [1] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 #> [26] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 #>  #> $data$csdmax #>  [1]  20  40  60  80 100 120 140 160 180 200 220 240 260 280 300 320 340 360 380 #> [20] 400 420 440 460 480 500 520 540 560 580 600 620 640 660 680 700 720 740 760 #> [39] 780 800 820 #>  #> $data$obs #>        0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 #>  [1,] 21 12  3  4  3  0  1  2  4  3  0  0  2  0  0  0  1  2  1  0 #>  [2,] 22 12  4  5  0  1 10  2  5  3  0  1  0  3  1  0  1  0  0  0 #>  [3,] 28 15  3  3  0  1  3  2  3  2  1  0  2  3  0  3  0  0  0  0 #>  [4,] 19 13  0  0  0  4  2  2  2  1  1  1  0  1  0  0  1  0  0  0 #>  [5,] 20  7  1  3 10  3  0  4  3  3  2  0  1  2  0  1  2  1  0  0 #>  [6,]  9  6  6  0  4  5  4  0  1  4  0  0  1  1  1  2  0  0  0  2 #>  [7,]  3 16  4  4  1  1  2  0  0  0  0  1  1  1  1  0  0  0  1  0 #>  [8,] 36 19 10  4  2  3  0  3  2  3  0  2  1  1  2  2  0  0  1  0 #>  [9,] 28 18  8  4  1  2  3  6  1  5  2  2  3  0  2  0  1  0  0  0 #> [10,] 34 19  2  1  5  2  4  3  7  3  1  0  4  3  3  1  2  0  0  1 #> [11,] 30 12  4  1 10  6  0  2  2  1  2  1  4  0  2  3  0  0  4  0 #> [12,] 31  8  4  9  8  2  5  2  1  1  2  4  1  3  1  0  1  2  2  2 #> [13,]  8  4 14  8  6  5  1  3  0  4  1  2  4  2  0  1  2  2  2  0 #> [14,]  9  6  2  3  0  0  0  0  1  2  4  1  0  0  0  0  0  0  0  0 #> [15,] 35 11  6  4  4  1  0  2  2  2  2  0  0  1  4  1  0  0  0  0 #> [16,] 51 28 25  3  5  2  3  5  5  7  1  0  0  4  5  5  1  1  0  0 #> [17,] 47 37  9  2  2  3  4  4  4  3  0  2  0 10  4  3  0  0  0  0 #> [18,] 36 20  2  4 11  8  8  3  5  2  0  2  4  4  0  2  2  0  0  1 #> [19,] 38 16  3 15 14  7  5  5  0  0  5  0  5  1  6  0  0  3  1  0 #> [20,]  7  5  5 11  7  5  1  3  1  6  3  3  4  1  1  7  2  3  2  0 #> [21,] 13 13  8  6  1  3  2  0  0  2  0  2  0  5  3  0  0  0  0  1 #> [22,] 51 43  6  4  4  3  1  6  4  5  5  4  0  4  5  0  2  2  0  0 #> [23,] 51 43 18  5  6  1  2  8  7  7  6  1  0  4  3  1  3  0  0  0 #> [24,] 45 21  6  2  2 11 17  5  7  4  1  0  5  3  0  2  2  0  0  0 #> [25,] 47 31  5  4 20  6  1  9  3  1  0  2  1  5  2  0  0  0  0  0 #> [26,] 40 15  6 23 14 13  8  9  0  1  3  3  2  0  1  1  0  0  0  0 #> [27,] 13 14 27 14  7  7  0  0  0  7  1  4  2  1  0  0  0  0  0  0 #> [28,] 14 23 11  3  1  1  0  0  0  1  0  2  2  0  0  0  0  0  0  0 #> [29,] 78 43 23 11  5  1  0  5  2  2  1  4  0  0  0  0  0  0  0  0 #> [30,] 80 53 17 15  7  3 14 12 13 13  6  0  0  0  0  0  0  0  0  0 #> [31,] 89 48 28  8  1 14 13 13 10 12  1  0  0  0  0  0  0  0  0  0 #> [32,] 86 44  9  3 27 13  7 11  4  0  0  0  0  0  0  0  0  0  0  0 #> [33,] 79 36  7 16 19 13  8  8  3  0  0  0  0  0  0  0  0  0  0  0 #> [34,] 22 24 35 18 10  4  7  5  0  0  0  0  0  0  0  0  0  0  0  0 #> [35,] 23 32 22 10  8  2  1  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [36,] 96 85 30 18 10  3  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [37,] 92 86 23 18  4  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [38,] 84 87 27  4  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [39,] 98 61 12  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [40,] 69 43  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [41,] 45  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #>  #> $data$flat_obs #>   [1] 21 12  3  4  3  0  1  2  4  3  0  0  2  0  0  0  1  2  1  0 22 12  4  5  0 #>  [26]  1 10  2  5  3  0  1  0  3  1  0  1  0  0  0 28 15  3  3  0  1  3  2  3  2 #>  [51]  1  0  2  3  0  3  0  0  0  0 19 13  0  0  0  4  2  2  2  1  1  1  0  1  0 #>  [76]  0  1  0  0  0 20  7  1  3 10  3  0  4  3  3  2  0  1  2  0  1  2  1  0  0 #> [101]  9  6  6  0  4  5  4  0  1  4  0  0  1  1  1  2  0  0  0  2  3 16  4  4  1 #> [126]  1  2  0  0  0  0  1  1  1  1  0  0  0  1  0 36 19 10  4  2  3  0  3  2  3 #> [151]  0  2  1  1  2  2  0  0  1  0 28 18  8  4  1  2  3  6  1  5  2  2  3  0  2 #> [176]  0  1  0  0  0 34 19  2  1  5  2  4  3  7  3  1  0  4  3  3  1  2  0  0  1 #> [201] 30 12  4  1 10  6  0  2  2  1  2  1  4  0  2  3  0  0  4  0 31  8  4  9  8 #> [226]  2  5  2  1  1  2  4  1  3  1  0  1  2  2  2  8  4 14  8  6  5  1  3  0  4 #> [251]  1  2  4  2  0  1  2  2  2  0  9  6  2  3  0  0  0  0  1  2  4  1  0  0  0 #> [276]  0  0  0  0  0 35 11  6  4  4  1  0  2  2  2  2  0  0  1  4  1  0  0  0  0 #> [301] 51 28 25  3  5  2  3  5  5  7  1  0  0  4  5  5  1  1  0  0 47 37  9  2  2 #> [326]  3  4  4  4  3  0  2  0 10  4  3  0  0  0  0 36 20  2  4 11  8  8  3  5  2 #> [351]  0  2  4  4  0  2  2  0  0  1 38 16  3 15 14  7  5  5  0  0  5  0  5  1  6 #> [376]  0  0  3  1  0  7  5  5 11  7  5  1  3  1  6  3  3  4  1  1  7  2  3  2  0 #> [401] 13 13  8  6  1  3  2  0  0  2  0  2  0  5  3  0  0  0  0  1 51 43  6  4  4 #> [426]  3  1  6  4  5  5  4  0  4  5  0  2  2  0  0 51 43 18  5  6  1  2  8  7  7 #> [451]  6  1  0  4  3  1  3  0  0 45 21  6  2  2 11 17  5  7  4  1  0  5  3  0  2 #> [476]  2  0 47 31  5  4 20  6  1  9  3  1  0  2  1  5  2  0  0 40 15  6 23 14 13 #> [501]  8  9  0  1  3  3  2  0  1  1 13 14 27 14  7  7  0  0  0  7  1  4  2  1  0 #> [526] 14 23 11  3  1  1  0  0  0  1  0  2  2  0 78 43 23 11  5  1  0  5  2  2  1 #> [551]  4  0 80 53 17 15  7  3 14 12 13 13  6  0 89 48 28  8  1 14 13 13 10 12  1 #> [576] 86 44  9  3 27 13  7 11  4  0 79 36  7 16 19 13  8  8  3 22 24 35 18 10  4 #> [601]  7  5 23 32 22 10  8  2  1 96 85 30 18 10  3 92 86 23 18  4 84 87 27  4 98 #> [626] 61 12 69 43 45 #>  #> $data$flat_obs_lookup #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 #> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 #> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 #> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 #> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 #> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 #> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 #> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 #> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 #> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 #> [271] 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 #> [289] 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 #> [307] 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 #> [325] 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 #> [343] 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 #> [361] 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 #> [379] 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 #> [397] 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 #> [415] 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 #> [433] 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 #> [451] 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 #> [469] 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 #> [487] 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 #> [505] 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 #> [523] 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 #> [541] 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 #> [559] 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 #> [577] 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 #> [595] 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 #> [613] 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 #>  #> $data$latest_obs #>         1 #>  [1,]  59 #>  [2,]  70 #>  [3,]  69 #>  [4,]  47 #>  [5,]  63 #>  [6,]  46 #>  [7,]  36 #>  [8,]  91 #>  [9,]  86 #> [10,]  95 #> [11,]  84 #> [12,]  89 #> [13,]  69 #> [14,]  28 #> [15,]  75 #> [16,] 151 #> [17,] 134 #> [18,] 114 #> [19,] 124 #> [20,]  77 #> [21,]  59 #> [22,] 149 #> [23,] 166 #> [24,] 133 #> [25,] 137 #> [26,] 139 #> [27,]  97 #> [28,]  58 #> [29,] 175 #> [30,] 233 #> [31,] 237 #> [32,] 204 #> [33,] 189 #> [34,] 125 #> [35,]  98 #> [36,] 242 #> [37,] 223 #> [38,] 202 #> [39,] 171 #> [40,] 112 #> [41,]  45 #>  #> $data$model_obs #> [1] 1 #>  #>  #> $priors #>    variable                                              description #>      <char>                                                   <char> #> 1: sqrt_phi One over the square root of the reporting overdispersion #>             distribution  mean    sd #>                   <char> <num> <num> #> 1: Zero truncated normal     0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(sqrt_phi = numeric(0), phi = numeric(0)) #>         if (data$model_obs == 1) { #>             init$sqrt_phi <- array(max(abs(rnorm(1, priors$sqrt_phi_p[1],  #>                 priors$sqrt_phi_p[2]/10)), 1e-04)) #>             init$phi <- 1/(init$sqrt_phi^2) #>         } #>         return(init) #>     } #>     return(fn) #> } #> <bytecode: 0x564e5c9f4930> #> <environment: 0x564e5c9efbd8> #>"},{"path":"https://package.epinowcast.org/reference/enw_one_hot_encode_feature.html","id":null,"dir":"Reference","previous_headings":"","what":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","title":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","text":"function takes data.frame categorical variable, performs one-hot encoding, column-binds encoded variables back data.frame.","code":""},{"path":"https://package.epinowcast.org/reference/enw_one_hot_encode_feature.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","text":"","code":"enw_one_hot_encode_feature(metaobs, feature, contrasts = FALSE)"},{"path":"https://package.epinowcast.org/reference/enw_one_hot_encode_feature.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","text":"metaobs data.frame containing data encoded. feature name categorical variable one-hot encode character string. contrasts Logical. TRUE, create one-hot encoded variables contrasts; FALSE, create without contrasts. Defaults FALSE.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_one_hot_encode_feature.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","text":"","code":"metaobs <- data.frame(week = 1:2) enw_one_hot_encode_feature(metaobs, \"week\") #>     week week1 week2 #>    <int> <num> <num> #> 1:     1     1     0 #> 2:     2     0     1 enw_one_hot_encode_feature(metaobs, \"week\", contrasts = TRUE) #>     week week2 #>    <int> <num> #> 1:     1     0 #> 2:     2     1  metaobs <- data.frame(week = 1:6) enw_one_hot_encode_feature(metaobs, \"week\") #>     week week1 week2 week3 week4 week5 week6 #>    <int> <num> <num> <num> <num> <num> <num> #> 1:     1     1     0     0     0     0     0 #> 2:     2     0     1     0     0     0     0 #> 3:     3     0     0     1     0     0     0 #> 4:     4     0     0     0     1     0     0 #> 5:     5     0     0     0     0     1     0 #> 6:     6     0     0     0     0     0     1 enw_one_hot_encode_feature(metaobs, \"week\", contrasts = TRUE) #>     week week2 week3 week4 week5 week6 #>    <int> <num> <num> <num> <num> <num> #> 1:     1     0     0     0     0     0 #> 2:     2     1     0     0     0     0 #> 3:     3     0     1     0     0     0 #> 4:     4     0     0     1     0     0 #> 5:     5     0     0     0     1     0 #> 6:     6     0     0     0     0     1"},{"path":"https://package.epinowcast.org/reference/enw_plot_nowcast_quantiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"Plot nowcast quantiles","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_nowcast_quantiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"","code":"enw_plot_nowcast_quantiles(nowcast, latest_obs = NULL, log = FALSE, ...)"},{"path":"https://package.epinowcast.org/reference/enw_plot_nowcast_quantiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"nowcast data.frame summarised posterior nowcast estimates containing least confirm count column reference_date date variable. latest_obs data.frame observed data containing least confirm count variable date variable main data.frame used plotting. log Logical, defaults FALSE. counts plot log scale. ... Additional arguments passed enw_plot_pp_quantiles().","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_nowcast_quantiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"ggplot2 plot.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_plot_nowcast_quantiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"","code":"nowcast <- enw_example(\"nowcast\") nowcast <- summary(nowcast, probs = c(0.05, 0.2, 0.8, 0.95)) enw_plot_nowcast_quantiles(nowcast)"},{"path":"https://package.epinowcast.org/reference/enw_plot_obs.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic quantile plot — enw_plot_obs","title":"Generic quantile plot — enw_plot_obs","text":"Generic quantile plot","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_obs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic quantile plot — enw_plot_obs","text":"","code":"enw_plot_obs(obs, latest_obs = NULL, log = TRUE, ...)"},{"path":"https://package.epinowcast.org/reference/enw_plot_obs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic quantile plot — enw_plot_obs","text":"obs data.frame summarised posterior estimates containing least confirm count column date variable latest_obs data.frame observed data containing least confirm count variable date variable main data.frame used plotting. log Logical, defaults FALSE. counts plot log scale. ... Additional arguments passed ggplot2::aes() must least specify x date variable.","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_obs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic quantile plot — enw_plot_obs","text":"ggplot2 plot.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_plot_obs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic quantile plot — enw_plot_obs","text":"","code":"nowcast <- enw_example(\"nowcast\") obs <- enw_example(\"obs\")  # Plot observed data by reference date enw_plot_obs(obs, x = reference_date)   # Plot observed data by reference date with more recent data enw_plot_obs(nowcast$latest[[1]], obs, x = reference_date)"},{"path":"https://package.epinowcast.org/reference/enw_plot_pp_quantiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"Plot posterior prediction quantiles","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_pp_quantiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"","code":"enw_plot_pp_quantiles(pp, log = FALSE, ...)"},{"path":"https://package.epinowcast.org/reference/enw_plot_pp_quantiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"pp data.frame summarised posterior predictions estimates containing least confirm count column report_date date variable. log Logical, defaults FALSE. counts plot log scale. ... Additional arguments passed enw_plot_pp_quantiles().","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_pp_quantiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"ggplot2 plot.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_plot_pp_quantiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"","code":"nowcast <- enw_example(\"nowcast\") nowcast <- summary(  nowcast, type = \"posterior_prediction\", probs = c(0.05, 0.2, 0.8, 0.95) ) enw_plot_pp_quantiles(nowcast) +  ggplot2::facet_wrap(ggplot2::vars(reference_date), scales = \"free\") #> `geom_line()`: Each group consists of only one observation. #> ℹ Do you need to adjust the group aesthetic? #> `geom_line()`: Each group consists of only one observation. #> ℹ Do you need to adjust the group aesthetic?"},{"path":"https://package.epinowcast.org/reference/enw_plot_quantiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic quantile plot — enw_plot_quantiles","title":"Generic quantile plot — enw_plot_quantiles","text":"Generic quantile plot","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_quantiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic quantile plot — enw_plot_quantiles","text":"","code":"enw_plot_quantiles(posterior, latest_obs = NULL, log = FALSE, ...)"},{"path":"https://package.epinowcast.org/reference/enw_plot_quantiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic quantile plot — enw_plot_quantiles","text":"posterior data.frame summarised posterior estimates containing least confirm count column date variable, quantile estimates 5%, 20%, 80%, 95% quantiles mean median. function wrapped enw_plot_nowcast_quantiles() enw_plot_pp_quantiles() sensible default labels. latest_obs data.frame observed data containing least confirm count variable date variable main data.frame used plotting. log Logical, defaults FALSE. counts plot log scale. ... Additional arguments passed ggplot2::aes() must least specify x date variable.","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_quantiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic quantile plot — enw_plot_quantiles","text":"ggplot2 plot.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_plot_quantiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic quantile plot — enw_plot_quantiles","text":"","code":"nowcast <- enw_example(\"nowcast\") nowcast <- summary(nowcast, probs = c(0.05, 0.2, 0.8, 0.95)) enw_plot_quantiles(nowcast, x = reference_date)"},{"path":"https://package.epinowcast.org/reference/enw_plot_theme.html","id":null,"dir":"Reference","previous_headings":"","what":"Package plot theme — enw_plot_theme","title":"Package plot theme — enw_plot_theme","text":"Package plot theme","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_theme.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Package plot theme — enw_plot_theme","text":"","code":"enw_plot_theme(plot)"},{"path":"https://package.epinowcast.org/reference/enw_plot_theme.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Package plot theme — enw_plot_theme","text":"plot ggplot2 plot object.","code":""},{"path":"https://package.epinowcast.org/reference/enw_plot_theme.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Package plot theme — enw_plot_theme","text":"ggplot2 plot object.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_posterior.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise the posterior — enw_posterior","title":"Summarise the posterior — enw_posterior","text":"generic wrapper around posterior::summarise_draws() opinionated defaults.","code":""},{"path":"https://package.epinowcast.org/reference/enw_posterior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise the posterior — enw_posterior","text":"","code":"enw_posterior(fit, variables = NULL, probs = c(0.05, 0.2, 0.8, 0.95), ...)"},{"path":"https://package.epinowcast.org/reference/enw_posterior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise the posterior — enw_posterior","text":"fit cmdstanr fit object. variables character vector variables return posterior summaries . default summaries parameters returned. probs vector numeric probabilities produce quantile summaries . default 5%, 20%, 80%, 95% quantiles also minimum set required plotting functions work. ... Additional arguments may passed used.","code":""},{"path":"https://package.epinowcast.org/reference/enw_posterior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise the posterior — enw_posterior","text":"data.frame summarising model posterior.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_posterior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise the posterior — enw_posterior","text":"","code":"fit <- enw_example(\"nowcast\") enw_posterior(fit$fit[[1]], variables = \"expr_beta\") #>          variable        mean      median        sd       mad         q5 #>            <char>       <num>       <num>     <num>     <num>      <num> #>  1:  expr_beta[1]  0.35684525  0.38513650 0.6071031 0.5922742 -0.6494806 #>  2:  expr_beta[2] -0.33875491 -0.35413550 0.5316359 0.5444528 -1.2489460 #>  3:  expr_beta[3] -0.82588123 -0.81671050 0.5264853 0.5388206 -1.6927830 #>  4:  expr_beta[4]  0.47819954  0.48673550 0.5527218 0.5539461 -0.3921465 #>  5:  expr_beta[5] -0.46612483 -0.43738750 0.5324975 0.5265810 -1.3767895 #>  6:  expr_beta[6] -0.24890586 -0.25825550 0.5541499 0.5388702 -1.1487240 #>  7:  expr_beta[7]  1.73567813  1.73280500 0.5577201 0.5502299  0.8544918 #>  8:  expr_beta[8]  0.30912781  0.29048400 0.5303134 0.5079153 -0.5208296 #>  9:  expr_beta[9]  0.26129720  0.25496650 0.5351315 0.5102094 -0.5510549 #> 10: expr_beta[10] -0.34293924 -0.33896900 0.5085884 0.5114610 -1.1630510 #> 11: expr_beta[11] -0.18025398 -0.18849850 0.5293584 0.5401356 -1.0364660 #> 12: expr_beta[12] -0.55133190 -0.53363050 0.5061724 0.5214957 -1.4455940 #> 13: expr_beta[13] -1.21675116 -1.25548500 0.5557861 0.5387249 -2.0703980 #> 14: expr_beta[14]  1.50577137  1.49453000 0.5682583 0.5690664  0.5844779 #> 15: expr_beta[15]  1.80676209  1.78822500 0.5266780 0.5213044  0.9916373 #> 16: expr_beta[16] -0.22659670 -0.21280000 0.4970468 0.5192970 -1.0156420 #> 17: expr_beta[17] -0.22585278 -0.22793000 0.5033182 0.4833884 -1.0889905 #> 18: expr_beta[18] -0.19098402 -0.17873650 0.4940566 0.4875967 -1.0151905 #> 19: expr_beta[19] -0.55160992 -0.54766700 0.4783924 0.4669671 -1.3509820 #> 20: expr_beta[20] -0.32821312 -0.32561850 0.5125612 0.5046108 -1.1962030 #> 21: expr_beta[21]  1.63637949  1.63849000 0.5249875 0.5045733  0.7770415 #> 22: expr_beta[22]  0.40856186  0.39918700 0.4671506 0.4531634 -0.3303581 #> 23: expr_beta[23] -0.26195283 -0.27824500 0.4949229 0.4692837 -1.0530325 #> 24: expr_beta[24] -0.33525424 -0.32169400 0.5123588 0.4978281 -1.1339600 #> 25: expr_beta[25] -0.13372196 -0.14382750 0.4999209 0.4859259 -0.9678827 #> 26: expr_beta[26] -0.86077846 -0.86628550 0.4833677 0.4761889 -1.6534950 #> 27: expr_beta[27] -0.64756284 -0.65141150 0.5581826 0.5363091 -1.5271545 #> 28: expr_beta[28]  2.09501813  2.07307500 0.5592953 0.5371830  1.1501045 #> 29: expr_beta[29]  1.60666427  1.60619500 0.5061789 0.5187395  0.8145032 #> 30: expr_beta[30]  0.11283333  0.10585800 0.4617883 0.4696899 -0.6313616 #> 31: expr_beta[31] -0.64318005 -0.62561600 0.4883210 0.4828776 -1.4844680 #> 32: expr_beta[32] -0.23554353 -0.22705450 0.5100066 0.5079847 -1.0740710 #> 33: expr_beta[33] -0.66394530 -0.65881200 0.5019356 0.5210079 -1.4722470 #> 34: expr_beta[34] -0.13647475 -0.12728800 0.5257835 0.5127135 -1.0345925 #> 35: expr_beta[35]  1.45225360  1.44985000 0.5448896 0.5435212  0.5733330 #> 36: expr_beta[36]  0.19724123  0.17712750 0.5479048 0.5495294 -0.6532589 #> 37: expr_beta[37]  0.02321996  0.04016270 0.5654696 0.5489968 -0.8943150 #> 38: expr_beta[38]  0.09745179  0.07998625 0.5901572 0.5827882 -0.8472095 #> 39: expr_beta[39]  0.16275776  0.14112550 0.6432952 0.6728869 -0.8980906 #> 40: expr_beta[40]  0.42947144  0.41642350 0.7665738 0.7325518 -0.7988134 #>          variable        mean      median        sd       mad         q5 #>              q20         q80         q95      rhat  ess_bulk ess_tail #>            <num>       <num>       <num>     <num>     <num>    <num> #>  1: -0.163013600  0.87226020  1.31767450 1.0001047  867.1216 773.7010 #>  2: -0.787502200  0.13752940  0.51372130 1.0029342 1370.1095 692.4391 #>  3: -1.267146000 -0.36400680 -0.01222673 1.0007299 1019.0570 680.3411 #>  4: -0.003975476  0.92062180  1.38134150 1.0013801 1110.4424 911.1582 #>  5: -0.920010600 -0.03905900  0.39158630 1.0039360 1330.7214 848.9383 #>  6: -0.717053400  0.20730320  0.71817620 1.0001761 1538.3876 758.6339 #>  7:  1.271064000  2.21426000  2.65595500 1.0055696 1349.1534 885.1633 #>  8: -0.122569800  0.73059860  1.27063700 1.0006482 1588.5825 802.7376 #>  9: -0.192926400  0.69688320  1.16726600 0.9988548 1308.2225 725.2749 #> 10: -0.765678800  0.07463298  0.48722810 1.0033819 1370.6060 863.7248 #> 11: -0.601448200  0.27612500  0.67290860 1.0090129 1099.6415 680.6538 #> 12: -0.975785800 -0.12505980  0.26517450 1.0034301  922.8422 711.5400 #> 13: -1.677980000 -0.75861240 -0.26068960 1.0033923 1033.1353 710.5464 #> 14:  1.018106000  2.00031200  2.46543500 1.0008425 1373.2452 747.9076 #> 15:  1.343624000  2.24870200  2.70458000 1.0013836 1045.4871 989.8063 #> 16: -0.666397400  0.17619740  0.59433185 1.0005048 1780.9331 654.9422 #> 17: -0.625236800  0.17792700  0.60199935 1.0013312 1314.6543 764.2015 #> 18: -0.584519400  0.20731240  0.61549185 1.0020052 1143.0577 726.4011 #> 19: -0.954171800 -0.16228140  0.22944395 1.0031739 1071.1708 745.8015 #> 20: -0.769528400  0.10849600  0.50364475 0.9997411  965.2687 945.7367 #> 21:  1.205266000  2.06758600  2.51144850 1.0100474  943.2035 797.7075 #> 22:  0.006352270  0.78036720  1.21200000 0.9996066 1210.5042 843.2722 #> 23: -0.698228800  0.13156440  0.58908165 1.0011512 1123.5315 542.4462 #> 24: -0.744428000  0.09040918  0.45692945 0.9988092 1233.4907 588.3721 #> 25: -0.545979400  0.30070380  0.69926310 1.0005777 1234.2198 712.5444 #> 26: -1.277310000 -0.46010760 -0.07827088 1.0032229  952.4666 596.0861 #> 27: -1.126038000 -0.19323020  0.29300760 1.0011828 1149.3325 795.7194 #> 28:  1.637286000  2.57600600  3.00911450 1.0033170 1098.3874 804.6810 #> 29:  1.167128000  2.03239200  2.45619300 1.0034821 1186.2869 906.1873 #> 30: -0.276539200  0.50056900  0.85454015 1.0068652 1074.9634 848.8544 #> 31: -1.034494000 -0.24212920  0.17003400 0.9992916 1215.3117 737.5176 #> 32: -0.666932800  0.18828940  0.62481300 0.9986804 1197.6937 699.0221 #> 33: -1.083712000 -0.23174800  0.16350350 0.9988375 1137.3569 803.2799 #> 34: -0.561141800  0.30273520  0.72544580 1.0003900 1095.8057 854.2453 #> 35:  1.003394000  1.90514400  2.31765300 1.0004043  879.0179 657.8051 #> 36: -0.295889000  0.65494980  1.14122800 1.0056312 1235.9879 852.6814 #> 37: -0.453943200  0.46923540  0.96774300 1.0075710 1193.8100 745.7828 #> 38: -0.376546600  0.59535760  1.05643450 1.0010685 1026.9035 699.4094 #> 39: -0.391462400  0.72403500  1.19838600 1.0052822 1393.4582 901.7751 #> 40: -0.205988800  1.08607600  1.72318550 1.0049766 1393.2373 829.0541 #>              q20         q80         q95      rhat  ess_bulk ess_tail"},{"path":"https://package.epinowcast.org/reference/enw_pp_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Posterior predictive summary — enw_pp_summary","title":"Posterior predictive summary — enw_pp_summary","text":"function summarises posterior predictives observed data (report reference date). functionality function can used directly output epinowcast() using supplied summary.epinowcast() method.","code":""},{"path":"https://package.epinowcast.org/reference/enw_pp_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Posterior predictive summary — enw_pp_summary","text":"","code":"enw_pp_summary(fit, diff_obs, probs = c(0.05, 0.2, 0.35, 0.5, 0.65, 0.8, 0.95))"},{"path":"https://package.epinowcast.org/reference/enw_pp_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Posterior predictive summary — enw_pp_summary","text":"fit cmdstanr fit object. diff_obs data.frame observed data least date variable reference_date, grouping variable .group. probs vector numeric probabilities produce quantile summaries . default 5%, 20%, 80%, 95% quantiles also minimum set required plotting functions work.","code":""},{"path":"https://package.epinowcast.org/reference/enw_pp_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Posterior predictive summary — enw_pp_summary","text":"data.table summarising posterior predictions.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_pp_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Posterior predictive summary — enw_pp_summary","text":"","code":"fit <- enw_example(\"nowcast\") enw_pp_summary(fit$fit[[1]], fit$new_confirm[[1]], probs = c(0.5)) #>      reference_date report_date .group max_confirm location age_group confirm #>              <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>   1:     2021-07-13  2021-07-13      1          59       DE       00+      21 #>   2:     2021-07-13  2021-07-14      1          59       DE       00+      33 #>   3:     2021-07-13  2021-07-15      1          59       DE       00+      36 #>   4:     2021-07-13  2021-07-16      1          59       DE       00+      40 #>   5:     2021-07-13  2021-07-17      1          59       DE       00+      43 #>  ---                                                                          #> 626:     2021-08-20  2021-08-21      1         171       DE       00+     159 #> 627:     2021-08-20  2021-08-22      1         171       DE       00+     171 #> 628:     2021-08-21  2021-08-21      1         112       DE       00+      69 #> 629:     2021-08-21  2021-08-22      1         112       DE       00+     112 #> 630:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>      cum_prop_reported delay new_confirm prop_reported   mean median        sd #>                  <num> <num>       <int>         <num>  <num>  <num>     <num> #>   1:         0.3559322     0          21    0.35593220 19.639     19  8.642649 #>   2:         0.5593220     1          12    0.20338983 20.812     19  9.566932 #>   3:         0.6101695     2           3    0.05084746  6.137      6  3.627311 #>   4:         0.6779661     3           4    0.06779661  4.147      4  2.595019 #>   5:         0.7288136     4           3    0.05084746  2.396      2  1.842438 #>  ---                                                                           #> 626:         0.9298246     1          61    0.35672515 79.760     76 31.667100 #> 627:         1.0000000     2          12    0.07017544 12.362     11  6.193328 #> 628:         0.6160714     0          69    0.61607143 74.098     70 30.701090 #> 629:         1.0000000     1          43    0.38392857 47.543     43 22.022605 #> 630:         1.0000000     0          45    1.00000000 40.036     37 18.937617 #>          mad   q50      rhat  ess_bulk  ess_tail #>        <num> <num>     <num>     <num>     <num> #>   1:  8.8956    19 0.9998578  950.1480  983.7776 #>   2:  8.8956    19 0.9996637  806.5805  667.5845 #>   3:  2.9652     6 1.0032698  967.3662 1001.0476 #>   4:  2.9652     4 0.9991688 1110.2815  975.4648 #>   5:  1.4826     2 0.9996678  896.9374  922.8697 #>  ---                                             #> 626: 31.1346    76 1.0003079 1054.6289  881.3948 #> 627:  5.9304    11 1.0025396  998.3479 1035.5098 #> 628: 29.6520    70 0.9988369 1194.4760 1028.2922 #> 629: 19.2738    43 1.0010545 1154.8141  814.1646 #> 630: 17.7912    37 0.9993409 1159.6413  855.4762"},{"path":"https://package.epinowcast.org/reference/enw_preprocess_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Preprocess observations — enw_preprocess_data","title":"Preprocess observations — enw_preprocess_data","text":"function preprocesses raw observations assumption reported cumulative counts reference report date used assign groups. also constructs data objects used visualisation modelling functions including observed empirical probability report given day, cumulative probability report, latest available observations, incidence observations, metadata date reference report (used construct models). function wraps preprocessing functions may instead used individually required. Note internally reports beyond user specified delay dropped modelling purposes cum_prop_reported max_confirm variables allowing user check impact may (cum_prop_reported significantly 1 longer max_delay may appropriate). Also note missing reference report dates suspected occur data need completed enw_complete_dates().","code":""},{"path":"https://package.epinowcast.org/reference/enw_preprocess_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Preprocess observations — enw_preprocess_data","text":"","code":"enw_preprocess_data(   obs,   by = NULL,   max_delay,   timestep = \"day\",   set_negatives_to_zero = TRUE,   ...,   copy = TRUE )"},{"path":"https://package.epinowcast.org/reference/enw_preprocess_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Preprocess observations — enw_preprocess_data","text":"obs data.frame containing least following variables: reference_date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling max_delay maximum number days model delay distribution. specified maximum observed delay assumed true maximum delay model. Otherwise, integer greater equal 1 can specified. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Steps take determine maximum delay: Consider realistic relevant application. Check proportion observations reported (prop_reported) delay new_confirm output enw_preprocess_obs. Use check_max_delay() check coverage candidate max_delay. doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 days (.e. max_delay 1 corresponds delay). timestep timestep used process model (.e. reference date model). can string (\"day\", \"week\", \"month\") numeric whole number representing number days. data timestep may wish make use enw_aggregate_cumulative() aggregate data desired timestep. set_negatives_to_zero Logical, defaults TRUE. negative counts (calculated incidence observations) set zero? Currently downstream modelling support negative counts setting must TRUE intending use epinowcast(). ... arguments enw_add_metaobs_features(), e.g. holidays, sets commonly used metadata (e.g. day week, days since start time series) copy logical; TRUE (default) creates copy; otherwise, modifies obs place.","code":""},{"path":"https://package.epinowcast.org/reference/enw_preprocess_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Preprocess observations — enw_preprocess_data","text":"data.table containing processed observations series nested data.frames well variables containing metadata. : obs: (observations addition empirical reporting proportions restricted specified maximum delay). new_confirm: Incidence notifications reference report date. Empirical reporting distributions also added. latest: latest available observations. missing_reference: Observations missing reference dates. reporting_triangle: Incident observations report reference date standard reporting triangle matrix format. metareference: Metadata reference dates derived observations. metrareport: Metadata report dates. metadelay: Metadata reporting delays produced using enw_metadata_delay(). max_delay: Maximum delay modelled epinowcast. time: Numeric, number timepoints data. snapshots: Numeric, number available data snapshots use nowcasting. groups: Numeric, Number groups/strata supplied observations (set using ). max_date: maximum available report date.","code":""},{"path":"https://package.epinowcast.org/reference/enw_preprocess_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Preprocess observations — enw_preprocess_data","text":"max_delay numeric, internally coerced integer using .integer()).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_preprocess_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Preprocess observations — enw_preprocess_data","text":"","code":"library(data.table)  # Filter example hospitalisation data to be national and over all ages nat_germany_hosp <- germany_covid19_hosp[location == \"DE\"] nat_germany_hosp <- nat_germany_hosp[age_group == \"00+\"]  # Preprocess with default settings pobs <- enw_preprocess_data(nat_germany_hosp) #> Using the maximum observed delay of 82 days. You may want to specify a shorter #> (or, in special cases, longer) maximum delay via the `max_delay` argument. See #> help(enw_preprocess_data) (`?epinowcast::enw_preprocess_data()`) for details. pobs #>                      obs            new_confirm               latest #>                   <list>                 <list>               <list> #> 1: <data.table[12915x9]> <data.table[12915x11]> <data.table[198x10]> #>    missing_reference   reporting_triangle       metareference #>               <list>               <list>              <list> #> 1: <data.table[0x6]> <data.table[198x84]> <data.table[198x9]> #>              metareport          metadelay max_delay  time snapshots     by #>                  <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[279x12]> <data.table[82x5]>        82   198       198        #>    groups   max_date timestep #>     <int>     <IDat>   <char> #> 1:      1 2021-10-20      day"},{"path":"https://package.epinowcast.org/reference/enw_priors_as_data_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert prior data.frame to list — enw_priors_as_data_list","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"Converts priors defined data.frame list format use stan. addition adds \"_p\" variable names order allow distinguished standard usage within modelling code.","code":""},{"path":"https://package.epinowcast.org/reference/enw_priors_as_data_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"","code":"enw_priors_as_data_list(priors)"},{"path":"https://package.epinowcast.org/reference/enw_priors_as_data_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"priors data.frame following variables: variable, mean, sd describing normal priors. Priors appropriate format returned enw_reference() well similar model specification functions.","code":""},{"path":"https://package.epinowcast.org/reference/enw_priors_as_data_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"named list entry specifying prior length two vector (specifying mean standard deviation prior).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_priors_as_data_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"","code":"priors <- data.frame(variable = \"x\", mean = 1, sd = 2) enw_priors_as_data_list(priors) #> $x_p #>      [,1] #> mean    1 #> sd      2 #>"},{"path":"https://package.epinowcast.org/reference/enw_quantiles_to_long.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"Convert summarised quantiles wide long format","code":""},{"path":"https://package.epinowcast.org/reference/enw_quantiles_to_long.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"","code":"enw_quantiles_to_long(posterior)"},{"path":"https://package.epinowcast.org/reference/enw_quantiles_to_long.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"posterior data.frame output enw_posterior().","code":""},{"path":"https://package.epinowcast.org/reference/enw_quantiles_to_long.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"data.frame quantiles long format.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_quantiles_to_long.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"","code":"fit <- enw_example(\"nowcast\") posterior <- enw_posterior(fit$fit[[1]], var = \"expr_lelatent_int[1,1]\") enw_quantiles_to_long(posterior) #>                  variable     mean  median        sd       mad     rhat #>                    <char>    <num>   <num>     <num>     <num>    <num> #> 1: expr_lelatent_int[1,1] 4.177537 4.17533 0.1807851 0.1778527 1.000321 #> 2: expr_lelatent_int[1,1] 4.177537 4.17533 0.1807851 0.1778527 1.000321 #> 3: expr_lelatent_int[1,1] 4.177537 4.17533 0.1807851 0.1778527 1.000321 #> 4: expr_lelatent_int[1,1] 4.177537 4.17533 0.1807851 0.1778527 1.000321 #>    ess_bulk ess_tail quantile prediction #>       <num>    <num>    <num>      <num> #> 1: 990.9203 725.2305     0.05   3.879833 #> 2: 990.9203 725.2305     0.20   4.029484 #> 3: 990.9203 725.2305     0.80   4.329792 #> 4: 990.9203 725.2305     0.95   4.480233"},{"path":"https://package.epinowcast.org/reference/enw_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Reference date logit hazard reporting model module — enw_reference","title":"Reference date logit hazard reporting model module — enw_reference","text":"Reference date logit hazard reporting  model module","code":""},{"path":"https://package.epinowcast.org/reference/enw_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reference date logit hazard reporting model module — enw_reference","text":"","code":"enw_reference(   parametric = ~1,   distribution = c(\"lognormal\", \"none\", \"exponential\", \"gamma\", \"loglogistic\"),   non_parametric = ~0,   data )"},{"path":"https://package.epinowcast.org/reference/enw_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reference date logit hazard reporting model module — enw_reference","text":"parametric formula (implemented enw_formula()) describing parametric reference date delay model. can use features defined report date defined metareference produced enw_preprocess_data(). Note formula applied summary statistics chosen parametric distribution summary parameter separate effects. Use ~ 0 use parametric model. distribution character vector describing parametric delay distribution use. Current options : \"none\", \"lognormal\", \"gamma\", \"exponential\", \"loglogistic\", default \"lognormal\". non_parametric formula (implemented enw_formula()) describing non-parametric logit hazard model. can use features defined reference date delay. draws linked data.frame using metareference metadelay produced enw_preprocess_data(). effect per delay specified approximates cox proportional hazard model discrete time single strata. used conjunction parametric model likely makes sense disable intercept order make joint model identifiable (.e. ~ 0 + (1 | delay)). data Output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/reference/enw_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reference date logit hazard reporting model module — enw_reference","text":"list containing supplied formulas, data passed list describing models, data.frame describing priors used, function takes output data priors returns function can used sample tightened version prior distribution.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Reference date logit hazard reporting model module — enw_reference","text":"","code":"# Parametric model with a lognormal distribution enw_reference(  parametric = ~1, distribution = \"lognormal\",  data = enw_example(\"preprocessed\") ) #> $formula #> $formula$parametric #> [1] \"~1\" #>  #> $formula$non_parametric #> [1] \"~1\" #>  #>  #> $data #> $data$refp_fdesign #>   (Intercept) #> 1           1 #>  #> $data$refp_fintercept #> [1] 1 #>  #> $data$refp_fnrow #> [1] 1 #>  #> $data$refp_findex #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 1 #>  #> $data$refp_fnindex #> [1] 41 #>  #> $data$refp_fncol #> [1] 0 #>  #> $data$refp_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$refp_rncol #> [1] 0 #>  #> $data$model_refp #> [1] 2 #>  #> $data$refnp_fdesign #>     (Intercept) #> 1             1 #> 2             1 #> 3             1 #> 4             1 #> 5             1 #> 6             1 #> 7             1 #> 8             1 #> 9             1 #> 10            1 #> 11            1 #> 12            1 #> 13            1 #> 14            1 #> 15            1 #> 16            1 #> 17            1 #> 18            1 #> 19            1 #> 20            1 #> 21            1 #> 22            1 #> 23            1 #> 24            1 #> 25            1 #> 26            1 #> 27            1 #> 28            1 #> 29            1 #> 30            1 #> 31            1 #> 32            1 #> 33            1 #> 34            1 #> 35            1 #> 36            1 #> 37            1 #> 38            1 #> 39            1 #> 40            1 #> 41            1 #> 42            1 #> 43            1 #> 44            1 #> 45            1 #> 46            1 #> 47            1 #> 48            1 #> 49            1 #> 50            1 #> 51            1 #> 52            1 #> 53            1 #> 54            1 #> 55            1 #> 56            1 #> 57            1 #> 58            1 #> 59            1 #> 60            1 #> 61            1 #> 62            1 #> 63            1 #> 64            1 #> 65            1 #> 66            1 #> 67            1 #> 68            1 #> 69            1 #> 70            1 #> 71            1 #> 72            1 #> 73            1 #> 74            1 #> 75            1 #> 76            1 #> 77            1 #> 78            1 #> 79            1 #> 80            1 #> 81            1 #> 82            1 #> 83            1 #> 84            1 #> 85            1 #> 86            1 #> 87            1 #> 88            1 #> 89            1 #> 90            1 #> 91            1 #> 92            1 #> 93            1 #> 94            1 #> 95            1 #> 96            1 #> 97            1 #> 98            1 #> 99            1 #> 100           1 #> 101           1 #> 102           1 #> 103           1 #> 104           1 #> 105           1 #> 106           1 #> 107           1 #> 108           1 #> 109           1 #> 110           1 #> 111           1 #> 112           1 #> 113           1 #> 114           1 #> 115           1 #> 116           1 #> 117           1 #> 118           1 #> 119           1 #> 120           1 #> 121           1 #> 122           1 #> 123           1 #> 124           1 #> 125           1 #> 126           1 #> 127           1 #> 128           1 #> 129           1 #> 130           1 #> 131           1 #> 132           1 #> 133           1 #> 134           1 #> 135           1 #> 136           1 #> 137           1 #> 138           1 #> 139           1 #> 140           1 #> 141           1 #> 142           1 #> 143           1 #> 144           1 #> 145           1 #> 146           1 #> 147           1 #> 148           1 #> 149           1 #> 150           1 #> 151           1 #> 152           1 #> 153           1 #> 154           1 #> 155           1 #> 156           1 #> 157           1 #> 158           1 #> 159           1 #> 160           1 #> 161           1 #> 162           1 #> 163           1 #> 164           1 #> 165           1 #> 166           1 #> 167           1 #> 168           1 #> 169           1 #> 170           1 #> 171           1 #> 172           1 #> 173           1 #> 174           1 #> 175           1 #> 176           1 #> 177           1 #> 178           1 #> 179           1 #> 180           1 #> 181           1 #> 182           1 #> 183           1 #> 184           1 #> 185           1 #> 186           1 #> 187           1 #> 188           1 #> 189           1 #> 190           1 #> 191           1 #> 192           1 #> 193           1 #> 194           1 #> 195           1 #> 196           1 #> 197           1 #> 198           1 #> 199           1 #> 200           1 #> 201           1 #> 202           1 #> 203           1 #> 204           1 #> 205           1 #> 206           1 #> 207           1 #> 208           1 #> 209           1 #> 210           1 #> 211           1 #> 212           1 #> 213           1 #> 214           1 #> 215           1 #> 216           1 #> 217           1 #> 218           1 #> 219           1 #> 220           1 #> 221           1 #> 222           1 #> 223           1 #> 224           1 #> 225           1 #> 226           1 #> 227           1 #> 228           1 #> 229           1 #> 230           1 #> 231           1 #> 232           1 #> 233           1 #> 234           1 #> 235           1 #> 236           1 #> 237           1 #> 238           1 #> 239           1 #> 240           1 #> 241           1 #> 242           1 #> 243           1 #> 244           1 #> 245           1 #> 246           1 #> 247           1 #> 248           1 #> 249           1 #> 250           1 #> 251           1 #> 252           1 #> 253           1 #> 254           1 #> 255           1 #> 256           1 #> 257           1 #> 258           1 #> 259           1 #> 260           1 #> 261           1 #> 262           1 #> 263           1 #> 264           1 #> 265           1 #> 266           1 #> 267           1 #> 268           1 #> 269           1 #> 270           1 #> 271           1 #> 272           1 #> 273           1 #> 274           1 #> 275           1 #> 276           1 #> 277           1 #> 278           1 #> 279           1 #> 280           1 #> 281           1 #> 282           1 #> 283           1 #> 284           1 #> 285           1 #> 286           1 #> 287           1 #> 288           1 #> 289           1 #> 290           1 #> 291           1 #> 292           1 #> 293           1 #> 294           1 #> 295           1 #> 296           1 #> 297           1 #> 298           1 #> 299           1 #> 300           1 #> 301           1 #> 302           1 #> 303           1 #> 304           1 #> 305           1 #> 306           1 #> 307           1 #> 308           1 #> 309           1 #> 310           1 #> 311           1 #> 312           1 #> 313           1 #> 314           1 #> 315           1 #> 316           1 #> 317           1 #> 318           1 #> 319           1 #> 320           1 #> 321           1 #> 322           1 #> 323           1 #> 324           1 #> 325           1 #> 326           1 #> 327           1 #> 328           1 #> 329           1 #> 330           1 #> 331           1 #> 332           1 #> 333           1 #> 334           1 #> 335           1 #> 336           1 #> 337           1 #> 338           1 #> 339           1 #> 340           1 #> 341           1 #> 342           1 #> 343           1 #> 344           1 #> 345           1 #> 346           1 #> 347           1 #> 348           1 #> 349           1 #> 350           1 #> 351           1 #> 352           1 #> 353           1 #> 354           1 #> 355           1 #> 356           1 #> 357           1 #> 358           1 #> 359           1 #> 360           1 #> 361           1 #> 362           1 #> 363           1 #> 364           1 #> 365           1 #> 366           1 #> 367           1 #> 368           1 #> 369           1 #> 370           1 #> 371           1 #> 372           1 #> 373           1 #> 374           1 #> 375           1 #> 376           1 #> 377           1 #> 378           1 #> 379           1 #> 380           1 #> 381           1 #> 382           1 #> 383           1 #> 384           1 #> 385           1 #> 386           1 #> 387           1 #> 388           1 #> 389           1 #> 390           1 #> 391           1 #> 392           1 #> 393           1 #> 394           1 #> 395           1 #> 396           1 #> 397           1 #> 398           1 #> 399           1 #> 400           1 #> 401           1 #> 402           1 #> 403           1 #> 404           1 #> 405           1 #> 406           1 #> 407           1 #> 408           1 #> 409           1 #> 410           1 #> 411           1 #> 412           1 #> 413           1 #> 414           1 #> 415           1 #> 416           1 #> 417           1 #> 418           1 #> 419           1 #> 420           1 #> 421           1 #> 422           1 #> 423           1 #> 424           1 #> 425           1 #> 426           1 #> 427           1 #> 428           1 #> 429           1 #> 430           1 #> 431           1 #> 432           1 #> 433           1 #> 434           1 #> 435           1 #> 436           1 #> 437           1 #> 438           1 #> 439           1 #> 440           1 #> 441           1 #> 442           1 #> 443           1 #> 444           1 #> 445           1 #> 446           1 #> 447           1 #> 448           1 #> 449           1 #> 450           1 #> 451           1 #> 452           1 #> 453           1 #> 454           1 #> 455           1 #> 456           1 #> 457           1 #> 458           1 #> 459           1 #> 460           1 #> 461           1 #> 462           1 #> 463           1 #> 464           1 #> 465           1 #> 466           1 #> 467           1 #> 468           1 #> 469           1 #> 470           1 #> 471           1 #> 472           1 #> 473           1 #> 474           1 #> 475           1 #> 476           1 #> 477           1 #> 478           1 #> 479           1 #> 480           1 #> 481           1 #> 482           1 #> 483           1 #> 484           1 #> 485           1 #> 486           1 #> 487           1 #> 488           1 #> 489           1 #> 490           1 #> 491           1 #> 492           1 #> 493           1 #> 494           1 #> 495           1 #> 496           1 #> 497           1 #> 498           1 #> 499           1 #> 500           1 #> 501           1 #> 502           1 #> 503           1 #> 504           1 #> 505           1 #> 506           1 #> 507           1 #> 508           1 #> 509           1 #> 510           1 #> 511           1 #> 512           1 #> 513           1 #> 514           1 #> 515           1 #> 516           1 #> 517           1 #> 518           1 #> 519           1 #> 520           1 #> 521           1 #> 522           1 #> 523           1 #> 524           1 #> 525           1 #> 526           1 #> 527           1 #> 528           1 #> 529           1 #> 530           1 #> 531           1 #> 532           1 #> 533           1 #> 534           1 #> 535           1 #> 536           1 #> 537           1 #> 538           1 #> 539           1 #> 540           1 #> 541           1 #> 542           1 #> 543           1 #> 544           1 #> 545           1 #> 546           1 #> 547           1 #> 548           1 #> 549           1 #> 550           1 #> 551           1 #> 552           1 #> 553           1 #> 554           1 #> 555           1 #> 556           1 #> 557           1 #> 558           1 #> 559           1 #> 560           1 #> 561           1 #> 562           1 #> 563           1 #> 564           1 #> 565           1 #> 566           1 #> 567           1 #> 568           1 #> 569           1 #> 570           1 #> 571           1 #> 572           1 #> 573           1 #> 574           1 #> 575           1 #> 576           1 #> 577           1 #> 578           1 #> 579           1 #> 580           1 #> 581           1 #> 582           1 #> 583           1 #> 584           1 #> 585           1 #> 586           1 #> 587           1 #> 588           1 #> 589           1 #> 590           1 #> 591           1 #> 592           1 #> 593           1 #> 594           1 #> 595           1 #> 596           1 #> 597           1 #> 598           1 #> 599           1 #> 600           1 #> 601           1 #> 602           1 #> 603           1 #> 604           1 #> 605           1 #> 606           1 #> 607           1 #> 608           1 #> 609           1 #> 610           1 #> 611           1 #> 612           1 #> 613           1 #> 614           1 #> 615           1 #> 616           1 #> 617           1 #> 618           1 #> 619           1 #> 620           1 #> 621           1 #> 622           1 #> 623           1 #> 624           1 #> 625           1 #> 626           1 #> 627           1 #> 628           1 #> 629           1 #> 630           1 #> 631           1 #> 632           1 #> 633           1 #> 634           1 #> 635           1 #> 636           1 #> 637           1 #> 638           1 #> 639           1 #> 640           1 #> 641           1 #> 642           1 #> 643           1 #> 644           1 #> 645           1 #> 646           1 #> 647           1 #> 648           1 #> 649           1 #> 650           1 #> 651           1 #> 652           1 #> 653           1 #> 654           1 #> 655           1 #> 656           1 #> 657           1 #> 658           1 #> 659           1 #> 660           1 #> 661           1 #> 662           1 #> 663           1 #> 664           1 #> 665           1 #> 666           1 #> 667           1 #> 668           1 #> 669           1 #> 670           1 #> 671           1 #> 672           1 #> 673           1 #> 674           1 #> 675           1 #> 676           1 #> 677           1 #> 678           1 #> 679           1 #> 680           1 #> 681           1 #> 682           1 #> 683           1 #> 684           1 #> 685           1 #> 686           1 #> 687           1 #> 688           1 #> 689           1 #> 690           1 #> 691           1 #> 692           1 #> 693           1 #> 694           1 #> 695           1 #> 696           1 #> 697           1 #> 698           1 #> 699           1 #> 700           1 #> 701           1 #> 702           1 #> 703           1 #> 704           1 #> 705           1 #> 706           1 #> 707           1 #> 708           1 #> 709           1 #> 710           1 #> 711           1 #> 712           1 #> 713           1 #> 714           1 #> 715           1 #> 716           1 #> 717           1 #> 718           1 #> 719           1 #> 720           1 #> 721           1 #> 722           1 #> 723           1 #> 724           1 #> 725           1 #> 726           1 #> 727           1 #> 728           1 #> 729           1 #> 730           1 #> 731           1 #> 732           1 #> 733           1 #> 734           1 #> 735           1 #> 736           1 #> 737           1 #> 738           1 #> 739           1 #> 740           1 #> 741           1 #> 742           1 #> 743           1 #> 744           1 #> 745           1 #> 746           1 #> 747           1 #> 748           1 #> 749           1 #> 750           1 #> 751           1 #> 752           1 #> 753           1 #> 754           1 #> 755           1 #> 756           1 #> 757           1 #> 758           1 #> 759           1 #> 760           1 #> 761           1 #> 762           1 #> 763           1 #> 764           1 #> 765           1 #> 766           1 #> 767           1 #> 768           1 #> 769           1 #> 770           1 #> 771           1 #> 772           1 #> 773           1 #> 774           1 #> 775           1 #> 776           1 #> 777           1 #> 778           1 #> 779           1 #> 780           1 #> 781           1 #> 782           1 #> 783           1 #> 784           1 #> 785           1 #> 786           1 #> 787           1 #> 788           1 #> 789           1 #> 790           1 #> 791           1 #> 792           1 #> 793           1 #> 794           1 #> 795           1 #> 796           1 #> 797           1 #> 798           1 #> 799           1 #> 800           1 #> 801           1 #> 802           1 #> 803           1 #> 804           1 #> 805           1 #> 806           1 #> 807           1 #> 808           1 #> 809           1 #> 810           1 #> 811           1 #> 812           1 #> 813           1 #> 814           1 #> 815           1 #> 816           1 #> 817           1 #> 818           1 #> 819           1 #> 820           1 #> attr(,\"assign\") #> [1] 0 #>  #> $data$refnp_fintercept #> [1] 1 #>  #> $data$refnp_fnrow #> [1] 820 #>  #> $data$refnp_findex #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 #> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 #> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 #> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 #> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 #> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 #> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 #> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 #> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 #> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 #> [271] 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 #> [289] 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 #> [307] 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 #> [325] 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 #> [343] 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 #> [361] 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 #> [379] 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 #> [397] 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 #> [415] 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 #> [433] 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 #> [451] 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 #> [469] 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 #> [487] 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 #> [505] 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 #> [523] 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 #> [541] 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 #> [559] 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 #> [577] 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 #> [595] 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 #> [613] 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 #> [631] 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 #> [649] 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 #> [667] 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 #> [685] 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 #> [703] 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 #> [721] 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 #> [739] 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 #> [757] 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 #> [775] 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 #> [793] 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 #> [811] 811 812 813 814 815 816 817 818 819 820 #>  #> $data$refnp_fnindex #> [1] 820 #>  #> $data$refnp_fncol #> [1] 0 #>  #> $data$refnp_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$refnp_rncol #> [1] 0 #>  #> $data$model_refnp #> [1] 0 #>  #>  #> $priors #>             variable #>               <char> #> 1:     refp_mean_int #> 2:       refp_sd_int #> 3: refp_mean_beta_sd #> 4:   refp_sd_beta_sd #> 5:         refnp_int #> 6:     refnp_beta_sd #>                                                       description #>                                                            <char> #> 1:         Log mean intercept for parametric reference date delay #> 2: Log standard deviation for the parametric reference date delay #> 3:    Standard deviation of scaled pooled parametric mean effects #> 4:      Standard deviation of scaled pooled parametric sd effects #> 5:              Intercept for non-parametric reference date delay #> 6:     Standard deviation of scaled pooled non-parametric effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   1.0     1 #> 2: Zero truncated normal   0.5     1 #> 3: Zero truncated normal   0.0     1 #> 4: Zero truncated normal   0.0     1 #> 5:                Normal   0.0     1 #> 6: Zero truncated normal   0.0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(refp_mean_int = numeric(0), refp_sd_int = numeric(0),  #>             refp_mean_beta = numeric(0), refp_sd_beta = numeric(0),  #>             refp_mean_beta_sd = numeric(0), refp_sd_beta_sd = numeric(0),  #>             refnp_int = numeric(0), refnp_beta = numeric(0),  #>             refnp_beta_sd = numeric(0)) #>         if (data$model_refp > 0) { #>             init$refp_mean_int <- array(rnorm(1, priors$refp_mean_int[1],  #>                 priors$refp_mean_int[2]/10)) #>         } #>         if (data$model_refp > 1) { #>             init$refp_sd_int <- array(abs(rnorm(1, priors$refp_sd_int[1],  #>                 priors$refp_sd_int[2]/10))) #>         } #>         init$refp_mean <- rep(init$refp_mean_int, data$refp_fnrow) #>         init$refp_sd <- rep(init$refp_sd_int, data$refp_fnrow) #>         if (data$refp_fncol > 0) { #>             init$refp_mean_beta <- array(rnorm(data$refp_fncol,  #>                 0, 0.01)) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta <- array(rnorm(data$refp_fncol,  #>                   0, 0.01)) #>             } #>         } #>         if (data$refp_rncol > 0) { #>             init$refp_mean_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                 priors$refp_mean_beta_sd_p[1], priors$refp_mean_beta_sd_p[2]/10))) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                   priors$refp_sd_beta_sd_p[1], priors$refp_sd_beta_sd_p[2]/10))) #>             } #>         } #>         if (data$model_refnp > 0) { #>             if (data$refnp_fintercept > 0) { #>                 init$refnp_int <- array(rnorm(1, priors$refnp_int_p[1],  #>                   priors$refnp_int_p[2]/10)) #>             } #>             if (data$refnp_fncol > 0) { #>                 init$refnp_beta <- array(rnorm(data$refnp_fncol,  #>                   0, 0.01)) #>             } #>             if (data$refnp_rncol > 0) { #>                 init$refnp_beta_sd <- array(abs(rnorm(data$refnp_rncol,  #>                   priors$refnp_beta_sd_p[1], priors$refnp_beta_sd_p[2]/10))) #>             } #>         } #>         return(init) #>     } #>     return(fn) #> } #> <bytecode: 0x564e5fa54e20> #> <environment: 0x564e5fa45750> #>   # Non-parametric model with a random effect per delay enw_reference(  parametric = ~ 0, non_parametric = ~ 1 + (1 | delay),  data = enw_example(\"preprocessed\") ) #> $formula #> $formula$parametric #> [1] \"~1\" #>  #> $formula$non_parametric #> [1] \"~1 + (1 | delay)\" #>  #>  #> $data #> $data$refp_fdesign #>   (Intercept) #> 1           1 #>  #> $data$refp_fintercept #> [1] 1 #>  #> $data$refp_fnrow #> [1] 1 #>  #> $data$refp_findex #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 1 #>  #> $data$refp_fnindex #> [1] 41 #>  #> $data$refp_fncol #> [1] 0 #>  #> $data$refp_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$refp_rncol #> [1] 0 #>  #> $data$model_refp #> [1] 0 #>  #> $data$refnp_fdesign #>     (Intercept) delay0 delay1 delay2 delay3 delay4 delay5 delay6 delay7 delay8 #> 1             1      1      0      0      0      0      0      0      0      0 #> 2             1      0      1      0      0      0      0      0      0      0 #> 3             1      0      0      1      0      0      0      0      0      0 #> 4             1      0      0      0      1      0      0      0      0      0 #> 5             1      0      0      0      0      1      0      0      0      0 #> 6             1      0      0      0      0      0      1      0      0      0 #> 7             1      0      0      0      0      0      0      1      0      0 #> 8             1      0      0      0      0      0      0      0      1      0 #> 9             1      0      0      0      0      0      0      0      0      1 #> 10            1      0      0      0      0      0      0      0      0      0 #> 11            1      0      0      0      0      0      0      0      0      0 #> 12            1      0      0      0      0      0      0      0      0      0 #> 13            1      0      0      0      0      0      0      0      0      0 #> 14            1      0      0      0      0      0      0      0      0      0 #> 15            1      0      0      0      0      0      0      0      0      0 #> 16            1      0      0      0      0      0      0      0      0      0 #> 17            1      0      0      0      0      0      0      0      0      0 #> 18            1      0      0      0      0      0      0      0      0      0 #> 19            1      0      0      0      0      0      0      0      0      0 #> 20            1      0      0      0      0      0      0      0      0      0 #> 21            1      1      0      0      0      0      0      0      0      0 #> 22            1      0      1      0      0      0      0      0      0      0 #> 23            1      0      0      1      0      0      0      0      0      0 #> 24            1      0      0      0      1      0      0      0      0      0 #> 25            1      0      0      0      0      1      0      0      0      0 #> 26            1      0      0      0      0      0      1      0      0      0 #> 27            1      0      0      0      0      0      0      1      0      0 #> 28            1      0      0      0      0      0      0      0      1      0 #> 29            1      0      0      0      0      0      0      0      0      1 #> 30            1      0      0      0      0      0      0      0      0      0 #> 31            1      0      0      0      0      0      0      0      0      0 #> 32            1      0      0      0      0      0      0      0      0      0 #> 33            1      0      0      0      0      0      0      0      0      0 #> 34            1      0      0      0      0      0      0      0      0      0 #> 35            1      0      0      0      0      0      0      0      0      0 #> 36            1      0      0      0      0      0      0      0      0      0 #> 37            1      0      0      0      0      0      0      0      0      0 #> 38            1      0      0      0      0      0      0      0      0      0 #> 39            1      0      0      0      0      0      0      0      0      0 #> 40            1      0      0      0      0      0      0      0      0      0 #> 41            1      1      0      0      0      0      0      0      0      0 #> 42            1      0      1      0      0      0      0      0      0      0 #> 43            1      0      0      1      0      0      0      0      0      0 #> 44            1      0      0      0      1      0      0      0      0      0 #> 45            1      0      0      0      0      1      0      0      0      0 #> 46            1      0      0      0      0      0      1      0      0      0 #> 47            1      0      0      0      0      0      0      1      0      0 #> 48            1      0      0      0      0      0      0      0      1      0 #> 49            1      0      0      0      0      0      0      0      0      1 #> 50            1      0      0      0      0      0      0      0      0      0 #> 51            1      0      0      0      0      0      0      0      0      0 #> 52            1      0      0      0      0      0      0      0      0      0 #> 53            1      0      0      0      0      0      0      0      0      0 #> 54            1      0      0      0      0      0      0      0      0      0 #> 55            1      0      0      0      0      0      0      0      0      0 #> 56            1      0      0      0      0      0      0      0      0      0 #> 57            1      0      0      0      0      0      0      0      0      0 #> 58            1      0      0      0      0      0      0      0      0      0 #> 59            1      0      0      0      0      0      0      0      0      0 #> 60            1      0      0      0      0      0      0      0      0      0 #> 61            1      1      0      0      0      0      0      0      0      0 #> 62            1      0      1      0      0      0      0      0      0      0 #> 63            1      0      0      1      0      0      0      0      0      0 #> 64            1      0      0      0      1      0      0      0      0      0 #> 65            1      0      0      0      0      1      0      0      0      0 #> 66            1      0      0      0      0      0      1      0      0      0 #> 67            1      0      0      0      0      0      0      1      0      0 #> 68            1      0      0      0      0      0      0      0      1      0 #> 69            1      0      0      0      0      0      0      0      0      1 #> 70            1      0      0      0      0      0      0      0      0      0 #> 71            1      0      0      0      0      0      0      0      0      0 #> 72            1      0      0      0      0      0      0      0      0      0 #> 73            1      0      0      0      0      0      0      0      0      0 #> 74            1      0      0      0      0      0      0      0      0      0 #> 75            1      0      0      0      0      0      0      0      0      0 #> 76            1      0      0      0      0      0      0      0      0      0 #> 77            1      0      0      0      0      0      0      0      0      0 #> 78            1      0      0      0      0      0      0      0      0      0 #> 79            1      0      0      0      0      0      0      0      0      0 #> 80            1      0      0      0      0      0      0      0      0      0 #> 81            1      1      0      0      0      0      0      0      0      0 #> 82            1      0      1      0      0      0      0      0      0      0 #> 83            1      0      0      1      0      0      0      0      0      0 #> 84            1      0      0      0      1      0      0      0      0      0 #> 85            1      0      0      0      0      1      0      0      0      0 #> 86            1      0      0      0      0      0      1      0      0      0 #> 87            1      0      0      0      0      0      0      1      0      0 #> 88            1      0      0      0      0      0      0      0      1      0 #> 89            1      0      0      0      0      0      0      0      0      1 #> 90            1      0      0      0      0      0      0      0      0      0 #> 91            1      0      0      0      0      0      0      0      0      0 #> 92            1      0      0      0      0      0      0      0      0      0 #> 93            1      0      0      0      0      0      0      0      0      0 #> 94            1      0      0      0      0      0      0      0      0      0 #> 95            1      0      0      0      0      0      0      0      0      0 #> 96            1      0      0      0      0      0      0      0      0      0 #> 97            1      0      0      0      0      0      0      0      0      0 #> 98            1      0      0      0      0      0      0      0      0      0 #> 99            1      0      0      0      0      0      0      0      0      0 #> 100           1      0      0      0      0      0      0      0      0      0 #> 101           1      1      0      0      0      0      0      0      0      0 #> 102           1      0      1      0      0      0      0      0      0      0 #> 103           1      0      0      1      0      0      0      0      0      0 #> 104           1      0      0      0      1      0      0      0      0      0 #> 105           1      0      0      0      0      1      0      0      0      0 #> 106           1      0      0      0      0      0      1      0      0      0 #> 107           1      0      0      0      0      0      0      1      0      0 #> 108           1      0      0      0      0      0      0      0      1      0 #> 109           1      0      0      0      0      0      0      0      0      1 #> 110           1      0      0      0      0      0      0      0      0      0 #> 111           1      0      0      0      0      0      0      0      0      0 #> 112           1      0      0      0      0      0      0      0      0      0 #> 113           1      0      0      0      0      0      0      0      0      0 #> 114           1      0      0      0      0      0      0      0      0      0 #> 115           1      0      0      0      0      0      0      0      0      0 #> 116           1      0      0      0      0      0      0      0      0      0 #> 117           1      0      0      0      0      0      0      0      0      0 #> 118           1      0      0      0      0      0      0      0      0      0 #> 119           1      0      0      0      0      0      0      0      0      0 #> 120           1      0      0      0      0      0      0      0      0      0 #> 121           1      1      0      0      0      0      0      0      0      0 #> 122           1      0      1      0      0      0      0      0      0      0 #> 123           1      0      0      1      0      0      0      0      0      0 #> 124           1      0      0      0      1      0      0      0      0      0 #> 125           1      0      0      0      0      1      0      0      0      0 #> 126           1      0      0      0      0      0      1      0      0      0 #> 127           1      0      0      0      0      0      0      1      0      0 #> 128           1      0      0      0      0      0      0      0      1      0 #> 129           1      0      0      0      0      0      0      0      0      1 #> 130           1      0      0      0      0      0      0      0      0      0 #> 131           1      0      0      0      0      0      0      0      0      0 #> 132           1      0      0      0      0      0      0      0      0      0 #> 133           1      0      0      0      0      0      0      0      0      0 #> 134           1      0      0      0      0      0      0      0      0      0 #> 135           1      0      0      0      0      0      0      0      0      0 #> 136           1      0      0      0      0      0      0      0      0      0 #> 137           1      0      0      0      0      0      0      0      0      0 #> 138           1      0      0      0      0      0      0      0      0      0 #> 139           1      0      0      0      0      0      0      0      0      0 #> 140           1      0      0      0      0      0      0      0      0      0 #> 141           1      1      0      0      0      0      0      0      0      0 #> 142           1      0      1      0      0      0      0      0      0      0 #> 143           1      0      0      1      0      0      0      0      0      0 #> 144           1      0      0      0      1      0      0      0      0      0 #> 145           1      0      0      0      0      1      0      0      0      0 #> 146           1      0      0      0      0      0      1      0      0      0 #> 147           1      0      0      0      0      0      0      1      0      0 #> 148           1      0      0      0      0      0      0      0      1      0 #> 149           1      0      0      0      0      0      0      0      0      1 #> 150           1      0      0      0      0      0      0      0      0      0 #> 151           1      0      0      0      0      0      0      0      0      0 #> 152           1      0      0      0      0      0      0      0      0      0 #> 153           1      0      0      0      0      0      0      0      0      0 #> 154           1      0      0      0      0      0      0      0      0      0 #> 155           1      0      0      0      0      0      0      0      0      0 #> 156           1      0      0      0      0      0      0      0      0      0 #> 157           1      0      0      0      0      0      0      0      0      0 #> 158           1      0      0      0      0      0      0      0      0      0 #> 159           1      0      0      0      0      0      0      0      0      0 #> 160           1      0      0      0      0      0      0      0      0      0 #> 161           1      1      0      0      0      0      0      0      0      0 #> 162           1      0      1      0      0      0      0      0      0      0 #> 163           1      0      0      1      0      0      0      0      0      0 #> 164           1      0      0      0      1      0      0      0      0      0 #> 165           1      0      0      0      0      1      0      0      0      0 #> 166           1      0      0      0      0      0      1      0      0      0 #> 167           1      0      0      0      0      0      0      1      0      0 #> 168           1      0      0      0      0      0      0      0      1      0 #> 169           1      0      0      0      0      0      0      0      0      1 #> 170           1      0      0      0      0      0      0      0      0      0 #> 171           1      0      0      0      0      0      0      0      0      0 #> 172           1      0      0      0      0      0      0      0      0      0 #> 173           1      0      0      0      0      0      0      0      0      0 #> 174           1      0      0      0      0      0      0      0      0      0 #> 175           1      0      0      0      0      0      0      0      0      0 #> 176           1      0      0      0      0      0      0      0      0      0 #> 177           1      0      0      0      0      0      0      0      0      0 #> 178           1      0      0      0      0      0      0      0      0      0 #> 179           1      0      0      0      0      0      0      0      0      0 #> 180           1      0      0      0      0      0      0      0      0      0 #> 181           1      1      0      0      0      0      0      0      0      0 #> 182           1      0      1      0      0      0      0      0      0      0 #> 183           1      0      0      1      0      0      0      0      0      0 #> 184           1      0      0      0      1      0      0      0      0      0 #> 185           1      0      0      0      0      1      0      0      0      0 #> 186           1      0      0      0      0      0      1      0      0      0 #> 187           1      0      0      0      0      0      0      1      0      0 #> 188           1      0      0      0      0      0      0      0      1      0 #> 189           1      0      0      0      0      0      0      0      0      1 #> 190           1      0      0      0      0      0      0      0      0      0 #> 191           1      0      0      0      0      0      0      0      0      0 #> 192           1      0      0      0      0      0      0      0      0      0 #> 193           1      0      0      0      0      0      0      0      0      0 #> 194           1      0      0      0      0      0      0      0      0      0 #> 195           1      0      0      0      0      0      0      0      0      0 #> 196           1      0      0      0      0      0      0      0      0      0 #> 197           1      0      0      0      0      0      0      0      0      0 #> 198           1      0      0      0      0      0      0      0      0      0 #> 199           1      0      0      0      0      0      0      0      0      0 #> 200           1      0      0      0      0      0      0      0      0      0 #> 201           1      1      0      0      0      0      0      0      0      0 #> 202           1      0      1      0      0      0      0      0      0      0 #> 203           1      0      0      1      0      0      0      0      0      0 #> 204           1      0      0      0      1      0      0      0      0      0 #> 205           1      0      0      0      0      1      0      0      0      0 #> 206           1      0      0      0      0      0      1      0      0      0 #> 207           1      0      0      0      0      0      0      1      0      0 #> 208           1      0      0      0      0      0      0      0      1      0 #> 209           1      0      0      0      0      0      0      0      0      1 #> 210           1      0      0      0      0      0      0      0      0      0 #> 211           1      0      0      0      0      0      0      0      0      0 #> 212           1      0      0      0      0      0      0      0      0      0 #> 213           1      0      0      0      0      0      0      0      0      0 #> 214           1      0      0      0      0      0      0      0      0      0 #> 215           1      0      0      0      0      0      0      0      0      0 #> 216           1      0      0      0      0      0      0      0      0      0 #> 217           1      0      0      0      0      0      0      0      0      0 #> 218           1      0      0      0      0      0      0      0      0      0 #> 219           1      0      0      0      0      0      0      0      0      0 #> 220           1      0      0      0      0      0      0      0      0      0 #> 221           1      1      0      0      0      0      0      0      0      0 #> 222           1      0      1      0      0      0      0      0      0      0 #> 223           1      0      0      1      0      0      0      0      0      0 #> 224           1      0      0      0      1      0      0      0      0      0 #> 225           1      0      0      0      0      1      0      0      0      0 #> 226           1      0      0      0      0      0      1      0      0      0 #> 227           1      0      0      0      0      0      0      1      0      0 #> 228           1      0      0      0      0      0      0      0      1      0 #> 229           1      0      0      0      0      0      0      0      0      1 #> 230           1      0      0      0      0      0      0      0      0      0 #> 231           1      0      0      0      0      0      0      0      0      0 #> 232           1      0      0      0      0      0      0      0      0      0 #> 233           1      0      0      0      0      0      0      0      0      0 #> 234           1      0      0      0      0      0      0      0      0      0 #> 235           1      0      0      0      0      0      0      0      0      0 #> 236           1      0      0      0      0      0      0      0      0      0 #> 237           1      0      0      0      0      0      0      0      0      0 #> 238           1      0      0      0      0      0      0      0      0      0 #> 239           1      0      0      0      0      0      0      0      0      0 #> 240           1      0      0      0      0      0      0      0      0      0 #> 241           1      1      0      0      0      0      0      0      0      0 #> 242           1      0      1      0      0      0      0      0      0      0 #> 243           1      0      0      1      0      0      0      0      0      0 #> 244           1      0      0      0      1      0      0      0      0      0 #> 245           1      0      0      0      0      1      0      0      0      0 #> 246           1      0      0      0      0      0      1      0      0      0 #> 247           1      0      0      0      0      0      0      1      0      0 #> 248           1      0      0      0      0      0      0      0      1      0 #> 249           1      0      0      0      0      0      0      0      0      1 #> 250           1      0      0      0      0      0      0      0      0      0 #> 251           1      0      0      0      0      0      0      0      0      0 #> 252           1      0      0      0      0      0      0      0      0      0 #> 253           1      0      0      0      0      0      0      0      0      0 #> 254           1      0      0      0      0      0      0      0      0      0 #> 255           1      0      0      0      0      0      0      0      0      0 #> 256           1      0      0      0      0      0      0      0      0      0 #> 257           1      0      0      0      0      0      0      0      0      0 #> 258           1      0      0      0      0      0      0      0      0      0 #> 259           1      0      0      0      0      0      0      0      0      0 #> 260           1      0      0      0      0      0      0      0      0      0 #> 261           1      1      0      0      0      0      0      0      0      0 #> 262           1      0      1      0      0      0      0      0      0      0 #> 263           1      0      0      1      0      0      0      0      0      0 #> 264           1      0      0      0      1      0      0      0      0      0 #> 265           1      0      0      0      0      1      0      0      0      0 #> 266           1      0      0      0      0      0      1      0      0      0 #> 267           1      0      0      0      0      0      0      1      0      0 #> 268           1      0      0      0      0      0      0      0      1      0 #> 269           1      0      0      0      0      0      0      0      0      1 #> 270           1      0      0      0      0      0      0      0      0      0 #> 271           1      0      0      0      0      0      0      0      0      0 #> 272           1      0      0      0      0      0      0      0      0      0 #> 273           1      0      0      0      0      0      0      0      0      0 #> 274           1      0      0      0      0      0      0      0      0      0 #> 275           1      0      0      0      0      0      0      0      0      0 #> 276           1      0      0      0      0      0      0      0      0      0 #> 277           1      0      0      0      0      0      0      0      0      0 #> 278           1      0      0      0      0      0      0      0      0      0 #> 279           1      0      0      0      0      0      0      0      0      0 #> 280           1      0      0      0      0      0      0      0      0      0 #> 281           1      1      0      0      0      0      0      0      0      0 #> 282           1      0      1      0      0      0      0      0      0      0 #> 283           1      0      0      1      0      0      0      0      0      0 #> 284           1      0      0      0      1      0      0      0      0      0 #> 285           1      0      0      0      0      1      0      0      0      0 #> 286           1      0      0      0      0      0      1      0      0      0 #> 287           1      0      0      0      0      0      0      1      0      0 #> 288           1      0      0      0      0      0      0      0      1      0 #> 289           1      0      0      0      0      0      0      0      0      1 #> 290           1      0      0      0      0      0      0      0      0      0 #> 291           1      0      0      0      0      0      0      0      0      0 #> 292           1      0      0      0      0      0      0      0      0      0 #> 293           1      0      0      0      0      0      0      0      0      0 #> 294           1      0      0      0      0      0      0      0      0      0 #> 295           1      0      0      0      0      0      0      0      0      0 #> 296           1      0      0      0      0      0      0      0      0      0 #> 297           1      0      0      0      0      0      0      0      0      0 #> 298           1      0      0      0      0      0      0      0      0      0 #> 299           1      0      0      0      0      0      0      0      0      0 #> 300           1      0      0      0      0      0      0      0      0      0 #> 301           1      1      0      0      0      0      0      0      0      0 #> 302           1      0      1      0      0      0      0      0      0      0 #> 303           1      0      0      1      0      0      0      0      0      0 #> 304           1      0      0      0      1      0      0      0      0      0 #> 305           1      0      0      0      0      1      0      0      0      0 #> 306           1      0      0      0      0      0      1      0      0      0 #> 307           1      0      0      0      0      0      0      1      0      0 #> 308           1      0      0      0      0      0      0      0      1      0 #> 309           1      0      0      0      0      0      0      0      0      1 #> 310           1      0      0      0      0      0      0      0      0      0 #> 311           1      0      0      0      0      0      0      0      0      0 #> 312           1      0      0      0      0      0      0      0      0      0 #> 313           1      0      0      0      0      0      0      0      0      0 #> 314           1      0      0      0      0      0      0      0      0      0 #> 315           1      0      0      0      0      0      0      0      0      0 #> 316           1      0      0      0      0      0      0      0      0      0 #> 317           1      0      0      0      0      0      0      0      0      0 #> 318           1      0      0      0      0      0      0      0      0      0 #> 319           1      0      0      0      0      0      0      0      0      0 #> 320           1      0      0      0      0      0      0      0      0      0 #> 321           1      1      0      0      0      0      0      0      0      0 #> 322           1      0      1      0      0      0      0      0      0      0 #> 323           1      0      0      1      0      0      0      0      0      0 #> 324           1      0      0      0      1      0      0      0      0      0 #> 325           1      0      0      0      0      1      0      0      0      0 #> 326           1      0      0      0      0      0      1      0      0      0 #> 327           1      0      0      0      0      0      0      1      0      0 #> 328           1      0      0      0      0      0      0      0      1      0 #> 329           1      0      0      0      0      0      0      0      0      1 #> 330           1      0      0      0      0      0      0      0      0      0 #> 331           1      0      0      0      0      0      0      0      0      0 #> 332           1      0      0      0      0      0      0      0      0      0 #> 333           1      0      0      0      0      0      0      0      0      0 #> 334           1      0      0      0      0      0      0      0      0      0 #> 335           1      0      0      0      0      0      0      0      0      0 #> 336           1      0      0      0      0      0      0      0      0      0 #> 337           1      0      0      0      0      0      0      0      0      0 #> 338           1      0      0      0      0      0      0      0      0      0 #> 339           1      0      0      0      0      0      0      0      0      0 #> 340           1      0      0      0      0      0      0      0      0      0 #> 341           1      1      0      0      0      0      0      0      0      0 #> 342           1      0      1      0      0      0      0      0      0      0 #> 343           1      0      0      1      0      0      0      0      0      0 #> 344           1      0      0      0      1      0      0      0      0      0 #> 345           1      0      0      0      0      1      0      0      0      0 #> 346           1      0      0      0      0      0      1      0      0      0 #> 347           1      0      0      0      0      0      0      1      0      0 #> 348           1      0      0      0      0      0      0      0      1      0 #> 349           1      0      0      0      0      0      0      0      0      1 #> 350           1      0      0      0      0      0      0      0      0      0 #> 351           1      0      0      0      0      0      0      0      0      0 #> 352           1      0      0      0      0      0      0      0      0      0 #> 353           1      0      0      0      0      0      0      0      0      0 #> 354           1      0      0      0      0      0      0      0      0      0 #> 355           1      0      0      0      0      0      0      0      0      0 #> 356           1      0      0      0      0      0      0      0      0      0 #> 357           1      0      0      0      0      0      0      0      0      0 #> 358           1      0      0      0      0      0      0      0      0      0 #> 359           1      0      0      0      0      0      0      0      0      0 #> 360           1      0      0      0      0      0      0      0      0      0 #> 361           1      1      0      0      0      0      0      0      0      0 #> 362           1      0      1      0      0      0      0      0      0      0 #> 363           1      0      0      1      0      0      0      0      0      0 #> 364           1      0      0      0      1      0      0      0      0      0 #> 365           1      0      0      0      0      1      0      0      0      0 #> 366           1      0      0      0      0      0      1      0      0      0 #> 367           1      0      0      0      0      0      0      1      0      0 #> 368           1      0      0      0      0      0      0      0      1      0 #> 369           1      0      0      0      0      0      0      0      0      1 #> 370           1      0      0      0      0      0      0      0      0      0 #> 371           1      0      0      0      0      0      0      0      0      0 #> 372           1      0      0      0      0      0      0      0      0      0 #> 373           1      0      0      0      0      0      0      0      0      0 #> 374           1      0      0      0      0      0      0      0      0      0 #> 375           1      0      0      0      0      0      0      0      0      0 #> 376           1      0      0      0      0      0      0      0      0      0 #> 377           1      0      0      0      0      0      0      0      0      0 #> 378           1      0      0      0      0      0      0      0      0      0 #> 379           1      0      0      0      0      0      0      0      0      0 #> 380           1      0      0      0      0      0      0      0      0      0 #> 381           1      1      0      0      0      0      0      0      0      0 #> 382           1      0      1      0      0      0      0      0      0      0 #> 383           1      0      0      1      0      0      0      0      0      0 #> 384           1      0      0      0      1      0      0      0      0      0 #> 385           1      0      0      0      0      1      0      0      0      0 #> 386           1      0      0      0      0      0      1      0      0      0 #> 387           1      0      0      0      0      0      0      1      0      0 #> 388           1      0      0      0      0      0      0      0      1      0 #> 389           1      0      0      0      0      0      0      0      0      1 #> 390           1      0      0      0      0      0      0      0      0      0 #> 391           1      0      0      0      0      0      0      0      0      0 #> 392           1      0      0      0      0      0      0      0      0      0 #> 393           1      0      0      0      0      0      0      0      0      0 #> 394           1      0      0      0      0      0      0      0      0      0 #> 395           1      0      0      0      0      0      0      0      0      0 #> 396           1      0      0      0      0      0      0      0      0      0 #> 397           1      0      0      0      0      0      0      0      0      0 #> 398           1      0      0      0      0      0      0      0      0      0 #> 399           1      0      0      0      0      0      0      0      0      0 #> 400           1      0      0      0      0      0      0      0      0      0 #> 401           1      1      0      0      0      0      0      0      0      0 #> 402           1      0      1      0      0      0      0      0      0      0 #> 403           1      0      0      1      0      0      0      0      0      0 #> 404           1      0      0      0      1      0      0      0      0      0 #> 405           1      0      0      0      0      1      0      0      0      0 #> 406           1      0      0      0      0      0      1      0      0      0 #> 407           1      0      0      0      0      0      0      1      0      0 #> 408           1      0      0      0      0      0      0      0      1      0 #> 409           1      0      0      0      0      0      0      0      0      1 #> 410           1      0      0      0      0      0      0      0      0      0 #> 411           1      0      0      0      0      0      0      0      0      0 #> 412           1      0      0      0      0      0      0      0      0      0 #> 413           1      0      0      0      0      0      0      0      0      0 #> 414           1      0      0      0      0      0      0      0      0      0 #> 415           1      0      0      0      0      0      0      0      0      0 #> 416           1      0      0      0      0      0      0      0      0      0 #> 417           1      0      0      0      0      0      0      0      0      0 #> 418           1      0      0      0      0      0      0      0      0      0 #> 419           1      0      0      0      0      0      0      0      0      0 #> 420           1      0      0      0      0      0      0      0      0      0 #> 421           1      1      0      0      0      0      0      0      0      0 #> 422           1      0      1      0      0      0      0      0      0      0 #> 423           1      0      0      1      0      0      0      0      0      0 #> 424           1      0      0      0      1      0      0      0      0      0 #> 425           1      0      0      0      0      1      0      0      0      0 #> 426           1      0      0      0      0      0      1      0      0      0 #> 427           1      0      0      0      0      0      0      1      0      0 #> 428           1      0      0      0      0      0      0      0      1      0 #> 429           1      0      0      0      0      0      0      0      0      1 #> 430           1      0      0      0      0      0      0      0      0      0 #> 431           1      0      0      0      0      0      0      0      0      0 #> 432           1      0      0      0      0      0      0      0      0      0 #> 433           1      0      0      0      0      0      0      0      0      0 #> 434           1      0      0      0      0      0      0      0      0      0 #> 435           1      0      0      0      0      0      0      0      0      0 #> 436           1      0      0      0      0      0      0      0      0      0 #> 437           1      0      0      0      0      0      0      0      0      0 #> 438           1      0      0      0      0      0      0      0      0      0 #> 439           1      0      0      0      0      0      0      0      0      0 #> 440           1      0      0      0      0      0      0      0      0      0 #> 441           1      1      0      0      0      0      0      0      0      0 #> 442           1      0      1      0      0      0      0      0      0      0 #> 443           1      0      0      1      0      0      0      0      0      0 #> 444           1      0      0      0      1      0      0      0      0      0 #> 445           1      0      0      0      0      1      0      0      0      0 #> 446           1      0      0      0      0      0      1      0      0      0 #> 447           1      0      0      0      0      0      0      1      0      0 #> 448           1      0      0      0      0      0      0      0      1      0 #> 449           1      0      0      0      0      0      0      0      0      1 #> 450           1      0      0      0      0      0      0      0      0      0 #> 451           1      0      0      0      0      0      0      0      0      0 #> 452           1      0      0      0      0      0      0      0      0      0 #> 453           1      0      0      0      0      0      0      0      0      0 #> 454           1      0      0      0      0      0      0      0      0      0 #> 455           1      0      0      0      0      0      0      0      0      0 #> 456           1      0      0      0      0      0      0      0      0      0 #> 457           1      0      0      0      0      0      0      0      0      0 #> 458           1      0      0      0      0      0      0      0      0      0 #> 459           1      0      0      0      0      0      0      0      0      0 #> 460           1      0      0      0      0      0      0      0      0      0 #> 461           1      1      0      0      0      0      0      0      0      0 #> 462           1      0      1      0      0      0      0      0      0      0 #> 463           1      0      0      1      0      0      0      0      0      0 #> 464           1      0      0      0      1      0      0      0      0      0 #> 465           1      0      0      0      0      1      0      0      0      0 #> 466           1      0      0      0      0      0      1      0      0      0 #> 467           1      0      0      0      0      0      0      1      0      0 #> 468           1      0      0      0      0      0      0      0      1      0 #> 469           1      0      0      0      0      0      0      0      0      1 #> 470           1      0      0      0      0      0      0      0      0      0 #> 471           1      0      0      0      0      0      0      0      0      0 #> 472           1      0      0      0      0      0      0      0      0      0 #> 473           1      0      0      0      0      0      0      0      0      0 #> 474           1      0      0      0      0      0      0      0      0      0 #> 475           1      0      0      0      0      0      0      0      0      0 #> 476           1      0      0      0      0      0      0      0      0      0 #> 477           1      0      0      0      0      0      0      0      0      0 #> 478           1      0      0      0      0      0      0      0      0      0 #> 479           1      0      0      0      0      0      0      0      0      0 #> 480           1      0      0      0      0      0      0      0      0      0 #> 481           1      1      0      0      0      0      0      0      0      0 #> 482           1      0      1      0      0      0      0      0      0      0 #> 483           1      0      0      1      0      0      0      0      0      0 #> 484           1      0      0      0      1      0      0      0      0      0 #> 485           1      0      0      0      0      1      0      0      0      0 #> 486           1      0      0      0      0      0      1      0      0      0 #> 487           1      0      0      0      0      0      0      1      0      0 #> 488           1      0      0      0      0      0      0      0      1      0 #> 489           1      0      0      0      0      0      0      0      0      1 #> 490           1      0      0      0      0      0      0      0      0      0 #> 491           1      0      0      0      0      0      0      0      0      0 #> 492           1      0      0      0      0      0      0      0      0      0 #> 493           1      0      0      0      0      0      0      0      0      0 #> 494           1      0      0      0      0      0      0      0      0      0 #> 495           1      0      0      0      0      0      0      0      0      0 #> 496           1      0      0      0      0      0      0      0      0      0 #> 497           1      0      0      0      0      0      0      0      0      0 #> 498           1      0      0      0      0      0      0      0      0      0 #> 499           1      0      0      0      0      0      0      0      0      0 #> 500           1      0      0      0      0      0      0      0      0      0 #> 501           1      1      0      0      0      0      0      0      0      0 #> 502           1      0      1      0      0      0      0      0      0      0 #> 503           1      0      0      1      0      0      0      0      0      0 #> 504           1      0      0      0      1      0      0      0      0      0 #> 505           1      0      0      0      0      1      0      0      0      0 #> 506           1      0      0      0      0      0      1      0      0      0 #> 507           1      0      0      0      0      0      0      1      0      0 #> 508           1      0      0      0      0      0      0      0      1      0 #> 509           1      0      0      0      0      0      0      0      0      1 #> 510           1      0      0      0      0      0      0      0      0      0 #> 511           1      0      0      0      0      0      0      0      0      0 #> 512           1      0      0      0      0      0      0      0      0      0 #> 513           1      0      0      0      0      0      0      0      0      0 #> 514           1      0      0      0      0      0      0      0      0      0 #> 515           1      0      0      0      0      0      0      0      0      0 #> 516           1      0      0      0      0      0      0      0      0      0 #> 517           1      0      0      0      0      0      0      0      0      0 #> 518           1      0      0      0      0      0      0      0      0      0 #> 519           1      0      0      0      0      0      0      0      0      0 #> 520           1      0      0      0      0      0      0      0      0      0 #> 521           1      1      0      0      0      0      0      0      0      0 #> 522           1      0      1      0      0      0      0      0      0      0 #> 523           1      0      0      1      0      0      0      0      0      0 #> 524           1      0      0      0      1      0      0      0      0      0 #> 525           1      0      0      0      0      1      0      0      0      0 #> 526           1      0      0      0      0      0      1      0      0      0 #> 527           1      0      0      0      0      0      0      1      0      0 #> 528           1      0      0      0      0      0      0      0      1      0 #> 529           1      0      0      0      0      0      0      0      0      1 #> 530           1      0      0      0      0      0      0      0      0      0 #> 531           1      0      0      0      0      0      0      0      0      0 #> 532           1      0      0      0      0      0      0      0      0      0 #> 533           1      0      0      0      0      0      0      0      0      0 #> 534           1      0      0      0      0      0      0      0      0      0 #> 535           1      0      0      0      0      0      0      0      0      0 #> 536           1      0      0      0      0      0      0      0      0      0 #> 537           1      0      0      0      0      0      0      0      0      0 #> 538           1      0      0      0      0      0      0      0      0      0 #> 539           1      0      0      0      0      0      0      0      0      0 #> 540           1      0      0      0      0      0      0      0      0      0 #> 541           1      1      0      0      0      0      0      0      0      0 #> 542           1      0      1      0      0      0      0      0      0      0 #> 543           1      0      0      1      0      0      0      0      0      0 #> 544           1      0      0      0      1      0      0      0      0      0 #> 545           1      0      0      0      0      1      0      0      0      0 #> 546           1      0      0      0      0      0      1      0      0      0 #> 547           1      0      0      0      0      0      0      1      0      0 #> 548           1      0      0      0      0      0      0      0      1      0 #> 549           1      0      0      0      0      0      0      0      0      1 #> 550           1      0      0      0      0      0      0      0      0      0 #> 551           1      0      0      0      0      0      0      0      0      0 #> 552           1      0      0      0      0      0      0      0      0      0 #> 553           1      0      0      0      0      0      0      0      0      0 #> 554           1      0      0      0      0      0      0      0      0      0 #> 555           1      0      0      0      0      0      0      0      0      0 #> 556           1      0      0      0      0      0      0      0      0      0 #> 557           1      0      0      0      0      0      0      0      0      0 #> 558           1      0      0      0      0      0      0      0      0      0 #> 559           1      0      0      0      0      0      0      0      0      0 #> 560           1      0      0      0      0      0      0      0      0      0 #> 561           1      1      0      0      0      0      0      0      0      0 #> 562           1      0      1      0      0      0      0      0      0      0 #> 563           1      0      0      1      0      0      0      0      0      0 #> 564           1      0      0      0      1      0      0      0      0      0 #> 565           1      0      0      0      0      1      0      0      0      0 #> 566           1      0      0      0      0      0      1      0      0      0 #> 567           1      0      0      0      0      0      0      1      0      0 #> 568           1      0      0      0      0      0      0      0      1      0 #> 569           1      0      0      0      0      0      0      0      0      1 #> 570           1      0      0      0      0      0      0      0      0      0 #> 571           1      0      0      0      0      0      0      0      0      0 #> 572           1      0      0      0      0      0      0      0      0      0 #> 573           1      0      0      0      0      0      0      0      0      0 #> 574           1      0      0      0      0      0      0      0      0      0 #> 575           1      0      0      0      0      0      0      0      0      0 #> 576           1      0      0      0      0      0      0      0      0      0 #> 577           1      0      0      0      0      0      0      0      0      0 #> 578           1      0      0      0      0      0      0      0      0      0 #> 579           1      0      0      0      0      0      0      0      0      0 #> 580           1      0      0      0      0      0      0      0      0      0 #> 581           1      1      0      0      0      0      0      0      0      0 #> 582           1      0      1      0      0      0      0      0      0      0 #> 583           1      0      0      1      0      0      0      0      0      0 #> 584           1      0      0      0      1      0      0      0      0      0 #> 585           1      0      0      0      0      1      0      0      0      0 #> 586           1      0      0      0      0      0      1      0      0      0 #> 587           1      0      0      0      0      0      0      1      0      0 #> 588           1      0      0      0      0      0      0      0      1      0 #> 589           1      0      0      0      0      0      0      0      0      1 #> 590           1      0      0      0      0      0      0      0      0      0 #> 591           1      0      0      0      0      0      0      0      0      0 #> 592           1      0      0      0      0      0      0      0      0      0 #> 593           1      0      0      0      0      0      0      0      0      0 #> 594           1      0      0      0      0      0      0      0      0      0 #> 595           1      0      0      0      0      0      0      0      0      0 #> 596           1      0      0      0      0      0      0      0      0      0 #> 597           1      0      0      0      0      0      0      0      0      0 #> 598           1      0      0      0      0      0      0      0      0      0 #> 599           1      0      0      0      0      0      0      0      0      0 #> 600           1      0      0      0      0      0      0      0      0      0 #> 601           1      1      0      0      0      0      0      0      0      0 #> 602           1      0      1      0      0      0      0      0      0      0 #> 603           1      0      0      1      0      0      0      0      0      0 #> 604           1      0      0      0      1      0      0      0      0      0 #> 605           1      0      0      0      0      1      0      0      0      0 #> 606           1      0      0      0      0      0      1      0      0      0 #> 607           1      0      0      0      0      0      0      1      0      0 #> 608           1      0      0      0      0      0      0      0      1      0 #> 609           1      0      0      0      0      0      0      0      0      1 #> 610           1      0      0      0      0      0      0      0      0      0 #> 611           1      0      0      0      0      0      0      0      0      0 #> 612           1      0      0      0      0      0      0      0      0      0 #> 613           1      0      0      0      0      0      0      0      0      0 #> 614           1      0      0      0      0      0      0      0      0      0 #> 615           1      0      0      0      0      0      0      0      0      0 #> 616           1      0      0      0      0      0      0      0      0      0 #> 617           1      0      0      0      0      0      0      0      0      0 #> 618           1      0      0      0      0      0      0      0      0      0 #> 619           1      0      0      0      0      0      0      0      0      0 #> 620           1      0      0      0      0      0      0      0      0      0 #> 621           1      1      0      0      0      0      0      0      0      0 #> 622           1      0      1      0      0      0      0      0      0      0 #> 623           1      0      0      1      0      0      0      0      0      0 #> 624           1      0      0      0      1      0      0      0      0      0 #> 625           1      0      0      0      0      1      0      0      0      0 #> 626           1      0      0      0      0      0      1      0      0      0 #> 627           1      0      0      0      0      0      0      1      0      0 #> 628           1      0      0      0      0      0      0      0      1      0 #> 629           1      0      0      0      0      0      0      0      0      1 #> 630           1      0      0      0      0      0      0      0      0      0 #> 631           1      0      0      0      0      0      0      0      0      0 #> 632           1      0      0      0      0      0      0      0      0      0 #> 633           1      0      0      0      0      0      0      0      0      0 #> 634           1      0      0      0      0      0      0      0      0      0 #> 635           1      0      0      0      0      0      0      0      0      0 #> 636           1      0      0      0      0      0      0      0      0      0 #> 637           1      0      0      0      0      0      0      0      0      0 #> 638           1      0      0      0      0      0      0      0      0      0 #> 639           1      0      0      0      0      0      0      0      0      0 #> 640           1      0      0      0      0      0      0      0      0      0 #> 641           1      1      0      0      0      0      0      0      0      0 #> 642           1      0      1      0      0      0      0      0      0      0 #> 643           1      0      0      1      0      0      0      0      0      0 #> 644           1      0      0      0      1      0      0      0      0      0 #> 645           1      0      0      0      0      1      0      0      0      0 #> 646           1      0      0      0      0      0      1      0      0      0 #> 647           1      0      0      0      0      0      0      1      0      0 #> 648           1      0      0      0      0      0      0      0      1      0 #> 649           1      0      0      0      0      0      0      0      0      1 #> 650           1      0      0      0      0      0      0      0      0      0 #> 651           1      0      0      0      0      0      0      0      0      0 #> 652           1      0      0      0      0      0      0      0      0      0 #> 653           1      0      0      0      0      0      0      0      0      0 #> 654           1      0      0      0      0      0      0      0      0      0 #> 655           1      0      0      0      0      0      0      0      0      0 #> 656           1      0      0      0      0      0      0      0      0      0 #> 657           1      0      0      0      0      0      0      0      0      0 #> 658           1      0      0      0      0      0      0      0      0      0 #> 659           1      0      0      0      0      0      0      0      0      0 #> 660           1      0      0      0      0      0      0      0      0      0 #> 661           1      1      0      0      0      0      0      0      0      0 #> 662           1      0      1      0      0      0      0      0      0      0 #> 663           1      0      0      1      0      0      0      0      0      0 #> 664           1      0      0      0      1      0      0      0      0      0 #> 665           1      0      0      0      0      1      0      0      0      0 #> 666           1      0      0      0      0      0      1      0      0      0 #> 667           1      0      0      0      0      0      0      1      0      0 #> 668           1      0      0      0      0      0      0      0      1      0 #> 669           1      0      0      0      0      0      0      0      0      1 #> 670           1      0      0      0      0      0      0      0      0      0 #> 671           1      0      0      0      0      0      0      0      0      0 #> 672           1      0      0      0      0      0      0      0      0      0 #> 673           1      0      0      0      0      0      0      0      0      0 #> 674           1      0      0      0      0      0      0      0      0      0 #> 675           1      0      0      0      0      0      0      0      0      0 #> 676           1      0      0      0      0      0      0      0      0      0 #> 677           1      0      0      0      0      0      0      0      0      0 #> 678           1      0      0      0      0      0      0      0      0      0 #> 679           1      0      0      0      0      0      0      0      0      0 #> 680           1      0      0      0      0      0      0      0      0      0 #> 681           1      1      0      0      0      0      0      0      0      0 #> 682           1      0      1      0      0      0      0      0      0      0 #> 683           1      0      0      1      0      0      0      0      0      0 #> 684           1      0      0      0      1      0      0      0      0      0 #> 685           1      0      0      0      0      1      0      0      0      0 #> 686           1      0      0      0      0      0      1      0      0      0 #> 687           1      0      0      0      0      0      0      1      0      0 #> 688           1      0      0      0      0      0      0      0      1      0 #> 689           1      0      0      0      0      0      0      0      0      1 #> 690           1      0      0      0      0      0      0      0      0      0 #> 691           1      0      0      0      0      0      0      0      0      0 #> 692           1      0      0      0      0      0      0      0      0      0 #> 693           1      0      0      0      0      0      0      0      0      0 #> 694           1      0      0      0      0      0      0      0      0      0 #> 695           1      0      0      0      0      0      0      0      0      0 #> 696           1      0      0      0      0      0      0      0      0      0 #> 697           1      0      0      0      0      0      0      0      0      0 #> 698           1      0      0      0      0      0      0      0      0      0 #> 699           1      0      0      0      0      0      0      0      0      0 #> 700           1      0      0      0      0      0      0      0      0      0 #> 701           1      1      0      0      0      0      0      0      0      0 #> 702           1      0      1      0      0      0      0      0      0      0 #> 703           1      0      0      1      0      0      0      0      0      0 #> 704           1      0      0      0      1      0      0      0      0      0 #> 705           1      0      0      0      0      1      0      0      0      0 #> 706           1      0      0      0      0      0      1      0      0      0 #> 707           1      0      0      0      0      0      0      1      0      0 #> 708           1      0      0      0      0      0      0      0      1      0 #> 709           1      0      0      0      0      0      0      0      0      1 #> 710           1      0      0      0      0      0      0      0      0      0 #> 711           1      0      0      0      0      0      0      0      0      0 #> 712           1      0      0      0      0      0      0      0      0      0 #> 713           1      0      0      0      0      0      0      0      0      0 #> 714           1      0      0      0      0      0      0      0      0      0 #> 715           1      0      0      0      0      0      0      0      0      0 #> 716           1      0      0      0      0      0      0      0      0      0 #> 717           1      0      0      0      0      0      0      0      0      0 #> 718           1      0      0      0      0      0      0      0      0      0 #> 719           1      0      0      0      0      0      0      0      0      0 #> 720           1      0      0      0      0      0      0      0      0      0 #> 721           1      1      0      0      0      0      0      0      0      0 #> 722           1      0      1      0      0      0      0      0      0      0 #> 723           1      0      0      1      0      0      0      0      0      0 #> 724           1      0      0      0      1      0      0      0      0      0 #> 725           1      0      0      0      0      1      0      0      0      0 #> 726           1      0      0      0      0      0      1      0      0      0 #> 727           1      0      0      0      0      0      0      1      0      0 #> 728           1      0      0      0      0      0      0      0      1      0 #> 729           1      0      0      0      0      0      0      0      0      1 #> 730           1      0      0      0      0      0      0      0      0      0 #> 731           1      0      0      0      0      0      0      0      0      0 #> 732           1      0      0      0      0      0      0      0      0      0 #> 733           1      0      0      0      0      0      0      0      0      0 #> 734           1      0      0      0      0      0      0      0      0      0 #> 735           1      0      0      0      0      0      0      0      0      0 #> 736           1      0      0      0      0      0      0      0      0      0 #> 737           1      0      0      0      0      0      0      0      0      0 #> 738           1      0      0      0      0      0      0      0      0      0 #> 739           1      0      0      0      0      0      0      0      0      0 #> 740           1      0      0      0      0      0      0      0      0      0 #> 741           1      1      0      0      0      0      0      0      0      0 #> 742           1      0      1      0      0      0      0      0      0      0 #> 743           1      0      0      1      0      0      0      0      0      0 #> 744           1      0      0      0      1      0      0      0      0      0 #> 745           1      0      0      0      0      1      0      0      0      0 #> 746           1      0      0      0      0      0      1      0      0      0 #> 747           1      0      0      0      0      0      0      1      0      0 #> 748           1      0      0      0      0      0      0      0      1      0 #> 749           1      0      0      0      0      0      0      0      0      1 #> 750           1      0      0      0      0      0      0      0      0      0 #> 751           1      0      0      0      0      0      0      0      0      0 #> 752           1      0      0      0      0      0      0      0      0      0 #> 753           1      0      0      0      0      0      0      0      0      0 #> 754           1      0      0      0      0      0      0      0      0      0 #> 755           1      0      0      0      0      0      0      0      0      0 #> 756           1      0      0      0      0      0      0      0      0      0 #> 757           1      0      0      0      0      0      0      0      0      0 #> 758           1      0      0      0      0      0      0      0      0      0 #> 759           1      0      0      0      0      0      0      0      0      0 #> 760           1      0      0      0      0      0      0      0      0      0 #> 761           1      1      0      0      0      0      0      0      0      0 #> 762           1      0      1      0      0      0      0      0      0      0 #> 763           1      0      0      1      0      0      0      0      0      0 #> 764           1      0      0      0      1      0      0      0      0      0 #> 765           1      0      0      0      0      1      0      0      0      0 #> 766           1      0      0      0      0      0      1      0      0      0 #> 767           1      0      0      0      0      0      0      1      0      0 #> 768           1      0      0      0      0      0      0      0      1      0 #> 769           1      0      0      0      0      0      0      0      0      1 #> 770           1      0      0      0      0      0      0      0      0      0 #> 771           1      0      0      0      0      0      0      0      0      0 #> 772           1      0      0      0      0      0      0      0      0      0 #> 773           1      0      0      0      0      0      0      0      0      0 #> 774           1      0      0      0      0      0      0      0      0      0 #> 775           1      0      0      0      0      0      0      0      0      0 #> 776           1      0      0      0      0      0      0      0      0      0 #> 777           1      0      0      0      0      0      0      0      0      0 #> 778           1      0      0      0      0      0      0      0      0      0 #> 779           1      0      0      0      0      0      0      0      0      0 #> 780           1      0      0      0      0      0      0      0      0      0 #> 781           1      1      0      0      0      0      0      0      0      0 #> 782           1      0      1      0      0      0      0      0      0      0 #> 783           1      0      0      1      0      0      0      0      0      0 #> 784           1      0      0      0      1      0      0      0      0      0 #> 785           1      0      0      0      0      1      0      0      0      0 #> 786           1      0      0      0      0      0      1      0      0      0 #> 787           1      0      0      0      0      0      0      1      0      0 #> 788           1      0      0      0      0      0      0      0      1      0 #> 789           1      0      0      0      0      0      0      0      0      1 #> 790           1      0      0      0      0      0      0      0      0      0 #> 791           1      0      0      0      0      0      0      0      0      0 #> 792           1      0      0      0      0      0      0      0      0      0 #> 793           1      0      0      0      0      0      0      0      0      0 #> 794           1      0      0      0      0      0      0      0      0      0 #> 795           1      0      0      0      0      0      0      0      0      0 #> 796           1      0      0      0      0      0      0      0      0      0 #> 797           1      0      0      0      0      0      0      0      0      0 #> 798           1      0      0      0      0      0      0      0      0      0 #> 799           1      0      0      0      0      0      0      0      0      0 #> 800           1      0      0      0      0      0      0      0      0      0 #> 801           1      1      0      0      0      0      0      0      0      0 #> 802           1      0      1      0      0      0      0      0      0      0 #> 803           1      0      0      1      0      0      0      0      0      0 #> 804           1      0      0      0      1      0      0      0      0      0 #> 805           1      0      0      0      0      1      0      0      0      0 #> 806           1      0      0      0      0      0      1      0      0      0 #> 807           1      0      0      0      0      0      0      1      0      0 #> 808           1      0      0      0      0      0      0      0      1      0 #> 809           1      0      0      0      0      0      0      0      0      1 #> 810           1      0      0      0      0      0      0      0      0      0 #> 811           1      0      0      0      0      0      0      0      0      0 #> 812           1      0      0      0      0      0      0      0      0      0 #> 813           1      0      0      0      0      0      0      0      0      0 #> 814           1      0      0      0      0      0      0      0      0      0 #> 815           1      0      0      0      0      0      0      0      0      0 #> 816           1      0      0      0      0      0      0      0      0      0 #> 817           1      0      0      0      0      0      0      0      0      0 #> 818           1      0      0      0      0      0      0      0      0      0 #> 819           1      0      0      0      0      0      0      0      0      0 #> 820           1      0      0      0      0      0      0      0      0      0 #>     delay9 delay10 delay11 delay12 delay13 delay14 delay15 delay16 delay17 #> 1        0       0       0       0       0       0       0       0       0 #> 2        0       0       0       0       0       0       0       0       0 #> 3        0       0       0       0       0       0       0       0       0 #> 4        0       0       0       0       0       0       0       0       0 #> 5        0       0       0       0       0       0       0       0       0 #> 6        0       0       0       0       0       0       0       0       0 #> 7        0       0       0       0       0       0       0       0       0 #> 8        0       0       0       0       0       0       0       0       0 #> 9        0       0       0       0       0       0       0       0       0 #> 10       1       0       0       0       0       0       0       0       0 #> 11       0       1       0       0       0       0       0       0       0 #> 12       0       0       1       0       0       0       0       0       0 #> 13       0       0       0       1       0       0       0       0       0 #> 14       0       0       0       0       1       0       0       0       0 #> 15       0       0       0       0       0       1       0       0       0 #> 16       0       0       0       0       0       0       1       0       0 #> 17       0       0       0       0       0       0       0       1       0 #> 18       0       0       0       0       0       0       0       0       1 #> 19       0       0       0       0       0       0       0       0       0 #> 20       0       0       0       0       0       0       0       0       0 #> 21       0       0       0       0       0       0       0       0       0 #> 22       0       0       0       0       0       0       0       0       0 #> 23       0       0       0       0       0       0       0       0       0 #> 24       0       0       0       0       0       0       0       0       0 #> 25       0       0       0       0       0       0       0       0       0 #> 26       0       0       0       0       0       0       0       0       0 #> 27       0       0       0       0       0       0       0       0       0 #> 28       0       0       0       0       0       0       0       0       0 #> 29       0       0       0       0       0       0       0       0       0 #> 30       1       0       0       0       0       0       0       0       0 #> 31       0       1       0       0       0       0       0       0       0 #> 32       0       0       1       0       0       0       0       0       0 #> 33       0       0       0       1       0       0       0       0       0 #> 34       0       0       0       0       1       0       0       0       0 #> 35       0       0       0       0       0       1       0       0       0 #> 36       0       0       0       0       0       0       1       0       0 #> 37       0       0       0       0       0       0       0       1       0 #> 38       0       0       0       0       0       0       0       0       1 #> 39       0       0       0       0       0       0       0       0       0 #> 40       0       0       0       0       0       0       0       0       0 #> 41       0       0       0       0       0       0       0       0       0 #> 42       0       0       0       0       0       0       0       0       0 #> 43       0       0       0       0       0       0       0       0       0 #> 44       0       0       0       0       0       0       0       0       0 #> 45       0       0       0       0       0       0       0       0       0 #> 46       0       0       0       0       0       0       0       0       0 #> 47       0       0       0       0       0       0       0       0       0 #> 48       0       0       0       0       0       0       0       0       0 #> 49       0       0       0       0       0       0       0       0       0 #> 50       1       0       0       0       0       0       0       0       0 #> 51       0       1       0       0       0       0       0       0       0 #> 52       0       0       1       0       0       0       0       0       0 #> 53       0       0       0       1       0       0       0       0       0 #> 54       0       0       0       0       1       0       0       0       0 #> 55       0       0       0       0       0       1       0       0       0 #> 56       0       0       0       0       0       0       1       0       0 #> 57       0       0       0       0       0       0       0       1       0 #> 58       0       0       0       0       0       0       0       0       1 #> 59       0       0       0       0       0       0       0       0       0 #> 60       0       0       0       0       0       0       0       0       0 #> 61       0       0       0       0       0       0       0       0       0 #> 62       0       0       0       0       0       0       0       0       0 #> 63       0       0       0       0       0       0       0       0       0 #> 64       0       0       0       0       0       0       0       0       0 #> 65       0       0       0       0       0       0       0       0       0 #> 66       0       0       0       0       0       0       0       0       0 #> 67       0       0       0       0       0       0       0       0       0 #> 68       0       0       0       0       0       0       0       0       0 #> 69       0       0       0       0       0       0       0       0       0 #> 70       1       0       0       0       0       0       0       0       0 #> 71       0       1       0       0       0       0       0       0       0 #> 72       0       0       1       0       0       0       0       0       0 #> 73       0       0       0       1       0       0       0       0       0 #> 74       0       0       0       0       1       0       0       0       0 #> 75       0       0       0       0       0       1       0       0       0 #> 76       0       0       0       0       0       0       1       0       0 #> 77       0       0       0       0       0       0       0       1       0 #> 78       0       0       0       0       0       0       0       0       1 #> 79       0       0       0       0       0       0       0       0       0 #> 80       0       0       0       0       0       0       0       0       0 #> 81       0       0       0       0       0       0       0       0       0 #> 82       0       0       0       0       0       0       0       0       0 #> 83       0       0       0       0       0       0       0       0       0 #> 84       0       0       0       0       0       0       0       0       0 #> 85       0       0       0       0       0       0       0       0       0 #> 86       0       0       0       0       0       0       0       0       0 #> 87       0       0       0       0       0       0       0       0       0 #> 88       0       0       0       0       0       0       0       0       0 #> 89       0       0       0       0       0       0       0       0       0 #> 90       1       0       0       0       0       0       0       0       0 #> 91       0       1       0       0       0       0       0       0       0 #> 92       0       0       1       0       0       0       0       0       0 #> 93       0       0       0       1       0       0       0       0       0 #> 94       0       0       0       0       1       0       0       0       0 #> 95       0       0       0       0       0       1       0       0       0 #> 96       0       0       0       0       0       0       1       0       0 #> 97       0       0       0       0       0       0       0       1       0 #> 98       0       0       0       0       0       0       0       0       1 #> 99       0       0       0       0       0       0       0       0       0 #> 100      0       0       0       0       0       0       0       0       0 #> 101      0       0       0       0       0       0       0       0       0 #> 102      0       0       0       0       0       0       0       0       0 #> 103      0       0       0       0       0       0       0       0       0 #> 104      0       0       0       0       0       0       0       0       0 #> 105      0       0       0       0       0       0       0       0       0 #> 106      0       0       0       0       0       0       0       0       0 #> 107      0       0       0       0       0       0       0       0       0 #> 108      0       0       0       0       0       0       0       0       0 #> 109      0       0       0       0       0       0       0       0       0 #> 110      1       0       0       0       0       0       0       0       0 #> 111      0       1       0       0       0       0       0       0       0 #> 112      0       0       1       0       0       0       0       0       0 #> 113      0       0       0       1       0       0       0       0       0 #> 114      0       0       0       0       1       0       0       0       0 #> 115      0       0       0       0       0       1       0       0       0 #> 116      0       0       0       0       0       0       1       0       0 #> 117      0       0       0       0       0       0       0       1       0 #> 118      0       0       0       0       0       0       0       0       1 #> 119      0       0       0       0       0       0       0       0       0 #> 120      0       0       0       0       0       0       0       0       0 #> 121      0       0       0       0       0       0       0       0       0 #> 122      0       0       0       0       0       0       0       0       0 #> 123      0       0       0       0       0       0       0       0       0 #> 124      0       0       0       0       0       0       0       0       0 #> 125      0       0       0       0       0       0       0       0       0 #> 126      0       0       0       0       0       0       0       0       0 #> 127      0       0       0       0       0       0       0       0       0 #> 128      0       0       0       0       0       0       0       0       0 #> 129      0       0       0       0       0       0       0       0       0 #> 130      1       0       0       0       0       0       0       0       0 #> 131      0       1       0       0       0       0       0       0       0 #> 132      0       0       1       0       0       0       0       0       0 #> 133      0       0       0       1       0       0       0       0       0 #> 134      0       0       0       0       1       0       0       0       0 #> 135      0       0       0       0       0       1       0       0       0 #> 136      0       0       0       0       0       0       1       0       0 #> 137      0       0       0       0       0       0       0       1       0 #> 138      0       0       0       0       0       0       0       0       1 #> 139      0       0       0       0       0       0       0       0       0 #> 140      0       0       0       0       0       0       0       0       0 #> 141      0       0       0       0       0       0       0       0       0 #> 142      0       0       0       0       0       0       0       0       0 #> 143      0       0       0       0       0       0       0       0       0 #> 144      0       0       0       0       0       0       0       0       0 #> 145      0       0       0       0       0       0       0       0       0 #> 146      0       0       0       0       0       0       0       0       0 #> 147      0       0       0       0       0       0       0       0       0 #> 148      0       0       0       0       0       0       0       0       0 #> 149      0       0       0       0       0       0       0       0       0 #> 150      1       0       0       0       0       0       0       0       0 #> 151      0       1       0       0       0       0       0       0       0 #> 152      0       0       1       0       0       0       0       0       0 #> 153      0       0       0       1       0       0       0       0       0 #> 154      0       0       0       0       1       0       0       0       0 #> 155      0       0       0       0       0       1       0       0       0 #> 156      0       0       0       0       0       0       1       0       0 #> 157      0       0       0       0       0       0       0       1       0 #> 158      0       0       0       0       0       0       0       0       1 #> 159      0       0       0       0       0       0       0       0       0 #> 160      0       0       0       0       0       0       0       0       0 #> 161      0       0       0       0       0       0       0       0       0 #> 162      0       0       0       0       0       0       0       0       0 #> 163      0       0       0       0       0       0       0       0       0 #> 164      0       0       0       0       0       0       0       0       0 #> 165      0       0       0       0       0       0       0       0       0 #> 166      0       0       0       0       0       0       0       0       0 #> 167      0       0       0       0       0       0       0       0       0 #> 168      0       0       0       0       0       0       0       0       0 #> 169      0       0       0       0       0       0       0       0       0 #> 170      1       0       0       0       0       0       0       0       0 #> 171      0       1       0       0       0       0       0       0       0 #> 172      0       0       1       0       0       0       0       0       0 #> 173      0       0       0       1       0       0       0       0       0 #> 174      0       0       0       0       1       0       0       0       0 #> 175      0       0       0       0       0       1       0       0       0 #> 176      0       0       0       0       0       0       1       0       0 #> 177      0       0       0       0       0       0       0       1       0 #> 178      0       0       0       0       0       0       0       0       1 #> 179      0       0       0       0       0       0       0       0       0 #> 180      0       0       0       0       0       0       0       0       0 #> 181      0       0       0       0       0       0       0       0       0 #> 182      0       0       0       0       0       0       0       0       0 #> 183      0       0       0       0       0       0       0       0       0 #> 184      0       0       0       0       0       0       0       0       0 #> 185      0       0       0       0       0       0       0       0       0 #> 186      0       0       0       0       0       0       0       0       0 #> 187      0       0       0       0       0       0       0       0       0 #> 188      0       0       0       0       0       0       0       0       0 #> 189      0       0       0       0       0       0       0       0       0 #> 190      1       0       0       0       0       0       0       0       0 #> 191      0       1       0       0       0       0       0       0       0 #> 192      0       0       1       0       0       0       0       0       0 #> 193      0       0       0       1       0       0       0       0       0 #> 194      0       0       0       0       1       0       0       0       0 #> 195      0       0       0       0       0       1       0       0       0 #> 196      0       0       0       0       0       0       1       0       0 #> 197      0       0       0       0       0       0       0       1       0 #> 198      0       0       0       0       0       0       0       0       1 #> 199      0       0       0       0       0       0       0       0       0 #> 200      0       0       0       0       0       0       0       0       0 #> 201      0       0       0       0       0       0       0       0       0 #> 202      0       0       0       0       0       0       0       0       0 #> 203      0       0       0       0       0       0       0       0       0 #> 204      0       0       0       0       0       0       0       0       0 #> 205      0       0       0       0       0       0       0       0       0 #> 206      0       0       0       0       0       0       0       0       0 #> 207      0       0       0       0       0       0       0       0       0 #> 208      0       0       0       0       0       0       0       0       0 #> 209      0       0       0       0       0       0       0       0       0 #> 210      1       0       0       0       0       0       0       0       0 #> 211      0       1       0       0       0       0       0       0       0 #> 212      0       0       1       0       0       0       0       0       0 #> 213      0       0       0       1       0       0       0       0       0 #> 214      0       0       0       0       1       0       0       0       0 #> 215      0       0       0       0       0       1       0       0       0 #> 216      0       0       0       0       0       0       1       0       0 #> 217      0       0       0       0       0       0       0       1       0 #> 218      0       0       0       0       0       0       0       0       1 #> 219      0       0       0       0       0       0       0       0       0 #> 220      0       0       0       0       0       0       0       0       0 #> 221      0       0       0       0       0       0       0       0       0 #> 222      0       0       0       0       0       0       0       0       0 #> 223      0       0       0       0       0       0       0       0       0 #> 224      0       0       0       0       0       0       0       0       0 #> 225      0       0       0       0       0       0       0       0       0 #> 226      0       0       0       0       0       0       0       0       0 #> 227      0       0       0       0       0       0       0       0       0 #> 228      0       0       0       0       0       0       0       0       0 #> 229      0       0       0       0       0       0       0       0       0 #> 230      1       0       0       0       0       0       0       0       0 #> 231      0       1       0       0       0       0       0       0       0 #> 232      0       0       1       0       0       0       0       0       0 #> 233      0       0       0       1       0       0       0       0       0 #> 234      0       0       0       0       1       0       0       0       0 #> 235      0       0       0       0       0       1       0       0       0 #> 236      0       0       0       0       0       0       1       0       0 #> 237      0       0       0       0       0       0       0       1       0 #> 238      0       0       0       0       0       0       0       0       1 #> 239      0       0       0       0       0       0       0       0       0 #> 240      0       0       0       0       0       0       0       0       0 #> 241      0       0       0       0       0       0       0       0       0 #> 242      0       0       0       0       0       0       0       0       0 #> 243      0       0       0       0       0       0       0       0       0 #> 244      0       0       0       0       0       0       0       0       0 #> 245      0       0       0       0       0       0       0       0       0 #> 246      0       0       0       0       0       0       0       0       0 #> 247      0       0       0       0       0       0       0       0       0 #> 248      0       0       0       0       0       0       0       0       0 #> 249      0       0       0       0       0       0       0       0       0 #> 250      1       0       0       0       0       0       0       0       0 #> 251      0       1       0       0       0       0       0       0       0 #> 252      0       0       1       0       0       0       0       0       0 #> 253      0       0       0       1       0       0       0       0       0 #> 254      0       0       0       0       1       0       0       0       0 #> 255      0       0       0       0       0       1       0       0       0 #> 256      0       0       0       0       0       0       1       0       0 #> 257      0       0       0       0       0       0       0       1       0 #> 258      0       0       0       0       0       0       0       0       1 #> 259      0       0       0       0       0       0       0       0       0 #> 260      0       0       0       0       0       0       0       0       0 #> 261      0       0       0       0       0       0       0       0       0 #> 262      0       0       0       0       0       0       0       0       0 #> 263      0       0       0       0       0       0       0       0       0 #> 264      0       0       0       0       0       0       0       0       0 #> 265      0       0       0       0       0       0       0       0       0 #> 266      0       0       0       0       0       0       0       0       0 #> 267      0       0       0       0       0       0       0       0       0 #> 268      0       0       0       0       0       0       0       0       0 #> 269      0       0       0       0       0       0       0       0       0 #> 270      1       0       0       0       0       0       0       0       0 #> 271      0       1       0       0       0       0       0       0       0 #> 272      0       0       1       0       0       0       0       0       0 #> 273      0       0       0       1       0       0       0       0       0 #> 274      0       0       0       0       1       0       0       0       0 #> 275      0       0       0       0       0       1       0       0       0 #> 276      0       0       0       0       0       0       1       0       0 #> 277      0       0       0       0       0       0       0       1       0 #> 278      0       0       0       0       0       0       0       0       1 #> 279      0       0       0       0       0       0       0       0       0 #> 280      0       0       0       0       0       0       0       0       0 #> 281      0       0       0       0       0       0       0       0       0 #> 282      0       0       0       0       0       0       0       0       0 #> 283      0       0       0       0       0       0       0       0       0 #> 284      0       0       0       0       0       0       0       0       0 #> 285      0       0       0       0       0       0       0       0       0 #> 286      0       0       0       0       0       0       0       0       0 #> 287      0       0       0       0       0       0       0       0       0 #> 288      0       0       0       0       0       0       0       0       0 #> 289      0       0       0       0       0       0       0       0       0 #> 290      1       0       0       0       0       0       0       0       0 #> 291      0       1       0       0       0       0       0       0       0 #> 292      0       0       1       0       0       0       0       0       0 #> 293      0       0       0       1       0       0       0       0       0 #> 294      0       0       0       0       1       0       0       0       0 #> 295      0       0       0       0       0       1       0       0       0 #> 296      0       0       0       0       0       0       1       0       0 #> 297      0       0       0       0       0       0       0       1       0 #> 298      0       0       0       0       0       0       0       0       1 #> 299      0       0       0       0       0       0       0       0       0 #> 300      0       0       0       0       0       0       0       0       0 #> 301      0       0       0       0       0       0       0       0       0 #> 302      0       0       0       0       0       0       0       0       0 #> 303      0       0       0       0       0       0       0       0       0 #> 304      0       0       0       0       0       0       0       0       0 #> 305      0       0       0       0       0       0       0       0       0 #> 306      0       0       0       0       0       0       0       0       0 #> 307      0       0       0       0       0       0       0       0       0 #> 308      0       0       0       0       0       0       0       0       0 #> 309      0       0       0       0       0       0       0       0       0 #> 310      1       0       0       0       0       0       0       0       0 #> 311      0       1       0       0       0       0       0       0       0 #> 312      0       0       1       0       0       0       0       0       0 #> 313      0       0       0       1       0       0       0       0       0 #> 314      0       0       0       0       1       0       0       0       0 #> 315      0       0       0       0       0       1       0       0       0 #> 316      0       0       0       0       0       0       1       0       0 #> 317      0       0       0       0       0       0       0       1       0 #> 318      0       0       0       0       0       0       0       0       1 #> 319      0       0       0       0       0       0       0       0       0 #> 320      0       0       0       0       0       0       0       0       0 #> 321      0       0       0       0       0       0       0       0       0 #> 322      0       0       0       0       0       0       0       0       0 #> 323      0       0       0       0       0       0       0       0       0 #> 324      0       0       0       0       0       0       0       0       0 #> 325      0       0       0       0       0       0       0       0       0 #> 326      0       0       0       0       0       0       0       0       0 #> 327      0       0       0       0       0       0       0       0       0 #> 328      0       0       0       0       0       0       0       0       0 #> 329      0       0       0       0       0       0       0       0       0 #> 330      1       0       0       0       0       0       0       0       0 #> 331      0       1       0       0       0       0       0       0       0 #> 332      0       0       1       0       0       0       0       0       0 #> 333      0       0       0       1       0       0       0       0       0 #> 334      0       0       0       0       1       0       0       0       0 #> 335      0       0       0       0       0       1       0       0       0 #> 336      0       0       0       0       0       0       1       0       0 #> 337      0       0       0       0       0       0       0       1       0 #> 338      0       0       0       0       0       0       0       0       1 #> 339      0       0       0       0       0       0       0       0       0 #> 340      0       0       0       0       0       0       0       0       0 #> 341      0       0       0       0       0       0       0       0       0 #> 342      0       0       0       0       0       0       0       0       0 #> 343      0       0       0       0       0       0       0       0       0 #> 344      0       0       0       0       0       0       0       0       0 #> 345      0       0       0       0       0       0       0       0       0 #> 346      0       0       0       0       0       0       0       0       0 #> 347      0       0       0       0       0       0       0       0       0 #> 348      0       0       0       0       0       0       0       0       0 #> 349      0       0       0       0       0       0       0       0       0 #> 350      1       0       0       0       0       0       0       0       0 #> 351      0       1       0       0       0       0       0       0       0 #> 352      0       0       1       0       0       0       0       0       0 #> 353      0       0       0       1       0       0       0       0       0 #> 354      0       0       0       0       1       0       0       0       0 #> 355      0       0       0       0       0       1       0       0       0 #> 356      0       0       0       0       0       0       1       0       0 #> 357      0       0       0       0       0       0       0       1       0 #> 358      0       0       0       0       0       0       0       0       1 #> 359      0       0       0       0       0       0       0       0       0 #> 360      0       0       0       0       0       0       0       0       0 #> 361      0       0       0       0       0       0       0       0       0 #> 362      0       0       0       0       0       0       0       0       0 #> 363      0       0       0       0       0       0       0       0       0 #> 364      0       0       0       0       0       0       0       0       0 #> 365      0       0       0       0       0       0       0       0       0 #> 366      0       0       0       0       0       0       0       0       0 #> 367      0       0       0       0       0       0       0       0       0 #> 368      0       0       0       0       0       0       0       0       0 #> 369      0       0       0       0       0       0       0       0       0 #> 370      1       0       0       0       0       0       0       0       0 #> 371      0       1       0       0       0       0       0       0       0 #> 372      0       0       1       0       0       0       0       0       0 #> 373      0       0       0       1       0       0       0       0       0 #> 374      0       0       0       0       1       0       0       0       0 #> 375      0       0       0       0       0       1       0       0       0 #> 376      0       0       0       0       0       0       1       0       0 #> 377      0       0       0       0       0       0       0       1       0 #> 378      0       0       0       0       0       0       0       0       1 #> 379      0       0       0       0       0       0       0       0       0 #> 380      0       0       0       0       0       0       0       0       0 #> 381      0       0       0       0       0       0       0       0       0 #> 382      0       0       0       0       0       0       0       0       0 #> 383      0       0       0       0       0       0       0       0       0 #> 384      0       0       0       0       0       0       0       0       0 #> 385      0       0       0       0       0       0       0       0       0 #> 386      0       0       0       0       0       0       0       0       0 #> 387      0       0       0       0       0       0       0       0       0 #> 388      0       0       0       0       0       0       0       0       0 #> 389      0       0       0       0       0       0       0       0       0 #> 390      1       0       0       0       0       0       0       0       0 #> 391      0       1       0       0       0       0       0       0       0 #> 392      0       0       1       0       0       0       0       0       0 #> 393      0       0       0       1       0       0       0       0       0 #> 394      0       0       0       0       1       0       0       0       0 #> 395      0       0       0       0       0       1       0       0       0 #> 396      0       0       0       0       0       0       1       0       0 #> 397      0       0       0       0       0       0       0       1       0 #> 398      0       0       0       0       0       0       0       0       1 #> 399      0       0       0       0       0       0       0       0       0 #> 400      0       0       0       0       0       0       0       0       0 #> 401      0       0       0       0       0       0       0       0       0 #> 402      0       0       0       0       0       0       0       0       0 #> 403      0       0       0       0       0       0       0       0       0 #> 404      0       0       0       0       0       0       0       0       0 #> 405      0       0       0       0       0       0       0       0       0 #> 406      0       0       0       0       0       0       0       0       0 #> 407      0       0       0       0       0       0       0       0       0 #> 408      0       0       0       0       0       0       0       0       0 #> 409      0       0       0       0       0       0       0       0       0 #> 410      1       0       0       0       0       0       0       0       0 #> 411      0       1       0       0       0       0       0       0       0 #> 412      0       0       1       0       0       0       0       0       0 #> 413      0       0       0       1       0       0       0       0       0 #> 414      0       0       0       0       1       0       0       0       0 #> 415      0       0       0       0       0       1       0       0       0 #> 416      0       0       0       0       0       0       1       0       0 #> 417      0       0       0       0       0       0       0       1       0 #> 418      0       0       0       0       0       0       0       0       1 #> 419      0       0       0       0       0       0       0       0       0 #> 420      0       0       0       0       0       0       0       0       0 #> 421      0       0       0       0       0       0       0       0       0 #> 422      0       0       0       0       0       0       0       0       0 #> 423      0       0       0       0       0       0       0       0       0 #> 424      0       0       0       0       0       0       0       0       0 #> 425      0       0       0       0       0       0       0       0       0 #> 426      0       0       0       0       0       0       0       0       0 #> 427      0       0       0       0       0       0       0       0       0 #> 428      0       0       0       0       0       0       0       0       0 #> 429      0       0       0       0       0       0       0       0       0 #> 430      1       0       0       0       0       0       0       0       0 #> 431      0       1       0       0       0       0       0       0       0 #> 432      0       0       1       0       0       0       0       0       0 #> 433      0       0       0       1       0       0       0       0       0 #> 434      0       0       0       0       1       0       0       0       0 #> 435      0       0       0       0       0       1       0       0       0 #> 436      0       0       0       0       0       0       1       0       0 #> 437      0       0       0       0       0       0       0       1       0 #> 438      0       0       0       0       0       0       0       0       1 #> 439      0       0       0       0       0       0       0       0       0 #> 440      0       0       0       0       0       0       0       0       0 #> 441      0       0       0       0       0       0       0       0       0 #> 442      0       0       0       0       0       0       0       0       0 #> 443      0       0       0       0       0       0       0       0       0 #> 444      0       0       0       0       0       0       0       0       0 #> 445      0       0       0       0       0       0       0       0       0 #> 446      0       0       0       0       0       0       0       0       0 #> 447      0       0       0       0       0       0       0       0       0 #> 448      0       0       0       0       0       0       0       0       0 #> 449      0       0       0       0       0       0       0       0       0 #> 450      1       0       0       0       0       0       0       0       0 #> 451      0       1       0       0       0       0       0       0       0 #> 452      0       0       1       0       0       0       0       0       0 #> 453      0       0       0       1       0       0       0       0       0 #> 454      0       0       0       0       1       0       0       0       0 #> 455      0       0       0       0       0       1       0       0       0 #> 456      0       0       0       0       0       0       1       0       0 #> 457      0       0       0       0       0       0       0       1       0 #> 458      0       0       0       0       0       0       0       0       1 #> 459      0       0       0       0       0       0       0       0       0 #> 460      0       0       0       0       0       0       0       0       0 #> 461      0       0       0       0       0       0       0       0       0 #> 462      0       0       0       0       0       0       0       0       0 #> 463      0       0       0       0       0       0       0       0       0 #> 464      0       0       0       0       0       0       0       0       0 #> 465      0       0       0       0       0       0       0       0       0 #> 466      0       0       0       0       0       0       0       0       0 #> 467      0       0       0       0       0       0       0       0       0 #> 468      0       0       0       0       0       0       0       0       0 #> 469      0       0       0       0       0       0       0       0       0 #> 470      1       0       0       0       0       0       0       0       0 #> 471      0       1       0       0       0       0       0       0       0 #> 472      0       0       1       0       0       0       0       0       0 #> 473      0       0       0       1       0       0       0       0       0 #> 474      0       0       0       0       1       0       0       0       0 #> 475      0       0       0       0       0       1       0       0       0 #> 476      0       0       0       0       0       0       1       0       0 #> 477      0       0       0       0       0       0       0       1       0 #> 478      0       0       0       0       0       0       0       0       1 #> 479      0       0       0       0       0       0       0       0       0 #> 480      0       0       0       0       0       0       0       0       0 #> 481      0       0       0       0       0       0       0       0       0 #> 482      0       0       0       0       0       0       0       0       0 #> 483      0       0       0       0       0       0       0       0       0 #> 484      0       0       0       0       0       0       0       0       0 #> 485      0       0       0       0       0       0       0       0       0 #> 486      0       0       0       0       0       0       0       0       0 #> 487      0       0       0       0       0       0       0       0       0 #> 488      0       0       0       0       0       0       0       0       0 #> 489      0       0       0       0       0       0       0       0       0 #> 490      1       0       0       0       0       0       0       0       0 #> 491      0       1       0       0       0       0       0       0       0 #> 492      0       0       1       0       0       0       0       0       0 #> 493      0       0       0       1       0       0       0       0       0 #> 494      0       0       0       0       1       0       0       0       0 #> 495      0       0       0       0       0       1       0       0       0 #> 496      0       0       0       0       0       0       1       0       0 #> 497      0       0       0       0       0       0       0       1       0 #> 498      0       0       0       0       0       0       0       0       1 #> 499      0       0       0       0       0       0       0       0       0 #> 500      0       0       0       0       0       0       0       0       0 #> 501      0       0       0       0       0       0       0       0       0 #> 502      0       0       0       0       0       0       0       0       0 #> 503      0       0       0       0       0       0       0       0       0 #> 504      0       0       0       0       0       0       0       0       0 #> 505      0       0       0       0       0       0       0       0       0 #> 506      0       0       0       0       0       0       0       0       0 #> 507      0       0       0       0       0       0       0       0       0 #> 508      0       0       0       0       0       0       0       0       0 #> 509      0       0       0       0       0       0       0       0       0 #> 510      1       0       0       0       0       0       0       0       0 #> 511      0       1       0       0       0       0       0       0       0 #> 512      0       0       1       0       0       0       0       0       0 #> 513      0       0       0       1       0       0       0       0       0 #> 514      0       0       0       0       1       0       0       0       0 #> 515      0       0       0       0       0       1       0       0       0 #> 516      0       0       0       0       0       0       1       0       0 #> 517      0       0       0       0       0       0       0       1       0 #> 518      0       0       0       0       0       0       0       0       1 #> 519      0       0       0       0       0       0       0       0       0 #> 520      0       0       0       0       0       0       0       0       0 #> 521      0       0       0       0       0       0       0       0       0 #> 522      0       0       0       0       0       0       0       0       0 #> 523      0       0       0       0       0       0       0       0       0 #> 524      0       0       0       0       0       0       0       0       0 #> 525      0       0       0       0       0       0       0       0       0 #> 526      0       0       0       0       0       0       0       0       0 #> 527      0       0       0       0       0       0       0       0       0 #> 528      0       0       0       0       0       0       0       0       0 #> 529      0       0       0       0       0       0       0       0       0 #> 530      1       0       0       0       0       0       0       0       0 #> 531      0       1       0       0       0       0       0       0       0 #> 532      0       0       1       0       0       0       0       0       0 #> 533      0       0       0       1       0       0       0       0       0 #> 534      0       0       0       0       1       0       0       0       0 #> 535      0       0       0       0       0       1       0       0       0 #> 536      0       0       0       0       0       0       1       0       0 #> 537      0       0       0       0       0       0       0       1       0 #> 538      0       0       0       0       0       0       0       0       1 #> 539      0       0       0       0       0       0       0       0       0 #> 540      0       0       0       0       0       0       0       0       0 #> 541      0       0       0       0       0       0       0       0       0 #> 542      0       0       0       0       0       0       0       0       0 #> 543      0       0       0       0       0       0       0       0       0 #> 544      0       0       0       0       0       0       0       0       0 #> 545      0       0       0       0       0       0       0       0       0 #> 546      0       0       0       0       0       0       0       0       0 #> 547      0       0       0       0       0       0       0       0       0 #> 548      0       0       0       0       0       0       0       0       0 #> 549      0       0       0       0       0       0       0       0       0 #> 550      1       0       0       0       0       0       0       0       0 #> 551      0       1       0       0       0       0       0       0       0 #> 552      0       0       1       0       0       0       0       0       0 #> 553      0       0       0       1       0       0       0       0       0 #> 554      0       0       0       0       1       0       0       0       0 #> 555      0       0       0       0       0       1       0       0       0 #> 556      0       0       0       0       0       0       1       0       0 #> 557      0       0       0       0       0       0       0       1       0 #> 558      0       0       0       0       0       0       0       0       1 #> 559      0       0       0       0       0       0       0       0       0 #> 560      0       0       0       0       0       0       0       0       0 #> 561      0       0       0       0       0       0       0       0       0 #> 562      0       0       0       0       0       0       0       0       0 #> 563      0       0       0       0       0       0       0       0       0 #> 564      0       0       0       0       0       0       0       0       0 #> 565      0       0       0       0       0       0       0       0       0 #> 566      0       0       0       0       0       0       0       0       0 #> 567      0       0       0       0       0       0       0       0       0 #> 568      0       0       0       0       0       0       0       0       0 #> 569      0       0       0       0       0       0       0       0       0 #> 570      1       0       0       0       0       0       0       0       0 #> 571      0       1       0       0       0       0       0       0       0 #> 572      0       0       1       0       0       0       0       0       0 #> 573      0       0       0       1       0       0       0       0       0 #> 574      0       0       0       0       1       0       0       0       0 #> 575      0       0       0       0       0       1       0       0       0 #> 576      0       0       0       0       0       0       1       0       0 #> 577      0       0       0       0       0       0       0       1       0 #> 578      0       0       0       0       0       0       0       0       1 #> 579      0       0       0       0       0       0       0       0       0 #> 580      0       0       0       0       0       0       0       0       0 #> 581      0       0       0       0       0       0       0       0       0 #> 582      0       0       0       0       0       0       0       0       0 #> 583      0       0       0       0       0       0       0       0       0 #> 584      0       0       0       0       0       0       0       0       0 #> 585      0       0       0       0       0       0       0       0       0 #> 586      0       0       0       0       0       0       0       0       0 #> 587      0       0       0       0       0       0       0       0       0 #> 588      0       0       0       0       0       0       0       0       0 #> 589      0       0       0       0       0       0       0       0       0 #> 590      1       0       0       0       0       0       0       0       0 #> 591      0       1       0       0       0       0       0       0       0 #> 592      0       0       1       0       0       0       0       0       0 #> 593      0       0       0       1       0       0       0       0       0 #> 594      0       0       0       0       1       0       0       0       0 #> 595      0       0       0       0       0       1       0       0       0 #> 596      0       0       0       0       0       0       1       0       0 #> 597      0       0       0       0       0       0       0       1       0 #> 598      0       0       0       0       0       0       0       0       1 #> 599      0       0       0       0       0       0       0       0       0 #> 600      0       0       0       0       0       0       0       0       0 #> 601      0       0       0       0       0       0       0       0       0 #> 602      0       0       0       0       0       0       0       0       0 #> 603      0       0       0       0       0       0       0       0       0 #> 604      0       0       0       0       0       0       0       0       0 #> 605      0       0       0       0       0       0       0       0       0 #> 606      0       0       0       0       0       0       0       0       0 #> 607      0       0       0       0       0       0       0       0       0 #> 608      0       0       0       0       0       0       0       0       0 #> 609      0       0       0       0       0       0       0       0       0 #> 610      1       0       0       0       0       0       0       0       0 #> 611      0       1       0       0       0       0       0       0       0 #> 612      0       0       1       0       0       0       0       0       0 #> 613      0       0       0       1       0       0       0       0       0 #> 614      0       0       0       0       1       0       0       0       0 #> 615      0       0       0       0       0       1       0       0       0 #> 616      0       0       0       0       0       0       1       0       0 #> 617      0       0       0       0       0       0       0       1       0 #> 618      0       0       0       0       0       0       0       0       1 #> 619      0       0       0       0       0       0       0       0       0 #> 620      0       0       0       0       0       0       0       0       0 #> 621      0       0       0       0       0       0       0       0       0 #> 622      0       0       0       0       0       0       0       0       0 #> 623      0       0       0       0       0       0       0       0       0 #> 624      0       0       0       0       0       0       0       0       0 #> 625      0       0       0       0       0       0       0       0       0 #> 626      0       0       0       0       0       0       0       0       0 #> 627      0       0       0       0       0       0       0       0       0 #> 628      0       0       0       0       0       0       0       0       0 #> 629      0       0       0       0       0       0       0       0       0 #> 630      1       0       0       0       0       0       0       0       0 #> 631      0       1       0       0       0       0       0       0       0 #> 632      0       0       1       0       0       0       0       0       0 #> 633      0       0       0       1       0       0       0       0       0 #> 634      0       0       0       0       1       0       0       0       0 #> 635      0       0       0       0       0       1       0       0       0 #> 636      0       0       0       0       0       0       1       0       0 #> 637      0       0       0       0       0       0       0       1       0 #> 638      0       0       0       0       0       0       0       0       1 #> 639      0       0       0       0       0       0       0       0       0 #> 640      0       0       0       0       0       0       0       0       0 #> 641      0       0       0       0       0       0       0       0       0 #> 642      0       0       0       0       0       0       0       0       0 #> 643      0       0       0       0       0       0       0       0       0 #> 644      0       0       0       0       0       0       0       0       0 #> 645      0       0       0       0       0       0       0       0       0 #> 646      0       0       0       0       0       0       0       0       0 #> 647      0       0       0       0       0       0       0       0       0 #> 648      0       0       0       0       0       0       0       0       0 #> 649      0       0       0       0       0       0       0       0       0 #> 650      1       0       0       0       0       0       0       0       0 #> 651      0       1       0       0       0       0       0       0       0 #> 652      0       0       1       0       0       0       0       0       0 #> 653      0       0       0       1       0       0       0       0       0 #> 654      0       0       0       0       1       0       0       0       0 #> 655      0       0       0       0       0       1       0       0       0 #> 656      0       0       0       0       0       0       1       0       0 #> 657      0       0       0       0       0       0       0       1       0 #> 658      0       0       0       0       0       0       0       0       1 #> 659      0       0       0       0       0       0       0       0       0 #> 660      0       0       0       0       0       0       0       0       0 #> 661      0       0       0       0       0       0       0       0       0 #> 662      0       0       0       0       0       0       0       0       0 #> 663      0       0       0       0       0       0       0       0       0 #> 664      0       0       0       0       0       0       0       0       0 #> 665      0       0       0       0       0       0       0       0       0 #> 666      0       0       0       0       0       0       0       0       0 #> 667      0       0       0       0       0       0       0       0       0 #> 668      0       0       0       0       0       0       0       0       0 #> 669      0       0       0       0       0       0       0       0       0 #> 670      1       0       0       0       0       0       0       0       0 #> 671      0       1       0       0       0       0       0       0       0 #> 672      0       0       1       0       0       0       0       0       0 #> 673      0       0       0       1       0       0       0       0       0 #> 674      0       0       0       0       1       0       0       0       0 #> 675      0       0       0       0       0       1       0       0       0 #> 676      0       0       0       0       0       0       1       0       0 #> 677      0       0       0       0       0       0       0       1       0 #> 678      0       0       0       0       0       0       0       0       1 #> 679      0       0       0       0       0       0       0       0       0 #> 680      0       0       0       0       0       0       0       0       0 #> 681      0       0       0       0       0       0       0       0       0 #> 682      0       0       0       0       0       0       0       0       0 #> 683      0       0       0       0       0       0       0       0       0 #> 684      0       0       0       0       0       0       0       0       0 #> 685      0       0       0       0       0       0       0       0       0 #> 686      0       0       0       0       0       0       0       0       0 #> 687      0       0       0       0       0       0       0       0       0 #> 688      0       0       0       0       0       0       0       0       0 #> 689      0       0       0       0       0       0       0       0       0 #> 690      1       0       0       0       0       0       0       0       0 #> 691      0       1       0       0       0       0       0       0       0 #> 692      0       0       1       0       0       0       0       0       0 #> 693      0       0       0       1       0       0       0       0       0 #> 694      0       0       0       0       1       0       0       0       0 #> 695      0       0       0       0       0       1       0       0       0 #> 696      0       0       0       0       0       0       1       0       0 #> 697      0       0       0       0       0       0       0       1       0 #> 698      0       0       0       0       0       0       0       0       1 #> 699      0       0       0       0       0       0       0       0       0 #> 700      0       0       0       0       0       0       0       0       0 #> 701      0       0       0       0       0       0       0       0       0 #> 702      0       0       0       0       0       0       0       0       0 #> 703      0       0       0       0       0       0       0       0       0 #> 704      0       0       0       0       0       0       0       0       0 #> 705      0       0       0       0       0       0       0       0       0 #> 706      0       0       0       0       0       0       0       0       0 #> 707      0       0       0       0       0       0       0       0       0 #> 708      0       0       0       0       0       0       0       0       0 #> 709      0       0       0       0       0       0       0       0       0 #> 710      1       0       0       0       0       0       0       0       0 #> 711      0       1       0       0       0       0       0       0       0 #> 712      0       0       1       0       0       0       0       0       0 #> 713      0       0       0       1       0       0       0       0       0 #> 714      0       0       0       0       1       0       0       0       0 #> 715      0       0       0       0       0       1       0       0       0 #> 716      0       0       0       0       0       0       1       0       0 #> 717      0       0       0       0       0       0       0       1       0 #> 718      0       0       0       0       0       0       0       0       1 #> 719      0       0       0       0       0       0       0       0       0 #> 720      0       0       0       0       0       0       0       0       0 #> 721      0       0       0       0       0       0       0       0       0 #> 722      0       0       0       0       0       0       0       0       0 #> 723      0       0       0       0       0       0       0       0       0 #> 724      0       0       0       0       0       0       0       0       0 #> 725      0       0       0       0       0       0       0       0       0 #> 726      0       0       0       0       0       0       0       0       0 #> 727      0       0       0       0       0       0       0       0       0 #> 728      0       0       0       0       0       0       0       0       0 #> 729      0       0       0       0       0       0       0       0       0 #> 730      1       0       0       0       0       0       0       0       0 #> 731      0       1       0       0       0       0       0       0       0 #> 732      0       0       1       0       0       0       0       0       0 #> 733      0       0       0       1       0       0       0       0       0 #> 734      0       0       0       0       1       0       0       0       0 #> 735      0       0       0       0       0       1       0       0       0 #> 736      0       0       0       0       0       0       1       0       0 #> 737      0       0       0       0       0       0       0       1       0 #> 738      0       0       0       0       0       0       0       0       1 #> 739      0       0       0       0       0       0       0       0       0 #> 740      0       0       0       0       0       0       0       0       0 #> 741      0       0       0       0       0       0       0       0       0 #> 742      0       0       0       0       0       0       0       0       0 #> 743      0       0       0       0       0       0       0       0       0 #> 744      0       0       0       0       0       0       0       0       0 #> 745      0       0       0       0       0       0       0       0       0 #> 746      0       0       0       0       0       0       0       0       0 #> 747      0       0       0       0       0       0       0       0       0 #> 748      0       0       0       0       0       0       0       0       0 #> 749      0       0       0       0       0       0       0       0       0 #> 750      1       0       0       0       0       0       0       0       0 #> 751      0       1       0       0       0       0       0       0       0 #> 752      0       0       1       0       0       0       0       0       0 #> 753      0       0       0       1       0       0       0       0       0 #> 754      0       0       0       0       1       0       0       0       0 #> 755      0       0       0       0       0       1       0       0       0 #> 756      0       0       0       0       0       0       1       0       0 #> 757      0       0       0       0       0       0       0       1       0 #> 758      0       0       0       0       0       0       0       0       1 #> 759      0       0       0       0       0       0       0       0       0 #> 760      0       0       0       0       0       0       0       0       0 #> 761      0       0       0       0       0       0       0       0       0 #> 762      0       0       0       0       0       0       0       0       0 #> 763      0       0       0       0       0       0       0       0       0 #> 764      0       0       0       0       0       0       0       0       0 #> 765      0       0       0       0       0       0       0       0       0 #> 766      0       0       0       0       0       0       0       0       0 #> 767      0       0       0       0       0       0       0       0       0 #> 768      0       0       0       0       0       0       0       0       0 #> 769      0       0       0       0       0       0       0       0       0 #> 770      1       0       0       0       0       0       0       0       0 #> 771      0       1       0       0       0       0       0       0       0 #> 772      0       0       1       0       0       0       0       0       0 #> 773      0       0       0       1       0       0       0       0       0 #> 774      0       0       0       0       1       0       0       0       0 #> 775      0       0       0       0       0       1       0       0       0 #> 776      0       0       0       0       0       0       1       0       0 #> 777      0       0       0       0       0       0       0       1       0 #> 778      0       0       0       0       0       0       0       0       1 #> 779      0       0       0       0       0       0       0       0       0 #> 780      0       0       0       0       0       0       0       0       0 #> 781      0       0       0       0       0       0       0       0       0 #> 782      0       0       0       0       0       0       0       0       0 #> 783      0       0       0       0       0       0       0       0       0 #> 784      0       0       0       0       0       0       0       0       0 #> 785      0       0       0       0       0       0       0       0       0 #> 786      0       0       0       0       0       0       0       0       0 #> 787      0       0       0       0       0       0       0       0       0 #> 788      0       0       0       0       0       0       0       0       0 #> 789      0       0       0       0       0       0       0       0       0 #> 790      1       0       0       0       0       0       0       0       0 #> 791      0       1       0       0       0       0       0       0       0 #> 792      0       0       1       0       0       0       0       0       0 #> 793      0       0       0       1       0       0       0       0       0 #> 794      0       0       0       0       1       0       0       0       0 #> 795      0       0       0       0       0       1       0       0       0 #> 796      0       0       0       0       0       0       1       0       0 #> 797      0       0       0       0       0       0       0       1       0 #> 798      0       0       0       0       0       0       0       0       1 #> 799      0       0       0       0       0       0       0       0       0 #> 800      0       0       0       0       0       0       0       0       0 #> 801      0       0       0       0       0       0       0       0       0 #> 802      0       0       0       0       0       0       0       0       0 #> 803      0       0       0       0       0       0       0       0       0 #> 804      0       0       0       0       0       0       0       0       0 #> 805      0       0       0       0       0       0       0       0       0 #> 806      0       0       0       0       0       0       0       0       0 #> 807      0       0       0       0       0       0       0       0       0 #> 808      0       0       0       0       0       0       0       0       0 #> 809      0       0       0       0       0       0       0       0       0 #> 810      1       0       0       0       0       0       0       0       0 #> 811      0       1       0       0       0       0       0       0       0 #> 812      0       0       1       0       0       0       0       0       0 #> 813      0       0       0       1       0       0       0       0       0 #> 814      0       0       0       0       1       0       0       0       0 #> 815      0       0       0       0       0       1       0       0       0 #> 816      0       0       0       0       0       0       1       0       0 #> 817      0       0       0       0       0       0       0       1       0 #> 818      0       0       0       0       0       0       0       0       1 #> 819      0       0       0       0       0       0       0       0       0 #> 820      0       0       0       0       0       0       0       0       0 #>     delay18 delay19 #> 1         0       0 #> 2         0       0 #> 3         0       0 #> 4         0       0 #> 5         0       0 #> 6         0       0 #> 7         0       0 #> 8         0       0 #> 9         0       0 #> 10        0       0 #> 11        0       0 #> 12        0       0 #> 13        0       0 #> 14        0       0 #> 15        0       0 #> 16        0       0 #> 17        0       0 #> 18        0       0 #> 19        1       0 #> 20        0       1 #> 21        0       0 #> 22        0       0 #> 23        0       0 #> 24        0       0 #> 25        0       0 #> 26        0       0 #> 27        0       0 #> 28        0       0 #> 29        0       0 #> 30        0       0 #> 31        0       0 #> 32        0       0 #> 33        0       0 #> 34        0       0 #> 35        0       0 #> 36        0       0 #> 37        0       0 #> 38        0       0 #> 39        1       0 #> 40        0       1 #> 41        0       0 #> 42        0       0 #> 43        0       0 #> 44        0       0 #> 45        0       0 #> 46        0       0 #> 47        0       0 #> 48        0       0 #> 49        0       0 #> 50        0       0 #> 51        0       0 #> 52        0       0 #> 53        0       0 #> 54        0       0 #> 55        0       0 #> 56        0       0 #> 57        0       0 #> 58        0       0 #> 59        1       0 #> 60        0       1 #> 61        0       0 #> 62        0       0 #> 63        0       0 #> 64        0       0 #> 65        0       0 #> 66        0       0 #> 67        0       0 #> 68        0       0 #> 69        0       0 #> 70        0       0 #> 71        0       0 #> 72        0       0 #> 73        0       0 #> 74        0       0 #> 75        0       0 #> 76        0       0 #> 77        0       0 #> 78        0       0 #> 79        1       0 #> 80        0       1 #> 81        0       0 #> 82        0       0 #> 83        0       0 #> 84        0       0 #> 85        0       0 #> 86        0       0 #> 87        0       0 #> 88        0       0 #> 89        0       0 #> 90        0       0 #> 91        0       0 #> 92        0       0 #> 93        0       0 #> 94        0       0 #> 95        0       0 #> 96        0       0 #> 97        0       0 #> 98        0       0 #> 99        1       0 #> 100       0       1 #> 101       0       0 #> 102       0       0 #> 103       0       0 #> 104       0       0 #> 105       0       0 #> 106       0       0 #> 107       0       0 #> 108       0       0 #> 109       0       0 #> 110       0       0 #> 111       0       0 #> 112       0       0 #> 113       0       0 #> 114       0       0 #> 115       0       0 #> 116       0       0 #> 117       0       0 #> 118       0       0 #> 119       1       0 #> 120       0       1 #> 121       0       0 #> 122       0       0 #> 123       0       0 #> 124       0       0 #> 125       0       0 #> 126       0       0 #> 127       0       0 #> 128       0       0 #> 129       0       0 #> 130       0       0 #> 131       0       0 #> 132       0       0 #> 133       0       0 #> 134       0       0 #> 135       0       0 #> 136       0       0 #> 137       0       0 #> 138       0       0 #> 139       1       0 #> 140       0       1 #> 141       0       0 #> 142       0       0 #> 143       0       0 #> 144       0       0 #> 145       0       0 #> 146       0       0 #> 147       0       0 #> 148       0       0 #> 149       0       0 #> 150       0       0 #> 151       0       0 #> 152       0       0 #> 153       0       0 #> 154       0       0 #> 155       0       0 #> 156       0       0 #> 157       0       0 #> 158       0       0 #> 159       1       0 #> 160       0       1 #> 161       0       0 #> 162       0       0 #> 163       0       0 #> 164       0       0 #> 165       0       0 #> 166       0       0 #> 167       0       0 #> 168       0       0 #> 169       0       0 #> 170       0       0 #> 171       0       0 #> 172       0       0 #> 173       0       0 #> 174       0       0 #> 175       0       0 #> 176       0       0 #> 177       0       0 #> 178       0       0 #> 179       1       0 #> 180       0       1 #> 181       0       0 #> 182       0       0 #> 183       0       0 #> 184       0       0 #> 185       0       0 #> 186       0       0 #> 187       0       0 #> 188       0       0 #> 189       0       0 #> 190       0       0 #> 191       0       0 #> 192       0       0 #> 193       0       0 #> 194       0       0 #> 195       0       0 #> 196       0       0 #> 197       0       0 #> 198       0       0 #> 199       1       0 #> 200       0       1 #> 201       0       0 #> 202       0       0 #> 203       0       0 #> 204       0       0 #> 205       0       0 #> 206       0       0 #> 207       0       0 #> 208       0       0 #> 209       0       0 #> 210       0       0 #> 211       0       0 #> 212       0       0 #> 213       0       0 #> 214       0       0 #> 215       0       0 #> 216       0       0 #> 217       0       0 #> 218       0       0 #> 219       1       0 #> 220       0       1 #> 221       0       0 #> 222       0       0 #> 223       0       0 #> 224       0       0 #> 225       0       0 #> 226       0       0 #> 227       0       0 #> 228       0       0 #> 229       0       0 #> 230       0       0 #> 231       0       0 #> 232       0       0 #> 233       0       0 #> 234       0       0 #> 235       0       0 #> 236       0       0 #> 237       0       0 #> 238       0       0 #> 239       1       0 #> 240       0       1 #> 241       0       0 #> 242       0       0 #> 243       0       0 #> 244       0       0 #> 245       0       0 #> 246       0       0 #> 247       0       0 #> 248       0       0 #> 249       0       0 #> 250       0       0 #> 251       0       0 #> 252       0       0 #> 253       0       0 #> 254       0       0 #> 255       0       0 #> 256       0       0 #> 257       0       0 #> 258       0       0 #> 259       1       0 #> 260       0       1 #> 261       0       0 #> 262       0       0 #> 263       0       0 #> 264       0       0 #> 265       0       0 #> 266       0       0 #> 267       0       0 #> 268       0       0 #> 269       0       0 #> 270       0       0 #> 271       0       0 #> 272       0       0 #> 273       0       0 #> 274       0       0 #> 275       0       0 #> 276       0       0 #> 277       0       0 #> 278       0       0 #> 279       1       0 #> 280       0       1 #> 281       0       0 #> 282       0       0 #> 283       0       0 #> 284       0       0 #> 285       0       0 #> 286       0       0 #> 287       0       0 #> 288       0       0 #> 289       0       0 #> 290       0       0 #> 291       0       0 #> 292       0       0 #> 293       0       0 #> 294       0       0 #> 295       0       0 #> 296       0       0 #> 297       0       0 #> 298       0       0 #> 299       1       0 #> 300       0       1 #> 301       0       0 #> 302       0       0 #> 303       0       0 #> 304       0       0 #> 305       0       0 #> 306       0       0 #> 307       0       0 #> 308       0       0 #> 309       0       0 #> 310       0       0 #> 311       0       0 #> 312       0       0 #> 313       0       0 #> 314       0       0 #> 315       0       0 #> 316       0       0 #> 317       0       0 #> 318       0       0 #> 319       1       0 #> 320       0       1 #> 321       0       0 #> 322       0       0 #> 323       0       0 #> 324       0       0 #> 325       0       0 #> 326       0       0 #> 327       0       0 #> 328       0       0 #> 329       0       0 #> 330       0       0 #> 331       0       0 #> 332       0       0 #> 333       0       0 #> 334       0       0 #> 335       0       0 #> 336       0       0 #> 337       0       0 #> 338       0       0 #> 339       1       0 #> 340       0       1 #> 341       0       0 #> 342       0       0 #> 343       0       0 #> 344       0       0 #> 345       0       0 #> 346       0       0 #> 347       0       0 #> 348       0       0 #> 349       0       0 #> 350       0       0 #> 351       0       0 #> 352       0       0 #> 353       0       0 #> 354       0       0 #> 355       0       0 #> 356       0       0 #> 357       0       0 #> 358       0       0 #> 359       1       0 #> 360       0       1 #> 361       0       0 #> 362       0       0 #> 363       0       0 #> 364       0       0 #> 365       0       0 #> 366       0       0 #> 367       0       0 #> 368       0       0 #> 369       0       0 #> 370       0       0 #> 371       0       0 #> 372       0       0 #> 373       0       0 #> 374       0       0 #> 375       0       0 #> 376       0       0 #> 377       0       0 #> 378       0       0 #> 379       1       0 #> 380       0       1 #> 381       0       0 #> 382       0       0 #> 383       0       0 #> 384       0       0 #> 385       0       0 #> 386       0       0 #> 387       0       0 #> 388       0       0 #> 389       0       0 #> 390       0       0 #> 391       0       0 #> 392       0       0 #> 393       0       0 #> 394       0       0 #> 395       0       0 #> 396       0       0 #> 397       0       0 #> 398       0       0 #> 399       1       0 #> 400       0       1 #> 401       0       0 #> 402       0       0 #> 403       0       0 #> 404       0       0 #> 405       0       0 #> 406       0       0 #> 407       0       0 #> 408       0       0 #> 409       0       0 #> 410       0       0 #> 411       0       0 #> 412       0       0 #> 413       0       0 #> 414       0       0 #> 415       0       0 #> 416       0       0 #> 417       0       0 #> 418       0       0 #> 419       1       0 #> 420       0       1 #> 421       0       0 #> 422       0       0 #> 423       0       0 #> 424       0       0 #> 425       0       0 #> 426       0       0 #> 427       0       0 #> 428       0       0 #> 429       0       0 #> 430       0       0 #> 431       0       0 #> 432       0       0 #> 433       0       0 #> 434       0       0 #> 435       0       0 #> 436       0       0 #> 437       0       0 #> 438       0       0 #> 439       1       0 #> 440       0       1 #> 441       0       0 #> 442       0       0 #> 443       0       0 #> 444       0       0 #> 445       0       0 #> 446       0       0 #> 447       0       0 #> 448       0       0 #> 449       0       0 #> 450       0       0 #> 451       0       0 #> 452       0       0 #> 453       0       0 #> 454       0       0 #> 455       0       0 #> 456       0       0 #> 457       0       0 #> 458       0       0 #> 459       1       0 #> 460       0       1 #> 461       0       0 #> 462       0       0 #> 463       0       0 #> 464       0       0 #> 465       0       0 #> 466       0       0 #> 467       0       0 #> 468       0       0 #> 469       0       0 #> 470       0       0 #> 471       0       0 #> 472       0       0 #> 473       0       0 #> 474       0       0 #> 475       0       0 #> 476       0       0 #> 477       0       0 #> 478       0       0 #> 479       1       0 #> 480       0       1 #> 481       0       0 #> 482       0       0 #> 483       0       0 #> 484       0       0 #> 485       0       0 #> 486       0       0 #> 487       0       0 #> 488       0       0 #> 489       0       0 #> 490       0       0 #> 491       0       0 #> 492       0       0 #> 493       0       0 #> 494       0       0 #> 495       0       0 #> 496       0       0 #> 497       0       0 #> 498       0       0 #> 499       1       0 #> 500       0       1 #> 501       0       0 #> 502       0       0 #> 503       0       0 #> 504       0       0 #> 505       0       0 #> 506       0       0 #> 507       0       0 #> 508       0       0 #> 509       0       0 #> 510       0       0 #> 511       0       0 #> 512       0       0 #> 513       0       0 #> 514       0       0 #> 515       0       0 #> 516       0       0 #> 517       0       0 #> 518       0       0 #> 519       1       0 #> 520       0       1 #> 521       0       0 #> 522       0       0 #> 523       0       0 #> 524       0       0 #> 525       0       0 #> 526       0       0 #> 527       0       0 #> 528       0       0 #> 529       0       0 #> 530       0       0 #> 531       0       0 #> 532       0       0 #> 533       0       0 #> 534       0       0 #> 535       0       0 #> 536       0       0 #> 537       0       0 #> 538       0       0 #> 539       1       0 #> 540       0       1 #> 541       0       0 #> 542       0       0 #> 543       0       0 #> 544       0       0 #> 545       0       0 #> 546       0       0 #> 547       0       0 #> 548       0       0 #> 549       0       0 #> 550       0       0 #> 551       0       0 #> 552       0       0 #> 553       0       0 #> 554       0       0 #> 555       0       0 #> 556       0       0 #> 557       0       0 #> 558       0       0 #> 559       1       0 #> 560       0       1 #> 561       0       0 #> 562       0       0 #> 563       0       0 #> 564       0       0 #> 565       0       0 #> 566       0       0 #> 567       0       0 #> 568       0       0 #> 569       0       0 #> 570       0       0 #> 571       0       0 #> 572       0       0 #> 573       0       0 #> 574       0       0 #> 575       0       0 #> 576       0       0 #> 577       0       0 #> 578       0       0 #> 579       1       0 #> 580       0       1 #> 581       0       0 #> 582       0       0 #> 583       0       0 #> 584       0       0 #> 585       0       0 #> 586       0       0 #> 587       0       0 #> 588       0       0 #> 589       0       0 #> 590       0       0 #> 591       0       0 #> 592       0       0 #> 593       0       0 #> 594       0       0 #> 595       0       0 #> 596       0       0 #> 597       0       0 #> 598       0       0 #> 599       1       0 #> 600       0       1 #> 601       0       0 #> 602       0       0 #> 603       0       0 #> 604       0       0 #> 605       0       0 #> 606       0       0 #> 607       0       0 #> 608       0       0 #> 609       0       0 #> 610       0       0 #> 611       0       0 #> 612       0       0 #> 613       0       0 #> 614       0       0 #> 615       0       0 #> 616       0       0 #> 617       0       0 #> 618       0       0 #> 619       1       0 #> 620       0       1 #> 621       0       0 #> 622       0       0 #> 623       0       0 #> 624       0       0 #> 625       0       0 #> 626       0       0 #> 627       0       0 #> 628       0       0 #> 629       0       0 #> 630       0       0 #> 631       0       0 #> 632       0       0 #> 633       0       0 #> 634       0       0 #> 635       0       0 #> 636       0       0 #> 637       0       0 #> 638       0       0 #> 639       1       0 #> 640       0       1 #> 641       0       0 #> 642       0       0 #> 643       0       0 #> 644       0       0 #> 645       0       0 #> 646       0       0 #> 647       0       0 #> 648       0       0 #> 649       0       0 #> 650       0       0 #> 651       0       0 #> 652       0       0 #> 653       0       0 #> 654       0       0 #> 655       0       0 #> 656       0       0 #> 657       0       0 #> 658       0       0 #> 659       1       0 #> 660       0       1 #> 661       0       0 #> 662       0       0 #> 663       0       0 #> 664       0       0 #> 665       0       0 #> 666       0       0 #> 667       0       0 #> 668       0       0 #> 669       0       0 #> 670       0       0 #> 671       0       0 #> 672       0       0 #> 673       0       0 #> 674       0       0 #> 675       0       0 #> 676       0       0 #> 677       0       0 #> 678       0       0 #> 679       1       0 #> 680       0       1 #> 681       0       0 #> 682       0       0 #> 683       0       0 #> 684       0       0 #> 685       0       0 #> 686       0       0 #> 687       0       0 #> 688       0       0 #> 689       0       0 #> 690       0       0 #> 691       0       0 #> 692       0       0 #> 693       0       0 #> 694       0       0 #> 695       0       0 #> 696       0       0 #> 697       0       0 #> 698       0       0 #> 699       1       0 #> 700       0       1 #> 701       0       0 #> 702       0       0 #> 703       0       0 #> 704       0       0 #> 705       0       0 #> 706       0       0 #> 707       0       0 #> 708       0       0 #> 709       0       0 #> 710       0       0 #> 711       0       0 #> 712       0       0 #> 713       0       0 #> 714       0       0 #> 715       0       0 #> 716       0       0 #> 717       0       0 #> 718       0       0 #> 719       1       0 #> 720       0       1 #> 721       0       0 #> 722       0       0 #> 723       0       0 #> 724       0       0 #> 725       0       0 #> 726       0       0 #> 727       0       0 #> 728       0       0 #> 729       0       0 #> 730       0       0 #> 731       0       0 #> 732       0       0 #> 733       0       0 #> 734       0       0 #> 735       0       0 #> 736       0       0 #> 737       0       0 #> 738       0       0 #> 739       1       0 #> 740       0       1 #> 741       0       0 #> 742       0       0 #> 743       0       0 #> 744       0       0 #> 745       0       0 #> 746       0       0 #> 747       0       0 #> 748       0       0 #> 749       0       0 #> 750       0       0 #> 751       0       0 #> 752       0       0 #> 753       0       0 #> 754       0       0 #> 755       0       0 #> 756       0       0 #> 757       0       0 #> 758       0       0 #> 759       1       0 #> 760       0       1 #> 761       0       0 #> 762       0       0 #> 763       0       0 #> 764       0       0 #> 765       0       0 #> 766       0       0 #> 767       0       0 #> 768       0       0 #> 769       0       0 #> 770       0       0 #> 771       0       0 #> 772       0       0 #> 773       0       0 #> 774       0       0 #> 775       0       0 #> 776       0       0 #> 777       0       0 #> 778       0       0 #> 779       1       0 #> 780       0       1 #> 781       0       0 #> 782       0       0 #> 783       0       0 #> 784       0       0 #> 785       0       0 #> 786       0       0 #> 787       0       0 #> 788       0       0 #> 789       0       0 #> 790       0       0 #> 791       0       0 #> 792       0       0 #> 793       0       0 #> 794       0       0 #> 795       0       0 #> 796       0       0 #> 797       0       0 #> 798       0       0 #> 799       1       0 #> 800       0       1 #> 801       0       0 #> 802       0       0 #> 803       0       0 #> 804       0       0 #> 805       0       0 #> 806       0       0 #> 807       0       0 #> 808       0       0 #> 809       0       0 #> 810       0       0 #> 811       0       0 #> 812       0       0 #> 813       0       0 #> 814       0       0 #> 815       0       0 #> 816       0       0 #> 817       0       0 #> 818       0       0 #> 819       1       0 #> 820       0       1 #> attr(,\"assign\") #>  [1] 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> attr(,\"contrasts\") #> attr(,\"contrasts\")$delay #>    0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #> 0  1 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0 #> 1  0 1 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0 #> 2  0 0 1 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0 #> 3  0 0 0 1 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0 #> 4  0 0 0 0 1 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0 #> 5  0 0 0 0 0 1 0 0 0 0  0  0  0  0  0  0  0  0  0  0 #> 6  0 0 0 0 0 0 1 0 0 0  0  0  0  0  0  0  0  0  0  0 #> 7  0 0 0 0 0 0 0 1 0 0  0  0  0  0  0  0  0  0  0  0 #> 8  0 0 0 0 0 0 0 0 1 0  0  0  0  0  0  0  0  0  0  0 #> 9  0 0 0 0 0 0 0 0 0 1  0  0  0  0  0  0  0  0  0  0 #> 10 0 0 0 0 0 0 0 0 0 0  1  0  0  0  0  0  0  0  0  0 #> 11 0 0 0 0 0 0 0 0 0 0  0  1  0  0  0  0  0  0  0  0 #> 12 0 0 0 0 0 0 0 0 0 0  0  0  1  0  0  0  0  0  0  0 #> 13 0 0 0 0 0 0 0 0 0 0  0  0  0  1  0  0  0  0  0  0 #> 14 0 0 0 0 0 0 0 0 0 0  0  0  0  0  1  0  0  0  0  0 #> 15 0 0 0 0 0 0 0 0 0 0  0  0  0  0  0  1  0  0  0  0 #> 16 0 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  1  0  0  0 #> 17 0 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  1  0  0 #> 18 0 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  1  0 #> 19 0 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  1 #>  #>  #> $data$refnp_fintercept #> [1] 1 #>  #> $data$refnp_fnrow #> [1] 820 #>  #> $data$refnp_findex #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 #> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 #> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 #> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 #> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 #> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 #> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 #> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 #> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 #> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 #> [271] 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 #> [289] 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 #> [307] 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 #> [325] 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 #> [343] 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 #> [361] 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 #> [379] 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 #> [397] 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 #> [415] 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 #> [433] 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 #> [451] 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 #> [469] 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 #> [487] 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 #> [505] 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 #> [523] 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 #> [541] 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 #> [559] 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 #> [577] 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 #> [595] 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 #> [613] 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 #> [631] 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 #> [649] 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 #> [667] 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 #> [685] 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 #> [703] 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 #> [721] 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 #> [739] 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 #> [757] 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 #> [775] 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 #> [793] 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 #> [811] 811 812 813 814 815 816 817 818 819 820 #>  #> $data$refnp_fnindex #> [1] 820 #>  #> $data$refnp_fncol #> [1] 20 #>  #> $data$refnp_rdesign #>    fixed delay #> 1      0     1 #> 2      0     1 #> 3      0     1 #> 4      0     1 #> 5      0     1 #> 6      0     1 #> 7      0     1 #> 8      0     1 #> 9      0     1 #> 10     0     1 #> 11     0     1 #> 12     0     1 #> 13     0     1 #> 14     0     1 #> 15     0     1 #> 16     0     1 #> 17     0     1 #> 18     0     1 #> 19     0     1 #> 20     0     1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $data$refnp_rncol #> [1] 1 #>  #> $data$model_refnp #> [1] 1 #>  #>  #> $priors #>             variable #>               <char> #> 1:     refp_mean_int #> 2:       refp_sd_int #> 3: refp_mean_beta_sd #> 4:   refp_sd_beta_sd #> 5:         refnp_int #> 6:     refnp_beta_sd #>                                                       description #>                                                            <char> #> 1:         Log mean intercept for parametric reference date delay #> 2: Log standard deviation for the parametric reference date delay #> 3:    Standard deviation of scaled pooled parametric mean effects #> 4:      Standard deviation of scaled pooled parametric sd effects #> 5:              Intercept for non-parametric reference date delay #> 6:     Standard deviation of scaled pooled non-parametric effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   1.0     1 #> 2: Zero truncated normal   0.5     1 #> 3: Zero truncated normal   0.0     1 #> 4: Zero truncated normal   0.0     1 #> 5:                Normal   0.0     1 #> 6: Zero truncated normal   0.0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(refp_mean_int = numeric(0), refp_sd_int = numeric(0),  #>             refp_mean_beta = numeric(0), refp_sd_beta = numeric(0),  #>             refp_mean_beta_sd = numeric(0), refp_sd_beta_sd = numeric(0),  #>             refnp_int = numeric(0), refnp_beta = numeric(0),  #>             refnp_beta_sd = numeric(0)) #>         if (data$model_refp > 0) { #>             init$refp_mean_int <- array(rnorm(1, priors$refp_mean_int[1],  #>                 priors$refp_mean_int[2]/10)) #>         } #>         if (data$model_refp > 1) { #>             init$refp_sd_int <- array(abs(rnorm(1, priors$refp_sd_int[1],  #>                 priors$refp_sd_int[2]/10))) #>         } #>         init$refp_mean <- rep(init$refp_mean_int, data$refp_fnrow) #>         init$refp_sd <- rep(init$refp_sd_int, data$refp_fnrow) #>         if (data$refp_fncol > 0) { #>             init$refp_mean_beta <- array(rnorm(data$refp_fncol,  #>                 0, 0.01)) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta <- array(rnorm(data$refp_fncol,  #>                   0, 0.01)) #>             } #>         } #>         if (data$refp_rncol > 0) { #>             init$refp_mean_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                 priors$refp_mean_beta_sd_p[1], priors$refp_mean_beta_sd_p[2]/10))) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                   priors$refp_sd_beta_sd_p[1], priors$refp_sd_beta_sd_p[2]/10))) #>             } #>         } #>         if (data$model_refnp > 0) { #>             if (data$refnp_fintercept > 0) { #>                 init$refnp_int <- array(rnorm(1, priors$refnp_int_p[1],  #>                   priors$refnp_int_p[2]/10)) #>             } #>             if (data$refnp_fncol > 0) { #>                 init$refnp_beta <- array(rnorm(data$refnp_fncol,  #>                   0, 0.01)) #>             } #>             if (data$refnp_rncol > 0) { #>                 init$refnp_beta_sd <- array(abs(rnorm(data$refnp_rncol,  #>                   priors$refnp_beta_sd_p[1], priors$refnp_beta_sd_p[2]/10))) #>             } #>         } #>         return(init) #>     } #>     return(fn) #> } #> <bytecode: 0x564e5fa54e20> #> <environment: 0x564e5f5615c0> #>   # Combined parametric and non-parametric model enw_reference(  parametric = ~ 1, non_parametric = ~ 0 + (1 | delay_cat),  data = enw_example(\"preprocessed\") ) #> $formula #> $formula$parametric #> [1] \"~1\" #>  #> $formula$non_parametric #> [1] \"~0 + (1 | delay_cat)\" #>  #>  #> $data #> $data$refp_fdesign #>   (Intercept) #> 1           1 #>  #> $data$refp_fintercept #> [1] 1 #>  #> $data$refp_fnrow #> [1] 1 #>  #> $data$refp_findex #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 1 #>  #> $data$refp_fnindex #> [1] 41 #>  #> $data$refp_fncol #> [1] 0 #>  #> $data$refp_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$refp_rncol #> [1] 0 #>  #> $data$model_refp #> [1] 2 #>  #> $data$refnp_fdesign #>     delay_cat[0,5) delay_cat[5,10) delay_cat[10,15) delay_cat[15,20) #> 1                1               0                0                0 #> 2                1               0                0                0 #> 3                1               0                0                0 #> 4                1               0                0                0 #> 5                1               0                0                0 #> 6                0               1                0                0 #> 7                0               1                0                0 #> 8                0               1                0                0 #> 9                0               1                0                0 #> 10               0               1                0                0 #> 11               0               0                1                0 #> 12               0               0                1                0 #> 13               0               0                1                0 #> 14               0               0                1                0 #> 15               0               0                1                0 #> 16               0               0                0                1 #> 17               0               0                0                1 #> 18               0               0                0                1 #> 19               0               0                0                1 #> 20               0               0                0                1 #> 21               1               0                0                0 #> 22               1               0                0                0 #> 23               1               0                0                0 #> 24               1               0                0                0 #> 25               1               0                0                0 #> 26               0               1                0                0 #> 27               0               1                0                0 #> 28               0               1                0                0 #> 29               0               1                0                0 #> 30               0               1                0                0 #> 31               0               0                1                0 #> 32               0               0                1                0 #> 33               0               0                1                0 #> 34               0               0                1                0 #> 35               0               0                1                0 #> 36               0               0                0                1 #> 37               0               0                0                1 #> 38               0               0                0                1 #> 39               0               0                0                1 #> 40               0               0                0                1 #> 41               1               0                0                0 #> 42               1               0                0                0 #> 43               1               0                0                0 #> 44               1               0                0                0 #> 45               1               0                0                0 #> 46               0               1                0                0 #> 47               0               1                0                0 #> 48               0               1                0                0 #> 49               0               1                0                0 #> 50               0               1                0                0 #> 51               0               0                1                0 #> 52               0               0                1                0 #> 53               0               0                1                0 #> 54               0               0                1                0 #> 55               0               0                1                0 #> 56               0               0                0                1 #> 57               0               0                0                1 #> 58               0               0                0                1 #> 59               0               0                0                1 #> 60               0               0                0                1 #> 61               1               0                0                0 #> 62               1               0                0                0 #> 63               1               0                0                0 #> 64               1               0                0                0 #> 65               1               0                0                0 #> 66               0               1                0                0 #> 67               0               1                0                0 #> 68               0               1                0                0 #> 69               0               1                0                0 #> 70               0               1                0                0 #> 71               0               0                1                0 #> 72               0               0                1                0 #> 73               0               0                1                0 #> 74               0               0                1                0 #> 75               0               0                1                0 #> 76               0               0                0                1 #> 77               0               0                0                1 #> 78               0               0                0                1 #> 79               0               0                0                1 #> 80               0               0                0                1 #> 81               1               0                0                0 #> 82               1               0                0                0 #> 83               1               0                0                0 #> 84               1               0                0                0 #> 85               1               0                0                0 #> 86               0               1                0                0 #> 87               0               1                0                0 #> 88               0               1                0                0 #> 89               0               1                0                0 #> 90               0               1                0                0 #> 91               0               0                1                0 #> 92               0               0                1                0 #> 93               0               0                1                0 #> 94               0               0                1                0 #> 95               0               0                1                0 #> 96               0               0                0                1 #> 97               0               0                0                1 #> 98               0               0                0                1 #> 99               0               0                0                1 #> 100              0               0                0                1 #> 101              1               0                0                0 #> 102              1               0                0                0 #> 103              1               0                0                0 #> 104              1               0                0                0 #> 105              1               0                0                0 #> 106              0               1                0                0 #> 107              0               1                0                0 #> 108              0               1                0                0 #> 109              0               1                0                0 #> 110              0               1                0                0 #> 111              0               0                1                0 #> 112              0               0                1                0 #> 113              0               0                1                0 #> 114              0               0                1                0 #> 115              0               0                1                0 #> 116              0               0                0                1 #> 117              0               0                0                1 #> 118              0               0                0                1 #> 119              0               0                0                1 #> 120              0               0                0                1 #> 121              1               0                0                0 #> 122              1               0                0                0 #> 123              1               0                0                0 #> 124              1               0                0                0 #> 125              1               0                0                0 #> 126              0               1                0                0 #> 127              0               1                0                0 #> 128              0               1                0                0 #> 129              0               1                0                0 #> 130              0               1                0                0 #> 131              0               0                1                0 #> 132              0               0                1                0 #> 133              0               0                1                0 #> 134              0               0                1                0 #> 135              0               0                1                0 #> 136              0               0                0                1 #> 137              0               0                0                1 #> 138              0               0                0                1 #> 139              0               0                0                1 #> 140              0               0                0                1 #> 141              1               0                0                0 #> 142              1               0                0                0 #> 143              1               0                0                0 #> 144              1               0                0                0 #> 145              1               0                0                0 #> 146              0               1                0                0 #> 147              0               1                0                0 #> 148              0               1                0                0 #> 149              0               1                0                0 #> 150              0               1                0                0 #> 151              0               0                1                0 #> 152              0               0                1                0 #> 153              0               0                1                0 #> 154              0               0                1                0 #> 155              0               0                1                0 #> 156              0               0                0                1 #> 157              0               0                0                1 #> 158              0               0                0                1 #> 159              0               0                0                1 #> 160              0               0                0                1 #> 161              1               0                0                0 #> 162              1               0                0                0 #> 163              1               0                0                0 #> 164              1               0                0                0 #> 165              1               0                0                0 #> 166              0               1                0                0 #> 167              0               1                0                0 #> 168              0               1                0                0 #> 169              0               1                0                0 #> 170              0               1                0                0 #> 171              0               0                1                0 #> 172              0               0                1                0 #> 173              0               0                1                0 #> 174              0               0                1                0 #> 175              0               0                1                0 #> 176              0               0                0                1 #> 177              0               0                0                1 #> 178              0               0                0                1 #> 179              0               0                0                1 #> 180              0               0                0                1 #> 181              1               0                0                0 #> 182              1               0                0                0 #> 183              1               0                0                0 #> 184              1               0                0                0 #> 185              1               0                0                0 #> 186              0               1                0                0 #> 187              0               1                0                0 #> 188              0               1                0                0 #> 189              0               1                0                0 #> 190              0               1                0                0 #> 191              0               0                1                0 #> 192              0               0                1                0 #> 193              0               0                1                0 #> 194              0               0                1                0 #> 195              0               0                1                0 #> 196              0               0                0                1 #> 197              0               0                0                1 #> 198              0               0                0                1 #> 199              0               0                0                1 #> 200              0               0                0                1 #> 201              1               0                0                0 #> 202              1               0                0                0 #> 203              1               0                0                0 #> 204              1               0                0                0 #> 205              1               0                0                0 #> 206              0               1                0                0 #> 207              0               1                0                0 #> 208              0               1                0                0 #> 209              0               1                0                0 #> 210              0               1                0                0 #> 211              0               0                1                0 #> 212              0               0                1                0 #> 213              0               0                1                0 #> 214              0               0                1                0 #> 215              0               0                1                0 #> 216              0               0                0                1 #> 217              0               0                0                1 #> 218              0               0                0                1 #> 219              0               0                0                1 #> 220              0               0                0                1 #> 221              1               0                0                0 #> 222              1               0                0                0 #> 223              1               0                0                0 #> 224              1               0                0                0 #> 225              1               0                0                0 #> 226              0               1                0                0 #> 227              0               1                0                0 #> 228              0               1                0                0 #> 229              0               1                0                0 #> 230              0               1                0                0 #> 231              0               0                1                0 #> 232              0               0                1                0 #> 233              0               0                1                0 #> 234              0               0                1                0 #> 235              0               0                1                0 #> 236              0               0                0                1 #> 237              0               0                0                1 #> 238              0               0                0                1 #> 239              0               0                0                1 #> 240              0               0                0                1 #> 241              1               0                0                0 #> 242              1               0                0                0 #> 243              1               0                0                0 #> 244              1               0                0                0 #> 245              1               0                0                0 #> 246              0               1                0                0 #> 247              0               1                0                0 #> 248              0               1                0                0 #> 249              0               1                0                0 #> 250              0               1                0                0 #> 251              0               0                1                0 #> 252              0               0                1                0 #> 253              0               0                1                0 #> 254              0               0                1                0 #> 255              0               0                1                0 #> 256              0               0                0                1 #> 257              0               0                0                1 #> 258              0               0                0                1 #> 259              0               0                0                1 #> 260              0               0                0                1 #> 261              1               0                0                0 #> 262              1               0                0                0 #> 263              1               0                0                0 #> 264              1               0                0                0 #> 265              1               0                0                0 #> 266              0               1                0                0 #> 267              0               1                0                0 #> 268              0               1                0                0 #> 269              0               1                0                0 #> 270              0               1                0                0 #> 271              0               0                1                0 #> 272              0               0                1                0 #> 273              0               0                1                0 #> 274              0               0                1                0 #> 275              0               0                1                0 #> 276              0               0                0                1 #> 277              0               0                0                1 #> 278              0               0                0                1 #> 279              0               0                0                1 #> 280              0               0                0                1 #> 281              1               0                0                0 #> 282              1               0                0                0 #> 283              1               0                0                0 #> 284              1               0                0                0 #> 285              1               0                0                0 #> 286              0               1                0                0 #> 287              0               1                0                0 #> 288              0               1                0                0 #> 289              0               1                0                0 #> 290              0               1                0                0 #> 291              0               0                1                0 #> 292              0               0                1                0 #> 293              0               0                1                0 #> 294              0               0                1                0 #> 295              0               0                1                0 #> 296              0               0                0                1 #> 297              0               0                0                1 #> 298              0               0                0                1 #> 299              0               0                0                1 #> 300              0               0                0                1 #> 301              1               0                0                0 #> 302              1               0                0                0 #> 303              1               0                0                0 #> 304              1               0                0                0 #> 305              1               0                0                0 #> 306              0               1                0                0 #> 307              0               1                0                0 #> 308              0               1                0                0 #> 309              0               1                0                0 #> 310              0               1                0                0 #> 311              0               0                1                0 #> 312              0               0                1                0 #> 313              0               0                1                0 #> 314              0               0                1                0 #> 315              0               0                1                0 #> 316              0               0                0                1 #> 317              0               0                0                1 #> 318              0               0                0                1 #> 319              0               0                0                1 #> 320              0               0                0                1 #> 321              1               0                0                0 #> 322              1               0                0                0 #> 323              1               0                0                0 #> 324              1               0                0                0 #> 325              1               0                0                0 #> 326              0               1                0                0 #> 327              0               1                0                0 #> 328              0               1                0                0 #> 329              0               1                0                0 #> 330              0               1                0                0 #> 331              0               0                1                0 #> 332              0               0                1                0 #> 333              0               0                1                0 #> 334              0               0                1                0 #> 335              0               0                1                0 #> 336              0               0                0                1 #> 337              0               0                0                1 #> 338              0               0                0                1 #> 339              0               0                0                1 #> 340              0               0                0                1 #> 341              1               0                0                0 #> 342              1               0                0                0 #> 343              1               0                0                0 #> 344              1               0                0                0 #> 345              1               0                0                0 #> 346              0               1                0                0 #> 347              0               1                0                0 #> 348              0               1                0                0 #> 349              0               1                0                0 #> 350              0               1                0                0 #> 351              0               0                1                0 #> 352              0               0                1                0 #> 353              0               0                1                0 #> 354              0               0                1                0 #> 355              0               0                1                0 #> 356              0               0                0                1 #> 357              0               0                0                1 #> 358              0               0                0                1 #> 359              0               0                0                1 #> 360              0               0                0                1 #> 361              1               0                0                0 #> 362              1               0                0                0 #> 363              1               0                0                0 #> 364              1               0                0                0 #> 365              1               0                0                0 #> 366              0               1                0                0 #> 367              0               1                0                0 #> 368              0               1                0                0 #> 369              0               1                0                0 #> 370              0               1                0                0 #> 371              0               0                1                0 #> 372              0               0                1                0 #> 373              0               0                1                0 #> 374              0               0                1                0 #> 375              0               0                1                0 #> 376              0               0                0                1 #> 377              0               0                0                1 #> 378              0               0                0                1 #> 379              0               0                0                1 #> 380              0               0                0                1 #> 381              1               0                0                0 #> 382              1               0                0                0 #> 383              1               0                0                0 #> 384              1               0                0                0 #> 385              1               0                0                0 #> 386              0               1                0                0 #> 387              0               1                0                0 #> 388              0               1                0                0 #> 389              0               1                0                0 #> 390              0               1                0                0 #> 391              0               0                1                0 #> 392              0               0                1                0 #> 393              0               0                1                0 #> 394              0               0                1                0 #> 395              0               0                1                0 #> 396              0               0                0                1 #> 397              0               0                0                1 #> 398              0               0                0                1 #> 399              0               0                0                1 #> 400              0               0                0                1 #> 401              1               0                0                0 #> 402              1               0                0                0 #> 403              1               0                0                0 #> 404              1               0                0                0 #> 405              1               0                0                0 #> 406              0               1                0                0 #> 407              0               1                0                0 #> 408              0               1                0                0 #> 409              0               1                0                0 #> 410              0               1                0                0 #> 411              0               0                1                0 #> 412              0               0                1                0 #> 413              0               0                1                0 #> 414              0               0                1                0 #> 415              0               0                1                0 #> 416              0               0                0                1 #> 417              0               0                0                1 #> 418              0               0                0                1 #> 419              0               0                0                1 #> 420              0               0                0                1 #> 421              1               0                0                0 #> 422              1               0                0                0 #> 423              1               0                0                0 #> 424              1               0                0                0 #> 425              1               0                0                0 #> 426              0               1                0                0 #> 427              0               1                0                0 #> 428              0               1                0                0 #> 429              0               1                0                0 #> 430              0               1                0                0 #> 431              0               0                1                0 #> 432              0               0                1                0 #> 433              0               0                1                0 #> 434              0               0                1                0 #> 435              0               0                1                0 #> 436              0               0                0                1 #> 437              0               0                0                1 #> 438              0               0                0                1 #> 439              0               0                0                1 #> 440              0               0                0                1 #> 441              1               0                0                0 #> 442              1               0                0                0 #> 443              1               0                0                0 #> 444              1               0                0                0 #> 445              1               0                0                0 #> 446              0               1                0                0 #> 447              0               1                0                0 #> 448              0               1                0                0 #> 449              0               1                0                0 #> 450              0               1                0                0 #> 451              0               0                1                0 #> 452              0               0                1                0 #> 453              0               0                1                0 #> 454              0               0                1                0 #> 455              0               0                1                0 #> 456              0               0                0                1 #> 457              0               0                0                1 #> 458              0               0                0                1 #> 459              0               0                0                1 #> 460              0               0                0                1 #> 461              1               0                0                0 #> 462              1               0                0                0 #> 463              1               0                0                0 #> 464              1               0                0                0 #> 465              1               0                0                0 #> 466              0               1                0                0 #> 467              0               1                0                0 #> 468              0               1                0                0 #> 469              0               1                0                0 #> 470              0               1                0                0 #> 471              0               0                1                0 #> 472              0               0                1                0 #> 473              0               0                1                0 #> 474              0               0                1                0 #> 475              0               0                1                0 #> 476              0               0                0                1 #> 477              0               0                0                1 #> 478              0               0                0                1 #> 479              0               0                0                1 #> 480              0               0                0                1 #> 481              1               0                0                0 #> 482              1               0                0                0 #> 483              1               0                0                0 #> 484              1               0                0                0 #> 485              1               0                0                0 #> 486              0               1                0                0 #> 487              0               1                0                0 #> 488              0               1                0                0 #> 489              0               1                0                0 #> 490              0               1                0                0 #> 491              0               0                1                0 #> 492              0               0                1                0 #> 493              0               0                1                0 #> 494              0               0                1                0 #> 495              0               0                1                0 #> 496              0               0                0                1 #> 497              0               0                0                1 #> 498              0               0                0                1 #> 499              0               0                0                1 #> 500              0               0                0                1 #> 501              1               0                0                0 #> 502              1               0                0                0 #> 503              1               0                0                0 #> 504              1               0                0                0 #> 505              1               0                0                0 #> 506              0               1                0                0 #> 507              0               1                0                0 #> 508              0               1                0                0 #> 509              0               1                0                0 #> 510              0               1                0                0 #> 511              0               0                1                0 #> 512              0               0                1                0 #> 513              0               0                1                0 #> 514              0               0                1                0 #> 515              0               0                1                0 #> 516              0               0                0                1 #> 517              0               0                0                1 #> 518              0               0                0                1 #> 519              0               0                0                1 #> 520              0               0                0                1 #> 521              1               0                0                0 #> 522              1               0                0                0 #> 523              1               0                0                0 #> 524              1               0                0                0 #> 525              1               0                0                0 #> 526              0               1                0                0 #> 527              0               1                0                0 #> 528              0               1                0                0 #> 529              0               1                0                0 #> 530              0               1                0                0 #> 531              0               0                1                0 #> 532              0               0                1                0 #> 533              0               0                1                0 #> 534              0               0                1                0 #> 535              0               0                1                0 #> 536              0               0                0                1 #> 537              0               0                0                1 #> 538              0               0                0                1 #> 539              0               0                0                1 #> 540              0               0                0                1 #> 541              1               0                0                0 #> 542              1               0                0                0 #> 543              1               0                0                0 #> 544              1               0                0                0 #> 545              1               0                0                0 #> 546              0               1                0                0 #> 547              0               1                0                0 #> 548              0               1                0                0 #> 549              0               1                0                0 #> 550              0               1                0                0 #> 551              0               0                1                0 #> 552              0               0                1                0 #> 553              0               0                1                0 #> 554              0               0                1                0 #> 555              0               0                1                0 #> 556              0               0                0                1 #> 557              0               0                0                1 #> 558              0               0                0                1 #> 559              0               0                0                1 #> 560              0               0                0                1 #> 561              1               0                0                0 #> 562              1               0                0                0 #> 563              1               0                0                0 #> 564              1               0                0                0 #> 565              1               0                0                0 #> 566              0               1                0                0 #> 567              0               1                0                0 #> 568              0               1                0                0 #> 569              0               1                0                0 #> 570              0               1                0                0 #> 571              0               0                1                0 #> 572              0               0                1                0 #> 573              0               0                1                0 #> 574              0               0                1                0 #> 575              0               0                1                0 #> 576              0               0                0                1 #> 577              0               0                0                1 #> 578              0               0                0                1 #> 579              0               0                0                1 #> 580              0               0                0                1 #> 581              1               0                0                0 #> 582              1               0                0                0 #> 583              1               0                0                0 #> 584              1               0                0                0 #> 585              1               0                0                0 #> 586              0               1                0                0 #> 587              0               1                0                0 #> 588              0               1                0                0 #> 589              0               1                0                0 #> 590              0               1                0                0 #> 591              0               0                1                0 #> 592              0               0                1                0 #> 593              0               0                1                0 #> 594              0               0                1                0 #> 595              0               0                1                0 #> 596              0               0                0                1 #> 597              0               0                0                1 #> 598              0               0                0                1 #> 599              0               0                0                1 #> 600              0               0                0                1 #> 601              1               0                0                0 #> 602              1               0                0                0 #> 603              1               0                0                0 #> 604              1               0                0                0 #> 605              1               0                0                0 #> 606              0               1                0                0 #> 607              0               1                0                0 #> 608              0               1                0                0 #> 609              0               1                0                0 #> 610              0               1                0                0 #> 611              0               0                1                0 #> 612              0               0                1                0 #> 613              0               0                1                0 #> 614              0               0                1                0 #> 615              0               0                1                0 #> 616              0               0                0                1 #> 617              0               0                0                1 #> 618              0               0                0                1 #> 619              0               0                0                1 #> 620              0               0                0                1 #> 621              1               0                0                0 #> 622              1               0                0                0 #> 623              1               0                0                0 #> 624              1               0                0                0 #> 625              1               0                0                0 #> 626              0               1                0                0 #> 627              0               1                0                0 #> 628              0               1                0                0 #> 629              0               1                0                0 #> 630              0               1                0                0 #> 631              0               0                1                0 #> 632              0               0                1                0 #> 633              0               0                1                0 #> 634              0               0                1                0 #> 635              0               0                1                0 #> 636              0               0                0                1 #> 637              0               0                0                1 #> 638              0               0                0                1 #> 639              0               0                0                1 #> 640              0               0                0                1 #> 641              1               0                0                0 #> 642              1               0                0                0 #> 643              1               0                0                0 #> 644              1               0                0                0 #> 645              1               0                0                0 #> 646              0               1                0                0 #> 647              0               1                0                0 #> 648              0               1                0                0 #> 649              0               1                0                0 #> 650              0               1                0                0 #> 651              0               0                1                0 #> 652              0               0                1                0 #> 653              0               0                1                0 #> 654              0               0                1                0 #> 655              0               0                1                0 #> 656              0               0                0                1 #> 657              0               0                0                1 #> 658              0               0                0                1 #> 659              0               0                0                1 #> 660              0               0                0                1 #> 661              1               0                0                0 #> 662              1               0                0                0 #> 663              1               0                0                0 #> 664              1               0                0                0 #> 665              1               0                0                0 #> 666              0               1                0                0 #> 667              0               1                0                0 #> 668              0               1                0                0 #> 669              0               1                0                0 #> 670              0               1                0                0 #> 671              0               0                1                0 #> 672              0               0                1                0 #> 673              0               0                1                0 #> 674              0               0                1                0 #> 675              0               0                1                0 #> 676              0               0                0                1 #> 677              0               0                0                1 #> 678              0               0                0                1 #> 679              0               0                0                1 #> 680              0               0                0                1 #> 681              1               0                0                0 #> 682              1               0                0                0 #> 683              1               0                0                0 #> 684              1               0                0                0 #> 685              1               0                0                0 #> 686              0               1                0                0 #> 687              0               1                0                0 #> 688              0               1                0                0 #> 689              0               1                0                0 #> 690              0               1                0                0 #> 691              0               0                1                0 #> 692              0               0                1                0 #> 693              0               0                1                0 #> 694              0               0                1                0 #> 695              0               0                1                0 #> 696              0               0                0                1 #> 697              0               0                0                1 #> 698              0               0                0                1 #> 699              0               0                0                1 #> 700              0               0                0                1 #> 701              1               0                0                0 #> 702              1               0                0                0 #> 703              1               0                0                0 #> 704              1               0                0                0 #> 705              1               0                0                0 #> 706              0               1                0                0 #> 707              0               1                0                0 #> 708              0               1                0                0 #> 709              0               1                0                0 #> 710              0               1                0                0 #> 711              0               0                1                0 #> 712              0               0                1                0 #> 713              0               0                1                0 #> 714              0               0                1                0 #> 715              0               0                1                0 #> 716              0               0                0                1 #> 717              0               0                0                1 #> 718              0               0                0                1 #> 719              0               0                0                1 #> 720              0               0                0                1 #> 721              1               0                0                0 #> 722              1               0                0                0 #> 723              1               0                0                0 #> 724              1               0                0                0 #> 725              1               0                0                0 #> 726              0               1                0                0 #> 727              0               1                0                0 #> 728              0               1                0                0 #> 729              0               1                0                0 #> 730              0               1                0                0 #> 731              0               0                1                0 #> 732              0               0                1                0 #> 733              0               0                1                0 #> 734              0               0                1                0 #> 735              0               0                1                0 #> 736              0               0                0                1 #> 737              0               0                0                1 #> 738              0               0                0                1 #> 739              0               0                0                1 #> 740              0               0                0                1 #> 741              1               0                0                0 #> 742              1               0                0                0 #> 743              1               0                0                0 #> 744              1               0                0                0 #> 745              1               0                0                0 #> 746              0               1                0                0 #> 747              0               1                0                0 #> 748              0               1                0                0 #> 749              0               1                0                0 #> 750              0               1                0                0 #> 751              0               0                1                0 #> 752              0               0                1                0 #> 753              0               0                1                0 #> 754              0               0                1                0 #> 755              0               0                1                0 #> 756              0               0                0                1 #> 757              0               0                0                1 #> 758              0               0                0                1 #> 759              0               0                0                1 #> 760              0               0                0                1 #> 761              1               0                0                0 #> 762              1               0                0                0 #> 763              1               0                0                0 #> 764              1               0                0                0 #> 765              1               0                0                0 #> 766              0               1                0                0 #> 767              0               1                0                0 #> 768              0               1                0                0 #> 769              0               1                0                0 #> 770              0               1                0                0 #> 771              0               0                1                0 #> 772              0               0                1                0 #> 773              0               0                1                0 #> 774              0               0                1                0 #> 775              0               0                1                0 #> 776              0               0                0                1 #> 777              0               0                0                1 #> 778              0               0                0                1 #> 779              0               0                0                1 #> 780              0               0                0                1 #> 781              1               0                0                0 #> 782              1               0                0                0 #> 783              1               0                0                0 #> 784              1               0                0                0 #> 785              1               0                0                0 #> 786              0               1                0                0 #> 787              0               1                0                0 #> 788              0               1                0                0 #> 789              0               1                0                0 #> 790              0               1                0                0 #> 791              0               0                1                0 #> 792              0               0                1                0 #> 793              0               0                1                0 #> 794              0               0                1                0 #> 795              0               0                1                0 #> 796              0               0                0                1 #> 797              0               0                0                1 #> 798              0               0                0                1 #> 799              0               0                0                1 #> 800              0               0                0                1 #> 801              1               0                0                0 #> 802              1               0                0                0 #> 803              1               0                0                0 #> 804              1               0                0                0 #> 805              1               0                0                0 #> 806              0               1                0                0 #> 807              0               1                0                0 #> 808              0               1                0                0 #> 809              0               1                0                0 #> 810              0               1                0                0 #> 811              0               0                1                0 #> 812              0               0                1                0 #> 813              0               0                1                0 #> 814              0               0                1                0 #> 815              0               0                1                0 #> 816              0               0                0                1 #> 817              0               0                0                1 #> 818              0               0                0                1 #> 819              0               0                0                1 #> 820              0               0                0                1 #> attr(,\"assign\") #> [1] 1 1 1 1 #> attr(,\"contrasts\") #> attr(,\"contrasts\")$delay_cat #>         [0,5) [5,10) [10,15) [15,20) #> [0,5)       1      0       0       0 #> [5,10)      0      1       0       0 #> [10,15)     0      0       1       0 #> [15,20)     0      0       0       1 #>  #>  #> $data$refnp_fintercept #> [1] 0 #>  #> $data$refnp_fnrow #> [1] 820 #>  #> $data$refnp_findex #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 #> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 #> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 #> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 #> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 #> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 #> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 #> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 #> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 #> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 #> [271] 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 #> [289] 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 #> [307] 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 #> [325] 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 #> [343] 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 #> [361] 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 #> [379] 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 #> [397] 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 #> [415] 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 #> [433] 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 #> [451] 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 #> [469] 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 #> [487] 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 #> [505] 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 #> [523] 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 #> [541] 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 #> [559] 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 #> [577] 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 #> [595] 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 #> [613] 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 #> [631] 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 #> [649] 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 #> [667] 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 #> [685] 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 #> [703] 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 #> [721] 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 #> [739] 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 #> [757] 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 #> [775] 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 #> [793] 793 794 795 796 797 798 799 800 801 802 803 804 805 806 807 808 809 810 #> [811] 811 812 813 814 815 816 817 818 819 820 #>  #> $data$refnp_fnindex #> [1] 820 #>  #> $data$refnp_fncol #> [1] 4 #>  #> $data$refnp_rdesign #>   fixed delay_cat #> 1     0         1 #> 2     0         1 #> 3     0         1 #> 4     0         1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $data$refnp_rncol #> [1] 1 #>  #> $data$model_refnp #> [1] 1 #>  #>  #> $priors #>             variable #>               <char> #> 1:     refp_mean_int #> 2:       refp_sd_int #> 3: refp_mean_beta_sd #> 4:   refp_sd_beta_sd #> 5:         refnp_int #> 6:     refnp_beta_sd #>                                                       description #>                                                            <char> #> 1:         Log mean intercept for parametric reference date delay #> 2: Log standard deviation for the parametric reference date delay #> 3:    Standard deviation of scaled pooled parametric mean effects #> 4:      Standard deviation of scaled pooled parametric sd effects #> 5:              Intercept for non-parametric reference date delay #> 6:     Standard deviation of scaled pooled non-parametric effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   1.0     1 #> 2: Zero truncated normal   0.5     1 #> 3: Zero truncated normal   0.0     1 #> 4: Zero truncated normal   0.0     1 #> 5:                Normal   0.0     1 #> 6: Zero truncated normal   0.0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(refp_mean_int = numeric(0), refp_sd_int = numeric(0),  #>             refp_mean_beta = numeric(0), refp_sd_beta = numeric(0),  #>             refp_mean_beta_sd = numeric(0), refp_sd_beta_sd = numeric(0),  #>             refnp_int = numeric(0), refnp_beta = numeric(0),  #>             refnp_beta_sd = numeric(0)) #>         if (data$model_refp > 0) { #>             init$refp_mean_int <- array(rnorm(1, priors$refp_mean_int[1],  #>                 priors$refp_mean_int[2]/10)) #>         } #>         if (data$model_refp > 1) { #>             init$refp_sd_int <- array(abs(rnorm(1, priors$refp_sd_int[1],  #>                 priors$refp_sd_int[2]/10))) #>         } #>         init$refp_mean <- rep(init$refp_mean_int, data$refp_fnrow) #>         init$refp_sd <- rep(init$refp_sd_int, data$refp_fnrow) #>         if (data$refp_fncol > 0) { #>             init$refp_mean_beta <- array(rnorm(data$refp_fncol,  #>                 0, 0.01)) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta <- array(rnorm(data$refp_fncol,  #>                   0, 0.01)) #>             } #>         } #>         if (data$refp_rncol > 0) { #>             init$refp_mean_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                 priors$refp_mean_beta_sd_p[1], priors$refp_mean_beta_sd_p[2]/10))) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                   priors$refp_sd_beta_sd_p[1], priors$refp_sd_beta_sd_p[2]/10))) #>             } #>         } #>         if (data$model_refnp > 0) { #>             if (data$refnp_fintercept > 0) { #>                 init$refnp_int <- array(rnorm(1, priors$refnp_int_p[1],  #>                   priors$refnp_int_p[2]/10)) #>             } #>             if (data$refnp_fncol > 0) { #>                 init$refnp_beta <- array(rnorm(data$refnp_fncol,  #>                   0, 0.01)) #>             } #>             if (data$refnp_rncol > 0) { #>                 init$refnp_beta_sd <- array(abs(rnorm(data$refnp_rncol,  #>                   priors$refnp_beta_sd_p[1], priors$refnp_beta_sd_p[2]/10))) #>             } #>         } #>         return(init) #>     } #>     return(fn) #> } #> <bytecode: 0x564e5fa54e20> #> <environment: 0x564e5de0d068> #>"},{"path":"https://package.epinowcast.org/reference/enw_reference_by_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Construct a lookup of references dates by report — enw_reference_by_report","title":"Construct a lookup of references dates by report — enw_reference_by_report","text":"Construct lookup references dates report","code":""},{"path":"https://package.epinowcast.org/reference/enw_reference_by_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Construct a lookup of references dates by report — enw_reference_by_report","text":"","code":"enw_reference_by_report(   missing_reference,   reps_with_complete_refs,   metareference,   max_delay )"},{"path":"https://package.epinowcast.org/reference/enw_reference_by_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Construct a lookup of references dates by report — enw_reference_by_report","text":"missing_reference missing_reference data.frame output enw_preprocess_data(). reps_with_complete_refs data.frame report dates complete (.e fully reported) reference dates produced using enw_reps_with_complete_refs(). metareference metareference data.frame output enw_preprocess_data(). max_delay maximum number days model delay distribution. Must integer greater equal 1. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Consider delays realistic application, doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 days (.e. max_delay 1 corresponds delay). can use check_max_delay() check coverage delay distribution different maximum delays.","code":""},{"path":"https://package.epinowcast.org/reference/enw_reference_by_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Construct a lookup of references dates by report — enw_reference_by_report","text":"wide data.frame row complete report date ' columns observation index reporting delay","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_replace_priors.html","id":null,"dir":"Reference","previous_headings":"","what":"Replace default priors with user specified priors — enw_replace_priors","title":"Replace default priors with user specified priors — enw_replace_priors","text":"function used internally epinowcast replace default model priors users specified ones (restricted normal priors specified mean standard deviations). common use extracting posterior previous epinowcast() run (using summary(nowcast, type = fit)) using prior.","code":""},{"path":"https://package.epinowcast.org/reference/enw_replace_priors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Replace default priors with user specified priors — enw_replace_priors","text":"","code":"enw_replace_priors(priors, custom_priors)"},{"path":"https://package.epinowcast.org/reference/enw_replace_priors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Replace default priors with user specified priors — enw_replace_priors","text":"priors data.frame following variables: variable, mean, sd describing normal priors. Priors appropriate format returned enw_reference() well similar model specification functions. custom_priors data.frame following variables: variable, mean, sd describing normal priors. Priors appropriate format returned enw_reference() well similar model specification functions. Priors data.frame replace default priors. Note currently vectorised prior names (.e form variable[n] treated variable).","code":""},{"path":"https://package.epinowcast.org/reference/enw_replace_priors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Replace default priors with user specified priors — enw_replace_priors","text":"data.table prior definitions (variable, mean sd).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_replace_priors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Replace default priors with user specified priors — enw_replace_priors","text":"","code":"# Update priors from a data.frame priors <- data.frame(variable = c(\"x\", \"y\"), mean = c(1, 2), sd = c(1, 2)) custom_priors <- data.frame(variable = \"x[1]\", mean = 10, sd = 2) enw_replace_priors(priors, custom_priors) #>    variable  mean    sd #>      <char> <num> <num> #> 1:        y     2     2 #> 2:        x    10     2  # Update priors from a previous model fit default_priors <- enw_reference(  distribution = \"lognormal\",  data = enw_example(\"preprocessed\"), )$priors print(default_priors) #>             variable #>               <char> #> 1:     refp_mean_int #> 2:       refp_sd_int #> 3: refp_mean_beta_sd #> 4:   refp_sd_beta_sd #> 5:         refnp_int #> 6:     refnp_beta_sd #>                                                       description #>                                                            <char> #> 1:         Log mean intercept for parametric reference date delay #> 2: Log standard deviation for the parametric reference date delay #> 3:    Standard deviation of scaled pooled parametric mean effects #> 4:      Standard deviation of scaled pooled parametric sd effects #> 5:              Intercept for non-parametric reference date delay #> 6:     Standard deviation of scaled pooled non-parametric effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   1.0     1 #> 2: Zero truncated normal   0.5     1 #> 3: Zero truncated normal   0.0     1 #> 4: Zero truncated normal   0.0     1 #> 5:                Normal   0.0     1 #> 6: Zero truncated normal   0.0     1  fit_priors <- summary(  enw_example(\"nowcast\"), type = \"fit\",  variables = c(\"refp_mean_int\", \"refp_sd_int\", \"sqrt_phi\") ) fit_priors #>            variable      mean   median        sd        mad        q5      q20 #>              <char>     <num>    <num>     <num>      <num>     <num>    <num> #> 1: refp_mean_int[1] 2.8717659 2.828525 0.6134551 0.60945238 1.9613285 2.330854 #> 2:   refp_sd_int[1] 3.7026616 3.688925 0.2972151 0.30275433 3.2274870 3.448894 #> 3:      sqrt_phi[1] 0.3476026 0.346561 0.0314766 0.03275434 0.2964757 0.320987 #>          q80       q95     rhat  ess_bulk ess_tail #>        <num>     <num>    <num>     <num>    <num> #> 1: 3.3737040 3.9624635 1.007791  549.4149 721.2235 #> 2: 3.9502920 4.1949650 1.007210  670.3456 822.6031 #> 3: 0.3735928 0.4007032 1.000115 1126.7382 768.7450  enw_replace_priors(default_priors, fit_priors) #>             variable #>               <char> #> 1: refp_mean_beta_sd #> 2:   refp_sd_beta_sd #> 3:         refnp_int #> 4:     refnp_beta_sd #> 5:     refp_mean_int #> 6:       refp_sd_int #> 7:          sqrt_phi #>                                                    description #>                                                         <char> #> 1: Standard deviation of scaled pooled parametric mean effects #> 2:   Standard deviation of scaled pooled parametric sd effects #> 3:           Intercept for non-parametric reference date delay #> 4:  Standard deviation of scaled pooled non-parametric effects #> 5:                                                        <NA> #> 6:                                                        <NA> #> 7:                                                        <NA> #>             distribution      mean        sd #>                   <char>     <num>     <num> #> 1: Zero truncated normal 0.0000000 1.0000000 #> 2: Zero truncated normal 0.0000000 1.0000000 #> 3:                Normal 0.0000000 1.0000000 #> 4: Zero truncated normal 0.0000000 1.0000000 #> 5:                  <NA> 2.8717659 0.6134551 #> 6:                  <NA> 3.7026616 0.2972151 #> 7:                  <NA> 0.3476026 0.0314766"},{"path":"https://package.epinowcast.org/reference/enw_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Report date logit hazard reporting model module — enw_report","title":"Report date logit hazard reporting model module — enw_report","text":"Report date logit hazard reporting  model module","code":""},{"path":"https://package.epinowcast.org/reference/enw_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Report date logit hazard reporting model module — enw_report","text":"","code":"enw_report(non_parametric = ~0, structural = ~0, data)"},{"path":"https://package.epinowcast.org/reference/enw_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Report date logit hazard reporting model module — enw_report","text":"non_parametric formula (implemented enw_formula()) describing non-parametric logit hazard model. can use features defined report date defined metareport produced enw_preprocess_data(). Note intercept model set 0 used specifying report date related hazards vs time invariant hazards instead modelled using non_parametric argument enw_reference() structural formula fixed effects using binary variables, factors describing known reporting structure (.e weekday reporting). base case (.e first factor entry) describe dates reporting possible. Internally dates non-zero element design matrix hazard set 0. can use features defined report date defined metareport produced enw_preprocess_data(). Note intercept model set 0 order allow dates without structural reasons reported reported. Note feature yet available users. data Output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/reference/enw_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Report date logit hazard reporting model module — enw_report","text":"list containing supplied formulas, data passed list describing models, data.frame describing priors used, function takes output data priors returns function can used sample tightened version prior distribution.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Report date logit hazard reporting model module — enw_report","text":"","code":"enw_report(data = enw_example(\"preprocessed\")) #> $formula #> $formula$non_parametric #> [1] \"~1\" #>  #>  #> $data #> $data$rep_fdesign #>   (Intercept) #> 1           1 #>  #> $data$rep_fintercept #> [1] 1 #>  #> $data$rep_fnrow #> [1] 1 #>  #> $data$rep_findex #>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] #> [1,]    1    1    1    1    1    1    1    1    1     1     1     1     1     1 #>      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26] #> [1,]     1     1     1     1     1     1     1     1     1     1     1     1 #>      [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38] #> [1,]     1     1     1     1     1     1     1     1     1     1     1     1 #>      [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50] #> [1,]     1     1     1     1     1     1     1     1     1     1     1     1 #>      [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] [,60] #> [1,]     1     1     1     1     1     1     1     1     1     1 #>  #> $data$rep_fnindex #> [1] 60 #>  #> $data$rep_fncol #> [1] 0 #>  #> $data$rep_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$rep_rncol #> [1] 0 #>  #> $data$rep_t #> [1] 60 #>  #> $data$model_rep #> [1] 0 #>  #>  #> $priors #>       variable                                             description #>         <char>                                                  <char> #> 1: rep_beta_sd Standard deviation of scaled pooled report date effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1: Zero truncated normal     0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(rep_beta = numeric(0), rep_beta_sd = numeric(0)) #>         if (data$rep_fncol > 0) { #>             init$rep_beta <- array(rnorm(data$rep_fncol, 0, 0.01)) #>         } #>         if (data$rep_rncol > 0) { #>             init$rep_beta_sd <- array(abs(rnorm(data$rep_rncol,  #>                 priors$rep_beta_sd_p[1], priors$rep_beta_sd_p[2]/10))) #>         } #>         return(init) #>     } #>     return(fn) #> } #> <bytecode: 0x564e706f9970> #> <environment: 0x564e706f8f88> #>"},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle.html","id":null,"dir":"Reference","previous_headings":"","what":"Construct the reporting triangle — enw_reporting_triangle","title":"Construct the reporting triangle — enw_reporting_triangle","text":"Constructs reporting triangle row representing reference date columns observations report date","code":""},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Construct the reporting triangle — enw_reporting_triangle","text":"","code":"enw_reporting_triangle(obs)"},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Construct the reporting triangle — enw_reporting_triangle","text":"obs data.frame produced enw_add_incidence(). Must contain following variables: reference_date, .group, delay.","code":""},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Construct the reporting triangle — enw_reporting_triangle","text":"data.frame row reference date, columns observations reporting delay.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Construct the reporting triangle — enw_reporting_triangle","text":"","code":"obs <- enw_example(\"preprocessed\")$new_confirm enw_reporting_triangle(obs) #> Key: <.group, reference_date> #>     .group reference_date     0     1     2     3     4     5     6     7     8 #>      <num>         <IDat> <int> <int> <int> <int> <int> <int> <int> <int> <int> #>  1:      1     2021-07-13    21    12     3     4     3     0     1     2     4 #>  2:      1     2021-07-14    22    12     4     5     0     1    10     2     5 #>  3:      1     2021-07-15    28    15     3     3     0     1     3     2     3 #>  4:      1     2021-07-16    19    13     0     0     0     4     2     2     2 #>  5:      1     2021-07-17    20     7     1     3    10     3     0     4     3 #>  6:      1     2021-07-18     9     6     6     0     4     5     4     0     1 #>  7:      1     2021-07-19     3    16     4     4     1     1     2     0     0 #>  8:      1     2021-07-20    36    19    10     4     2     3     0     3     2 #>  9:      1     2021-07-21    28    18     8     4     1     2     3     6     1 #> 10:      1     2021-07-22    34    19     2     1     5     2     4     3     7 #> 11:      1     2021-07-23    30    12     4     1    10     6     0     2     2 #> 12:      1     2021-07-24    31     8     4     9     8     2     5     2     1 #> 13:      1     2021-07-25     8     4    14     8     6     5     1     3     0 #> 14:      1     2021-07-26     9     6     2     3     0     0     0     0     1 #> 15:      1     2021-07-27    35    11     6     4     4     1     0     2     2 #> 16:      1     2021-07-28    51    28    25     3     5     2     3     5     5 #> 17:      1     2021-07-29    47    37     9     2     2     3     4     4     4 #> 18:      1     2021-07-30    36    20     2     4    11     8     8     3     5 #> 19:      1     2021-07-31    38    16     3    15    14     7     5     5     0 #> 20:      1     2021-08-01     7     5     5    11     7     5     1     3     1 #> 21:      1     2021-08-02    13    13     8     6     1     3     2     0     0 #> 22:      1     2021-08-03    51    43     6     4     4     3     1     6     4 #> 23:      1     2021-08-04    51    43    18     5     6     1     2     8     7 #> 24:      1     2021-08-05    45    21     6     2     2    11    17     5     7 #> 25:      1     2021-08-06    47    31     5     4    20     6     1     9     3 #> 26:      1     2021-08-07    40    15     6    23    14    13     8     9     0 #> 27:      1     2021-08-08    13    14    27    14     7     7     0     0     0 #> 28:      1     2021-08-09    14    23    11     3     1     1     0     0     0 #> 29:      1     2021-08-10    78    43    23    11     5     1     0     5     2 #> 30:      1     2021-08-11    80    53    17    15     7     3    14    12    13 #> 31:      1     2021-08-12    89    48    28     8     1    14    13    13    10 #> 32:      1     2021-08-13    86    44     9     3    27    13     7    11     4 #> 33:      1     2021-08-14    79    36     7    16    19    13     8     8     3 #> 34:      1     2021-08-15    22    24    35    18    10     4     7     5     0 #> 35:      1     2021-08-16    23    32    22    10     8     2     1     0     0 #> 36:      1     2021-08-17    96    85    30    18    10     3     0     0     0 #> 37:      1     2021-08-18    92    86    23    18     4     0     0     0     0 #> 38:      1     2021-08-19    84    87    27     4     0     0     0     0     0 #> 39:      1     2021-08-20    98    61    12     0     0     0     0     0     0 #> 40:      1     2021-08-21    69    43     0     0     0     0     0     0     0 #> 41:      1     2021-08-22    45     0     0     0     0     0     0     0     0 #>     .group reference_date     0     1     2     3     4     5     6     7     8 #>         9    10    11    12    13    14    15    16    17    18    19 #>     <int> <int> <int> <int> <int> <int> <int> <int> <int> <int> <int> #>  1:     3     0     0     2     0     0     0     1     2     1     0 #>  2:     3     0     1     0     3     1     0     1     0     0     0 #>  3:     2     1     0     2     3     0     3     0     0     0     0 #>  4:     1     1     1     0     1     0     0     1     0     0     0 #>  5:     3     2     0     1     2     0     1     2     1     0     0 #>  6:     4     0     0     1     1     1     2     0     0     0     2 #>  7:     0     0     1     1     1     1     0     0     0     1     0 #>  8:     3     0     2     1     1     2     2     0     0     1     0 #>  9:     5     2     2     3     0     2     0     1     0     0     0 #> 10:     3     1     0     4     3     3     1     2     0     0     1 #> 11:     1     2     1     4     0     2     3     0     0     4     0 #> 12:     1     2     4     1     3     1     0     1     2     2     2 #> 13:     4     1     2     4     2     0     1     2     2     2     0 #> 14:     2     4     1     0     0     0     0     0     0     0     0 #> 15:     2     2     0     0     1     4     1     0     0     0     0 #> 16:     7     1     0     0     4     5     5     1     1     0     0 #> 17:     3     0     2     0    10     4     3     0     0     0     0 #> 18:     2     0     2     4     4     0     2     2     0     0     1 #> 19:     0     5     0     5     1     6     0     0     3     1     0 #> 20:     6     3     3     4     1     1     7     2     3     2     0 #> 21:     2     0     2     0     5     3     0     0     0     0     1 #> 22:     5     5     4     0     4     5     0     2     2     0     0 #> 23:     7     6     1     0     4     3     1     3     0     0     0 #> 24:     4     1     0     5     3     0     2     2     0     0     0 #> 25:     1     0     2     1     5     2     0     0     0     0     0 #> 26:     1     3     3     2     0     1     1     0     0     0     0 #> 27:     7     1     4     2     1     0     0     0     0     0     0 #> 28:     1     0     2     2     0     0     0     0     0     0     0 #> 29:     2     1     4     0     0     0     0     0     0     0     0 #> 30:    13     6     0     0     0     0     0     0     0     0     0 #> 31:    12     1     0     0     0     0     0     0     0     0     0 #> 32:     0     0     0     0     0     0     0     0     0     0     0 #> 33:     0     0     0     0     0     0     0     0     0     0     0 #> 34:     0     0     0     0     0     0     0     0     0     0     0 #> 35:     0     0     0     0     0     0     0     0     0     0     0 #> 36:     0     0     0     0     0     0     0     0     0     0     0 #> 37:     0     0     0     0     0     0     0     0     0     0     0 #> 38:     0     0     0     0     0     0     0     0     0     0     0 #> 39:     0     0     0     0     0     0     0     0     0     0     0 #> 40:     0     0     0     0     0     0     0     0     0     0     0 #> 41:     0     0     0     0     0     0     0     0     0     0     0 #>         9    10    11    12    13    14    15    16    17    18    19"},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle_to_long.html","id":null,"dir":"Reference","previous_headings":"","what":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"Recast reporting triangle wide long format","code":""},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle_to_long.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"","code":"enw_reporting_triangle_to_long(obs)"},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle_to_long.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"obs data.frame format produced enw_reporting_triangle().","code":""},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle_to_long.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"long format reporting triangle data.frame additional variables new_confirm delay.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_reporting_triangle_to_long.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"","code":"obs <- enw_example(\"preprocessed\")$new_confirm rt <- enw_reporting_triangle(obs) enw_reporting_triangle_to_long(rt) #> Key: <.group, reference_date, delay> #>      reference_date .group  delay new_confirm #>              <IDat>  <num> <fctr>       <int> #>   1:     2021-07-13      1      0          21 #>   2:     2021-07-13      1      1          12 #>   3:     2021-07-13      1      2           3 #>   4:     2021-07-13      1      3           4 #>   5:     2021-07-13      1      4           3 #>  ---                                          #> 816:     2021-08-22      1     15           0 #> 817:     2021-08-22      1     16           0 #> 818:     2021-08-22      1     17           0 #> 819:     2021-08-22      1     18           0 #> 820:     2021-08-22      1     19           0"},{"path":"https://package.epinowcast.org/reference/enw_reps_with_complete_refs.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","title":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","text":"Identify report dates complete (.e maximum delay) reference dates","code":""},{"path":"https://package.epinowcast.org/reference/enw_reps_with_complete_refs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","text":"","code":"enw_reps_with_complete_refs(new_confirm, max_delay, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/reference/enw_reps_with_complete_refs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","text":"new_confirm new_confirm data.frame output enw_preprocess_data(). max_delay maximum number days model delay distribution. Must integer greater equal 1. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Consider delays realistic application, doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 days (.e. max_delay 1 corresponds delay). can use check_max_delay() check coverage delay distribution different maximum delays. character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling copy logical; TRUE (default) creates copy; otherwise, modifies obs place.","code":""},{"path":"https://package.epinowcast.org/reference/enw_reps_with_complete_refs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","text":"data.frame containing report_date variable, grouping variables specified report dates complete reporting.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_sample.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a CmdStan model using NUTS — enw_sample","title":"Fit a CmdStan model using NUTS — enw_sample","text":"Fit CmdStan model using NUTS","code":""},{"path":"https://package.epinowcast.org/reference/enw_sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a CmdStan model using NUTS — enw_sample","text":"","code":"enw_sample(data, model = epinowcast::enw_model(), diagnostics = TRUE, ...)"},{"path":"https://package.epinowcast.org/reference/enw_sample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a CmdStan model using NUTS — enw_sample","text":"data list data produced model modules (example enw_expectation(), enw_obs(), etc.) required use model used. model cmdstanr model object loaded enw_model() supplied user. diagnostics Logical, defaults TRUE. fitting diagnostics returned data.frame. ... Additional parameters passed sample method cmdstanr.","code":""},{"path":"https://package.epinowcast.org/reference/enw_sample.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a CmdStan model using NUTS — enw_sample","text":"data.frame containing cmdstanr fit, input data, fitting arguments, optionally summary diagnostics.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_score_nowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluate nowcasts using proper scoring rules — enw_score_nowcast","title":"Evaluate nowcasts using proper scoring rules — enw_score_nowcast","text":"Acts wrapper scoringutils::score(). particular, handling filtering nowcast summary output linking output observed data. See documentation scoringutils package forecast scoring.","code":""},{"path":"https://package.epinowcast.org/reference/enw_score_nowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluate nowcasts using proper scoring rules — enw_score_nowcast","text":"","code":"enw_score_nowcast(   nowcast,   latest_obs,   log = FALSE,   check = FALSE,   round_to = 3,   ... )"},{"path":"https://package.epinowcast.org/reference/enw_score_nowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluate nowcasts using proper scoring rules — enw_score_nowcast","text":"nowcast posterior nowcast posterior prediction returned summary.epinowcast(), used output epinowcast(). latest_obs data.frame latest available observations produced enw_latest_data() otherwise. log Logical, defaults FALSE. scores calculated log scale (0.01 shift) observations nowcasts. Scoring way can thought relative score vs usual absolute measure. may useful targets different scales forecaster interested good round performance versus good performance targets large values. check Logical, defaults FALSE. scoringutils::check_forecasts() used check input nowcasts. round_to Integer defaults 3. Number digits round scoring output . ... Arguments passed scoringutils::score data data.frame data.table predictions observations. scoring using score(), following columns need present: true_value - true observed values prediction - predictions predictive samples one true value. (need provide prediction column want score quantile forecasts wide range format.) scoring integer continuous forecasts sample column needed: sample - index identify predictive samples prediction column generated one model one true value. necessary continuous integer forecasts, binary predictions. scoring predictions quantile-format forecast provide column called quantile: quantile: quantile prediction corresponds addition model column suggested present flagged added input data forecasts assigned \"unspecified model\"). can check format data using check_forecasts() examples format (example_quantile, example_continuous, example_integer, example_binary). metrics metrics want output. NULL (default), available metrics computed. list available metrics see available_metrics(),  check metrics data set.","code":""},{"path":"https://package.epinowcast.org/reference/enw_score_nowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Evaluate nowcasts using proper scoring rules — enw_score_nowcast","text":"data.table returned scoringutils::score().","code":""},{"path":"https://package.epinowcast.org/reference/enw_score_nowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Evaluate nowcasts using proper scoring rules — enw_score_nowcast","text":"","code":"if (FALSE) { # interactive() library(data.table) library(scoringutils)  # Summarise example nowcast nowcast <- enw_example(\"nowcast\") summarised_nowcast <- summary(nowcast)  # Load latest available observations obs <- enw_example(\"observations\")  # Keep the last 7 days of data obs <- obs[reference_date > (max(reference_date) - 7)]  # score on the absolute scale scores <- enw_score_nowcast(summarised_nowcast, obs) summarise_scores(scores, by = \"location\")  # score overall on a log scale log_scores <- enw_score_nowcast(summarised_nowcast, obs, log = TRUE) summarise_scores(log_scores, by = \"location\") }"},{"path":"https://package.epinowcast.org/reference/enw_set_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Set caching location for Stan models — enw_set_cache","title":"Set caching location for Stan models — enw_set_cache","text":"function allows user set cache location Stan models rather temporary directory. can reduce need model compilation every new model run across sessions within session. R version 4.0.0 , recommended use persistent cache shown example.","code":""},{"path":"https://package.epinowcast.org/reference/enw_set_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set caching location for Stan models — enw_set_cache","text":"","code":"enw_set_cache(path, type = c(\"session\", \"persistent\", \"all\"))"},{"path":"https://package.epinowcast.org/reference/enw_set_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set caching location for Stan models — enw_set_cache","text":"path valid filepath representing desired cache location. directory exist created. type character string specifying cache type. can one \"session\", \"persistent\", \"\". Default \"session\". \"session\" sets cache current session, \"persistent\" writes cache location user’s .Renviron file,  \"\" .","code":""},{"path":"https://package.epinowcast.org/reference/enw_set_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set caching location for Stan models — enw_set_cache","text":"string filepath set.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_set_cache.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set caching location for Stan models — enw_set_cache","text":"","code":"if (FALSE) { # interactive() # Set to local directory my_enw_cache <- enw_set_cache(file.path(tempdir(), \"test\")) enw_get_cache() if (FALSE) { # Use the package cache in R >= 4.0 if (R.version.string >= \"4.0.0\") {  enw_set_cache(    tools::R_user_dir(package = \"epinowcast\", \"cache\"), type = \"all\"  ) }  } }"},{"path":"https://package.epinowcast.org/reference/enw_simulate_missing_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"simple binomial simulator missing data reference date using simulated observed data input. function may used validate missing data models, part examples case studies, explore implications missing data use case.","code":""},{"path":"https://package.epinowcast.org/reference/enw_simulate_missing_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"","code":"enw_simulate_missing_reference(obs, proportion = 0.2, by = NULL)"},{"path":"https://package.epinowcast.org/reference/enw_simulate_missing_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). proportion Numeric, proportion observations missing reference date, indexed reference date. Currently fixed proportion supported defaults 0.2. character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling","code":""},{"path":"https://package.epinowcast.org/reference/enw_simulate_missing_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"data.table format input simulated proportion observations now missing reference date.","code":""},{"path":"https://package.epinowcast.org/reference/enw_simulate_missing_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"","code":"# Load and filter germany hospitalisations nat_germany_hosp <- subset(   germany_covid19_hosp, location == \"DE\" & age_group == \"00+\" ) nat_germany_hosp <- enw_filter_report_dates(   nat_germany_hosp,   latest_date = \"2021-08-01\" )  # Make sure observations are complete nat_germany_hosp <- enw_complete_dates(   nat_germany_hosp,   by = c(\"location\", \"age_group\"), missing_reference = FALSE )  # Simulate enw_simulate_missing_reference(   nat_germany_hosp,   proportion = 0.35, by = c(\"location\", \"age_group\") ) #> Key: <location, age_group, reference_date, report_date> #>       location age_group report_date reference_date confirm #>         <fctr>    <fctr>      <IDat>         <IDat>   <num> #>    1:       DE       00+  2021-04-06           <NA>      50 #>    2:       DE       00+  2021-04-07           <NA>     159 #>    3:       DE       00+  2021-04-08           <NA>     247 #>    4:       DE       00+  2021-04-09           <NA>     233 #>    5:       DE       00+  2021-04-10           <NA>     241 #>   ---                                                       #> 7135:       DE       00+  2021-07-31     2021-07-30      33 #> 7136:       DE       00+  2021-08-01     2021-07-30      34 #> 7137:       DE       00+  2021-07-31     2021-07-31      25 #> 7138:       DE       00+  2021-08-01     2021-07-31      38 #> 7139:       DE       00+  2021-08-01     2021-08-01       6"},{"path":"https://package.epinowcast.org/reference/enw_stan_to_r.html","id":null,"dir":"Reference","previous_headings":"","what":"Expose epinowcast stan functions in R — enw_stan_to_r","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"function facilitates exposure Stan functions epinowcast package R. utilizes expose_functions() method cmdstanr::CmdStanModel purpose. function useful developers contributors epinowcast package, well users interested exploring prototyping model functionalities.","code":""},{"path":"https://package.epinowcast.org/reference/enw_stan_to_r.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"","code":"enw_stan_to_r(   files = list.files(include),   include = system.file(\"stan\", \"functions\", package = \"epinowcast\"),   global = TRUE,   verbose = TRUE,   ... )"},{"path":"https://package.epinowcast.org/reference/enw_stan_to_r.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"files character vector specifying names Stan files exposed. must include directory. Defaults Stan files include directory. Note following files contain overloaded functions exposed: \"delay_lpmf.stan\", \"allocate_observed_obs.stan\", \"obs_lpmf.stan\", \"effects_priors_lp.stan\". include character string specifying directory containing Stan files. Defaults 'stan/functions' directory epinowcast() package. global logical value indicating whether expose functions globally. Defaults TRUE. Passed expose_functions() method cmdstanr::CmdStanModel. verbose Logical, defaults TRUE. verbose messages shown. ... Additional arguments passed enw_model.","code":""},{"path":"https://package.epinowcast.org/reference/enw_stan_to_r.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"object class CmdStanModel functions model exposed use R.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_stan_to_r.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"","code":"if (FALSE) { # interactive() # Compile functions in stan/functions/hazard.stan stan_functions <- enw_stan_to_r(\"hazard.stan\") # These functions can now be used in R stan_functions$functions$prob_to_hazard(c(0.5, 0.1, 0.1)) # or exposed globally and used directly prob_to_hazard(c(0.5, 0.1, 0.1)) }"},{"path":"https://package.epinowcast.org/reference/enw_summarise_samples.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise posterior samples — enw_summarise_samples","title":"Summarise posterior samples — enw_summarise_samples","text":"function summarises posterior samples arbitrary strata. optionally holds observed data (variables \".draw\", \".iteration\", \".sample\", \".chain\" ) joins summarised posterior.","code":""},{"path":"https://package.epinowcast.org/reference/enw_summarise_samples.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise posterior samples — enw_summarise_samples","text":"","code":"enw_summarise_samples(   samples,   probs = c(0.05, 0.2, 0.35, 0.5, 0.65, 0.8, 0.95),   by = c(\"reference_date\", \".group\"),   link_with_obs = TRUE )"},{"path":"https://package.epinowcast.org/reference/enw_summarise_samples.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise posterior samples — enw_summarise_samples","text":"samples data.frame posterior samples least numeric sample variable. probs vector numeric probabilities produce quantile summaries . default 5%, 20%, 80%, 95% quantiles also minimum set required plotting functions work. character vector variables summarise . Defaults c(\"reference_date\", \".group\"). link_with_obs Logical, observed data linked posterior summary? useful plotting posterior observed data. Defaults TRUE.","code":""},{"path":"https://package.epinowcast.org/reference/enw_summarise_samples.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise posterior samples — enw_summarise_samples","text":"data.frame summarising posterior samples.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_summarise_samples.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise posterior samples — enw_summarise_samples","text":"","code":"fit <- enw_example(\"nowcast\") samples <- summary(fit, type = \"nowcast_sample\") enw_summarise_samples(samples, probs = c(0.05, 0.5, 0.95)) #> Key: <reference_date, .group> #>     reference_date .group report_date max_confirm location age_group confirm #>             <IDat>  <num>      <IDat>       <int>   <fctr>    <fctr>   <int> #>  1:     2021-08-03      1  2021-08-22         149       DE       00+     149 #>  2:     2021-08-04      1  2021-08-22         166       DE       00+     166 #>  3:     2021-08-05      1  2021-08-22         133       DE       00+     133 #>  4:     2021-08-06      1  2021-08-22         137       DE       00+     137 #>  5:     2021-08-07      1  2021-08-22         139       DE       00+     139 #>  6:     2021-08-08      1  2021-08-22          97       DE       00+      97 #>  7:     2021-08-09      1  2021-08-22          58       DE       00+      58 #>  8:     2021-08-10      1  2021-08-22         175       DE       00+     175 #>  9:     2021-08-11      1  2021-08-22         233       DE       00+     233 #> 10:     2021-08-12      1  2021-08-22         237       DE       00+     237 #> 11:     2021-08-13      1  2021-08-22         204       DE       00+     204 #> 12:     2021-08-14      1  2021-08-22         189       DE       00+     189 #> 13:     2021-08-15      1  2021-08-22         125       DE       00+     125 #> 14:     2021-08-16      1  2021-08-22          98       DE       00+      98 #> 15:     2021-08-17      1  2021-08-22         242       DE       00+     242 #> 16:     2021-08-18      1  2021-08-22         223       DE       00+     223 #> 17:     2021-08-19      1  2021-08-22         202       DE       00+     202 #> 18:     2021-08-20      1  2021-08-22         171       DE       00+     171 #> 19:     2021-08-21      1  2021-08-22         112       DE       00+     112 #> 20:     2021-08-22      1  2021-08-22          45       DE       00+      45 #>     reference_date .group report_date max_confirm location age_group confirm #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>                 <num> <num>         <num>   <num>  <num>      <num>   <num> #>  1:                 1    19   0.000000000 149.000    149   0.000000  0.0000 #>  2:                 1    18   0.000000000 167.426    167   1.318432  1.4826 #>  3:                 1    17   0.000000000 135.789    136   1.854162  1.4826 #>  4:                 1    16   0.000000000 141.288    141   2.378805  1.4826 #>  5:                 1    15   0.007194245 146.019    146   3.079630  2.9652 #>  6:                 1    14   0.000000000 103.853    104   2.969884  2.9652 #>  7:                 1    13   0.000000000  62.766     63   2.432110  2.9652 #>  8:                 1    12   0.000000000 185.035    185   3.847932  4.4478 #>  9:                 1    11   0.000000000 256.031    256   6.498790  5.9304 #> 10:                 1    10   0.004219409 267.692    267   7.713536  7.4130 #> 11:                 1     9   0.000000000 236.057    235   8.508004  7.4130 #> 12:                 1     8   0.015873016 231.407    231  10.083304 10.3782 #> 13:                 1     7   0.040000000 164.876    164   9.848127 10.3782 #> 14:                 1     6   0.010204082 128.858    128   8.134495  7.4130 #> 15:                 1     5   0.012396694 293.309    292  11.938427 11.8608 #> 16:                 1     4   0.017937220 293.042    292  15.799489 14.8260 #> 17:                 1     3   0.019801980 291.478    290  21.108128 19.2738 #> 18:                 1     2   0.070175439 293.178    291  29.440398 28.1694 #> 19:                 1     1   0.383928571 308.518    302  51.151522 46.7019 #> 20:                 1     0   1.000000000 375.644    363 103.424281 91.1799 #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>         q5   q50    q95 #>      <num> <num>  <num> #>  1: 149.00   149 149.00 #>  2: 166.00   167 170.00 #>  3: 133.00   136 139.00 #>  4: 138.00   141 146.00 #>  5: 141.00   146 152.00 #>  6: 100.00   104 109.00 #>  7:  59.00    63  67.00 #>  8: 179.00   185 192.00 #>  9: 246.00   256 268.00 #> 10: 256.00   267 282.00 #> 11: 223.00   235 251.00 #> 12: 216.00   231 250.00 #> 13: 150.00   164 181.00 #> 14: 117.00   128 143.00 #> 15: 276.00   292 315.00 #> 16: 268.00   292 320.00 #> 17: 260.00   290 330.00 #> 18: 250.00   291 344.00 #> 19: 239.00   302 399.10 #> 20: 233.95   363 565.05 #>         q5   q50    q95"},{"path":"https://package.epinowcast.org/reference/enw_unset_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Unset Stan cache location — enw_unset_cache","title":"Unset Stan cache location — enw_unset_cache","text":"Optionally removes enw_cache_location environment variable user .Renviron file /removes local environment. unset local cache want switch back using persistent cache, can reload .Renviron file using readRenviron(\"~/.Renviron\").","code":""},{"path":"https://package.epinowcast.org/reference/enw_unset_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Unset Stan cache location — enw_unset_cache","text":"","code":"enw_unset_cache(type = c(\"session\", \"persistent\", \"all\"))"},{"path":"https://package.epinowcast.org/reference/enw_unset_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Unset Stan cache location — enw_unset_cache","text":"type character string specifying type cache unset. can one \"session\", \"persistent\", \"\". Default \"session\". \"session\" unsets cache current session, \"persistent\" removes cache location user’s .Renviron file,\"\" options.","code":""},{"path":"https://package.epinowcast.org/reference/enw_unset_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Unset Stan cache location — enw_unset_cache","text":"prior cache location, existed otherwise NULL.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/enw_unset_cache.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Unset Stan cache location — enw_unset_cache","text":"","code":"if (FALSE) { # interactive() enw_unset_cache() }"},{"path":"https://package.epinowcast.org/reference/epinowcast-package.html","id":null,"dir":"Reference","previous_headings":"","what":"epinowcast: Flexible Hierarchical Nowcasting — epinowcast-package","title":"epinowcast: Flexible Hierarchical Nowcasting — epinowcast-package","text":"Tools enable flexible efficient hierarchical nowcasting right-truncated epidemiological time-series using semi-mechanistic Bayesian model support range reporting generative processes. Nowcasting, context, gaining situational awareness using currently available observations reporting patterns historical observations. can useful tracking spread infectious disease real-time: without nowcasting, changes trends can obfuscated partial reporting detection may delayed due use simpler methods like truncation. package designed epidemiological applications mind, applied set right-truncated time-series count data.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/epinowcast-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"epinowcast: Flexible Hierarchical Nowcasting — epinowcast-package","text":"Maintainer: Sam Abbott contact@samabbott.co.uk (ORCID) Authors: Adrian Lison adrian.lison@bsse.ethz.ch (ORCID) Sebastian Funk sebastian.funk@lshtm.ac.uk Carl Pearson carl.ab.pearson@gmail.com (ORCID) Hugo Gruson hugo.gruson@normalesup.org (ORCID) Felix Guenther felixguenther1@gmx.de (ORCID) Michael DeWitt .dewitt.jr@gmail.com (ORCID) contributors: Hannah Choi hannah.choi1@lshtm.ac.uk [contributor] Pratik Gupte pratik.gupte@lshtm.ac.uk (ORCID) [contributor] Joel Hellewell joel@ebi.ac.uk (ORCID) [contributor] Luis Rivas luisnicolasrivas@gmail.com [contributor] Sang Woo Park swp2@princeton.edu (ORCID) [contributor] Nathan McIntosh natemcintosh@gmail.com [contributor] James Mba Azam james.azam@lshtm.ac.uk (ORCID) [contributor] Kath Sherratt katharine.sherratt@lshtm.ac.uk (ORCID) [contributor] Nikos Bosse nikos.bosse@lshtm.ac.uk (ORCID) [contributor]","code":""},{"path":"https://package.epinowcast.org/reference/epinowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Nowcast using partially observed data — epinowcast","title":"Nowcast using partially observed data — epinowcast","text":"Provides user friendly interface around package functionality produce nowcast observed preprocessed data, series user defined models. default model assumes fixed parametric reporting distribution flexible expectation model used. Explore individual model components additional documentation see package case studies example model specifications different tasks.","code":""},{"path":"https://package.epinowcast.org/reference/epinowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Nowcast using partially observed data — epinowcast","text":"","code":"epinowcast(   data,   reference = epinowcast::enw_reference(parametric = ~1, distribution = \"lognormal\",     non_parametric = ~0, data = data),   report = epinowcast::enw_report(non_parametric = ~0, structural = ~0, data = data),   expectation = epinowcast::enw_expectation(r = ~0 + (1 | day:.group), generation_time =     1, observation = ~1, latent_reporting_delay = 1, data = data),   missing = epinowcast::enw_missing(formula = ~0, data = data),   obs = epinowcast::enw_obs(family = \"negbin\", data = data),   fit = epinowcast::enw_fit_opts(sampler = epinowcast::enw_sample, nowcast = TRUE, pp =     FALSE, likelihood = TRUE, debug = FALSE, output_loglik = FALSE),   model = epinowcast::enw_model(),   priors,   ... )"},{"path":"https://package.epinowcast.org/reference/epinowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Nowcast using partially observed data — epinowcast","text":"data Output enw_preprocess_data(). reference reference date indexed reporting process model specification defined using enw_reference(). report report date indexed reporting process model specification defined using enw_report(). expectation expectation model specification defined using enw_expectation(). default set highly flexible random effect reference date group thus weakly informed. Depending context (particular density data reporting) choices enforce assumptions may appropriate (example weekly random walk (specified using rw(week, = .group))). missing missing reference date model specification defined using enw_missing(). default set used. obs observation model defined enw_obs(). Observations also processed within function use modelling. fit Model fit options defined using enw_fit_opts(). includes sampler function use (package default enw_sample()), whether now nowcast used, etc. See enw_fit_opts() details. model model use within fit. default uses enw_model(). priors data.frame following variables: variable, mean, sd describing normal priors. Priors appropriate format returned enw_reference() well similar model specification functions. Priors data.frame replace default priors specified model component. ... Additional model modules pass model. User modules may used currently require supplied model adapted.","code":""},{"path":"https://package.epinowcast.org/reference/epinowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Nowcast using partially observed data — epinowcast","text":"object class \"epinowcast\" inherits enw_preprocess_data() data.table, combines input data, priors, output sampler specified enw_fit_opts().","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/epinowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Nowcast using partially observed data — epinowcast","text":"","code":"if (FALSE) { # interactive() # Load data.table and ggplot2 library(data.table) library(ggplot2)  # Use 2 cores options(mc.cores = 2) # Load and filter germany hospitalisations nat_germany_hosp <-   germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] nat_germany_hosp <- enw_filter_report_dates(   nat_germany_hosp,   latest_date = \"2021-10-01\" ) # Make sure observations are complete nat_germany_hosp <- enw_complete_dates(   nat_germany_hosp,   by = c(\"location\", \"age_group\") ) # Make a retrospective dataset retro_nat_germany <- enw_filter_report_dates(   nat_germany_hosp,   remove_days = 40 ) retro_nat_germany <- enw_filter_reference_dates(   retro_nat_germany,   include_days = 40 ) # Get latest observations for the same time period latest_obs <- enw_latest_data(nat_germany_hosp) latest_obs <- enw_filter_reference_dates(   latest_obs,   remove_days = 40, include_days = 20 ) # Preprocess observations (note this maximum delay is likely too short) pobs <- enw_preprocess_data(retro_nat_germany, max_delay = 20) # Fit the default nowcast model and produce a nowcast # Note that we have reduced samples for this example to reduce runtimes nowcast <- epinowcast(pobs,   fit = enw_fit_opts(     save_warmup = FALSE, pp = TRUE,     chains = 2, iter_warmup = 500, iter_sampling = 500   ) ) nowcast # plot the nowcast vs latest available observations plot(nowcast, latest_obs = latest_obs)  # plot posterior predictions for the delay distribution by date plot(nowcast, type = \"posterior\") +   facet_wrap(vars(reference_date), scale = \"free\") }"},{"path":"https://package.epinowcast.org/reference/extract_obs_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract observation metadata — extract_obs_metadata","title":"Extract observation metadata — extract_obs_metadata","text":"function extracts metadata provided dataset used observation model.","code":""},{"path":"https://package.epinowcast.org/reference/extract_obs_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract observation metadata — extract_obs_metadata","text":"","code":"extract_obs_metadata(new_confirm, observation_indicator = NULL)"},{"path":"https://package.epinowcast.org/reference/extract_obs_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract observation metadata — extract_obs_metadata","text":"new_confirm data.table containing columns: \"reference_date\", \"delay\", \".group\", \"new_confirm\", \"max_obs_delay\". produced enw_preprocess_data() new_confirm output addition \"max_obs_delay\" column produced add_max_observed_delay(). observation_indicator character string specifying column name new_confirm indicates whether observation observed . column logical vector. NULL (default), observations considered observed.","code":""},{"path":"https://package.epinowcast.org/reference/extract_obs_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract observation metadata — extract_obs_metadata","text":"list containing: st: time index snapshot (snapshot time). ts: snapshot index time group. sl: number reported observations per snapshot (snapshot length). csl: cumulative version sl. lsl: number consecutive reported observations per snapshot accounting missing data. clsl: cumulative version lsl. nsl: number observed observations per snapshot (snapshot length). cnsl: cumulative version nsl. sg: group index snapshot (snapshot group).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/extract_sparse_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract sparse matrix elements — extract_sparse_matrix","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"helper function allows extraction sparse matrix matrix using similar approach implemented rstan::extract_sparse_parts() returns elements named list use stan. function used construction expectation model (see enw_expectation()).","code":""},{"path":"https://package.epinowcast.org/reference/extract_sparse_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"","code":"extract_sparse_matrix(mat, prefix = \"\")"},{"path":"https://package.epinowcast.org/reference/extract_sparse_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"mat matrix extract sparse matrix . prefix character string prefix names returned list.","code":""},{"path":"https://package.epinowcast.org/reference/extract_sparse_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"list representing sparse matrix, containing: nw: Count non-zero elements mat. w: Vector non-zero elements mat. Equivalent numeric values mat excluding zeros. nv: Length v. v: Vector row indices corresponding non-zero element w. Indicates row location mat non-zero value. nu: Length u. u: Vector indicating starting indices w non-zero elements row mat. Helps identify partition w different rows mat.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/extract_sparse_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"","code":"mat <- matrix(1:12, nrow = 4) mat[2, 2] <- 0 mat[3, 1] <- 0 extract_sparse_matrix(mat) #> $nw #> [1] 10 #>  #> $w #>  [1]  1  5  9  2 10  7 11  4  8 12 #>  #> $nv #> [1] 10 #>  #> $v #>  [1] 1 2 3 1 3 2 3 1 2 3 #>  #> $nu #> [1] 5 #>  #> $u #> [1]  1  4  6  8 11 #>"},{"path":"https://package.epinowcast.org/reference/germany_covid19_hosp.html","id":null,"dir":"Reference","previous_headings":"","what":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","title":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","text":"Hospitalisations Germany date report reference","code":""},{"path":"https://package.epinowcast.org/reference/germany_covid19_hosp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","text":"","code":"germany_covid19_hosp"},{"path":"https://package.epinowcast.org/reference/germany_covid19_hosp.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","text":"object class data.table (inherits data.frame) 1536885 rows 5 columns.","code":""},{"path":"https://package.epinowcast.org/reference/germany_covid19_hosp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","text":"data.table","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/get_internal_timestep.html","id":null,"dir":"Reference","previous_headings":"","what":"Get internal timestep — get_internal_timestep","title":"Get internal timestep — get_internal_timestep","text":"function converts string representation timestep corresponding numeric value returns numeric input (whole number). \"day\", \"week\", returns 1 7 respectively. \"month\", returns \"month\" months fixed number days. input numeric whole number, returned .","code":""},{"path":"https://package.epinowcast.org/reference/get_internal_timestep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get internal timestep — get_internal_timestep","text":"","code":"get_internal_timestep(timestep)"},{"path":"https://package.epinowcast.org/reference/get_internal_timestep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get internal timestep — get_internal_timestep","text":"timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days.","code":""},{"path":"https://package.epinowcast.org/reference/get_internal_timestep.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get internal timestep — get_internal_timestep","text":"numeric value representing number days \"day\" \"week\", \"month\" \"month\",  input value numeric whole number.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/get_renviron_contents.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify cache location in .Renviron — get_renviron_contents","title":"Identify cache location in .Renviron — get_renviron_contents","text":"function retrieves environment variable settings manages .Renviron file user's project home directory. project directory examined first, exists.","code":""},{"path":"https://package.epinowcast.org/reference/get_renviron_contents.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify cache location in .Renviron — get_renviron_contents","text":"","code":"get_renviron_contents()"},{"path":"https://package.epinowcast.org/reference/get_renviron_contents.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify cache location in .Renviron — get_renviron_contents","text":"list containing contents .Renviron file path.","code":""},{"path":"https://package.epinowcast.org/reference/is.Date.html","id":null,"dir":"Reference","previous_headings":"","what":"Check an object is a Date — is.Date","title":"Check an object is a Date — is.Date","text":"Checks object date","code":""},{"path":"https://package.epinowcast.org/reference/is.Date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check an object is a Date — is.Date","text":"","code":"is.Date(x)"},{"path":"https://package.epinowcast.org/reference/is.Date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check an object is a Date — is.Date","text":"x object","code":""},{"path":"https://package.epinowcast.org/reference/is.Date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check an object is a Date — is.Date","text":"logical","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/latest_obs_as_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert latest observed data to a matrix — latest_obs_as_matrix","title":"Convert latest observed data to a matrix — latest_obs_as_matrix","text":"Convert latest observed data matrix","code":""},{"path":"https://package.epinowcast.org/reference/latest_obs_as_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert latest observed data to a matrix — latest_obs_as_matrix","text":"","code":"latest_obs_as_matrix(latest)"},{"path":"https://package.epinowcast.org/reference/latest_obs_as_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert latest observed data to a matrix — latest_obs_as_matrix","text":"latest latest data.frame output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/reference/latest_obs_as_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert latest observed data to a matrix — latest_obs_as_matrix","text":"matrix column group row reference date","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/parse_formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse a formula into components — parse_formula","title":"Parse a formula into components — parse_formula","text":"function uses series internal functions break input formula component parts can handled separately. Currently supported components fixed effects, lme4 style random effects, random walks using rw() helper function.","code":""},{"path":"https://package.epinowcast.org/reference/parse_formula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse a formula into components — parse_formula","text":"","code":"parse_formula(formula)"},{"path":"https://package.epinowcast.org/reference/parse_formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse a formula into components — parse_formula","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function.","code":""},{"path":"https://package.epinowcast.org/reference/parse_formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse a formula into components — parse_formula","text":"list formula components. currently include: fixed: character vector fixed effect terms random: list lme4 style random effects rw: character vector rw() random walk terms.","code":""},{"path":"https://package.epinowcast.org/reference/parse_formula.html","id":"reference","dir":"Reference","previous_headings":"","what":"Reference","title":"Parse a formula into components — parse_formula","text":"random walk functions used internally function adapted code written J Scott (MIT license) part epidemia package (https://github.com/ImperialCollegeLondon/epidemia/).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/parse_formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parse a formula into components — parse_formula","text":"","code":"epinowcast:::parse_formula(~ 1 + age_group + location) #> $fixed #> [1] \"1\"         \"age_group\" \"location\"  #>  #> $random #> NULL #>  #> $rw #> character(0) #>   epinowcast:::parse_formula(~ 1 + age_group + (1 | location)) #> $fixed #> [1] \"1\"         \"age_group\" #>  #> $random #> $random[[1]] #> 1 | location #>  #>  #> $rw #> character(0) #>   epinowcast:::parse_formula(~ 1 + (age_group | location)) #> $fixed #> [1] \"1\" #>  #> $random #> $random[[1]] #> age_group | location #>  #>  #> $rw #> character(0) #>   epinowcast:::parse_formula(~ 1 + (1 | location) + rw(week, location)) #> $fixed #> [1] \"1\" #>  #> $random #> $random[[1]] #> 1 | location #>  #>  #> $rw #> [1] \"rw(week, location)\" #>"},{"path":"https://package.epinowcast.org/reference/plot.epinowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot method for epinowcast — plot.epinowcast","title":"Plot method for epinowcast — plot.epinowcast","text":"plot method class \"epinowcast\".","code":""},{"path":"https://package.epinowcast.org/reference/plot.epinowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot method for epinowcast — plot.epinowcast","text":"","code":"# S3 method for epinowcast plot(   x,   latest_obs = NULL,   type = c(\"nowcast\", \"posterior_prediction\"),   log = FALSE,   ... )"},{"path":"https://package.epinowcast.org/reference/plot.epinowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot method for epinowcast — plot.epinowcast","text":"x data.table output produced epinowcast(). latest_obs data.frame observed data may passed lower level methods. type Character string indicating plot required; enforced base::match.arg(). Currently supported options: \"nowcast\" plots nowcast dataset along latest available observed data using enw_plot_nowcast_quantiles(), \"posterior_prediction\" plots observations reported time simulated observations model using enw_plot_pp_quantiles(). log Logical, defaults FALSE. counts plot log scale. ... Additional arguments plot function specified type.","code":""},{"path":"https://package.epinowcast.org/reference/plot.epinowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot method for epinowcast — plot.epinowcast","text":"ggplot2 object","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/plot.epinowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot method for epinowcast — plot.epinowcast","text":"","code":"nowcast <- enw_example(\"nowcast\") latest_obs <- enw_example(\"obs\")  # Plot nowcast plot(nowcast, latest_obs = latest_obs, type = \"nowcast\")   # Plot posterior predictions by reference date plot(nowcast, type = \"posterior_prediction\") +  ggplot2::facet_wrap(ggplot2::vars(reference_date), scales = \"free\") #> `geom_line()`: Each group consists of only one observation. #> ℹ Do you need to adjust the group aesthetic? #> `geom_line()`: Each group consists of only one observation. #> ℹ Do you need to adjust the group aesthetic?"},{"path":"https://package.epinowcast.org/reference/re.html","id":null,"dir":"Reference","previous_headings":"","what":"Defines random effect terms using the lme4 syntax — re","title":"Defines random effect terms using the lme4 syntax — re","text":"Defines random effect terms using lme4 syntax","code":""},{"path":"https://package.epinowcast.org/reference/re.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Defines random effect terms using the lme4 syntax — re","text":"","code":"re(formula)"},{"path":"https://package.epinowcast.org/reference/re.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Defines random effect terms using the lme4 syntax — re","text":"formula random effect returned lme4::findbars() random effect defined using lme4 syntax formula. Currently simplified random effects (.e LHS | RHS) supported.","code":""},{"path":"https://package.epinowcast.org/reference/re.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Defines random effect terms using the lme4 syntax — re","text":"list defining fixed random effects specified random effect","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/re.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Defines random effect terms using the lme4 syntax — re","text":"","code":"form <- epinowcast:::parse_formula(~ 1 + (1 | age_group)) re(form$random[[1]]) #> $fixed #> [1] \"1\" #>  #> $random #> [1] \"age_group\" #>  #> attr(,\"class\") #> [1] \"enw_re_term\"  form <- epinowcast:::parse_formula(~ 1 + (location | age_group)) re(form$random[[1]]) #> $fixed #> [1] \"location\" #>  #> $random #> [1] \"age_group\" #>  #> attr(,\"class\") #> [1] \"enw_re_term\""},{"path":"https://package.epinowcast.org/reference/remove_profiling.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove profiling statements from a character vector representing stan code — remove_profiling","title":"Remove profiling statements from a character vector representing stan code — remove_profiling","text":"Remove profiling statements character vector representing stan code","code":""},{"path":"https://package.epinowcast.org/reference/remove_profiling.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove profiling statements from a character vector representing stan code — remove_profiling","text":"","code":"remove_profiling(s)"},{"path":"https://package.epinowcast.org/reference/remove_profiling.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove profiling statements from a character vector representing stan code — remove_profiling","text":"s Character vector representing stan code","code":""},{"path":"https://package.epinowcast.org/reference/remove_profiling.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove profiling statements from a character vector representing stan code — remove_profiling","text":"character vector stan code without profiling statements","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/remove_rw_terms.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove random walk terms from a formula object — remove_rw_terms","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"function removes random walk terms denoted using rw() formula can processed .","code":""},{"path":"https://package.epinowcast.org/reference/remove_rw_terms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"","code":"remove_rw_terms(formula)"},{"path":"https://package.epinowcast.org/reference/remove_rw_terms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function.","code":""},{"path":"https://package.epinowcast.org/reference/remove_rw_terms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"formula object random walk terms removed.","code":""},{"path":"https://package.epinowcast.org/reference/remove_rw_terms.html","id":"reference","dir":"Reference","previous_headings":"","what":"Reference","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"function adapted code written J Scott (MIT license) part epidemia package (https://github.com/ImperialCollegeLondon/epidemia/).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/remove_rw_terms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"","code":"epinowcast:::remove_rw_terms(~ 1 + age_group + location) #> ~1 + age_group + location #> <environment: 0x564e5ed95a90>  epinowcast:::remove_rw_terms(~ 1 + age_group + location + rw(week, location)) #> ~1 + age_group + location #> <environment: 0x564e5ed2ff88>"},{"path":"https://package.epinowcast.org/reference/rw.html","id":null,"dir":"Reference","previous_headings":"","what":"Adds random walks with Gaussian steps to the model. — rw","title":"Adds random walks with Gaussian steps to the model. — rw","text":"call rw() can used 'formula' argument model construction functions epinowcast package enw_formula(). evaluate arguments instead simply passes information use model construction.","code":""},{"path":"https://package.epinowcast.org/reference/rw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adds random walks with Gaussian steps to the model. — rw","text":"","code":"rw(time, by, type = c(\"independent\", \"dependent\"))"},{"path":"https://package.epinowcast.org/reference/rw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adds random walks with Gaussian steps to the model. — rw","text":"time Defines random walk time period. Defines grouping parameter used random walk. specified grouping used. Currently limited single variable. type Character string, standard deviation grouped random walks estimated: \"independent\", \"dependent\" across groups; enforced base::match.arg().","code":""},{"path":"https://package.epinowcast.org/reference/rw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adds random walks with Gaussian steps to the model. — rw","text":"list defining time frame, group, type class \"enw_rw_term\" can interpreted construct_rw().","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/rw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Adds random walks with Gaussian steps to the model. — rw","text":"","code":"rw(time) #> $time #> [1] \"time\" #>  #> $by #> NULL #>  #> $type #> [1] \"independent\" #>  #> attr(,\"class\") #> [1] \"enw_rw_term\"  rw(time, location) #> $time #> [1] \"time\" #>  #> $by #> [1] \"location\" #>  #> $type #> [1] \"independent\" #>  #> attr(,\"class\") #> [1] \"enw_rw_term\"  rw(time, location, type = \"dependent\") #> $time #> [1] \"time\" #>  #> $by #> [1] \"location\" #>  #> $type #> [1] \"dependent\" #>  #> attr(,\"class\") #> [1] \"enw_rw_term\""},{"path":"https://package.epinowcast.org/reference/rw_terms.html","id":null,"dir":"Reference","previous_headings":"","what":"Finds random walk terms in a formula object — rw_terms","title":"Finds random walk terms in a formula object — rw_terms","text":"function extracts random walk terms denoted using rw() formula can processed .","code":""},{"path":"https://package.epinowcast.org/reference/rw_terms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finds random walk terms in a formula object — rw_terms","text":"","code":"rw_terms(formula)"},{"path":"https://package.epinowcast.org/reference/rw_terms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finds random walk terms in a formula object — rw_terms","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function.","code":""},{"path":"https://package.epinowcast.org/reference/rw_terms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Finds random walk terms in a formula object — rw_terms","text":"character vector containing random walk terms identified supplied formula.","code":""},{"path":"https://package.epinowcast.org/reference/rw_terms.html","id":"reference","dir":"Reference","previous_headings":"","what":"Reference","title":"Finds random walk terms in a formula object — rw_terms","text":"function adapted code written J Scott (MIT license) part epidemia package (https://github.com/ImperialCollegeLondon/epidemia/).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/rw_terms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Finds random walk terms in a formula object — rw_terms","text":"","code":"epinowcast:::rw_terms(~ 1 + age_group + location) #> character(0)  epinowcast:::rw_terms(~ 1 + age_group + location + rw(week, location)) #> [1] \"rw(week, location)\""},{"path":"https://package.epinowcast.org/reference/simulate_double_censored_pmf.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate daily double censored PMF — simulate_double_censored_pmf","title":"Simulate daily double censored PMF — simulate_double_censored_pmf","text":"function simulates probability mass function  daily double-censored process. process involves two distributions: primary distribution represents censoring process primary event another distribution (offset primary).","code":""},{"path":"https://package.epinowcast.org/reference/simulate_double_censored_pmf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate daily double censored PMF — simulate_double_censored_pmf","text":"","code":"simulate_double_censored_pmf(   max,   fun_primary = stats::runif,   primary_args = list(),   fun_dist = stats::rlnorm,   dist_args = list(...),   n = 1e+06,   ... )"},{"path":"https://package.epinowcast.org/reference/simulate_double_censored_pmf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate daily double censored PMF — simulate_double_censored_pmf","text":"max Maximum value computed CDF. specified, maximum value maximum simulated delay. fun_primary Primary distribution function (default runif). primary_args List additional arguments passed primary distribution function. fun_dist Distribution function added primary (default rlnorm). dist_args List additional arguments passed distribution function. n Number simulations (default 1e6). ... Additional arguments passed distribution function. alternative dist_args.","code":""},{"path":"https://package.epinowcast.org/reference/simulate_double_censored_pmf.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate daily double censored PMF — simulate_double_censored_pmf","text":"numeric vector representing PMF.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/simulate_double_censored_pmf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate daily double censored PMF — simulate_double_censored_pmf","text":"","code":"simulate_double_censored_pmf(10, meanlog = 0, sdlog = 1) #>  [1] 0.237948 0.410015 0.168812 0.076308 0.039626 0.022648 0.013675 0.008818 #>  [9] 0.005896 0.004022 0.002810"},{"path":"https://package.epinowcast.org/reference/split_formula_to_terms.html","id":null,"dir":"Reference","previous_headings":"","what":"Split formula into individual terms — split_formula_to_terms","title":"Split formula into individual terms — split_formula_to_terms","text":"Split formula individual terms","code":""},{"path":"https://package.epinowcast.org/reference/split_formula_to_terms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Split formula into individual terms — split_formula_to_terms","text":"","code":"split_formula_to_terms(formula)"},{"path":"https://package.epinowcast.org/reference/split_formula_to_terms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Split formula into individual terms — split_formula_to_terms","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function.","code":""},{"path":"https://package.epinowcast.org/reference/split_formula_to_terms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Split formula into individual terms — split_formula_to_terms","text":"character vector formula terms","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/split_formula_to_terms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Split formula into individual terms — split_formula_to_terms","text":"","code":"epinowcast:::split_formula_to_terms(~ 1 + age_group + location) #> [1] \"1\"         \"age_group\" \"location\""},{"path":"https://package.epinowcast.org/reference/stan_fns_as_string.html","id":null,"dir":"Reference","previous_headings":"","what":"Read in a stan function file as a character string — stan_fns_as_string","title":"Read in a stan function file as a character string — stan_fns_as_string","text":"Read stan function file character string","code":""},{"path":"https://package.epinowcast.org/reference/stan_fns_as_string.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read in a stan function file as a character string — stan_fns_as_string","text":"","code":"stan_fns_as_string(files, include)"},{"path":"https://package.epinowcast.org/reference/stan_fns_as_string.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read in a stan function file as a character string — stan_fns_as_string","text":"files character vector specifying names Stan files exposed. must include directory. Defaults Stan files include directory. Note following files contain overloaded functions exposed: \"delay_lpmf.stan\", \"allocate_observed_obs.stan\", \"obs_lpmf.stan\", \"effects_priors_lp.stan\". include character string specifying directory containing Stan files. Defaults 'stan/functions' directory epinowcast() package.","code":""},{"path":"https://package.epinowcast.org/reference/stan_fns_as_string.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read in a stan function file as a character string — stan_fns_as_string","text":"character string stan functions.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/summary.epinowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary method for epinowcast — summary.epinowcast","title":"Summary method for epinowcast — summary.epinowcast","text":"summary method class \"epinowcast\".","code":""},{"path":"https://package.epinowcast.org/reference/summary.epinowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary method for epinowcast — summary.epinowcast","text":"","code":"# S3 method for epinowcast summary(   object,   type = c(\"nowcast\", \"nowcast_samples\", \"fit\", \"posterior_prediction\"),   max_delay = object$max_delay,   ... )"},{"path":"https://package.epinowcast.org/reference/summary.epinowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary method for epinowcast — summary.epinowcast","text":"object data.table output epinowcast(). type Character string indicating summary return; enforced base::match.arg(). Supported options : \"nowcast\" summarises nowcast posterior enw_nowcast_summary(), \"nowcast_samples\" samples latest enw_nowcast_samples(), \"fit\" returns summarised cmdstanr fit enw_posterior(), \"posterior_prediction\" returns summarised posterior predictions observations fitting using enw_pp_summary(). max_delay Maximum delay nowcasts summarised. Must equal (default) larger modelled maximum delay. larger, nowcasts unmodelled dates added assuming case counts beyond modelled maximum delay fully observed. ... Additional arguments passed summary specified type.","code":""},{"path":"https://package.epinowcast.org/reference/summary.epinowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary method for epinowcast — summary.epinowcast","text":"summary data.frame","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/summary.epinowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summary method for epinowcast — summary.epinowcast","text":"","code":"nowcast <- enw_example(\"nowcast\")  # Summarise nowcast posterior summary(nowcast, type = \"nowcast\") #>     reference_date report_date .group max_confirm location age_group confirm #>             <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>  1:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>  2:     2021-08-04  2021-08-22      1         166       DE       00+     166 #>  3:     2021-08-05  2021-08-22      1         133       DE       00+     133 #>  4:     2021-08-06  2021-08-22      1         137       DE       00+     137 #>  5:     2021-08-07  2021-08-22      1         139       DE       00+     139 #>  6:     2021-08-08  2021-08-22      1          97       DE       00+      97 #>  7:     2021-08-09  2021-08-22      1          58       DE       00+      58 #>  8:     2021-08-10  2021-08-22      1         175       DE       00+     175 #>  9:     2021-08-11  2021-08-22      1         233       DE       00+     233 #> 10:     2021-08-12  2021-08-22      1         237       DE       00+     237 #> 11:     2021-08-13  2021-08-22      1         204       DE       00+     204 #> 12:     2021-08-14  2021-08-22      1         189       DE       00+     189 #> 13:     2021-08-15  2021-08-22      1         125       DE       00+     125 #> 14:     2021-08-16  2021-08-22      1          98       DE       00+      98 #> 15:     2021-08-17  2021-08-22      1         242       DE       00+     242 #> 16:     2021-08-18  2021-08-22      1         223       DE       00+     223 #> 17:     2021-08-19  2021-08-22      1         202       DE       00+     202 #> 18:     2021-08-20  2021-08-22      1         171       DE       00+     171 #> 19:     2021-08-21  2021-08-22      1         112       DE       00+     112 #> 20:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>     reference_date report_date .group max_confirm location age_group confirm #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>                 <num> <num>         <num>   <num>  <num>      <num>   <num> #>  1:                 1    19   0.000000000 149.000    149   0.000000  0.0000 #>  2:                 1    18   0.000000000 167.426    167   1.318432  1.4826 #>  3:                 1    17   0.000000000 135.789    136   1.854162  1.4826 #>  4:                 1    16   0.000000000 141.288    141   2.378805  1.4826 #>  5:                 1    15   0.007194245 146.019    146   3.079630  2.9652 #>  6:                 1    14   0.000000000 103.853    104   2.969884  2.9652 #>  7:                 1    13   0.000000000  62.766     63   2.432110  2.9652 #>  8:                 1    12   0.000000000 185.035    185   3.847932  4.4478 #>  9:                 1    11   0.000000000 256.031    256   6.498790  5.9304 #> 10:                 1    10   0.004219409 267.692    267   7.713536  7.4130 #> 11:                 1     9   0.000000000 236.057    235   8.508004  7.4130 #> 12:                 1     8   0.015873016 231.407    231  10.083304 10.3782 #> 13:                 1     7   0.040000000 164.876    164   9.848127 10.3782 #> 14:                 1     6   0.010204082 128.858    128   8.134495  7.4130 #> 15:                 1     5   0.012396694 293.309    292  11.938427 11.8608 #> 16:                 1     4   0.017937220 293.042    292  15.799489 14.8260 #> 17:                 1     3   0.019801980 291.478    290  21.108128 19.2738 #> 18:                 1     2   0.070175439 293.178    291  29.440398 28.1694 #> 19:                 1     1   0.383928571 308.518    302  51.151522 46.7019 #> 20:                 1     0   1.000000000 375.644    363 103.424281 91.1799 #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>         q5   q20    q35   q50    q65   q80    q95      rhat  ess_bulk  ess_tail #>      <num> <num>  <num> <num>  <num> <num>  <num>     <num>     <num>     <num> #>  1: 149.00   149 149.00   149 149.00   149 149.00        NA        NA        NA #>  2: 166.00   166 167.00   167 168.00   168 170.00 0.9997778 1003.5643  828.2026 #>  3: 133.00   134 135.00   136 136.00   137 139.00 1.0005878  991.0805  916.0962 #>  4: 138.00   139 140.00   141 142.00   143 146.00 1.0056729 1041.2029  872.9772 #>  5: 141.00   143 145.00   146 147.00   148 152.00 1.0001025  991.1639  885.1056 #>  6: 100.00   101 102.65   104 105.00   106 109.00 0.9991163  982.3833  917.3468 #>  7:  59.00    61  62.00    63  63.00    65  67.00 1.0009067  911.2098  793.6687 #>  8: 179.00   182 183.00   185 186.00   188 192.00 1.0002531 1004.7790  972.0392 #>  9: 246.00   251 253.00   256 258.00   261 268.00 0.9997137 1025.3311  936.5679 #> 10: 256.00   261 265.00   267 270.00   274 282.00 1.0004951 1040.1417 1008.8448 #> 11: 223.00   229 233.00   235 239.00   243 251.00 0.9985724 1201.4893  863.9704 #> 12: 216.00   222 227.00   231 234.00   240 250.00 1.0035756  751.4194  655.0188 #> 13: 150.00   157 160.00   164 168.00   173 181.00 1.0025186  927.9122  920.9413 #> 14: 117.00   122 125.00   128 131.00   135 143.00 1.0010009 1080.4014  964.2083 #> 15: 276.00   283 288.00   292 297.00   303 315.00 1.0002316 1159.2978  984.6276 #> 16: 268.00   280 286.00   292 299.00   306 320.00 1.0047058 1087.6045  957.9921 #> 17: 260.00   274 282.00   290 298.35   308 330.00 1.0002334 1129.6391  914.6275 #> 18: 250.00   269 280.00   291 301.00   316 344.00 0.9993186 1126.3831  903.3288 #> 19: 239.00   267 286.00   302 322.00   343 399.10 0.9992178 1328.2832  998.7573 #> 20: 233.95   292 327.00   363 397.00   447 565.05 0.9991666 1554.0485  999.3402 #>         q5   q20    q35   q50    q65   q80    q95      rhat  ess_bulk  ess_tail  # Nowcast posterior samples summary(nowcast, type = \"nowcast_samples\") #>        reference_date report_date .group max_confirm location age_group confirm #>                <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     1:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     2:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     3:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     4:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     5:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>    ---                                                                          #> 19996:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19997:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19998:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19999:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 20000:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>        cum_prop_reported delay prop_reported .chain .iteration .draw sample #>                    <num> <num>         <num>  <int>      <int> <int>  <num> #>     1:                 1    19             0      1          1     1    149 #>     2:                 1    19             0      1          2     2    149 #>     3:                 1    19             0      1          3     3    149 #>     4:                 1    19             0      1          4     4    149 #>     5:                 1    19             0      1          5     5    149 #>    ---                                                                      #> 19996:                 1     0             1      2        496   996    338 #> 19997:                 1     0             1      2        497   997    598 #> 19998:                 1     0             1      2        498   998    219 #> 19999:                 1     0             1      2        499   999    508 #> 20000:                 1     0             1      2        500  1000    297  # Nowcast model fit summary(nowcast, type = \"fit\") #>                    variable          mean        median          sd        mad #>                      <char>         <num>         <num>       <num>      <num> #>   1:                   lp__ -1373.3815400 -1372.7100000   7.4386468  7.1831970 #>   2: expr_lelatent_int[1,1]     4.1775366     4.1753300   0.1807851  0.1778527 #>   3:           expr_beta[1]     0.3568452     0.3851365   0.6071031  0.5922742 #>   4:           expr_beta[2]    -0.3387549    -0.3541355   0.5316359  0.5444528 #>   5:           expr_beta[3]    -0.8258812    -0.8167105   0.5264853  0.5388206 #>  ---                                                                           #> 852:       pp_inf_obs[16,1]   293.0420000   292.0000000  15.7994892 14.8260000 #> 853:       pp_inf_obs[17,1]   291.4780000   290.0000000  21.1081280 19.2738000 #> 854:       pp_inf_obs[18,1]   293.1780000   291.0000000  29.4403983 28.1694000 #> 855:       pp_inf_obs[19,1]   308.5180000   302.0000000  51.1515215 46.7019000 #> 856:       pp_inf_obs[20,1]   375.6440000   363.0000000 103.4242807 91.1799000 #>                 q5           q20           q80           q95      rhat #>              <num>         <num>         <num>         <num>     <num> #>   1: -1386.3515000 -1379.3860000 -1367.2600000 -1.362146e+03 1.0165644 #>   2:     3.8798325     4.0294840     4.3297920  4.480233e+00 1.0003207 #>   3:    -0.6494806    -0.1630136     0.8722602  1.317674e+00 1.0001047 #>   4:    -1.2489460    -0.7875022     0.1375294  5.137213e-01 1.0029342 #>   5:    -1.6927830    -1.2671460    -0.3640068 -1.222673e-02 1.0007299 #>  ---                                                                   #> 852:   268.0000000   280.0000000   306.0000000  3.200000e+02 1.0047058 #> 853:   260.0000000   274.0000000   308.0000000  3.300000e+02 1.0002334 #> 854:   250.0000000   269.0000000   316.0000000  3.440000e+02 0.9993186 #> 855:   239.0000000   267.0000000   343.0000000  3.991000e+02 0.9992178 #> 856:   233.9500000   292.0000000   447.0000000  5.650500e+02 0.9991666 #>       ess_bulk ess_tail #>          <num>    <num> #>   1:  202.8285 433.4364 #>   2:  990.9203 725.2305 #>   3:  867.1216 773.7010 #>   4: 1370.1095 692.4391 #>   5: 1019.0570 680.3411 #>  ---                    #> 852: 1087.6045 957.9921 #> 853: 1129.6391 914.6275 #> 854: 1126.3831 903.3288 #> 855: 1328.2832 998.7573 #> 856: 1554.0485 999.3402  # Posterior predictions summary(nowcast, type = \"posterior_prediction\") #>      reference_date report_date .group max_confirm location age_group confirm #>              <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>   1:     2021-07-13  2021-07-13      1          59       DE       00+      21 #>   2:     2021-07-13  2021-07-14      1          59       DE       00+      33 #>   3:     2021-07-13  2021-07-15      1          59       DE       00+      36 #>   4:     2021-07-13  2021-07-16      1          59       DE       00+      40 #>   5:     2021-07-13  2021-07-17      1          59       DE       00+      43 #>  ---                                                                          #> 626:     2021-08-20  2021-08-21      1         171       DE       00+     159 #> 627:     2021-08-20  2021-08-22      1         171       DE       00+     171 #> 628:     2021-08-21  2021-08-21      1         112       DE       00+      69 #> 629:     2021-08-21  2021-08-22      1         112       DE       00+     112 #> 630:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>      cum_prop_reported delay new_confirm prop_reported   mean median        sd #>                  <num> <num>       <int>         <num>  <num>  <num>     <num> #>   1:         0.3559322     0          21    0.35593220 19.639     19  8.642649 #>   2:         0.5593220     1          12    0.20338983 20.812     19  9.566932 #>   3:         0.6101695     2           3    0.05084746  6.137      6  3.627311 #>   4:         0.6779661     3           4    0.06779661  4.147      4  2.595019 #>   5:         0.7288136     4           3    0.05084746  2.396      2  1.842438 #>  ---                                                                           #> 626:         0.9298246     1          61    0.35672515 79.760     76 31.667100 #> 627:         1.0000000     2          12    0.07017544 12.362     11  6.193328 #> 628:         0.6160714     0          69    0.61607143 74.098     70 30.701090 #> 629:         1.0000000     1          43    0.38392857 47.543     43 22.022605 #> 630:         1.0000000     0          45    1.00000000 40.036     37 18.937617 #>          mad    q5   q20   q35   q50   q65   q80    q95      rhat  ess_bulk #>        <num> <num> <num> <num> <num> <num> <num>  <num>     <num>     <num> #>   1:  8.8956     7    12    15    19    22    27  35.00 0.9998578  950.1480 #>   2:  8.8956     8    13    16    19    23    28  38.00 0.9996637  806.5805 #>   3:  2.9652     1     3     4     6     7     9  13.00 1.0032698  967.3662 #>   4:  2.9652     1     2     3     4     5     6   9.00 0.9991688 1110.2815 #>   5:  1.4826     0     1     1     2     3     4   6.00 0.9996678  896.9374 #>  ---                                                                        #> 626: 31.1346    36    53    65    76    87   104 137.05 1.0003079 1054.6289 #> 627:  5.9304     4     7     9    11    14    17  24.00 1.0025396  998.3479 #> 628: 29.6520    31    48    60    70    81    96 128.05 0.9988369 1194.4760 #> 629: 19.2738    20    30    37    43    52    62  91.00 1.0010545 1154.8141 #> 630: 17.7912    16    23    30    37    44    55  75.00 0.9993409 1159.6413 #>       ess_tail #>          <num> #>   1:  983.7776 #>   2:  667.5845 #>   3: 1001.0476 #>   4:  975.4648 #>   5:  922.8697 #>  ---           #> 626:  881.3948 #> 627: 1035.5098 #> 628: 1028.2922 #> 629:  814.1646 #> 630:  855.4762"},{"path":"https://package.epinowcast.org/reference/unset_cache_from_environ.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","title":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","text":"function searches removes enw_cache_location setting .Renviron file located user's project home directory. utilizes get_renviron_contents function access modify contents .Renviron file. enw_cache_location setting found successfully removed, success message displayed. setting found, warning message displayed.","code":""},{"path":"https://package.epinowcast.org/reference/unset_cache_from_environ.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","text":"","code":"unset_cache_from_environ(alert_on_not_set = TRUE)"},{"path":"https://package.epinowcast.org/reference/unset_cache_from_environ.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","text":"alter_on_not_set logical value indicating whether display warning message enw_cache_location setting found .Renviron file. Defaults TRUE.","code":""},{"path":"https://package.epinowcast.org/reference/unset_cache_from_environ.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","text":"Invisible NULL. function used side effect modifying .Renviron file.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/reference/write_stan_files_no_profile.html","id":null,"dir":"Reference","previous_headings":"","what":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","title":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","text":"Write copies .stan files Stan model #include files profiling statements removed.","code":""},{"path":"https://package.epinowcast.org/reference/write_stan_files_no_profile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","text":"","code":"write_stan_files_no_profile(   stan_file,   include_paths = NULL,   target_dir = epinowcast::enw_get_cache() )"},{"path":"https://package.epinowcast.org/reference/write_stan_files_no_profile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","text":"stan_file path .stan file containing Stan program. include_paths Paths directories Stan look files specified #include directives Stan program. target_dir path directory manipulated .stan files without profiling statements stored. avoid overriding original .stan files, different directory original model include_paths.","code":""},{"path":"https://package.epinowcast.org/reference/write_stan_files_no_profile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","text":"list containing path .stan file without profiling statements include_paths included .stan files without profiling statements","code":""},{"path":[]},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-030","dir":"Changelog","previous_headings":"","what":"epinowcast 0.3.0","title":"epinowcast 0.3.0","text":"release brings range enhancements, new features, bug fixes, reflecting effort large number contributors. single breaking change, adjusts default max_delay parameter enw_process_data() maximum observed delay input data. change aims encourage users tailor setting specific datasets give reasonable default . package infrastructure also significant updates, including improved search functionality pkgdown website, adoption organization-level pkgdown theme, ability cache Stan models across R sessions, additional continuous integration tests. Model enhancements include updated internal handling PMF discretization support non-parametric reference date models, alongside documentation improvements provide clearer guidance examples users. range bug fixes implemented, including fix bug enw_expectation() module causing issues models containing multiple time series. Full details changes release can found following sections GitHub release notes. see development timeline release see 0.3.0 project.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"contributors-0-3-0","dir":"Changelog","previous_headings":"","what":"Contributors","title":"epinowcast 0.3.0","text":"@jamesmbaazam, @medewitt, @sbfnk, @adrian-lison, @kathsherratt, @natemcintosh, @Bisaloo @seabbs contributed code release. @jamesmbaazam, @adrian-lison, @sbfnk, @bisaloo, @pearsonca, @natemcintosh, @seabbs reviewed pull requests release. @jbracher, @medewitt, @kathsherratt, @jamesmbaazam, @zsusswein, @TimTaylor, @sbfnk, @natemcintosh, @pearsonca, @bisaloo, @parksw3, @adrian-lison, @seabbs reported bugs, made suggestions, contributed discussions led improvements release.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"breaking-changes-0-3-0","dir":"Changelog","previous_headings":"","what":"Breaking changes","title":"epinowcast 0.3.0","text":"default max_delay enw_process_data() changed maximum observed delay input data rather 20 days. default used warning now thrown general users setting based data application. See documentation enw_preprocess_data() details. See #224 @adrianlison reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"bugs-0-3-0","dir":"Changelog","previous_headings":"","what":"Bugs","title":"epinowcast 0.3.0","text":"Fixed bug identified @jbracher enw_expectation() module appropriately defining initial conditions multiple groups present. issue related recent changes cmdstan 2.32.1 required order use versions cmdstan beyond 2.32.0 models contain multiple time series. See #282 @seabbs self-reviewed. Fixed typos model vignette. See #292 @medewitt reviewed @seabbs. Fixed bug snapshots (.e. returned metadata enw_preprocess_data()) defined based report vs reference date. won’t impacted usage problem trying fit model retrospective (completely reported) data. See #312 @seabbs self-reviewed. Fixed bug non-data.table passed enw_quantile_to_long() throw error. See #324 @natemcintosh reviewed @pearsonca. Fixed bug enw_aggregate_cumulative() initialised time step first reference date + 1 day rather first reference date. See #336 @seabbs self-reviewed. Fixed bug enw_filter_reference_dates using remove_days data missing reference dates. See #351 @adrian-lison reviewed @seabbs. Resolved code quality issues related use %% scale right hand side similar issues. See #382 @seabbs reviewed @pearsonca @Bisaloo.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"package-0-3-0","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.3.0","text":"Search functionality pkgdown website longer directs non-existent pages. issue resulted incorrect URL specified pkgdown configuration file. See #449 @Bisaloo, based report @zsusswein. pkgdown theming elements moved organization-level pkgdown theme increase re-usability DRY-ness across organization. See #419 @Bisaloo reviewed @pearsonca @seabbs. lintr checks now run also tests/ directory. See #418 @Bisaloo reviewed @seabbs. Fixed typos single-timeseries-rt-estimation.Rmd. WORDLIST used spelling also updated eliminate false positives. Future typos now generate error continuous integration check can catch early possible. See #341 @Bisaloo reviewed @seabbs. Added extra checks continuous integration tests: now test partial matching used global state left unchanged (restored correctly). See #338 @Bisaloo reviewed @seabbs. Added additional tests ensure enw_expectation() module appropriately defining initial conditions multiple groups present. See #282 @seabbs self-reviewed. Added integration test epinowcast() check models multiple time series can fit expected example data. See #282 @seabbs reviewed @adrian-lison. Added {touchstone} benchmark includes multiple time-series ensure functionality appropriately tested. See #282 @seabbs reviewed @adrian-lison. Added merge_group option required GitHub Actions. enables use merge queue pull requests. See #300 @seabbs self-reviewed. Added internal check_group_date_unique() function ensures user supplied groups result unique combinations group dates. function used enw_preprocess_data() enw_complete_dates() ensure user supplied groups valid. See #295 @adrian-lison reviewed @seabbs. Added support non-daily reference date models (.e., process models). example, allows modelling weekly data weekly. may desirable delays long, computational resources limited, possible specify sufficiently flexible daily model account observed reporting patterns either reference report dates. model unit less entails changes model . See #303 @seabbs self-reviewed. Added new helper function simulate_double_censored_pmf() helps users define “correct” probability mass functions double censored delays based work epidist @parksw3 @seabbs. Note function likely spun package near future. See #312 @seabbs self-reviewed. Added min_reference_date argument enw_aggregate_cumulative() allow users specify minimum reference date include output. useful users want aggregate timestep specified initialisation date default. example users data already reported weekly cadence use min(data$report_date) + 1 preserve timestep. See #340 @seabbs reviewed @natemcintosh. Added support enw_complete_dates() min_date max_date arguments. arguments allow users specify minimum maximum dates include output. may useful users want ensure data complete specified time period. See #340 @seabbs reviewed @natemcintosh. Added new helper function enw_one_hot_encode_feature() one hot encoding variables binding original data. useful users want include parts variables models binary indicators - example giving specific delay effect. See #348 @seabbs self-reviewed. Enabled compiling multithreading default found cause deterioration performance even 1 thread per chain. likelihood calculation now longer parallelised threads_per_chain = 1 offer small performance improvement. See #366 @sbfnk reviewed @seabbs. Added new action check cmdstan model can compiled correct syntax. runs pull requests whenever stan code changed, code merged onto main altered stan code, weekly schedule latest main branch. See #386 @seabbs. Switched cli package package messaging order modern pretty notifications. See #188 @nikosbosse @seabbs reviewed @pearsonca. Increased minimum supported R version >= R 3.6.0 R 3.5.0 ensured existing function code tests compiled dependency. Vignettes continue allow use R >= 4.1.0 syntax (.e., native pipe lambda function syntax). See #389 @medewitt @seabbs reviewed @pearsonca. Add documentation custom stan functions. See #422 @seabbs reviewed @sbfnk. Added function check_max_delay() allows obtain coverage statistics assumed maximum delay based observed data. Enhanced postprocessing functions accept different max_delay used model, adding artificial samples/summaries -modeled dates. improved documentation warnings around max_delay. See #224 @adrian-lison @seabbs reviewed @seabbs. Exposed enw_stan_to_r() user. function used testing development expose epinowcast stan code R. Users may find function useful allows explore stan code used epinowcast models easily. Note functionality known unstable rstan loaded R session. See #431 @seabbs reviewed @sbfnk. Refactored extract_sparse_matrix() allow us drop rstan dependency. See #431 @seabbs reviewed @sbfnk. Allow caching Stan models across R sessions reduce compilation time use environment variable, enw_cache_location, can set using set_enw_cache() function. See #407 @medewitt @seabbs reviewed @sbfnk @pearsonca.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"model-0-3-0","dir":"Changelog","previous_headings":"","what":"Model","title":"epinowcast 0.3.0","text":"Update internal handling PMF discretisation assume uniform window two days centred delay interest rather window one day starting delay interest. better approximates underlying continuous distribution primary secondary event censoring. Due change models may perform slightly differently versions delay distribution estimates means half day longer (note corrects previous bias). See #288 @seabbs reviewed @adrian-lison. Updated default prior initialising model include ascertainment rate inferred latent reporting delay distribution can improper probability mass function (.e. one sum 1). See #312 @seabbs self-reviewed. Added support non-parametric reference date models well mixed models parametric non-parametric reference date models. enables use popular models discrete time cox proportional hazards model. See #313 @seabbs self-reviewed. Added support missing data (excluding missing reference date model) using observation_indicator argument enw_obs(). Support also added enw_complete_dates() flag missing data part new helper functions (enw_flag_observed_observations() enw_impute_na_observations()) also added. support likely useful used conjunction known reporting structure. See #327 @seabbs self-reviewed. Added support using maximum delay longer largest observed delay data. may useful start outbreak, data sparse user expects delays longer observed far. Note requires extrapolating delay distribution beyond support data, users cautious using feature. new example, inst/examples/germany_max_delay_greater_than_data.R, added demonstrate feature. See #346 @seabbs reviewed @adrian-lison. Added priors used model fitting <epinowcast> object. object returned epinowcast() now variable called priors can accessed inspection downstream analyses. See #399 @jamesmbaazam reviewed @pearsonca @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"documentation-0-3-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.3.0","text":"Updated distributions vignette match updated handling discretisation. See #288 @seabbs reviewed @adrian-lison. Updated use citation() function README command shown users output treated like normal text. See #272 @seabbs self-reviewed. Added vignette walking estimate effective reproduction number real-time (comparing retrospective estimates) data source right truncated. See #312 @seabbs self-reviewed. Switched using bookdown pkgdown vignettes moved flatly theme pkgdown rather preferably theme. See #312 @seabbs self-reviewed. Updated README include non-parametric reference date model option also added new example showing use model. See #313 @seabbs self-reviewed. Added new example showcasing fit model data reported weekly 3 day delay reports non-zero weekly process model mixture parametric non-parametric reference date model. See #348 @seabbs self-reviewed. Split README focus package-level issues moved quick start getting started vignette. See #375 @pearsonca reviewed @jamesmbaazam @seabbs. Added code CITATION file automatically pull relevant citation fields DESCRIPTION file. Also added GitHub Actions workflow auto-generate citation.cff file whenever CITATION DESCRIPTION change. way, three files always date. See #369 @jamesmbazam reviewed @seabbs. Removed reference pull request template updating development version found cause issues multiple pull requests open . See #391 @seabbs reviewed @Bisaloo. Added note Getting Started vignette clarify usability alternatives data.table. See #406 @kathsherratt reviewed @seabbs. Added new vignette provide users configuration troubleshooting guide Stan working epinowcast. See #405 @medewitt reviewed @seabbs, @zsusswein, @pearsonca. Removed named individuals vignettes moved team authorship. See #421 @seabbs self-reviewed. Improved documentation maximum delay stan code. See #425 @adrianlison reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"depreciations-0-3-0","dir":"Changelog","previous_headings":"","what":"Depreciations","title":"epinowcast 0.3.0","text":"enw_delay_filter(): Deprecated warning favour enw_filter_delay(). renaming better reflect function’s purpose. See #365 @kathsherratt reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-022","dir":"Changelog","previous_headings":"","what":"epinowcast 0.2.2","title":"epinowcast 0.2.2","text":"minor release fixes bug handling optional initial conditions introduced recent change cmdstan 2.32.1. Upgrading recommended users wish use versions cmdstan beyond 2.32.0. addition fixing issue, release also includes minor documentation vignette improvements, along enhancements input checking.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"contributors-0-2-2","dir":"Changelog","previous_headings":"","what":"Contributors","title":"epinowcast 0.2.2","text":"@sbfnk @seabbs contributed code release. @seabbs reviewed pull requests release. @sbfnk @seabbs reported bugs, made suggestions, contributed discussions led improvements release.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"bugs-0-2-2","dir":"Changelog","previous_headings":"","what":"Bugs","title":"epinowcast 0.2.2","text":"Improved handling optional initial conditions consistently passed arrays stan required cmdstan 2.32.1. fix required order use versions cmdstan beyond 2.32.0. See #276 @seabbs self-reviewed.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"package-0-2-2","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.2.2","text":"Added input checking max_delay enw_preprocess_data() ensure maximum delay greater equal 1 can coerced integer. See #274 @sbfnk reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"documentation-0-2-2","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.2.2","text":"Improved discrete delay distributions vignette including escaping functions improve readibility right-closing discretised bins. See #275 @sbfnk reviewed @seabbs. Improved documentation max_delay enw_preprocess_data() fixed typo documentation. See #274 @sbfnk reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-021","dir":"Changelog","previous_headings":"","what":"epinowcast 0.2.1","title":"epinowcast 0.2.1","text":"release, focused improving internal code structure, documentation, development infrastructure package make easier maintain extend functionality future. also fixed number bugs made minor improvements interface. changes included extending test documentation coverage across package functions, improving internal data checking internalization, removing deprecated functions. changes expected impact users, recommend users upgrade version. also suggest users fitted models random effects random walks refit models compare output previous fits order understand impact bug specification models fixed release. release lays groundwork planned features 0.3.0 0.4.0 including: support non-parametric delays, non-daily data non-daily process model (.e. weekly data weekly process model), additional flexibility specifying generation times latent reporting delays, improved case studies, adding support forecasting. Full details changes release can found following sections GitHub release notes. see development timeline release see 0.2.1 project.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"contributors-0-2-1","dir":"Changelog","previous_headings":"","what":"Contributors","title":"epinowcast 0.2.1","text":"@adrian-lison, @Bisaloo, @pearsonca, @FelixGuenther, @Lnrivas, @seabbs, @sbfnk, @jhellewell14 made code contributions release. @pearsonca, @Bisaloo, @adrian-lison, @seabbs reviewed pull requests release. @Gulfa, @WardBrian, @parkws3, @adrian-lison, @Bisaloo, @pearsonca, @FelixGuenther, @Lnrivas, @seabbs, @sbfnk @jhellewell14 reported bugs, made suggestions, contributed discussions led improvements release.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"potentially-breaking-changes-0-2-1","dir":"Changelog","previous_headings":"","what":"Potentially breaking changes","title":"epinowcast 0.2.1","text":"enw_add_pooling_effect(): replaced string argument ... argument, enable passing arbitrary arguments finder_fn argument. general usage supported, now e.g. default argument supply prefix = \"somevalue\" vs string = \"somevalue\" argument positions changed. function primarily internal use expect small subset advanced users creating models outside currently supported formula interface impacted See #222 @pearsonca reviewed @seabbs. enw_dates_to_factors(): Deprecated removed longer needed. expect function little external use little impact users. See #216 @seabbs reviewed @adrian-lison.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"bugs-0-2-1","dir":"Changelog","previous_headings":"","what":"Bugs","title":"epinowcast 0.2.1","text":"Fixed bug first highlighted @Gulfa #166 localised investigation #223 random effects random walks improperly constructed enw_formula() variances parameters shared correct parameters used together. impacts models used formulas random effects random walks models appears led increased run-times, fitting issues, potentially unreliable posterior estimates less significant impact actual nowcasts. suggest refitting models comparing output previous fits order understand impact usage. See #228 @seabbs self-reviewed. Fixed bug enw_replace_priors() function deal epinowcast summarised posterior estimates due new use pillar class. Added tests catch issue reoccurs future. See #228 @seabbs self-reviewed. Fixed issue (#198) interface scoringutils. unknown reason example data contained pillar classes (likely due upstream change). caused issue internal scoringutils using implicit type conversion (see ). See #201 @seabbs reviewed @pearsonca. Fixed bug enw_plot_quantiles() documented default log FALSE actual default TRUE. See #209 @seabbs self-reviewed. Fixed bug enw_expectation() models specified zero intercept initial condition still specified intercept growth rate (expr_r_int, #246). flagged issue cmdstan 2.31.0 cmdstan 2.32.0, due improvements initial conditions read (stan-dev/stan#3182), throws error causing models fail. Solution suggested @WardBrian, implemented #255 @seabbs, reviewed @pearsonca.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"depreciations-0-2-1","dir":"Changelog","previous_headings":"","what":"Depreciations","title":"epinowcast 0.2.1","text":"enw_incidence_to_cumulative(): Deprecated warning favour enw_add_cumulative(). renaming better reflect function’s purpose. enw_incidence_to_cumulative() removed 0.3.0. See #247 @seabbs reviewed @pearsonca. enw_cumulative_to_incidence(): Deprecated warning favour enw_add_incidence(). renaming better reflect function’s purpose. enw_cumulative_to_incidence() removed 0.3.0. See #247 @seabbs reviewed @pearsonca.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"package-0-2-1","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.2.1","text":"Fixed typos README.md, NEWS.md, model.Rmd vignette convolution_matrix() documentation. WORDLIST used spelling also updated eliminate false positives. See #221 @Bisaloo reviewed @seabbs @adrian-lison. Added non-default linters .lintr configuration file. file used lintr::lint_package() run new lint-changed-files.yaml GitHub Actions workflow. See #220 @Bisaloo reviewed @pearsonca @seabbs. Switched lint-changed-files.yaml GitHub Actions workflow instead regular lint.yaml avoid annotations unrelated changes made PR. See #220 @Bisaloo reviewed @pearsonca @seabbs. Added tests summary.epinowcast() plot.epinowcast() methods. See #209 @seabbs reviewed @pearsonca. Added tests enw_plot_obs() otherwise covered plot.epinowcast() tests. See #209 @seabbs reviewed @pearsonca. Refactored consolidate data checking internalization single internal function coerce_dt(), addressing issues #242, #241, #214, #149. eliminates need add_group(), check_by(), check_dates() (associated documentation, tests - intermediate capabilities introduced within minor version; see #208) removed. Also starts enable internal versus external use exposed methods copy = ... argument. See #239 @pearsonca, reviewed @seabbs. Resolved spurious test warnings snapshot tests linked unstated formatting requirements. See #208 @seabbs reviewed @pearsonca. Removed unused internal plot helpers. See #217 @seabbs reviewed @adrian-lison. Added tests internal check_ functions used check inputs. See #217 @seabbs reviewed @adrian-lison. Removed problematic double specification default arguments target_date enw_metadata() flagged #212 @pearsonca using formals() instead detect default values function specification. See #232 @seabbs self-reviewed. words Jenny Bryan: “else, .” else return() stop() increases number branches code, makes harder read. also translates higher cyclomatic complexity. removed else statements return() stop() package. See #229 @Bisaloo reviewed @seabbs. Removed internal definition no_contrasts enw_formula() unused. Identified @bisaloo #220 raised #223. See #228 @seabbs self-reviewed. Added tests enw_replace_priors() check can handle epinowcast summarised posterior estimates. See #228 @seabbs self-reviewed. Added prefix (rw__) enw_formula() construct_rw() indicate random effect variance random walk versus random effect. See #228 @seabbs reviewed . Added support using variable random effect random walk. settings advised. See #228 @seabbs self-reviewed. Added error message construct_rw() random walk specified variable numeric variable. See #228 @seabbs self-reviewed. Added support preprocessing model fitting benchmarking using touchstone based implementation EpiNow2 @sbfnk. See #200 @seabbs, @adrian-lison, @sbfnk, self-reviewed. Added complete set data converters map line list (.e. row case) count data (.e incidence cumulative counts reference report date). particular, help workflows individual line list data available can now formatted ready preprocessing using single call enw_linelist_to_incidence() previously took several steps. See #247 @seabbs @jhellewell14 reviewed @pearsonca. Dropped use develop branch development versions package. change discussed #250 major motivator since introduction release builds R Universe longer need stable main branch GitHub control releases. See #256 @seabbs reviewed @Bisaloo @pearsonca. Cleaned enw_formula_as_data_list() better align DRY principles. See #245 @Lnrivas, reviewed @pearsonca, @Bisaloo, @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"documentation-0-2-1","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.2.1","text":"Added examples summary.epinowcast() plot.epinowcast() methods documentation. See #209 @seabbs reviewed @pearsonca. Extended documentation, examples, tests internal, preprocessing, postprocessing functions. See #208 @seabbs reviewed @pearsonca. Added examples plot functions. See #209 @seabbs reviewed @pearsonca. Added example enw_replace_priors() showing use nowcast posterior update default priors. See #228 @seabbs self-reviewed. Updated package citation documentation include new authors 0.2.1 release use recommended bibentry() approach. See #236 #237 @seabbs reviewed @Bisaloo. Added package style guide (STYLE_GUIDE.md) document style conventions used package. See #64 @seabbs reviewed @pearsonca @Bisaloo. Improved extended documentation discretized, parametric delay distributions. Changed structure package vignettes (two categories, model definition vignettes case study vignettes). See #265 @FelixGuenther @adrian-lison reviewed @seabbs. Improved extended README quick start feedback @parksw3 #260. See #267 @seabbs reviewed @adrian-lison @parksw3.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-020","dir":"Changelog","previous_headings":"","what":"epinowcast 0.2.0","title":"epinowcast 0.2.0","text":"release adds several extensions modelling framework, including modelling missing data, flexible modelling generative process underlying case counts, optional renewal equation-based generative process (enabling direct estimation effective reproduction number), convolution-based latent reporting delays (enabling modelling directly observed unobserved delays well partial ascertainment). Much methodology used extensions based work done Adrian Lison currently evaluated. top model extensions release also adds range quality life features, helper functions constructing convolution matrices combining probability mass functions. also comes improved computational efficiency, thanks refactoring hazard model computations log scale extended parallelisation likelihood optimised structure input data. also extended package documentation streamlined contribution process. large-scale project, package remains experimental state, though sufficiently stable research production usage. core development needed improve post-processing, pre-processing, documentation coverage, evaluate optimal configurations different settings) please see community site, contributing guide, list issues/proposed features interested involved (scale contribution warmly welcomed including user feedback, requests extend functionality cover setting, evaluating package context). community project needs support users order provide improved tools real-time infectious disease surveillance. thank @adrian-lison, @choi-hannah, @sbfnk, @Bisaloo, @seabbs, @pearsonca, @pratikunterwegs code contributions release. also thank community members contributions including @jhellewell14, @FelixGuenther, @parksw3, @jbracher. Full details changes release can found following sections.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"package-0-2-0","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.2.0","text":"Added .Rhistory .gitignore file. See #132 @choi-hannah. Fixed indentations authors contributors DESCRIPTION file. See #132 @choi-hannah. Renamed enw_new_reports() enw_cumulative_to_incidence() added reverse function enw_incidence_to_cumulative() functions use argument allow specification variable groupings. See #157 @seabbs. Switched class checking inherits(x, \"class\") rather class(x) %% \"class\". See #155 @Bisaloo. Changed enw_add_metaobs_features() interface holidays argument series dates. Changed interface enw_preprocess_data() pass ... enw_add_metaobs_features(). Interface changes come internal rewrite unit tests. part internal rewrite, introduces coerce_date() R/utils.R, wraps data.table::.IDate() error handling. See #151 @pearsonca. Changed style using match.arg validating inputs. Briefly, preference now define options via function arguments validate automatic match.arg idiom corresponding enumerated documentation options. idiom, first item definition default. approach applies string-based arguments; different types arguments matched way, can arguments allow vector-valued options (e.g., somearg = c(\"option1\", \"option2\") legal argument indicating use options). See #162 @pearsonca addressing issue #156 @Bisaloo. Refined use data ordering throughout preprocessing functions. See #147 @seabbs. Skipped tests use cmdstan locally improve developer/contributor experience. See #147 @seabbs @adrian-lison. Added basic simulator function missing reference data. See #147 @seabbs @adrian-lison. Added support right hand side interactions syntax sugar random effects. allows specification , example, independent random effects day strata another variable. See #169 @seabbs. Added support passing cpp_options cmdstanr::cmdstan_model(). See #182 @seabbs. Add function, convolution_matrix() constructing convolution matrices. See #183 @seabbs. Add pass enw_model() write_stan_files_no_profile() target_dir argument. allows users compile model share compiled model across sessions rather recompile time temporary directory cleared. See #185 @seabbs. Added add_pmfs(), sum probability mass functions new probability mass function. Initial implementation @seabbs #183, refactored @pratikunterwegs #187, following suggestion issue #186 @pearsonca. Added warning observed empirical maximum delay less specified maximum delay. See #190 @seabbs. Added nested support converting array syntax convert_cmdstan_to_rstan. See #192 @sbfnk.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"model-0-2-0","dir":"Changelog","previous_headings":"","what":"Model","title":"epinowcast 0.2.0","text":"Added support parametric log-logistic delay distributions. See #128 @adrian-lison. Implemented direct specification parametric baseline hazards. See #134 @adrian-lison. Refactored observation model, combination logit hazards, effects priors contained generic functions make extending package functionality easier. See #137 @seabbs. Implemented specification parametric baseline hazards probabilities log scale increase robustness efficiency. Also includes refactoring functions reorganisation inst/stan/epinowcast.stan increase modularity clarity. See #140 @seabbs. Introduced two new delay likelihoods delay_snap_lmpf delay_group_lmpf. stratify either snapshots groups. helpful models (missingness module). ability choose function used exposed user enw_fit_opts() via likelihood_aggregation argument. functions rely newly added expected_obs_from_snaps function vectorises expected_obs_from_index. See #138 @seabbs @adrian-lison. Added support supplying missingness model parameters model well optional priors effect estimation. See #138 @seabbs @adrian-lison. Refactored model generated quantities functional. See #138 @seabbs @adrian-lison. Added support modelling missing reference dates likelihood. See #147 @seabbs @adrian-lison. Added additional functionality delay_group_lmpf support modelling observations missing reference dates. Also updated generated quantities support mode. See #147 @seabbs @adrian-lison based #64 @adrian-lison. Added flexible expectation process growth rate scale. default expectation model updated group-wise random walk growth rate. See #152 @seabbs @adrian-lison. Added deterministic renewal equation, latent reporting process. See #152 #183 @seabbs @adrian-lison. Added support intercept expectation model general formula support enable feature modules going forward. See #170 @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"documentation-0-2-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.2.0","text":"Removed explicit links authors issues NEWS.md file. See #132 @choi-hannah. Added new example using simulated data enw_missing() model module. See #138 @seabbs @adrian-lison. Update model definition vignette include missing reference date model. See #147 @seabbs @adrian-lison. Added use expectation model “Hierarchical nowcasting age stratified COVID-19 hospitalisations Germany” vignette. See #193 @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"bugs-0-2-0","dir":"Changelog","previous_headings":"","what":"Bugs","title":"epinowcast 0.2.0","text":"probability-model (.e parametric distribution used hence hazard scale needed) used due mistake specifying ref_as_p stan code. additional issue enw_report() module currently self-declares regardless . bug impact results increased runtimes simple models. issues fixed #142 @seabbs. addition meta features week month properly sequentially number weeks months time series crossed year boundaries. impact models included effects expecting fact sequentially numbered (e.g. random walks). Fixed #151 @pearsonca. #151 also corrects minor issue enw_example() pointing old file name type=\"script\". @pearsonca.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-010","dir":"Changelog","previous_headings":"","what":"epinowcast 0.1.0","title":"epinowcast 0.1.0","text":"major release focusing improving user experience, preparing future package extensions, increase modularity, development flexible full-featured formula interface, hopefully future-proofing far possible. prepares ground future model extensions allow broad range real-time infectious disease questions better answered. extensions include: Modelling missing data (#43). Non-parametric modelling delay reference date logit hazard (#4). Flexible expectation modelling (#5). Forecasting beyond horizon data (#3). Known reporting structures (#33). Renewal equation-based reproduction number estimation (potentially part #5). Latent infections (.e implemented packages EpiNow2, epidemia, etc.). Convolution-based delay models (.e hospitalisations deaths) partially reported data. Additional observation models. interested contributing features, aspects package development (example improving post-processing, coverage documentation, contributing case studies) please see contributing guide /just reach . community project needs support users order provide improved tools real-time infectious disease surveillance. release contains multiple breaking changes. needing old interface please install 0.0.7 GitHub. ease, stratified changes interface, package, documentation, model changes. Note package still flagged experimental regular use authors. @adrian-lison, @sbfnk, @seabbs contributed release.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"interface-0-1-0","dir":"Changelog","previous_headings":"","what":"Interface","title":"epinowcast 0.1.0","text":"fully featured flexible formula interface added allows specification fixed effects, lme4 random effects, random walks. See #27 @seabbs. major overhaul, described #57, interface epinowcast() particular focus improving modularity model components (described modules documentation). package documentation vignettes updated reflect new interface. See #112 @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"package-0-1-0","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.1.0","text":"Renamed package updated description give clarity problem space focusses . See #110 @seabbs. new helper function enw_delay_metadata() added. produces metadata delay distribution vector may helpful future modelling. prepares way #4 data.frame combined reference metadata order build non-parametric hazard reference delay-based models. addition adding function, also added output enw_preprocess_data() order make metadata readily available end-users. See #80 @seabbs. Two new helper functions enw_filter_reference_dates() enw_filter_report_dates() added. replace enw_retrospective_data() allow users similarly construct retrospective data. Splitting functions components also allows additional use cases previously possible. Note definition assumed report date given reference date must equal greater (.e report happen event reported occurs). See #82 @sbfnk @seabbs. internal grouping variables refactored reduce chance clashes columns data.frames supplied user. also error thrown case variable clash, making preprocessing safer. See #102 @adrian-lison @seabbs, solves #99. Support preprocessing observations missing reference dates added along new data object returned enw_preprocess_data() highlights information user (alternatively can accessed users using enw_missing_reference()). addition, missing observations setup passed stan order allow use modelling. feature preparation adding full support missing observations (see #43). See #106 @adrian-lison @seabbs. discretised reporting probability function extended handle delays beyond maximum delay three different ways: ignore, add maximum, normalize. nowcasting model uses “normalise” though work ongoing. See #113 @adrian-lison #121 @seabbs. Fixed issue (#105) cmdstan 2.30.0 passing optimisation flags stanc_options default causing compilation error passing flags default. See #117 @sbfnk @seabbs. Addition regression/integration tests example data epinowcast() enw_preprocess_data() convergence checking several example nowcasting models. Lower level tests model tools model modules also added. See #112 @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"model-0-1-0","dir":"Changelog","previous_headings":"","what":"Model","title":"epinowcast 0.1.0","text":"Added support parametric exponential delay distributions (note comparable intercept-non-parametric hazard model) potentially parametric delay (though currently throw error due lack appropriate non-parametric hazard). See #84 @seabbs. Added support Poisson observation model though recommended users make use default negative binomial model. See #120 @seabbs. Updated expectation random walk model use efficient cumulative_sum implementation suggested @adrian-lison #98. See #103 @seabbs. Aligned implementation overdispersion prior prior choice recommendations stan wiki. See #111 @adrian-lison.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"documentation-0-1-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.1.0","text":"model description updated reflect currently implemented model improve readability. use reference report date nomenclature also standardised across package. See #71 @sbfnk @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"internals-0-1-0","dir":"Changelog","previous_headings":"","what":"Internals","title":"epinowcast 0.1.0","text":"Array declarations stan model updated. maintain compatibility expose_stan_fns() (depends rstan), additional functionality added parse stan code function. See #74, #85, #93 @sbfnk @seabbs. Remove spurious warnings due missing initial values optional parameters. See #76 @sbfnk @seabbs.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-007","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.7","title":"epinowcast 0.0.7","text":"Adds additional quality life data processing maximum number (max_confirm) notifications available every row (cumulative incidence notifications) cumulative daily empirical proportion reported calculated user pre-processing (see #62 @seabbs). default approach handling reported notifications beyond maximum delay changed. 0.0.6 previous versions notifications beyond maximum delay silently dropped. 0.0.7 now optional behaviour (set using max_delay_strat enw_preprocess_data()) default instead add notifications last included delay present. produce accurate long-term nowcasts data available means reported notifications maximum delay need interpreted mind. See #62 @seabbs. Adds basic testing documentation preprocessing functions. See #62 @seabbs. Stabilises calculation expected observations increasing proportion calculation performed log scale. results reduced computation time majority coming switching using neg_binomial_2_log family functions (natural scale counterparts). See #65 @seabbs","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-006","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.6","title":"epinowcast 0.0.6","text":"Simplifies optimises internal functions used estimate parametric daily reporting probability. now exposed user via distribution parameter Lognormal Gamma families tested work. Note parameterisations use standard parameterisations given stan manual (see #42 @adrian-lison @seabbs) Add profiling switch model compilation, allowing toggle profiling (https://mc-stan.org/cmdstanr/articles/profiling.html) /model. Also supports .stan files found include_paths (see #41 #54 @adrian-lison). Fully vectorise likelihood flattening observations pre-specify expected observations vector calculating log-likelihood (see #40 @seabbs). Adds vectorisation zero truncated normal distributions (see #38 @seabbs) hazard_to_prob optimised using vectorisation (see #53 @adrian-lison @seabbs). prob_to_hazard optimised required cumulative probabilities calculated (see #53 @adrian-lison @seabbs). Updated use inv_sqrt stan function (see #60 @seabbs). Added support scoringutils 1.0.0 (see #61 @seabbs). Added basic example helper function, enw_example(), power examples tests based work done forecast.vocs (see #61 @seabbs).","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-005","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.5","title":"epinowcast 0.0.5","text":"Convert retrospective data date fields class IDate utilising enw_retrospective_data solve esoteric error. Added full argument name include_paths avoid console chatter Adds stanc_options argument enw_model() specifies new default list(\"01\") enables simple pre-compilation optimisations. See optimisation details. Remove inv_logit logit may instead use base R plogit qlogit.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-004","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.4","title":"epinowcast 0.0.4","text":"Add support extracting summarising posterior nowcast samples Package spell check Update read quick start use 40 days delay vs 30 Add section read quick start showing example handling nowcast samples. Add support passing custom models included files enw_model(). Fix bug enw_summarise_samples() returned duplicate samples. Add support passing holidays variable adjusting converting holiday day custom day week (default Sunday set user). Added support scoring natural log scale. represents absolute relative scoring respectively.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-003","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.3","title":"epinowcast 0.0.3","text":"Add support passing priors Add case study vignette Add model definition implementation details. Add support sample scoring (using scoringutils).","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-002","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.2","title":"epinowcast 0.0.2","text":"Initial version package broadly working functionality first draft vignettes.","code":""},{"path":"https://package.epinowcast.org/news/index.html","id":"epinowcast-001","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.1","title":"epinowcast 0.0.1","text":"Initial package version development code","code":""}]
