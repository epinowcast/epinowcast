<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summarise the posterior nowcast prediction — enw_nowcast_summary • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarise the posterior nowcast prediction — enw_nowcast_summary"><meta name="description" content='A generic wrapper around enw_posterior() with
opinionated defaults to extract the posterior prediction for the
nowcast ("pp_inf_obs" from the stan code). The functionality of
this function can be used directly on the output of epinowcast() using
the supplied summary.epinowcast() method.'><meta property="og:description" content='A generic wrapper around enw_posterior() with
opinionated defaults to extract the posterior prediction for the
nowcast ("pp_inf_obs" from the stan code). The functionality of
this function can be used directly on the output of epinowcast() using
the supplied summary.epinowcast() method.'><meta property="og:image" content="https://package.epinowcast.org/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epinowcast</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.0.1000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/epinowcast.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Model details</h6></li>
    <li><a class="dropdown-item" href="../articles/model.html">Model definition and implementation</a></li>
    <li><a class="dropdown-item" href="../articles/distributions.html">Discretised distributions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Case studies</h6></li>
    <li><a class="dropdown-item" href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a></li>
    <li><a class="dropdown-item" href="../articles/single-timeseries-rt-estimation.html">Estimating the effective reproduction number in real-time for a single timeseries with reporting delays</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Working with epinowcast</h6></li>
    <li><a class="dropdown-item" href="../articles/stan-help.html">Resources to help with model fitting using Stan</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Package use cases</h6></li>
    <li><a class="dropdown-item" href="../articles/package-use-cases.html">Case studies</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epinowcast/epinowcast/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarise the posterior nowcast prediction</h1>
      <small class="dont-index">Source: <a href="https://github.com/epinowcast/epinowcast/blob/main/R/postprocess.R" class="external-link"><code>R/postprocess.R</code></a></small>
      <div class="d-none name"><code>enw_nowcast_summary.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A generic wrapper around <code><a href="enw_posterior.html">enw_posterior()</a></code> with
opinionated defaults to extract the posterior prediction for the
nowcast (<code>"pp_inf_obs"</code> from the <code>stan</code> code). The functionality of
this function can be used directly on the output of <code><a href="epinowcast.html">epinowcast()</a></code> using
the supplied <code><a href="summary.epinowcast.html">summary.epinowcast()</a></code> method.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_nowcast_summary</span><span class="op">(</span></span>
<span>  <span class="va">fit</span>,</span>
<span>  <span class="va">obs</span>,</span>
<span>  max_delay <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timestep <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.2</span>, <span class="fl">0.35</span>, <span class="fl">0.5</span>, <span class="fl">0.65</span>, <span class="fl">0.8</span>, <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>A <code>cmdstanr</code> fit object.</p></dd>


<dt id="arg-obs">obs<a class="anchor" aria-label="anchor" href="#arg-obs"></a></dt>
<dd><p>An observation <code>data.frame</code> containing <code>reference_date</code>
columns of the same length as the number of rows in the posterior and the
most up to date observation for each date. This is used to align the
posterior with the observations. The easiest source of this data is the
output of latest output of <code><a href="enw_preprocess_data.html">enw_preprocess_data()</a></code> or <code><a href="enw_latest_data.html">enw_latest_data()</a></code>.</p></dd>


<dt id="arg-max-delay">max_delay<a class="anchor" aria-label="anchor" href="#arg-max-delay"></a></dt>
<dd><p>Maximum delay to which nowcasts should be summarised. Must
be equal (default) or larger than the modelled maximum delay. If it is
larger, then nowcasts for unmodelled dates are added by assuming that case
counts beyond the modelled maximum delay are fully observed.</p></dd>


<dt id="arg-timestep">timestep<a class="anchor" aria-label="anchor" href="#arg-timestep"></a></dt>
<dd><p>The timestep to used. This can be a string ("day",
"week", "month") or a numeric whole number representing the number of days.</p></dd>


<dt id="arg-probs">probs<a class="anchor" aria-label="anchor" href="#arg-probs"></a></dt>
<dd><p>A vector of numeric probabilities to produce
quantile summaries for. By default these are the 5%, 20%, 80%,
and 95% quantiles which are also the minimum set required for
plotting functions to work.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> summarising the model posterior nowcast prediction.
This uses observed data where available and the posterior prediction
where not.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="summary.epinowcast.html">summary.epinowcast()</a></code></p>
<p>Functions used for postprocessing of model fits
<code><a href="build_ord_obs.html">build_ord_obs</a>()</code>,
<code><a href="enw_add_latest_obs_to_nowcast.html">enw_add_latest_obs_to_nowcast</a>()</code>,
<code><a href="enw_nowcast_samples.html">enw_nowcast_samples</a>()</code>,
<code><a href="enw_posterior.html">enw_posterior</a>()</code>,
<code><a href="enw_pp_summary.html">enw_pp_summary</a>()</code>,
<code><a href="enw_quantiles_to_long.html">enw_quantiles_to_long</a>()</code>,
<code><a href="enw_summarise_samples.html">enw_summarise_samples</a>()</code>,
<code><a href="subset_obs.html">subset_obs</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_example.html">enw_example</a></span><span class="op">(</span><span class="st">"nowcast"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">enw_nowcast_summary</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">fit</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">latest</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">max_delay</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reference_date report_date .group max_confirm location age_group confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;IDat&gt;      &lt;IDat&gt;  &lt;num&gt;       &lt;int&gt;   &lt;fctr&gt;    &lt;fctr&gt;   &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     2021-08-03  2021-08-22      1         149       DE       00+     149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     2021-08-04  2021-08-22      1         166       DE       00+     166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     2021-08-05  2021-08-22      1         133       DE       00+     133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     2021-08-06  2021-08-22      1         137       DE       00+     137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     2021-08-07  2021-08-22      1         139       DE       00+     139</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     2021-08-08  2021-08-22      1          97       DE       00+      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     2021-08-09  2021-08-22      1          58       DE       00+      58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     2021-08-10  2021-08-22      1         175       DE       00+     175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     2021-08-11  2021-08-22      1         233       DE       00+     233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     2021-08-12  2021-08-22      1         237       DE       00+     237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     2021-08-13  2021-08-22      1         204       DE       00+     204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     2021-08-14  2021-08-22      1         189       DE       00+     189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:     2021-08-15  2021-08-22      1         125       DE       00+     125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:     2021-08-16  2021-08-22      1          98       DE       00+      98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:     2021-08-17  2021-08-22      1         242       DE       00+     242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:     2021-08-18  2021-08-22      1         223       DE       00+     223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:     2021-08-19  2021-08-22      1         202       DE       00+     202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:     2021-08-20  2021-08-22      1         171       DE       00+     171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:     2021-08-21  2021-08-22      1         112       DE       00+     112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:     2021-08-22  2021-08-22      1          45       DE       00+      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reference_date report_date .group max_confirm location age_group confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cum_prop_reported delay prop_reported    mean median         sd     mad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 &lt;num&gt; &lt;num&gt;         &lt;num&gt;   &lt;num&gt;  &lt;num&gt;      &lt;num&gt;   &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:                 1    19   0.000000000 149.000    149   0.000000  0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:                 1    18   0.000000000 167.426    167   1.316912  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:                 1    17   0.000000000 135.812    136   1.867121  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:                 1    16   0.000000000 141.255    141   2.341679  2.2239</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:                 1    15   0.007194245 145.884    146   3.085460  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:                 1    14   0.000000000 103.681    103   3.072243  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:                 1    13   0.000000000  62.762     62   2.461588  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:                 1    12   0.000000000 185.138    185   3.827742  4.4478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:                 1    11   0.000000000 255.903    255   6.410514  5.9304</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:                 1    10   0.004219409 267.488    267   7.975931  7.4130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:                 1     9   0.000000000 236.164    236   8.459235  8.8956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:                 1     8   0.015873016 230.867    230  10.092332 10.3782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:                 1     7   0.040000000 165.026    165  10.254095 10.3782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:                 1     6   0.010204082 129.307    128   8.532969  8.8956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:                 1     5   0.012396694 292.749    292  11.792076 11.8608</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:                 1     4   0.017937220 293.296    292  15.992941 14.8260</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:                 1     3   0.019801980 291.404    290  19.436887 19.2738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:                 1     2   0.070175439 295.703    292  28.861250 28.1694</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:                 1     1   0.383928571 309.456    304  51.295236 47.4432</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:                 1     0   1.000000000 381.243    371 103.890978 96.3690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cum_prop_reported delay prop_reported    mean median         sd     mad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         q5   q20   q35   q50   q65   q80    q95      rhat  ess_bulk  ess_tail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;  &lt;num&gt;     &lt;num&gt;     &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 149.00 149.0   149   149   149 149.0 149.00        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 166.00 166.0   167   167   168 168.0 170.00 0.9988498  997.2790  946.6047</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 133.00 134.0   135   136   136 137.0 139.00 0.9997035 1015.7372 1017.4859</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 138.00 139.0   140   141   142 143.0 145.00 1.0017705  901.5890  958.7197</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 141.00 143.0   144   146   147 148.0 151.05 0.9984520 1097.0842 1044.2543</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  99.00 101.0   102   103   105 106.0 109.00 0.9997410 1034.2365  913.6061</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  59.00  61.0    62    62    63  65.0  67.00 0.9987681 1012.1885  904.7496</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 180.00 182.0   183   185   186 188.0 192.00 1.0064762  885.6025  907.2186</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 246.00 250.0   253   255   258 261.0 267.00 1.0014583  933.4472  918.6322</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 255.00 261.0   264   267   270 274.0 281.00 1.0052639 1044.4533 1055.2781</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 223.00 229.0   232   236   239 243.0 252.00 1.0041063 1039.8102  897.5389</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: 216.00 222.0   226   230   234 239.0 249.00 1.0026046 1018.9795  919.8161</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: 149.95 156.8   160   165   168 173.0 183.00 0.9991933 1090.1636  782.0808</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: 116.00 122.0   126   128   132 136.0 144.05 1.0000500 1023.7823  888.2873</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: 275.00 283.0   288   292   297 303.0 313.00 0.9993709 1145.8224  968.8335</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: 270.00 280.0   286   292   298 306.0 320.00 1.0008511 1056.0595  914.9342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17: 263.00 274.0   284   290   298 306.0 325.00 0.9992936 1248.9469  968.8798</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18: 254.95 271.0   282   292   304 319.0 348.00 1.0008356 1412.5892 1036.8252</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19: 237.00 266.8   285   304   323 349.0 406.00 0.9988372 1195.0907  985.8485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20: 240.85 293.8   332   371   405 459.2 569.05 0.9993392 1349.1168 1029.2555</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         q5   q20   q35   q50   q65   q80    q95      rhat  ess_bulk  ess_tail</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk, Carl Pearson, Hugo Gruson, Felix Guenther, Michael DeWitt, James Mba Azam, Jessalyn Sebastian.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.9000.</p>
</div>

    </footer></div>





  </body></html>

