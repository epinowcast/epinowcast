<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='A generic wrapper around enw_posterior() with
opinionated defaults to extract the posterior prediction for the
nowcast ("pp_inf_obs" from the stan code). The functionality of
this function can be used directly on the output of epinowcast() using
the supplied summary.epinowcast() method.'><title>Summarise the posterior nowcast prediction — enw_nowcast_summary • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarise the posterior nowcast prediction — enw_nowcast_summary"><meta property="og:description" content='A generic wrapper around enw_posterior() with
opinionated defaults to extract the posterior prediction for the
nowcast ("pp_inf_obs" from the stan code). The functionality of
this function can be used directly on the output of epinowcast() using
the supplied summary.epinowcast() method.'><meta property="og:image" content="package.epinowcast.org/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">epinowcast</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.3.2000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Model details</h6>
    <a class="dropdown-item" href="../articles/model.html">Model definition and implementation</a>
    <a class="dropdown-item" href="../articles/distributions.html">Discretised distributions</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Case studies</h6>
    <a class="dropdown-item" href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a>
    <a class="dropdown-item" href="../articles/single-timeseries-rt-estimation.html">Estimating the effective reproduction number in real-time for a single timeseries with reporting delays</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epinowcast/epinowcast/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarise the posterior nowcast prediction</h1>
      <small class="dont-index">Source: <a href="https://github.com/epinowcast/epinowcast/blob/HEAD/R/postprocess.R" class="external-link"><code>R/postprocess.R</code></a></small>
      <div class="d-none name"><code>enw_nowcast_summary.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A generic wrapper around <code><a href="enw_posterior.html">enw_posterior()</a></code> with
opinionated defaults to extract the posterior prediction for the
nowcast (<code>"pp_inf_obs"</code> from the <code>stan</code> code). The functionality of
this function can be used directly on the output of <code><a href="epinowcast.html">epinowcast()</a></code> using
the supplied <code><a href="summary.epinowcast.html">summary.epinowcast()</a></code> method.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_nowcast_summary</span><span class="op">(</span></span>
<span>  <span class="va">fit</span>,</span>
<span>  <span class="va">obs</span>,</span>
<span>  probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.2</span>, <span class="fl">0.35</span>, <span class="fl">0.5</span>, <span class="fl">0.65</span>, <span class="fl">0.8</span>, <span class="fl">0.95</span><span class="op">)</span>,</span>
<span>  timestep <span class="op">=</span> <span class="st">"day"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fit</dt>
<dd><p>A <code>cmdstanr</code> fit object.</p></dd>


<dt>obs</dt>
<dd><p>An observation <code>data.frame</code> containing <code>reference_date</code>
columns of the same length as the number of rows in the posterior and the
most up to date observation for each date. This is used to align the
posterior with the observations. The easiest source of this data is the
output of latest output of <code><a href="enw_preprocess_data.html">enw_preprocess_data()</a></code> or <code><a href="enw_latest_data.html">enw_latest_data()</a></code>.</p></dd>


<dt>probs</dt>
<dd><p>A vector of numeric probabilities to produce
quantile summaries for. By default these are the 5%, 20%, 80%,
and 95% quantiles which are also the minimum set required for
plotting functions to work.</p></dd>


<dt>timestep</dt>
<dd><p>The timestep to used. This can be a string ("day",
"week", "month") or a numeric whole number representing the number of days.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>data.frame</code> summarising the model posterior nowcast prediction.
This uses observed data where available and the posterior prediction
where not.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="summary.epinowcast.html">summary.epinowcast()</a></code></p>
<p>Functions used for postprocessing of model fits
<code><a href="enw_add_latest_obs_to_nowcast.html">enw_add_latest_obs_to_nowcast</a>()</code>,
<code><a href="enw_nowcast_samples.html">enw_nowcast_samples</a>()</code>,
<code><a href="enw_posterior.html">enw_posterior</a>()</code>,
<code><a href="enw_pp_summary.html">enw_pp_summary</a>()</code>,
<code><a href="enw_quantiles_to_long.html">enw_quantiles_to_long</a>()</code>,
<code><a href="enw_summarise_samples.html">enw_summarise_samples</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_example.html">enw_example</a></span><span class="op">(</span><span class="st">"nowcast"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">enw_nowcast_summary</span><span class="op">(</span><span class="va">fit</span><span class="op">$</span><span class="va">fit</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">fit</span><span class="op">$</span><span class="va">latest</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reference_date report_date .group max_confirm location age_group confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     2021-08-03  2021-08-22      1         149       DE       00+     149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     2021-08-04  2021-08-22      1         166       DE       00+     166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     2021-08-05  2021-08-22      1         133       DE       00+     133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     2021-08-06  2021-08-22      1         137       DE       00+     137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     2021-08-07  2021-08-22      1         139       DE       00+     139</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     2021-08-08  2021-08-22      1          97       DE       00+      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     2021-08-09  2021-08-22      1          58       DE       00+      58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     2021-08-10  2021-08-22      1         175       DE       00+     175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     2021-08-11  2021-08-22      1         233       DE       00+     233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     2021-08-12  2021-08-22      1         237       DE       00+     237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     2021-08-13  2021-08-22      1         204       DE       00+     204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     2021-08-14  2021-08-22      1         189       DE       00+     189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:     2021-08-15  2021-08-22      1         125       DE       00+     125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:     2021-08-16  2021-08-22      1          98       DE       00+      98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:     2021-08-17  2021-08-22      1         242       DE       00+     242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:     2021-08-18  2021-08-22      1         223       DE       00+     223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:     2021-08-19  2021-08-22      1         202       DE       00+     202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:     2021-08-20  2021-08-22      1         171       DE       00+     171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:     2021-08-21  2021-08-22      1         112       DE       00+     112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:     2021-08-22  2021-08-22      1          45       DE       00+      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cum_prop_reported delay prop_reported    mean median         sd     mad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:                 1    19   0.000000000 149.000    149   0.000000  0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:                 1    18   0.000000000 167.510    167   1.477187  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:                 1    17   0.000000000 135.699    135   1.821460  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:                 1    16   0.000000000 141.110    141   2.278397  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:                 1    15   0.007194245 145.919    146   3.102590  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:                 1    14   0.000000000 103.761    103   3.001814  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:                 1    13   0.000000000  62.843     63   2.447108  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:                 1    12   0.000000000 185.143    185   3.892776  4.4478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:                 1    11   0.000000000 256.242    256   6.614922  5.9304</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:                 1    10   0.004219409 267.754    267   7.815406  7.4130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:                 1     9   0.000000000 236.311    235   8.261994  7.4130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:                 1     8   0.015873016 230.777    230   9.846330  8.8956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:                 1     7   0.040000000 165.677    164  10.046871 10.3782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:                 1     6   0.010204082 129.764    129   8.397549  7.4130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:                 1     5   0.012396694 293.502    292  12.324443 11.8608</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:                 1     4   0.017937220 293.818    292  16.721797 14.8260</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:                 1     3   0.019801980 292.588    291  21.275500 22.2390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:                 1     2   0.070175439 293.411    291  28.361531 26.6868</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:                 1     1   0.383928571 310.284    305  51.245443 46.7019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:                 1     0   1.000000000 381.715    366 105.802296 94.8864</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         q5   q20 q35 q50 q65   q80    q95      rhat  ess_bulk ess_tail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 149.00 149.0 149 149 149 149.0 149.00        NA        NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 166.00 166.0 167 167 168 169.0 170.00 1.0021059  916.5251 961.2656</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 133.00 134.0 135 135 136 137.0 139.00 1.0026309  865.5792 980.4149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 138.00 139.0 140 141 142 143.0 145.05 0.9985305  964.6971 916.0647</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 141.95 143.0 144 146 147 148.0 152.00 1.0024283  982.1855 878.7477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  99.00 101.0 102 103 105 106.0 109.00 1.0002988 1079.3848 873.5648</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  59.00  61.0  62  63  64  65.0  67.00 1.0050496 1015.4992 831.1428</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 179.00 182.0 184 185 186 188.0 192.00 0.9987252 1035.5304 854.2485</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 246.00 251.0 253 256 259 262.0 267.00 0.9997534 1020.3568 936.2525</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 256.95 261.0 264 267 270 274.0 282.00 1.0015893 1073.7290 947.6912</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 225.00 229.0 232 235 239 243.0 251.00 1.0009977 1024.8633 849.3204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: 216.00 223.0 227 230 234 238.0 249.00 0.9981689 1305.3677 998.3510</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: 150.00 157.0 161 164 169 174.0 184.00 0.9992937 1114.1136 874.1649</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: 118.00 123.0 126 129 132 136.0 145.00 0.9992580 1020.4703 799.7645</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: 275.95 283.0 288 292 297 303.0 316.00 0.9997709 1097.9740 908.7449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: 269.00 280.0 287 292 298 306.0 323.00 0.9987247 1025.9249 971.7279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17: 260.95 274.0 282 291 299 310.0 333.00 0.9996703 1243.7915 969.4998</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18: 253.00 269.8 280 291 301 313.2 342.00 1.0014503 1167.6104 910.7979</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19: 240.00 267.0 288 305 322 348.2 403.00 0.9996016 1107.4854 874.2575</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20: 245.95 291.8 331 366 403 459.0 580.05 0.9991110 1298.2575 864.7724</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk, Carl Pearson, Hugo Gruson, Felix Guenther.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

    </footer></div>

  

  

  </body></html>

