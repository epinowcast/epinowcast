<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate incidence of new reports from cumulative reports — enw_cumulative_to_incidence • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate incidence of new reports from cumulative reports — enw_cumulative_to_incidence"><meta name="description" content=""><meta property="og:description" content=""><meta property="og:image" content="https://package.epinowcast.org/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epinowcast</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.0.1000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/epinowcast.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reference" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reference</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reference"><li><a class="dropdown-item" href="../reference/index.html">R Reference</a></li>
    <li><a class="dropdown-item" href="https://package.epinowcast.org/stan/globals.html">Stan Reference</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Model details</h6></li>
    <li><a class="dropdown-item" href="../articles/model.html">Model definition and implementation</a></li>
    <li><a class="dropdown-item" href="../articles/distributions.html">Discretised distributions</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Case studies</h6></li>
    <li><a class="dropdown-item" href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a></li>
    <li><a class="dropdown-item" href="../articles/single-timeseries-rt-estimation.html">Estimating the effective reproduction number in real-time for a single timeseries with reporting delays</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Working with epinowcast</h6></li>
    <li><a class="dropdown-item" href="../articles/stan-help.html">Resources to help with model fitting using Stan</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epinowcast/epinowcast/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate incidence of new reports from cumulative reports</h1>
      <small class="dont-index">Source: <a href="https://github.com/epinowcast/epinowcast/blob/main/R/data-converters.R" class="external-link"><code>R/data-converters.R</code></a></small>
      <div class="d-none name"><code>enw_cumulative_to_incidence.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_cumulative_to_incidence</span><span class="op">(</span><span class="va">obs</span>, set_negatives_to_zero <span class="op">=</span> <span class="cn">TRUE</span>, by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-obs">obs<a class="anchor" aria-label="anchor" href="#arg-obs"></a></dt>
<dd><p>A <code>data.frame</code> containing at least the following variables:
<code>reference date</code> (index date of interest), <code>report_date</code> (report date for
observations), and <code>confirm</code> (cumulative observations by reference and report
date).</p></dd>


<dt id="arg-set-negatives-to-zero">set_negatives_to_zero<a class="anchor" aria-label="anchor" href="#arg-set-negatives-to-zero"></a></dt>
<dd><p>Logical, defaults to TRUE. Should negative
counts (for calculated incidence of observations) be set to zero. Currently
downstream modelling does not support negative counts and so setting must be
TRUE if intending to use <code><a href="epinowcast.html">epinowcast()</a></code>.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>A character vector describing the stratification of
observations. This defaults to no grouping. This should be used
when modelling multiple time series in order to identify them for
downstream modelling</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input <code>data.frame</code> with a new variable <code>new_confirm</code>. If
<code>max_confirm</code> was present in the <code>data.frame</code> then the proportion
reported on each day (<code>prop_reported</code>) is also added.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Data converters
<code><a href="enw_add_cumulative.html">enw_add_cumulative</a>()</code>,
<code><a href="enw_add_incidence.html">enw_add_incidence</a>()</code>,
<code><a href="enw_aggregate_cumulative.html">enw_aggregate_cumulative</a>()</code>,
<code><a href="enw_incidence_to_cumulative.html">enw_incidence_to_cumulative</a>()</code>,
<code><a href="enw_incidence_to_linelist.html">enw_incidence_to_linelist</a>()</code>,
<code><a href="enw_linelist_to_incidence.html">enw_linelist_to_incidence</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Default reconstruct incidence</span></span></span>
<span class="r-in"><span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="va">germany_covid19_hosp</span><span class="op">[</span><span class="va">location</span> <span class="op">==</span> <span class="st">"DE"</span><span class="op">]</span><span class="op">[</span><span class="va">age_group</span> <span class="op">==</span> <span class="st">"00+"</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="enw_add_incidence.html">enw_add_incidence</a></span><span class="op">(</span><span class="va">dt</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;reference_date, report_date&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        reference_date location age_group confirm report_date new_confirm delay</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                &lt;IDat&gt;   &lt;fctr&gt;    &lt;fctr&gt;   &lt;int&gt;      &lt;IDat&gt;       &lt;int&gt; &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:     2021-04-06       DE       00+     149  2021-04-06         149     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:     2021-04-06       DE       00+     289  2021-04-07         140     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:     2021-04-06       DE       00+     350  2021-04-08          61     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:     2021-04-06       DE       00+     402  2021-04-09          52     3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:     2021-04-06       DE       00+     438  2021-04-10          36     4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12911:     2021-10-18       DE       00+     113  2021-10-19          70     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12912:     2021-10-18       DE       00+     142  2021-10-20          29     2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12913:     2021-10-19       DE       00+     223  2021-10-19         223     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12914:     2021-10-19       DE       00+     387  2021-10-20         164     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12915:     2021-10-20       DE       00+     235  2021-10-20         235     0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make use of maximum reported to calculate empirical daily reporting</span></span></span>
<span class="r-in"><span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_add_max_reported.html">enw_add_max_reported</a></span><span class="op">(</span><span class="va">dt</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="enw_add_incidence.html">enw_add_incidence</a></span><span class="op">(</span><span class="va">dt</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;reference_date, report_date&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        reference_date report_date .group max_confirm location age_group confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                &lt;IDat&gt;      &lt;IDat&gt;  &lt;num&gt;       &lt;int&gt;   &lt;fctr&gt;    &lt;fctr&gt;   &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:     2021-04-06  2021-04-06      1         708       DE       00+     149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:     2021-04-06  2021-04-07      1         708       DE       00+     289</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:     2021-04-06  2021-04-08      1         708       DE       00+     350</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:     2021-04-06  2021-04-09      1         708       DE       00+     402</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:     2021-04-06  2021-04-10      1         708       DE       00+     438</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12911:     2021-10-18  2021-10-19      1         142       DE       00+     113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12912:     2021-10-18  2021-10-20      1         142       DE       00+     142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12913:     2021-10-19  2021-10-19      1         387       DE       00+     223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12914:     2021-10-19  2021-10-20      1         387       DE       00+     387</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12915:     2021-10-20  2021-10-20      1         235       DE       00+     235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        cum_prop_reported new_confirm delay prop_reported</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    &lt;num&gt;       &lt;int&gt; &lt;int&gt;         &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:         0.2104520         149     0    0.21045198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:         0.4081921         140     1    0.19774011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:         0.4943503          61     2    0.08615819</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:         0.5677966          52     3    0.07344633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:         0.6186441          36     4    0.05084746</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12911:         0.7957746          70     1    0.49295775</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12912:         1.0000000          29     2    0.20422535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12913:         0.5762274         223     0    0.57622739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12914:         1.0000000         164     1    0.42377261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12915:         1.0000000         235     0    1.00000000</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk, Carl Pearson, Hugo Gruson, Felix Guenther, Michael DeWitt, James Mba Azam, Jessalyn Sebastian.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.9000.</p>
</div>

    </footer></div>





  </body></html>

