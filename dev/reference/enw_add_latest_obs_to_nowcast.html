<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast"><meta name="description" content="Add the latest observations to the nowcast output.
This is useful for plotting the nowcast against the latest
observations."><meta property="og:description" content="Add the latest observations to the nowcast output.
This is useful for plotting the nowcast against the latest
observations."><meta property="og:image" content="https://package.epinowcast.org/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epinowcast</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.3.0.1000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/epinowcast.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Model details</h6></li>
    <li><a class="dropdown-item" href="../articles/model.html">Model definition and implementation</a></li>
    <li><a class="dropdown-item" href="../articles/distributions.html">Discretised distributions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Case studies</h6></li>
    <li><a class="dropdown-item" href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a></li>
    <li><a class="dropdown-item" href="../articles/single-timeseries-rt-estimation.html">Estimating the effective reproduction number in real-time for a single timeseries with reporting delays</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Working with epinowcast</h6></li>
    <li><a class="dropdown-item" href="../articles/stan-help.html">Resources to help with model fitting using Stan</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epinowcast/epinowcast/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Add latest observations to nowcast output</h1>
      <small class="dont-index">Source: <a href="https://github.com/epinowcast/epinowcast/blob/main/R/postprocess.R" class="external-link"><code>R/postprocess.R</code></a></small>
      <div class="d-none name"><code>enw_add_latest_obs_to_nowcast.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add the latest observations to the nowcast output.
This is useful for plotting the nowcast against the latest
observations.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_add_latest_obs_to_nowcast</span><span class="op">(</span><span class="va">nowcast</span>, <span class="va">obs</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-nowcast">nowcast<a class="anchor" aria-label="anchor" href="#arg-nowcast"></a></dt>
<dd><p>A <code>data.frame</code> of nowcast output from <code><a href="enw_nowcast_summary.html">enw_nowcast_summary()</a></code>.</p></dd>


<dt id="arg-obs">obs<a class="anchor" aria-label="anchor" href="#arg-obs"></a></dt>
<dd><p>An observation <code>data.frame</code> containing <code>reference_date</code>
columns of the same length as the number of rows in the posterior and the
most up to date observation for each date. This is used to align the
posterior with the observations. The easiest source of this data is the
output of latest output of <code><a href="enw_preprocess_data.html">enw_preprocess_data()</a></code> or <code><a href="enw_latest_data.html">enw_latest_data()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> of nowcast output with the latest observations
added.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Functions used for postprocessing of model fits
<code><a href="build_ord_obs.html">build_ord_obs</a>()</code>,
<code><a href="enw_nowcast_samples.html">enw_nowcast_samples</a>()</code>,
<code><a href="enw_nowcast_summary.html">enw_nowcast_summary</a>()</code>,
<code><a href="enw_posterior.html">enw_posterior</a>()</code>,
<code><a href="enw_pp_summary.html">enw_pp_summary</a>()</code>,
<code><a href="enw_quantiles_to_long.html">enw_quantiles_to_long</a>()</code>,
<code><a href="enw_summarise_samples.html">enw_summarise_samples</a>()</code>,
<code><a href="subset_obs.html">subset_obs</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_example.html">enw_example</a></span><span class="op">(</span><span class="st">"nowcast"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_example.html">enw_example</a></span><span class="op">(</span><span class="st">"obs"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nowcast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">fit</span>, type <span class="op">=</span> <span class="st">"nowcast"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">enw_add_latest_obs_to_nowcast</span><span class="op">(</span><span class="va">nowcast</span>, <span class="va">obs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;reference_date, .group&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reference_date .group latest_confirm confirm report_date max_confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;IDat&gt;  &lt;num&gt;          &lt;int&gt;   &lt;int&gt;      &lt;IDat&gt;       &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     2021-08-03      1            156     149  2021-08-22         149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     2021-08-04      1            183     166  2021-08-22         166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     2021-08-05      1            147     133  2021-08-22         133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     2021-08-06      1            155     137  2021-08-22         137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     2021-08-07      1            159     139  2021-08-22         139</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     2021-08-08      1            119      97  2021-08-22          97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     2021-08-09      1             65      58  2021-08-22          58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     2021-08-10      1            204     175  2021-08-22         175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     2021-08-11      1            275     233  2021-08-22         233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     2021-08-12      1            273     237  2021-08-22         237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     2021-08-13      1            270     204  2021-08-22         204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     2021-08-14      1            262     189  2021-08-22         189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:     2021-08-15      1            192     125  2021-08-22         125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:     2021-08-16      1            140      98  2021-08-22          98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:     2021-08-17      1            323     242  2021-08-22         242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:     2021-08-18      1            409     223  2021-08-22         223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:     2021-08-19      1            370     202  2021-08-22         202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:     2021-08-20      1            361     171  2021-08-22         171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:     2021-08-21      1            339     112  2021-08-22         112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:     2021-08-22      1            258      45  2021-08-22          45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reference_date .group latest_confirm confirm report_date max_confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     location age_group cum_prop_reported delay prop_reported    mean median</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;fctr&gt;    &lt;fctr&gt;             &lt;num&gt; &lt;num&gt;         &lt;num&gt;   &lt;num&gt;  &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:       DE       00+                 1    19   0.000000000 149.000  149.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:       DE       00+                 1    18   0.000000000 167.424  167.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:       DE       00+                 1    17   0.000000000 135.760  135.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:       DE       00+                 1    16   0.000000000 141.290  141.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:       DE       00+                 1    15   0.007194245 145.842  145.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:       DE       00+                 1    14   0.000000000 103.852  104.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:       DE       00+                 1    13   0.000000000  62.653   62.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:       DE       00+                 1    12   0.000000000 185.247  185.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:       DE       00+                 1    11   0.000000000 256.324  256.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:       DE       00+                 1    10   0.004219409 267.501  267.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:       DE       00+                 1     9   0.000000000 236.484  236.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:       DE       00+                 1     8   0.015873016 231.475  231.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:       DE       00+                 1     7   0.040000000 165.095  164.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:       DE       00+                 1     6   0.010204082 130.024  129.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:       DE       00+                 1     5   0.012396694 292.568  292.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:       DE       00+                 1     4   0.017937220 292.827  292.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:       DE       00+                 1     3   0.019801980 291.069  289.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:       DE       00+                 1     2   0.070175439 292.768  290.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:       DE       00+                 1     1   0.383928571 310.151  303.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:       DE       00+                 1     0   1.000000000 374.970  359.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     location age_group cum_prop_reported delay prop_reported    mean median</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             sd     mad     q5   q20    q35   q50    q65   q80    q95      rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;   &lt;num&gt;  &lt;num&gt; &lt;num&gt;  &lt;num&gt; &lt;num&gt;  &lt;num&gt; &lt;num&gt;  &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:   0.000000  0.0000 149.00   149 149.00 149.0 149.00   149 149.00        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:   1.293018  1.4826 166.00   166 167.00 167.0 168.00   168 170.00 0.9987896</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:   1.798787  2.2239 133.00   134 135.00 135.5 136.00   137 139.00 1.0008364</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:   2.340807  2.9652 138.00   139 140.00 141.0 142.00   143 145.00 0.9996689</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:   3.092345  3.7065 142.00   143 144.00 145.5 147.00   148 152.00 1.0038336</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:   3.069775  2.9652  99.00   101 102.00 104.0 105.00   106 109.00 1.0006551</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:   2.382912  2.9652  59.00    61  62.00  62.0  63.00    64  67.00 1.0010114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:   3.988722  4.4478 179.00   182 183.00 185.0 186.00   189 192.00 0.9997242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:   6.795970  5.9304 246.00   251 253.00 256.0 258.00   262 268.00 0.9997658</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:   7.764038  7.4130 256.00   261 264.00 267.0 270.00   274 281.00 0.9996562</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:   8.613358  7.4130 223.00   229 233.00 236.0 239.00   243 252.00 1.0009820</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:  10.333642  8.8956 216.00   223 227.00 231.0 234.35   240 250.00 1.0012825</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:   9.970927 10.3782 150.00   157 161.00 164.0 168.00   173 182.05 1.0020750</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:   8.503278  8.8956 117.00   123 126.00 129.0 133.00   137 144.00 1.0003030</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:  11.588255 11.1195 275.00   283 288.00 292.0 296.00   302 313.00 1.0002163</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:  15.568798 14.8260 269.95   279 287.00 292.0 297.00   305 320.00 0.9993465</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:  20.306417 19.2738 262.00   274 281.65 289.0 297.00   307 326.00 1.0053979</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:  28.243546 26.6868 253.00   269 280.00 290.0 300.00   314 344.00 1.0017054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:  50.513957 45.9606 240.00   267 286.00 303.0 322.00   348 403.00 0.9990505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20: 105.934202 93.4038 237.00   290 324.00 359.0 400.00   450 555.25 1.0005813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             sd     mad     q5   q20    q35   q50    q65   q80    q95      rhat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ess_bulk  ess_tail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 1188.2125 1063.3471</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:  963.5041  951.3370</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 1102.2710  925.0777</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:  987.5966  824.7528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 1101.8532  991.0711</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  751.4622  773.2821</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 1059.1415  883.2260</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 1039.1865  998.6170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 1039.1951  936.1291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 1187.7267 1046.0769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:  863.1990  964.5881</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: 1113.7200  714.2937</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: 1148.2821  886.6410</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: 1089.7858 1059.6357</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: 1014.5908  974.8269</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:  946.5257  909.0082</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18: 1208.7533  912.9634</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19: 1404.1200  860.4009</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20: 1458.2840  771.2588</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ess_bulk  ess_tail</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk, Carl Pearson, Hugo Gruson, Felix Guenther, Michael DeWitt, James Mba Azam.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.9000.</p>
</div>

    </footer></div>





  </body></html>

