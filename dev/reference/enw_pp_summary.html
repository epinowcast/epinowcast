<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Posterior predictive summary — enw_pp_summary • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Posterior predictive summary — enw_pp_summary"><meta name="description" content="This function summarises posterior predictives
for observed data (by report and reference date). The functionality of
this function can be used directly on the output of epinowcast() using
the supplied summary.epinowcast() method."><meta property="og:description" content="This function summarises posterior predictives
for observed data (by report and reference date). The functionality of
this function can be used directly on the output of epinowcast() using
the supplied summary.epinowcast() method."><meta property="og:image" content="https://package.epinowcast.org/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epinowcast</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.4.0.1000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/epinowcast.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reference" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reference</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reference"><li><a class="dropdown-item" href="../reference/index.html">R Reference</a></li>
    <li><a class="dropdown-item" href="https://package.epinowcast.org/stan/globals.html">Stan Reference</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Model details</h6></li>
    <li><a class="dropdown-item" href="../articles/model.html">Model definition and implementation</a></li>
    <li><a class="dropdown-item" href="../articles/features.html">Model features summary</a></li>
    <li><a class="dropdown-item" href="../articles/distributions.html">Discretised distributions</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Case studies</h6></li>
    <li><a class="dropdown-item" href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a></li>
    <li><a class="dropdown-item" href="../articles/single-timeseries-rt-estimation.html">Estimating the effective reproduction number in real-time for a single timeseries with reporting delays</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Working with epinowcast</h6></li>
    <li><a class="dropdown-item" href="../articles/stan-help.html">Resources to help with model fitting using Stan</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epinowcast/epinowcast/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Posterior predictive summary</h1>
      <small class="dont-index">Source: <a href="https://github.com/epinowcast/epinowcast/blob/main/R/postprocess.R" class="external-link"><code>R/postprocess.R</code></a></small>
      <div class="d-none name"><code>enw_pp_summary.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function summarises posterior predictives
for observed data (by report and reference date). The functionality of
this function can be used directly on the output of <code><a href="epinowcast.html">epinowcast()</a></code> using
the supplied <code><a href="summary.epinowcast.html">summary.epinowcast()</a></code> method.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_pp_summary</span><span class="op">(</span><span class="va">fit</span>, <span class="va">diff_obs</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.2</span>, <span class="fl">0.35</span>, <span class="fl">0.5</span>, <span class="fl">0.65</span>, <span class="fl">0.8</span>, <span class="fl">0.95</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>A <code>cmdstanr</code> fit object.</p></dd>


<dt id="arg-diff-obs">diff_obs<a class="anchor" aria-label="anchor" href="#arg-diff-obs"></a></dt>
<dd><p>A <code>data.frame</code> of observed data with at least a date variable
<code>reference_date</code>, and a grouping variable <code>.group</code>.</p></dd>


<dt id="arg-probs">probs<a class="anchor" aria-label="anchor" href="#arg-probs"></a></dt>
<dd><p>A vector of numeric probabilities to produce
quantile summaries for. By default these are the 5%, 20%, 80%,
and 95% quantiles which are also the minimum set required for
plotting functions to work.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.table summarising the posterior predictions.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Functions used for postprocessing of model fits
<code><a href="build_ord_obs.html">build_ord_obs()</a></code>,
<code><a href="enw_add_latest_obs_to_nowcast.html">enw_add_latest_obs_to_nowcast()</a></code>,
<code><a href="enw_nowcast_samples.html">enw_nowcast_samples()</a></code>,
<code><a href="enw_nowcast_summary.html">enw_nowcast_summary()</a></code>,
<code><a href="enw_posterior.html">enw_posterior()</a></code>,
<code><a href="enw_quantiles_to_long.html">enw_quantiles_to_long()</a></code>,
<code><a href="enw_summarise_samples.html">enw_summarise_samples()</a></code>,
<code><a href="subset_obs.html">subset_obs()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_example.html">enw_example</a></span><span class="op">(</span><span class="st">"nowcast"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">enw_pp_summary</span><span class="op">(</span><span class="va">fit</span><span class="op">$</span><span class="va">fit</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">fit</span><span class="op">$</span><span class="va">new_confirm</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      reference_date report_date .group max_confirm location age_group confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              &lt;IDat&gt;      &lt;IDat&gt;  &lt;num&gt;       &lt;int&gt;   &lt;fctr&gt;    &lt;fctr&gt;   &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:     2021-07-14  2021-07-14      1          72       DE       00+      22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:     2021-07-14  2021-07-15      1          72       DE       00+      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:     2021-07-14  2021-07-16      1          72       DE       00+      38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:     2021-07-14  2021-07-17      1          72       DE       00+      43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:     2021-07-14  2021-07-18      1          72       DE       00+      43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 606:     2021-08-20  2021-08-21      1         171       DE       00+     159</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 607:     2021-08-20  2021-08-22      1         171       DE       00+     171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 608:     2021-08-21  2021-08-21      1         112       DE       00+      69</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 609:     2021-08-21  2021-08-22      1         112       DE       00+     112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 610:     2021-08-22  2021-08-22      1          45       DE       00+      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      cum_prop_reported delay new_confirm prop_reported   mean median        sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  &lt;num&gt; &lt;num&gt;       &lt;int&gt;         &lt;num&gt;  &lt;num&gt;  &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:         0.3055556     0          22    0.30555556 22.049     20 10.447476</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:         0.4722222     1          12    0.16666667 22.031     21 10.062370</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:         0.5277778     2           4    0.05555556  7.992      8  4.118361</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:         0.5972222     3           5    0.06944444  4.261      4  2.692978</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:         0.5972222     4           0    0.00000000  1.326      1  1.258295</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 606:         0.9298246     1          61    0.35672515 81.048     77 33.870413</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 607:         1.0000000     2          12    0.07017544 12.586     11  6.299229</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 608:         0.6160714     0          69    0.61607143 73.471     69 32.792995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 609:         1.0000000     1          43    0.38392857 47.332     44 20.074730</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 610:         1.0000000     0          45    1.00000000 40.534     37 20.435911</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          mad   q50      rhat  ess_bulk  ess_tail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;num&gt; &lt;num&gt;     &lt;num&gt;     &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:  8.8956    20 1.0007087  981.0605  957.4820</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2: 10.3782    21 1.0006400 1010.0549  860.7285</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:  4.4478     8 1.0018374 1046.7610  956.3804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:  2.9652     4 1.0008338  959.7921  978.0414</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:  1.4826     1 1.0003294  999.1432  873.2038</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 606: 31.1346    77 0.9999674 1016.8230 1000.9385</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 607:  5.9304    11 1.0006309  965.7202  850.5506</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 608: 29.6520    69 0.9983329 1072.1422  973.6582</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 609: 19.2738    44 0.9993679 1127.5257  906.6164</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 610: 17.7912    37 1.0003136 1372.2704 1042.6714</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk, Carl Pearson, Hugo Gruson, Felix Guenther, Michael DeWitt, James Mba Azam, Jessalyn Sebastian.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

