[{"path":"https://package.epinowcast.org/dev/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021 epinowcast authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://package.epinowcast.org/dev/articles/distributions.html","id":"available-distributions","dir":"Articles","previous_headings":"","what":"Available distributions","title":"Discretised distributions","text":"currently available parametric delay distributions continuous probability distributions () two parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\). table provides link definition distribution, specifies parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\) mapped parameters distribution (according referenced definition), states resulting mean distribution (discretization adjustment assumed maximum delay).","code":""},{"path":"https://package.epinowcast.org/dev/articles/distributions.html","id":"discretisation-and-adjustment-for-maximum-delay","dir":"Articles","previous_headings":"","what":"Discretisation and adjustment for maximum delay","title":"Discretised distributions","text":"epinowcast, delays modeled discrete time assumed maximum delay (specified via max_delay argument). Therefore, continuous delay distributions must discretised adjusted maximum delay. exact form discretisation complex due interaction primary secondary events. Rather modelling explicitly, approximate assuming uniform censoring interval 2 days delay. comes assuming daily censoring primary secondary events, together define delay distribution, ignoring potential interactions primary secondary events. result, probability reporting delay \\(d\\) days equals probability reporting delay \\(d+1\\) days less, minus probability reporting delay \\(d-1\\) days less. normalised overall probability reporting delay maximum observed delay, \\(D\\). formally, define terms cumulative distribution function delay distribution. Let \\(F^{\\mu_{g,t}, \\upsilon_{g,t}}\\) cumulative distribution function continuous probability distribution delays parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\). , probability reporting delay \\(d\\) days \\[p_{g,t,d} = \\frac{F^{\\mu_{g,t}, \\upsilon_{g,t}}(d+1) - F^{\\mu_{g,t}, \\upsilon_{g,t}}(d-1)}{F^{\\mu_{g,t}, \\upsilon_{g,t}}(D + 1 ) + F^{\\mu_{g,t}, \\upsilon_{g,t}}(D)}.\\] Unless \\(d = 0\\) instead \\[p_{g,t,0} = \\frac{F^{\\mu_{g,t}, \\upsilon_{g,t}}(1)}{F^{\\mu_{g,t}, \\upsilon_{g,t}}(D + 1 ) + F^{\\mu_{g,t}, \\upsilon_{g,t}}(D)}.\\] Normalising \\(F^{\\mu_{g,t}, \\upsilon_{g,t}}(D+1) + F^{\\mu_{g,t}, \\upsilon_{g,t}}(D)\\), ensures \\(p^{\\prime}_{g,t,d}\\) sum 1. Since \\(F^{\\mu_{g,t}, \\upsilon_{g,t}}(D)\\) probability reporting maximum delay, can also interpreted conditioning distribution maximum delay. Note discretisation normalization, discrete delay distribution obtain approximates original continuous distribution, approximation worse shorter delays.","code":""},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"quick-start","dir":"Articles","previous_headings":"","what":"Quick start","title":"Getting Started with Epinowcast: Nowcasting","text":"quick start, demonstrate using epinowcast specify fit minimal nowcasting model COVID-19 hospitalisations Germany. Examples using complex models available package vignettes papers referenced literature vignette.","code":""},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"package","dir":"Articles","previous_headings":"","what":"Package","title":"Getting Started with Epinowcast: Nowcasting","text":"quick start, also use data.table ggplot2 packages. installed dependencies epinowcast installed. Note output epinowcast readily useable tools, including tidyverse packages (see comparison).","code":"library(epinowcast) library(data.table) library(ggplot2)"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"Getting Started with Epinowcast: Nowcasting","text":"Nowcasting right-truncated case counts involves estimation reporting delays recently reported data. , need case counts diagnosed (e.g. someone tests positive; often called “reference date”) reported (.e. administratively recorded via public health surveillance; often called “report date”). difference reference date report date reporting delay. quick start, use data Robert Koch Institute via Germany Nowcasting hub. data represent hospitalisation counts date positive test date test report Germany October 1, 2021.","code":""},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"filtering","dir":"Articles","previous_headings":"Data","what":"Filtering","title":"Getting Started with Epinowcast: Nowcasting","text":"first filter create snapshot retrospective data available 40 days October 1, 2021 contains 40 days data. , create nowcast target latest available hospitalisations date positive test. allow us visualise nowcast made time compares ultimately reported. data already format can used epinowcast, contains reference date (column reference_date): date observation, example date positive test report date (column report_date): date report given set observations reference date count (column confirm): total (.e. cumulative) number hospitalisations reference date report date. package also provides range tools convert data line list, incidence, common formats required format (see Data converters).","code":"nat_germany_hosp <-   germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] |>   enw_filter_report_dates(latest_date = \"2021-10-01\")  retro_nat_germany <- nat_germany_hosp |>   enw_filter_report_dates(remove_days = 40) |>   enw_filter_reference_dates(include_days = 40) retro_nat_germany #>      reference_date location age_group confirm report_date #>              <IDat>   <fctr>    <fctr>   <int>      <IDat> #>   1:     2021-07-14       DE       00+      22  2021-07-14 #>   2:     2021-07-15       DE       00+      28  2021-07-15 #>   3:     2021-07-16       DE       00+      19  2021-07-16 #>   4:     2021-07-17       DE       00+      20  2021-07-17 #>   5:     2021-07-18       DE       00+       9  2021-07-18 #>  ---                                                       #> 816:     2021-07-15       DE       00+      69  2021-08-21 #> 817:     2021-07-16       DE       00+      47  2021-08-22 #> 818:     2021-07-14       DE       00+      72  2021-08-21 #> 819:     2021-07-15       DE       00+      69  2021-08-22 #> 820:     2021-07-14       DE       00+      72  2021-08-22 latest_germany_hosp <- nat_germany_hosp |>   enw_latest_data() |>   enw_filter_reference_dates(remove_days = 40, include_days = 40) head(latest_germany_hosp, n = 10) #>     reference_date location age_group confirm report_date #>             <IDat>   <fctr>    <fctr>   <int>      <IDat> #>  1:     2021-07-14       DE       00+      74  2021-10-01 #>  2:     2021-07-15       DE       00+      69  2021-10-01 #>  3:     2021-07-16       DE       00+      49  2021-10-01 #>  4:     2021-07-17       DE       00+      67  2021-10-01 #>  5:     2021-07-18       DE       00+      51  2021-10-01 #>  6:     2021-07-19       DE       00+      36  2021-10-01 #>  7:     2021-07-20       DE       00+      96  2021-10-01 #>  8:     2021-07-21       DE       00+      94  2021-10-01 #>  9:     2021-07-22       DE       00+      99  2021-10-01 #> 10:     2021-07-23       DE       00+      88  2021-10-01"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"preprocessing","dir":"Articles","previous_headings":"Data","what":"Preprocessing","title":"Getting Started with Epinowcast: Nowcasting","text":"modelling, input data needs converted “reporting triangle” format (see model description details). also need determine metadata facilitate model specification. includes number days data use reference report modules, maximum delay consider, , optionally, grouping (.e. age group, location, ) observations. process reported data format required epinowcast return data.table. stage, need specify grouping (.e age, location) . returned output form data.table metadata stored variables. can useful check output specifying model, just make sure everything expected.","code":"pobs <- enw_preprocess_data(retro_nat_germany, max_delay = 40) pobs #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[820x9]> <data.table[820x11]> <data.table[40x10]> #>    missing_reference  reporting_triangle      metareference          metareport #>               <list>              <list>             <list>              <list> #> 1: <data.table[0x6]> <data.table[40x42]> <data.table[40x9]> <data.table[79x12]> #>             metadelay max_delay  time snapshots     by groups   max_date #>                <list>     <num> <int>     <int> <list>  <int>     <IDat> #> 1: <data.table[40x5]>        40    40        40 [NULL]      1 2021-08-22 #>    timestep #>      <char> #> 1:      day"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"model-specification","dir":"Articles","previous_headings":"","what":"Model specification","title":"Getting Started with Epinowcast: Nowcasting","text":"epinowcast package designed provide users flexible customizable modelling framework. package comes equipped several modules users can utilize construct models, also allows users create modules. ensures models can tailored user’s specific data context.","code":""},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"default-nowcasting-model","dir":"Articles","previous_headings":"Model specification","what":"Default nowcasting model","title":"Getting Started with Epinowcast: Nowcasting","text":"default nowcasting model epinowcast consists three modules: process (expectation) module models expected counts date reference (reference_date) parametric reference reporting model models reporting delay distribution date reference non-parametric reporting model models differences reporting delay distribution date report (report_date), example, day---week effects reporting delay. following sections, specify simple models modules. appropriateness specifications vary depending context. See vignettes details model specification examples complex models.","code":""},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"process-model","dir":"Articles","previous_headings":"Model specification","what":"Process model","title":"Getting Started with Epinowcast: Nowcasting","text":"commonly used process model nowcasting model expected counts date reference via geometric random walk acts minimally informed smoothing prior thus gives lot weight observed data. default process model epinowcast. Users may also specify model using enw_expectation() function. , day refers number days start data. underlying process model exponential growth rate model (\\(C_t = C_{t-1} \\exp^{r_t}\\)), specifying random effect (.e. (1 | day)) growth rate equivalent geometric random walk expected counts reference date.","code":"expectation_module <- enw_expectation(   ~ 0 + (1 | day), data = pobs )"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"reporting-model-by-reference-date","dir":"Articles","previous_headings":"Model specification","what":"Reporting model by reference date","title":"Getting Started with Epinowcast: Nowcasting","text":"baseline assumption reporting delay log-normally distributed, static time strata. can specify model using enw_reference() function, Note default distribution log-normal, hence distribution argument omitted . Alternatively model reporting delay non-parametrically using hazard model (see model description details). following equivalent cox proportional hazards model single baseline hazard function. Advanced users may wish combine parametric non-parametric reference date reporting models. example, model reporting delay log-normal delays 10 days use hazard model longer delays.","code":"reference_module <- enw_reference(~1, distribution = \"lognormal\", data = pobs) np_reference_module <- enw_reference(   parametric = ~0, non_parametric = ~ 0 + delay, data = pobs )"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"reporting-effects-by-report-date","dir":"Articles","previous_headings":"Model specification","what":"Reporting effects by report date","title":"Getting Started with Epinowcast: Nowcasting","text":"Even evidence reporting processes can approximated single distribution, may additional reporting effects captured reference model. example, reporting may lower weekends holidays. can specify model effects using hazard formulation (captures conditional relationship different reporting delays, see model description details) using enw_report() function. specify model random effect day week capture weekly seasonality reporting delay.","code":"report_module <- enw_report(~ (1 | day_of_week), data = pobs)"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"precompiling-the-model","dir":"Articles","previous_headings":"","what":"Precompiling the model","title":"Getting Started with Epinowcast: Nowcasting","text":"epinowcast uses cmdstan fit models, necessary first compile model. can done using enw_model() function. Note step can left epinowcast, want use multiple cores per chain speed model fitting therefore compile model feature turned .","code":"model <- enw_model(threads = TRUE)"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"bringing-it-all-together-fitting-the-model","dir":"Articles","previous_headings":"","what":"Bringing it all together: Fitting the model","title":"Getting Started with Epinowcast: Nowcasting","text":"can now fit model using “-U-Turn Sampler Markov chain Monte Carlo” method. type Hamiltonian Monte Carlo (HMC) algorithm core fitting method used cmdstan. NUTS MCMC method efficient, automatically tunes parameters robust correlations parameters, making fast effective generating samples posterior distribution. specify fitting options using enw_fit_opts() (note settings shown tuned speed may appropriate many real world use cases). also pass preprocessed data (pobs), pre-compiled model (model), model modules (expectation_module, reference_module, report_module) epinowcast, combined used fit model.","code":"options(mc.cores = 2) nowcast <- epinowcast(data = pobs,   expectation = expectation_module,   reference = reference_module,   report = report_module,   fit = enw_fit_opts(     save_warmup = FALSE, pp = TRUE,     chains = 2, threads_per_chain = 2,     iter_sampling = 500, iter_warmup = 500,     show_messages = interactive()   ),   model = model )"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"the-epinowcast-object","dir":"Articles","previous_headings":"","what":"The epinowcast object","title":"Getting Started with Epinowcast: Nowcasting","text":"epinowcast() function returns epinowcast object includes diagnostic information, data used fitting, underlying CmdStanModel object.","code":"nowcast #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[820x9]> <data.table[820x11]> <data.table[40x10]> #>    missing_reference  reporting_triangle      metareference          metareport #>               <list>              <list>             <list>              <list> #> 1: <data.table[0x6]> <data.table[40x42]> <data.table[40x9]> <data.table[79x12]> #>             metadelay max_delay  time snapshots     by groups   max_date #>                <list>     <num> <int>     <int> <list>  <int>     <IDat> #> 1: <data.table[40x5]>        40    40        40 [NULL]      1 2021-08-22 #>    timestep             priors #>      <char>             <list> #> 1:      day <data.table[14x6]> #>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             fit #>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <list> #> 1: <CmdStanMCMC>\\n  Inherits from: <CmdStanFit>\\n  Public:\\n    clone: function (deep = FALSE) \\n    cmdstan_diagnose: function () \\n    cmdstan_summary: function (flags = NULL) \\n    code: function () \\n    config_files: function (include_failed = FALSE) \\n    constrain_variables: function (unconstrained_variables, transformed_parameters = TRUE, \\n    data_file: function () \\n    diagnostic_summary: function (diagnostics = c(\"divergences\", \"treedepth\", \"ebfmi\"), \\n    draws: function (variables = NULL, inc_warmup = FALSE, format = getOption(\"cmdstanr_draws_format\", \\n    expose_functions: function (global = FALSE, verbose = FALSE) \\n    functions: environment\\n    grad_log_prob: function (unconstrained_variables, jacobian = TRUE, jacobian_adjustment = NULL) \\n    hessian: function (unconstrained_variables, jacobian = TRUE, jacobian_adjustment = NULL) \\n    init: function () \\n    init_model_methods: function (seed = 1, verbose = FALSE, hessian = FALSE) \\n    initialize: function (runset) \\n    inv_metric: function (matrix = TRUE) \\n    latent_dynamics_files: function (include_failed = FALSE) \\n    log_prob: function (unconstrained_variables, jacobian = TRUE, jacobian_adjustment = NULL) \\n    loo: function (variables = \"log_lik\", r_eff = TRUE, moment_match = FALSE, \\n    lp: function () \\n    metadata: function () \\n    metric_files: function (include_failed = FALSE) \\n    num_chains: function () \\n    num_procs: function () \\n    output: function (id = NULL) \\n    output_files: function (include_failed = FALSE) \\n    print: function (variables = NULL, ..., digits = 2, max_rows = getOption(\"cmdstanr_max_rows\", \\n    profile_files: function (include_failed = FALSE) \\n    profiles: function () \\n    return_codes: function () \\n    runset: CmdStanRun, R6\\n    sampler_diagnostics: function (inc_warmup = FALSE, format = getOption(\"cmdstanr_draws_format\", \\n    save_config_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_data_file: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_latent_dynamics_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_metric_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_object: function (file, ...) \\n    save_output_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_profile_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    summary: function (variables = NULL, ...) \\n    time: function () \\n    unconstrain_draws: function (files = NULL, draws = NULL, format = getOption(\"cmdstanr_draws_format\", \\n    unconstrain_variables: function (variables) \\n    variable_skeleton: function (transformed_parameters = TRUE, generated_quantities = TRUE) \\n  Private:\\n    draws_: -1456.8448 -1455.6517 -1453.0445 -1445.7829 -1436.804 -1 ...\\n    init_: NULL\\n    inv_metric_: list\\n    metadata_: list\\n    model_methods_env_: environment\\n    profiles_: NULL\\n    read_csv_: function (variables = NULL, sampler_diagnostics = NULL, format = getOption(\"cmdstanr_draws_format\", \\n    return_codes_: 0 0\\n    sampler_diagnostics_: 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 8 8 7 7 7 7  ...\\n    warmup_draws_: NULL\\n    warmup_sampler_diagnostics_: NULL #>           data  fit_args init_method_output samples max_rhat #>         <list>    <list>             <list>   <int>    <num> #> 1: <list[112]> <list[6]>             [NULL]    1000     1.01 #>    divergent_transitions per_divergent_transitions max_treedepth #>                    <num>                     <num>         <num> #> 1:                     0                         0             8 #>    no_at_max_treedepth per_at_max_treedepth run_time #>                  <int>                <num>    <num> #> 1:                  20                 0.02     44.6"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"summarising-and-plotting-the-nowcast","dir":"Articles","previous_headings":"","what":"Summarising and plotting the nowcast","title":"Getting Started with Epinowcast: Nowcasting","text":"nowcast (combination currently observed predicted unobserved data) can summarised using Similarly, summarised nowcast can plotted latest observed data using plot chunk nowcast","code":"nowcast |>   summary(probs = c(0.05, 0.95)) |>   head(n = 10) #>     reference_date report_date .group max_confirm location age_group confirm #>             <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>  1:     2021-07-14  2021-08-22      1          72       DE       00+      72 #>  2:     2021-07-15  2021-08-22      1          69       DE       00+      69 #>  3:     2021-07-16  2021-08-22      1          47       DE       00+      47 #>  4:     2021-07-17  2021-08-22      1          65       DE       00+      65 #>  5:     2021-07-18  2021-08-22      1          50       DE       00+      50 #>  6:     2021-07-19  2021-08-22      1          36       DE       00+      36 #>  7:     2021-07-20  2021-08-22      1          94       DE       00+      94 #>  8:     2021-07-21  2021-08-22      1          91       DE       00+      91 #>  9:     2021-07-22  2021-08-22      1          99       DE       00+      99 #> 10:     2021-07-23  2021-08-22      1          86       DE       00+      86 #>     cum_prop_reported delay prop_reported    mean median        sd    mad    q5 #>                 <num> <num>         <num>   <num>  <num>     <num>  <num> <num> #>  1:                 1    39             0  72.000     72 0.0000000 0.0000    72 #>  2:                 1    38             0  69.054     69 0.2305149 0.0000    69 #>  3:                 1    37             0  47.109     47 0.3394617 0.0000    47 #>  4:                 1    36             0  65.236     65 0.5005542 0.0000    65 #>  5:                 1    35             0  50.300     50 0.5782165 0.0000    50 #>  6:                 1    34             0  36.250     36 0.5289421 0.0000    36 #>  7:                 1    33             0  94.563     94 0.7473885 0.0000    94 #>  8:                 1    32             0  91.872     92 0.9656855 1.4826    91 #>  9:                 1    31             0 100.226    100 1.1850436 1.4826    99 #> 10:                 1    30             0  87.436     87 1.2559783 1.4826    86 #>       q95      rhat  ess_bulk  ess_tail #>     <num>     <num>     <num>     <num> #>  1:    72        NA        NA        NA #>  2:    70 0.9985141 1032.0960 1008.0970 #>  3:    48 0.9990624  794.8951  837.0237 #>  4:    66 1.0007253  860.8058  910.5574 #>  5:    51 0.9991079  974.5339  967.9402 #>  6:    37 0.9993738 1018.5578 1010.6937 #>  7:    96 1.0002582  994.3402  933.8959 #>  8:    94 0.9999147 1119.8280 1024.3509 #>  9:   102 1.0015045 1066.8986 1026.4201 #> 10:    90 0.9993389 1003.7220  873.2440 plot(nowcast, latest_obs = latest_germany_hosp)"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"plotting-posterior-predictions","dir":"Articles","previous_headings":"Summarising and plotting the nowcast","what":"Plotting posterior predictions","title":"Getting Started with Epinowcast: Nowcasting","text":"Plotting posterior predictions can useful way assessing performance checking model capturing underlying data generation process adequately. can directly output epinowcast() using plot chunk pp","code":"plot(nowcast, type = \"posterior\") +   facet_wrap(vars(reference_date), scale = \"free\")"},{"path":"https://package.epinowcast.org/dev/articles/epinowcast.html","id":"using-package-functions-rather-than-s3-methods","dir":"Articles","previous_headings":"Summarising and plotting the nowcast","what":"Using package functions rather than S3 methods","title":"Getting Started with Epinowcast: Nowcasting","text":"Rather using S3 methods supplied epinowcast() directly, package functions can also used extract nowcast posterior samples, summarise , plot . demonstrated plotting 7 day incidence hospitalisations. plot chunk week_nowcast see model underestimating incidence hospitalisations ultimately reported. range potential reasons , first process model fully capture trend day week periodicity present data. See case study vignettes ideas deal issues.","code":"# extract samples samples <- summary(nowcast, type = \"nowcast_samples\")  # Take a 7 day rolling sum of both samples and observations cols <- c(\"confirm\", \"sample\") samples[, (cols) := lapply(.SD, frollsum, n = 7),   .SDcols = cols, by = \".draw\" ][!is.na(sample)] #>        reference_date report_date .group max_confirm location age_group confirm #>                <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     1:     2021-07-20  2021-08-22      1          94       DE       00+     433 #>     2:     2021-07-20  2021-08-22      1          94       DE       00+     433 #>     3:     2021-07-20  2021-08-22      1          94       DE       00+     433 #>     4:     2021-07-20  2021-08-22      1          94       DE       00+     433 #>     5:     2021-07-20  2021-08-22      1          94       DE       00+     433 #>    ---                                                                          #> 33996:     2021-08-22  2021-08-22      1          45       DE       00+    1093 #> 33997:     2021-08-22  2021-08-22      1          45       DE       00+    1093 #> 33998:     2021-08-22  2021-08-22      1          45       DE       00+    1093 #> 33999:     2021-08-22  2021-08-22      1          45       DE       00+    1093 #> 34000:     2021-08-22  2021-08-22      1          45       DE       00+    1093 #>        cum_prop_reported delay prop_reported .chain .iteration .draw sample #>                    <num> <num>         <num>  <int>      <int> <int>  <num> #>     1:                 1    33             0      1          1     1    435 #>     2:                 1    33             0      1          2     2    433 #>     3:                 1    33             0      1          3     3    434 #>     4:                 1    33             0      1          4     4    434 #>     5:                 1    33             0      1          5     5    433 #>    ---                                                                      #> 33996:                 1     0             1      2        496   996   2338 #> 33997:                 1     0             1      2        497   997   1872 #> 33998:                 1     0             1      2        498   998   2438 #> 33999:                 1     0             1      2        499   999   1841 #> 34000:                 1     0             1      2        500  1000   2229 latest_germany_hosp_7day <- copy(latest_germany_hosp)[   ,   confirm := frollsum(confirm, n = 7) ][!is.na(confirm)]  # Summarise samples sum_across_last_7_days <- enw_summarise_samples(samples)  # Plot samples enw_plot_nowcast_quantiles(sum_across_last_7_days, latest_germany_hosp_7day)"},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Model Features Summary","text":"vignette provides high-level summary epinowcast can . Rather duplicating detailed documentation, signpost examples documentation capability. detailed model specification, see model definition vignette. function-specific details, see ?function_name.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"timesteps","dir":"Articles","previous_headings":"","what":"Different Timesteps and Timespans","title":"Model Features Summary","text":"epinowcast supports flexible temporal aggregation match data structure computational constraints. Key functions: enw_preprocess_data(): Set timestep preprocessing enw_aggregate_cumulative(): Convert timesteps see : getting started vignette uses daily data. weekly custom timesteps, simply change timestep argument enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"stratification","dir":"Articles","previous_headings":"","what":"Stratified and Multi-Group Nowcasting","title":"Model Features Summary","text":"Nowcast across multiple groups simultaneously hierarchical sharing information. Key functions: enw_preprocess_data(): Specify grouping argument Formula interface: Control sharing via random effects see : Germany age-stratified case study demonstrates multi-group nowcasting age stratification hierarchical effects.","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"delay-modelling","dir":"Articles","previous_headings":"","what":"Delay Modelling Approaches","title":"Model Features Summary","text":"Model reporting delays using parametric distributions, non-parametric hazards, combinations. Available distributions: See distributions vignette details range supported distributions. Key functions: enw_reference(): Specify delay model See ?enw_reference formula details see : vignettes use delay models. non-parametric approaches mixed models, see ?enw_reference examples.","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"latent-models","dir":"Articles","previous_headings":"","what":"Latent Process Models","title":"Model Features Summary","text":"Specify generative model expected latent process (e.g., infections, hospitalisations). Key functions: enw_expectation(): Specify latent process model observation modifiers See ?enw_expectation details see : Rt estimation vignette demonstrates renewal process models generation times.","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"hierarchical","dir":"Articles","previous_headings":"","what":"Hierarchical Structure","title":"Model Features Summary","text":"Build hierarchical models using formula interface. Key functions: enw_formula(): Unified formula interface rw(): Random walk helper See ?enw_formula syntax details see : Germany case study uses random effects age groups. model modules support formula interface.","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"missing-data","dir":"Articles","previous_headings":"","what":"Missing Data Handling","title":"Model Features Summary","text":"Handle two types missing data: missing reference dates missing observations. Common missing observation workflows: Key functions: enw_missing(): Model missing reference dates enw_extend_date(): Extend time series unobserved dates enw_flag_observed_observations(): Flag observations based NAs enw_obs(): Use observation_indicator control likelihood Notes: missing reference model assumes consistent reporting delay observations without known reference dates observations marked .observed = FALSE can excluded likelihood whilst still generating posterior predictions see : NA handling example: See ?enw_flag_observed_observations ?enw_obs examples use cases: See function documentation enw_missing, enw_extend_date","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"model-evaluation","dir":"Articles","previous_headings":"","what":"Model Evaluation","title":"Model Features Summary","text":"Assess model fit compare models. Key functions: enw_fit_opts(): Control outputs plot(): Visualise results External: loo, scoringutils packages see : Rt estimation vignette shows model scoring evaluation.","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"computational-options","dir":"Articles","previous_headings":"","what":"Computational Options","title":"Model Features Summary","text":"Control computational efficiency parallelisation. Key functions: enw_fit_opts(): Specify computational options See ?enw_fit_opts details see : See Stan help vignette guidance computational settings.","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"data-handling","dir":"Articles","previous_headings":"","what":"Data Handling","title":"Model Features Summary","text":"Prepare process data nowcasting. see : getting started vignette demonstrates full data preprocessing workflow.","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"current-limitations","dir":"Articles","previous_headings":"","what":"Current Limitations","title":"Model Features Summary","text":"following features currently supported may interest. need capabilities, please reach via community forum GitHub discussions. Get involved: welcome contributions discussions extending package support features. See community forum ongoing discussions.","code":""},{"path":"https://package.epinowcast.org/dev/articles/features.html","id":"further-reading","dir":"Articles","previous_headings":"","what":"Further Reading","title":"Model Features Summary","text":"Getting started vignette: Basic workflow Model definition vignette: Mathematical details Germany case study: Age-stratified nowcasting Rt estimation vignette: Renewal process models Distributions vignette: Parametric distributions Function documentation: ?function_name detailed API Package website: https://package.epinowcast.org","code":""},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"packages","dir":"Articles","previous_headings":"","what":"Packages","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"use epinowcast package, data.table purrr data manipulation, ggplot2 plotting, knitr produce tables output, loo approximately evaluate sample performance scoringutils evaluate sample forecast performance. vignette includes several models take upwards 30 minutes fit data moderately equipped laptop. speed model fitting CPUs available set number threads used per chain half number real cores available (6 using 2 MCMC chains 12 real cores available). Note may cause conflicts processes running computer issue reduce number threads used.","code":"library(epinowcast) library(data.table) library(purrr) library(ggplot2) library(loo) library(scoringutils) library(knitr) threads <- floor(min(max(1, parallel::detectCores() /  2), 6)) options(mc.cores = 2)"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"data","dir":"Articles","previous_headings":"","what":"Data","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"Nowcasting effectively estimation reporting patterns recently reported data. requires data patterns previous observations, typically means time series data reported multiple consecutive days (theory non-consecutive days used yet supported epinowcast). use COVID-19 hospitalisations date positive test Germany stratified age group available 1st September 2020 (40 days data included prior ) example data available real-time hospitalisations date positive test available 20th October represent hospitalisations finally reported. data sourced Robert Koch Institute via Germany Nowcasting hub deconvolved weekly data days negative reported hospitalisations adjusted. first filter data available 1st September last 40 days. Similarly find data available 20th October dates, serve target “true” data.","code":"nat_germany_hosp <- epinowcast::germany_covid19_hosp[location == \"DE\"]  retro_nat_germany <- nat_germany_hosp |>   enw_filter_report_dates(latest_date = \"2021-09-01\") |>   enw_filter_reference_dates(include_days = 40) retro_nat_germany #>       reference_date location age_group confirm report_date #>               <IDat>   <fctr>    <fctr>   <int>      <IDat> #>    1:     2021-07-24       DE       00+      31  2021-07-24 #>    2:     2021-07-25       DE       00+       8  2021-07-25 #>    3:     2021-07-26       DE       00+       9  2021-07-26 #>    4:     2021-07-27       DE       00+      35  2021-07-27 #>    5:     2021-07-28       DE       00+      51  2021-07-28 #>   ---                                                       #> 5736:     2021-07-24       DE     05-14       0  2021-09-01 #> 5737:     2021-07-24       DE     15-34      25  2021-09-01 #> 5738:     2021-07-24       DE     35-59      27  2021-09-01 #> 5739:     2021-07-24       DE     60-79      22  2021-09-01 #> 5740:     2021-07-24       DE       80+      15  2021-09-01 latest_nat_germany <- nat_germany_hosp |>   enw_filter_report_dates(latest_date = \"2021-10-20\") |>   enw_latest_data() |>   enw_filter_reference_dates(latest_date = \"2021-09-01\", include_days = 40)"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"data-preprocessing","dir":"Articles","previous_headings":"","what":"Data preprocessing","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"epinowcast works assuming data preprocessed reporting format requires, coupled meta data reference report dates. enw_preprocess_data() can used , although users can also use internal functions produce custom preprocessing steps. stage arbitrary groupings observations can defined, propagated throughout subsequent modelling steps. data stratified age, hence grouped age group, principle grouping combination groups independent reference report date models. furthermore assume maximum delay required make model identifiable. set 40 days due evidence long reporting delays example data. However, note cases majority right truncation occurs first days increasing maximum delay non-linear effect run-time (.e. model maximum delay 20 days much faster fit 40 days). Note also current formulation delays longer maximum ignored adjusted estimate really data reported maximum delay rather finally reported data. Another key modelling choice make stage model overall hospitalisations jointly age groups rather aggregation age group estimates. implicitly assumes aggregated non-aggregated data comparable (may may case) reporting process shares mechanisms. Another way approach model age stratified hospitalisations aggregate nowcast estimates total counts fitting model.","code":"pobs <- enw_preprocess_data(retro_nat_germany, max_delay = 40, by = \"age_group\") pobs #>                     obs           new_confirm               latest #>                  <list>                <list>               <list> #> 1: <data.table[5740x9]> <data.table[5740x11]> <data.table[280x10]> #>    missing_reference   reporting_triangle       metareference #>               <list>               <list>              <list> #> 1: <data.table[0x6]> <data.table[280x42]> <data.table[280x9]> #>              metareport          metadelay max_delay  time snapshots        by #>                  <list>             <list>     <num> <int>     <int>    <list> #> 1: <data.table[553x12]> <data.table[40x5]>        40    40       280 age_group #>    groups   max_date timestep #>     <int>     <IDat>   <char> #> 1:      7 2021-09-01      day"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"models","dir":"Articles","previous_headings":"","what":"Models","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"explore range increasingly complex models using subject area knowledge posterior predictive checks motivate modelling choices.","code":""},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"shared-reporting-delay-distribution","dir":"Articles","previous_headings":"Models","what":"Shared reporting delay distribution","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"first explore relatively simple model assumes reporting delays fixed across age groups time. Note use two chains using 2 threads demonstration general using 4 chains recommended. Also note warm-sampling iterations set default values reduce compute requirements may sufficient many real world use cases. Finally, note silenced fitting progress potential warning messages general done. first visualise observations available model, nowcast final reported hospitalisations actual reported observations. plot chunk nowcast","code":"fit <- enw_fit_opts(   save_warmup = FALSE, output_loglik = TRUE, pp = TRUE,   chains = 2   , threads_per_chain = threads,   iter_sampling = 500, iter_warmup = 500,   show_messages = interactive(), refresh = ifelse(interactive(), 100, 0),   adapt_delta = 0.9, max_treedepth = 12 ) nowcast <- epinowcast(pobs,   fit = fit ) plot(nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"using-the-inflated-posterior-as-a-prior","dir":"Articles","previous_headings":"Models","what":"Using the inflated posterior as a prior","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"speed model fitting make use posterior information previous model (inflation) parameters. Note truly Bayesian approach situations may problematic.","code":"priors <- summary(   nowcast,   type = \"fit\",   variables = c(\"refp_mean_int\", \"refp_sd_int\", \"sqrt_phi\") ) priors[, sd := sd * 1.5] priors #>            variable      mean    median         sd        mad        q5 #>              <char>     <num>     <num>      <num>      <num>     <num> #> 1: refp_mean_int[1] 1.1318689 1.1196686 0.18657252 0.12073145 0.9469384 #> 2:   refp_sd_int[1] 2.6065242 2.6016583 0.19868103 0.12495316 2.3955185 #> 3:      sqrt_phi[1] 0.6415712 0.6405367 0.02783982 0.01837323 0.6110610 #>         q20       q80       q95      rhat  ess_bulk ess_tail #>       <num>     <num>     <num>     <num>     <num>    <num> #> 1: 1.025191 1.2311490 1.3463330 1.0024219  803.2077 746.8305 #> 2: 2.497948 2.7124564 2.8303578 1.0030131  780.4954 604.5020 #> 3: 0.626158 0.6569649 0.6719854 0.9997664 1475.4872 780.1094"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"reference-day-of-the-week-effect","dir":"Articles","previous_headings":"Models","what":"Reference day of the week effect","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"underlying data trying nowcast clearly day week periodicity. default model, group specific random walk log notified cases, accounted . Accounting , using random effect day week likely improve nowcast performance reduce computation needed fit model. can specify using enw_expectation() module formula interface follows. visualise nowcasts plot chunk exp_nowcast","code":"expectation_module <- enw_expectation(   ~ 0 + (1 | day_of_week) + (1 | day:.group), data = pobs )  exp_nowcast <- epinowcast(pobs,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(exp_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"posterior-predictions","dir":"Articles","previous_headings":"Models","what":"Posterior predictions","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"order identify areas current model poorly reproducing data plot posterior predictions data. plot faceted age group reference data y axis showing number observations reported given day given reference day x axis showing report date. see fairly clearly oscillations reported cases every 7 days expressed plot oscillations facet appear move left right across facets. indicates kind week day adjustment may needed. plot chunk simple_pp","code":"plot(exp_nowcast, type = \"posterior\") +   facet_wrap(vars(age_group, reference_date), scales = \"free\")"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"reporting-day-of-the-week-effect","dir":"Articles","previous_headings":"Models","what":"Reporting day of the week effect","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"noted using posterior predictions simple model fit appears day week effect reported observations. adjust introduce random effect day week date report using following helper function uses metadata produced enw_preprocess_data(). Note epinowcast uses sparse design matrix reduce runtimes modules design matrix shows unique rows index containing mapping full design matrix. now repeat nowcasting step day week reporting model included. Nowcast performance looks visually improved notable variation across age groups 35-59 year old nowcast appearing quite poor (result aggregate nowcast also showing great performance). also plot posterior predictions model way previous model. plot chunk dow_nowcast","code":"report_module_dow <- enw_report(~ (1 | day_of_week), data = pobs) dow_nowcast <- epinowcast(pobs,   report = report_module_dow,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(dow_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"age-group-variation","dir":"Articles","previous_headings":"Models","what":"Age group variation","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"quite likely variation reporting delay age may driving variation nowcast performance noted last model. model using random effect 5 year age group (groups supplied data). nowcast time using age adjusted reference date model day week adjusted report date model. Fit looks slightly better adjustment though uncertainty also increased age groups performance final day data may reduced compared first model. plot chunk age_nowcast","code":"reference_module_age <- enw_reference(~ 1 + (1 | age_group), data = pobs) age_nowcast <- epinowcast(pobs,   reference = reference_module_age,   report = report_module_dow,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(age_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"variation-based-on-reference-date","dir":"Articles","previous_headings":"Models","what":"Variation based on reference date","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"case reporting delays change time well across age groups. One way modelling assume piecewise constant variation time modelled first order weekly random walk. attractive property approach limits number report date distributions need evaluated model number weeks data expensive computational step using approach introducing time-varying parameter limits additional computational overhead. fit nowcasting model, comparison previous model looks like introduction variation time introduce slight improvement capturing hospitalisations age groups. plot chunk week_nowcast","code":"reference_module_age_week <- enw_reference(   ~ 1 + (1 | age_group) + rw(week), data = pobs ) week_nowcast <- epinowcast(pobs,   reference = reference_module_age_week,   report = report_module_dow,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(week_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"variation-based-on-reference-date-stratified-by-age","dir":"Articles","previous_headings":"Models","what":"Variation based on reference date stratified by age","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"final hierarchical model makes sense explore whether evidence reporting delays vary week age group jointly. scenario assumption delays may evolve differently time age group reporting effects measurement error still shared across data sets. can now fit model . comparison previous model looks like introduction variation time introduce slight improvement capturing hospitalisations age groups. plot chunk age_week_nowcast","code":"reference_module_week_by_age <- enw_reference(   ~ 1 + (1 | age_group) + rw(week, by = age_group), data = pobs ) age_week_nowcast <- epinowcast(pobs,   reference = reference_module_week_by_age,   report = report_module_dow,   expectation = expectation_module,   fit = fit,   priors = priors ) plot(age_week_nowcast, latest_obs = latest_nat_germany) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"independent-models-for-each-age-group-","dir":"Articles","previous_headings":"Models","what":"Independent models for each age group.","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"obvious question ask stage using model jointly fits age groups actually beneficial. explore fitting model previously (day week effect report date random walk week reference date stratified age) age group independently. define model single call epinowcast fitting dataset independently joint setting likely lead long fit times real benefit. Instead write small helper function preprocess input data, define report reference date models run nowcast. can now use wrapper function data available age group, summarise resulting nowcast, join single data.frame. now summarised nowcasts rather object class epinowcast need make use underlying plot function . see performance generally quite good across board though width credible intervals also increased. Importantly 35-59 year old age group captured least well hierarchical models minor reductions performance age groups. suggests dataset nowcast date may relatively little benefit jointly modelling age groups. plot chunk ind_nowcast","code":"independent_epinowcast <- function(obs, max_delay = 40, ...) {   pobs_ind <- enw_preprocess_data(obs, max_delay = max_delay)    nowcast <- epinowcast(     data = pobs_ind,     reference = enw_reference(~ rw(week), data = pobs_ind),     report = enw_report(~ (1 | day_of_week), data = pobs_ind),     expectation = enw_expectation(       ~ 0 + (1 | day_of_week) + (1 | day), data = pobs_ind     ),      ...   )   return(nowcast) } options(mc.cores = 2)  independent_nowcast <- map(   split(retro_nat_germany, by = \"age_group\"),   independent_epinowcast,   fit = enw_fit_opts(     save_warmup = FALSE, output_loglik = TRUE, pp = TRUE,     chains = 2, threads_per_chain = threads,     iter_sampling = 500, iter_warmup = 500,     show_messages = FALSE, refresh = 0,     adapt_delta = 0.95, max_treedepth = 12   ),   priors = priors )  independent_nowcast_summary <- map_dfr(   independent_nowcast,   summary,   probs = c(0.025, 0.05, seq(0.1, 0.9, by = 0.1), 0.95, 0.975) ) enw_plot_nowcast_quantiles(   independent_nowcast_summary, latest_obs = latest_nat_germany ) +   facet_wrap(vars(age_group), scales = \"free_y\")"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"alternative-models","dir":"Articles","previous_headings":"Models","what":"Alternative models","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"models defined assumed delay distribution, aside report date effects, parametric lognormal distribution. assumptions may less optimal. Alternatives include assuming different distributional form (gamma distribution also supported epinowcast) assuming report delay fully non-parametric yet supported future package versions. number additional models explore within framework supported epinowcast well large number alternative parameterisations yet supported. example, explore models complex reporting day effects, including holidays (supported epinowcast either separate effect assuming reporting hazard Sundays) variation time represent reporting delays changing independently reference date (similar time varying model defined effect occurring report date model rather reference date model). choices data dependent domain knowledge needs used assess likely mechanisms. interested expanding functionality underlying model address issues note epinowcast allows users pass models meaning alternative parameterisations may easily tested within package infrastructure. testing done alterations increase flexibility package model improves defaults welcome pull requests.","code":""},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"evaluation","dir":"Articles","previous_headings":"","what":"Evaluation","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"nowcast single date, visualised performance went, evaluation anything complete rigorous can give examples might evaluate performance generally potentially draw useful initial conclusions. first list models (including simplest case) give informative names, summarise nowcast posterior model join tidy data.frame make analysis easier. allows us plot nowcasts model age group compared latest data. Looking plot shows small differences across models uncertainty generally decreasing model complexity increases. age groups clearly better nowcast others 35-59 year old age group particular poor nowcast coverage. plot chunk unnamed-chunk-18 crude measure general sample performance can use leave one information criterion supplied loo package though note typically appropriate time series data (approximate LFO cross validation likely perform better), approximation used avoid refitting likely poor, accounting refitting model required. see model includes day week effects date report substantially outperformed baseline model adjustment complex models adjusted variation age week date test improved estimated sample performance uncertainty around estimates wide. rigorously, can evaluate nowcasts using proper scoring rules scoringutils package including continuous ranked probability score. limit nowcasts scored last 7 days data make interpretation easier, transform nowcasts format required scoringutils, link latest available data, finally call scoringutils::score(). Note scoring single nowcasts difficult generalise findings one day reporting may unusual. informed view model pick ideally nowcast range dates evaluate . first step score overall performance. see baseline model variation actually performs well models include least day week, age groups variation week performing comparably. performance characteristics relatively similar across models (models biased towards underprediction example). Finally look across scores relative simple model variation. nicely captures role last data point performance also highlights variation across reference dates age groups models. difference performance hierarchical age models model treats age groups independently also clear. plot chunk performance","code":"nowcasts <- list(   \"Reference: Fixed, Report: Fixed\" = exp_nowcast,   \"Reference: Fixed, Report: Day of week\" = dow_nowcast,   \"Reference: Age, Report: Day of week\" = age_nowcast,   \"Reference: Age and week, Report: Day of week\" = week_nowcast,   \"Reference: Age and week by age, Report: Day of week\" = age_week_nowcast ) summarised_nowcasts <- map(   nowcasts, summary,   probs = c(0.025, 0.05, seq(0.1, 0.9, by = 0.1), 0.95, 0.975) ) summarised_nowcasts$`Independent by age, Reference: Week, Report: Day of week` <- independent_nowcast_summary # nolint  summarised_nowcasts <- rbindlist(summarised_nowcasts, idcol = \"model\",                                  use.names = TRUE) summarised_nowcasts[, `:=`(   model = factor(     model,     levels = c(\"Reference: Fixed, Report: Fixed\",                \"Reference: Fixed, Report: Day of week\",                \"Reference: Age, Report: Day of week\",                \"Reference: Age and week, Report: Day of week\",                \"Reference: Age and week by age, Report: Day of week\",                \"Independent by age, Reference: Week, Report: Day of week\")),   age_group = factor(     age_group,     levels = c(\"00+\", \"00-04\", \"05-14\", \"15-34\", \"35-59\", \"60-79\", \"80+\")) )] enw_plot_nowcast_quantiles(   summarised_nowcasts, latest_obs = latest_nat_germany ) +   facet_grid(vars(age_group), vars(model), scales = \"free_y\") loos <- map(nowcasts, \\(x) x$fit[[1]]$loo()) loo_compare(loos) #>                                                     elpd_diff se_diff #> Reference: Age, Report: Day of week                    0.0       0.0  #> Reference: Age and week, Report: Day of week          -0.9       5.7  #> Reference: Age and week by age, Report: Day of week   -2.8       4.2  #> Reference: Fixed, Report: Day of week                -86.9      11.4  #> Reference: Fixed, Report: Fixed                     -619.2      46.0 eval_obs <- latest_nat_germany[reference_date > (max(reference_date) - 7)] scores <- map_dfr(   nowcasts, as_forecast_sample, eval_obs, .id = \"model\" ) |>   rbind(     independent_nowcast |>       map_dfr(as_forecast_sample, eval_obs) |>       within({         model <- \"Independent by age, Reference: Week, Report: Day of week\"       }),       fill = TRUE   ) |>   as.data.table() |>   within({     .group <- NULL   }) |>   as_forecast_sample() |>   score()   scores |>   summarise_scores(by = \"model\") |>   summarise_scores(fun = signif, digits = 2, by = \"model\") |>   kable() relative_scores <- scores |>   add_relative_skill(     by = c(\"reference_date\", \"age_group\"),     baseline = \"Reference: Fixed, Report: Fixed\"   ) |>   summarise_scores(by = c(\"model\", \"reference_date\", \"age_group\"))   relative_scores <- relative_scores[!model == \"Reference: Fixed, Report: Fixed\"] plot <- ggplot(relative_scores) +   aes(x = reference_date, y = crps_scaled_relative_skill, col = model) +   geom_hline(yintercept = 1, linetype = 2, linewidth = 1.2, alpha = 0.5) +   geom_line(linewidth = 1.1, alpha = 0.6) +   geom_point(size = 1.2) +   facet_wrap(vars(age_group)) +   scale_color_brewer(palette = \"Dark2\") +   scale_y_log10(labels = scales::percent)  plot <- enw_plot_theme(plot) +   labs(x = \"Reference date\",        y = \"Weighted interval score (relative to Reference: Fixed, Report: Fixed model)\") + # nolint   guides(col = guide_legend(title = \"Model\", ncol = 2)) plot"},{"path":"https://package.epinowcast.org/dev/articles/germany-age-stratified-nowcasting.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany","text":"vignette showcased using epinowcast nowcast age stratified COVID-19 hospitalisations Germany date test series increasingly complex models motivated data. also showed simple methods exploring nowcasts evaluating . Using limited information available us (nowcast single date used performance date motivate new models) appears models performed acceptably , aside last data point, models age day week effects likely performed better. also fairly clear performance degrades amount reported data reduced intuitively makes sense performance particularly sensitive first day reported data available (.e “now”). apparent finding delays evolve fairly independently across age groups motivates choosing model flexible , least date reference model. Despite independent model fixed effect model well overall, applications choosing model based evaluation, likely select relatively flexible model (day week, age group, age stratified weekly variation) relying hierarchical structure limit overfitting, excepting small reduction performance edge cases (hope edge cases common feature data). However practice, want explore nowcasting evaluating dates possible greater range model structures (discussed alternative modelling section vignette). Note proper scoring approach taken understand model performance (commonly used literature) ranking models based absolute errors groups high counts (35-59 age group) important nowcast correctly groups smaller counts (aged 80+).","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Model definition and implementation","text":"epinowcast package aims modular toolbox real-time infectious disease surveillance outbreak routine contexts. provide modular modelling framework optimised range common surveillance tasks whilst maintaining flexibility supporting user extension. provide flexible semi-parametric model underlying generative process similar implemented real-time infectious disease modelling packages[1,2]. optionally includes renewal process[3,4] latent reporting process[1,5,6]. Combined appropriate generation time distribution approach shown correspond Susceptible-Exposed-Infected-Recovered (SEIR) model[7] addition reporting delays. However, default model contains minimal mechanism order flexibly fit highly informative data. nowcasting approach extension proposed Günther et al.[8] extension model proposed Höhle Heiden[9] implemented surveillance R package[10]. Compared model proposed Günther et al.[8], epinowcast adds support jointly nowcasting multiple related datasets, flexible formula interface allowing specification large range models, optional parametric assumption underlying reporting delay. also support flexible joint modelling missing data assuming reporting delay consistent reported unreported observations following methodology Lison et al.[11]. modelling framework implemented stan probabilistic programming language via cmdstanr[12,13] focus computational efficiency robustness. quick reference available features, see model features summary vignette. following sections outline modelling methodology, current feature set stratified module, highlight implementation details. module present default implementation well generic framework support. Note extensions methodology warmly welcomed community site good first point contact.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"decomposition-into-expected-final-notifications-and-report-delay-components","dir":"Articles","previous_headings":"","what":"Decomposition into expected final notifications and report delay components","title":"Model definition and implementation","text":"concerned outcomes occur time reference (e.g., date symptom onset test disease) reported delay, time report (e.g., date onsets entered central database become available analysis). assume times measured discrete time steps, usually day (case times dates). follow approach Höhle Heiden[9] consider distribution notifications (\\(n_{g,t,d}\\)) date reference (\\(t\\)) reporting delay (\\(d\\)) conditional final observed count \\(N_{g,t}\\) dataset (\\(g\\)) , \\[\\begin{equation}   N_{g,t} = \\sum_{d=0}^{D} n_{g,t,d} \\end{equation}\\] \\(D\\) represents maximum delay date reference time report theory infinite practice set finite value order make model identifiable computationally feasible. \\(t\\) \\(g\\) notifications assumed drawn multinomial distribution \\(N_{g,t}\\) trials probability vector (\\(p_{g,t,d}\\)) length \\(D\\). aim nowcasting predict final observed counts \\(N_{g,t}\\) given information available time \\(t\\). estimating components probability vector jointly expected number final notifications (\\(\\lambda_{g,t} = \\mathbb{E}[N_{g,t}]\\)) dataset \\(g\\) time \\(t\\). alternative approach consider \\(n_{g,t,d}\\) independently point model can defined regression can fit using standard software appropriate observation model adjustment reporting delay (.e., becomes Poisson Negative Binomial regression). implementation approach available Bastos et al.[14]. downside simplified approach reporting conditionally dependent may make specifying models complex reporting distributions difficult.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"default-model","dir":"Articles","previous_headings":"Expected final notifications","what":"Default model","title":"Model definition and implementation","text":"follow approach Günther et al.[8] specify model expected final notifications first order random walk. simple model highly flexible good fit nowcasting problems data highly informative. \\[\\begin{align}   \\log (\\lambda_{g,t}) &\\sim \\text{Normal}\\left(\\log (\\lambda_{g,t-1}) , \\sigma^{\\lambda}_{g} \\right) \\\\   \\log (\\lambda_{g,0}) &\\sim \\text{Normal}\\left(\\log (N_{g,0} + 1), 1 \\right) \\\\ \\sigma^{\\lambda}_{g} &\\sim \\text{Half-Normal}\\left(0, 1\\right) \\end{align}\\] \\(N_{g0}\\), first time point expected observations dataset \\(d\\), assumed completely observed.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"generalised-model","dir":"Articles","previous_headings":"Expected final notifications","what":"Generalised model","title":"Model definition and implementation","text":"settings data sparse users want understand underlying generative process flexible default model likely good choice. settings generic model offers range options context specific. generic model currently based renewal process[3,4] additional latent reporting delays[1,5,6]. previously noted[7], corresponds commonly used Susceptible-Exposed-Infected-Recovered (SEIR) model appropriate generation time specified[7]","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"instantaneous-reproduction-numbergrowth-rate","dir":"Articles","previous_headings":"Expected final notifications","what":"Instantaneous reproduction number/growth rate","title":"Model definition and implementation","text":"model instantaneous reproduction number (\\(R_t\\)) log scale (though support link functions planned). generation time fixed day can interpreted instantaneous growth rate (\\(r_t\\)) defined difference log expected number final notifications time \\(t\\) \\(t-1\\). \\[\\begin{equation}   \\text{log} (R_{g,t}) = r_0 + \\beta_{f,r} X_{r} + \\beta_{r,r} Z_{r} \\end{equation}\\] \\(r_0\\) optional intercept, \\(X_{r}\\) design matrix fixed effects (\\(\\beta_{f,r}\\)), \\(Z_{r}\\) design matrix random effects (\\(\\beta_{r,r}\\). Within specification default model can specified random effect day intercept. Alternative specifications may interest include weekly random walk (specified ~ 1 + rw(week)), piecewise linear model (specified ~ 1 + day:week), group specific random effect (specified ~ 1 + (1 | .group)). model specified via r argument enw_expectation() (see ?enw_expectation). example, enw_expectation(r = ~ 1 + rw(week)) implements weekly random walk log reproduction number described .","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"latent-infectionsnotifications","dir":"Articles","previous_headings":"Expected final notifications","what":"Latent infections/notifications","title":"Model definition and implementation","text":"model expected number infections/latent notifications (\\(\\lambda^l\\)) using renewal process[3,4]. model generalisation default model can used model expected number latent notifications setting generation time fixed day. implies current infections/notifications dependent past infections/notifications based kernel (usually interpreted generation time serial interval). instantaneous daily growth rate model can recovered setting generation time fixed 1 day. model defined follows, \\[\\begin{align}   \\lambda^l_{g,t} &\\sim \\text{LogNormal}\\left(\\mu^{l}_{g,t}, \\sigma^{l}_{g,t} \\right),\\ t \\leq P \\\\   \\lambda^l_{g,t} &= R_{g,t} \\sum_{p = 1}^{P} G_{g}\\left(p, t - p \\right)  \\lambda^l_{g, t-p},\\ t \\gt P   \\end{align}\\] \\(G_{g}\\left(p, t - p \\right)\\) probability infection \\(p\\) days infection \\(t - p\\) days ago group \\(g\\), \\(P\\) maximum generation time. initialise model assume first \\(P\\) latent notifications log-normally distributed mean \\(\\mu^{l}_{g,t}\\) standard deviation \\(\\sigma^{l}_{g,t}\\). equivalent assuming first \\(P\\) latent notifications independent identically distributed. mean log-normal distribution group log latest reported case count first reference date group scaled sum latent reporting delay. standard deviation assumed 1. assumptions can altered user.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"latent-reporting-delay-and-ascertainment","dir":"Articles","previous_headings":"Expected final notifications","what":"Latent reporting delay and ascertainment","title":"Model definition and implementation","text":"settings may additional reporting delays top directly observed data, therefore “nowcastable”, common example delay exposure symptom onset. settings support modelling “latent” reporting delays convolution underlying expected counts potential delays vary time group. implementation similar implemented EpiNow2 epidemia well similar models[1,5,6,11]. addition support modelling ascertainment use improper probability mass functions (.e., enforcing sum 1 constraint) inferring ascertainment possible (example day week reporting patterns). \\[\\begin{align}   \\lambda_{g,t} &= \\upsilon_{g,t} \\sum_{\\tau = 0}^{L - 1} F_{g}\\left(\\tau + 1, t - \\tau \\right)  \\lambda^l_{g, t - \\tau} \\\\   \\nu_{g,t} &= \\nu_0 + \\beta_{f,\\nu} X_{\\nu} + \\beta_{r,\\nu} Z_{\\nu} \\end{align}\\] \\(\\nu_{g,t}\\) inferred ascertainment modelled flexibly using optional intercept (\\(\\nu_0\\)), design matrix (\\(X_{\\nu}\\)) fixed effects (\\(\\beta_{f,\\nu}\\)), design matrix (\\(Z_{\\nu}\\)) random effects (\\(\\beta_{r,\\nu}\\). Ascertainment specified via observation argument latent reporting delays via latent_reporting_delay argument enw_expectation() (see ?enw_expectation). example, enw_expectation(observation = ~ 1 + day_of_week) models day--week variation ascertainment described .","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"delay-distribution","dir":"Articles","previous_headings":"","what":"Delay distribution","title":"Model definition and implementation","text":"Given case counts date reference date report, can estimate reporting delay distribution directly jointly underlying process model, rather relying external estimates sources (though may want account external information priors). following section, describe default parametric delay distribution model extension generic, highly flexible delay model based discrete time--event modelling.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"default-model-1","dir":"Articles","previous_headings":"Delay distribution","what":"Default model","title":"Model definition and implementation","text":"default model, consider reporting delay follow \\(\\text{LogNormal} \\left(\\mu^d, \\sigma^d \\right)\\) distribution, parameters \\[\\begin{align}   \\mu^d &\\sim \\text{Normal} \\left(0, 1 \\right) \\\\   \\sigma^d &\\sim \\text{Half-Normal} \\left(0, 1 \\right). \\end{align}\\] distribution discretised daily probabilities \\(p_{g,t,d}\\) (case group \\(g\\) reference date \\(t\\) reported delay \\(d\\)) adjusted maximum delay, see vignette(\"distributions\") details.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"generalised-model-1","dir":"Articles","previous_headings":"Delay distribution","what":"Generalised model","title":"Model definition and implementation","text":"generalise model order support range delay distributions well effects reporting process delay. Following approach Günther et al.[8] others, parameterise delay probability (\\(p_{g,t,d}\\)) via discrete-time hazard model, .e., \\[\\begin{equation}   p_{g,t,0} = h_{g,t,0},\\ p_{g,t,d} = \\left(1 -\\sum^{d-1}_{d^{\\prime}=0} p_{g,t,d^{\\prime}} \\right) \\times h_{g,t,d}, \\end{equation}\\] \\[ h_{g,t,d} =\\text{P} \\left(\\text{delay}=d|\\text{delay} \\geq d, W_{g,t,d}\\right), \\] -called reporting hazard. case group \\(g\\) reference date \\(t\\), hazard \\(h_{g,t,d}\\) states probability reported delay \\(d\\), given case reported earlier. hazard depends design matrix \\(W_{g,t,d}\\), encodes baseline delay distribution covariates affect reporting delay. extend model Günther et al. decomposing hazard three components, Parametric baseline hazard \\(\\gamma_{g,t,d}\\): hazard derived parametric delay distribution, parameters depending covariates date reference Non-parametric reference date effect \\(\\delta_{g,t,d}\\): effect hazard depends covariates date reference Non-parametric report date effect \\(\\epsilon_{g,t,d}\\): effect hazard depends covariates date report component adds overall hazard regression logit link \\[\\begin{equation}   \\text{logit} (h_{g,t,d}) = \\gamma_{g,t,d} + \\delta_{g,t,d} + \\epsilon_{g,t,d}, \\end{equation}\\] maximum delay hazard \\(h_{g,t,D}=1\\), order enforce assumption observations reported within specified maximum delay. following, describe parameterisation different components.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"parametric-baseline-hazard","dir":"Articles","previous_headings":"Delay distribution > Generalised model","what":"Parametric baseline hazard","title":"Model definition and implementation","text":"parametric baseline hazard \\(\\gamma_{g,t,d}\\) case group \\(g\\) reference date \\(t\\) modelled according certain discretised parametric probability distribution parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\). Currently, epinowcast supports four different parametric distributions: () log-normal (default), (ii) exponential, (iii) gamma, (iv) log-logistic. distributions discretised adjusted assumed maximum delay, see vignette(\"distributions\") details. delay probabilities \\(p^{\\prime}_{g,t,d}\\) obtained discretised delay distribution converted hazards logit scale using \\[\\begin{equation}   \\gamma_{g,t,d} = \\text{logit} \\left(\\frac{p^{\\prime}_{g,t,d}}{\\left(1 -\\sum^{d-1}_{d^{\\prime}=0} p^{\\prime}_{g,t,d^{\\prime}} \\right)} \\right). \\end{equation}\\] default case log-normal distribution, parameters \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\) represent log mean log standard deviation. parameter defined using (log-)linear model. model consists intercept number arbitrary, shared covariates, indexed reference date. covariates multiplied fixed (\\(\\beta_{f,}\\)) random (\\(\\beta_{r,}\\)) coefficients (note can include auto-regressive terms), .e., \\[\\begin{align}   \\mu_{g,t} &= \\mu_0 + \\beta_{f,\\mu} X_{\\gamma} + \\beta_{r,\\mu} Z_{\\gamma} \\\\   \\text{log} (\\upsilon_{g,t}) &= \\upsilon_0 + \\beta_{f,\\upsilon} X_{\\gamma} + \\beta_{r,\\upsilon} Z_{\\gamma} \\end{align}\\] parameters specified via parametric argument enw_reference() (see ?enw_reference), controls \\(\\mu_{g,t}\\) \\(\\upsilon_{g,t}\\) simultaneously. example, enw_reference(parametric = ~ 1 + (1 | age_group)) creates age group-specific random effects parameters , allowing different age groups different delay distributions whilst sharing information hierarchical pooling.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"non-parametric-reference-date-effect-delta_gtd-and-report-date-effect-epsilon_gtd","dir":"Articles","previous_headings":"Delay distribution > Generalised model","what":"Non-parametric reference date effect \\(\\delta_{g,t,d}\\) and report date effect \\(\\epsilon_{g,t,d}\\)","title":"Model definition and implementation","text":"addition parametric reporting effects may also non-parametric effects referenced reference report dates. represented non-distributional logit hazard components date reference report, defined using intercept (\\(\\delta_0\\)) arbitrary, shared covariates fixed (\\(\\beta_{f,}\\)) random (\\(\\beta_{r,}\\)) coefficients (note can include auto-regressive terms). \\[\\begin{align}   \\delta_{g,t,d} &= \\delta_0 + \\beta_{f,\\delta} X_{\\delta} + \\beta_{r,\\delta} Z_{\\delta} \\\\   \\epsilon_{g,t,d} &= \\beta_{f,\\epsilon} X_{\\epsilon} + \\beta_{r,\\epsilon} Z_{\\epsilon} \\end{align}\\] reference date effect \\(\\delta_{g,t,d}\\) specified via non_parametric argument enw_reference() (see ?enw_reference), whilst report date effect \\(\\epsilon_{g,t,d}\\) specified via non_parametric argument enw_report() (see ?enw_report). example, enw_reference(non_parametric = ~ 1 + day_of_week) adds day--week effects reference date hazard, whilst enw_report(non_parametric = ~ 1 + day_of_week) adds day--week effects report date hazard. fixed (\\(\\beta_{f,}\\)) random (\\(\\beta_{r,}\\)) coefficients standard normal priors default standard half-normal priors pooled standard deviations.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"observation-model-and-nowcast","dir":"Articles","previous_headings":"","what":"Observation model and nowcast","title":"Model definition and implementation","text":"Expected notifications date reference (\\(t\\)) reporting delay can now found multiplying expected final notifications \\(t\\) probability reporting day delay (\\(p_{g,t,d}\\)). assume negative binomial observation model, default, joint overdispersion parameter (standard half normal prior 1 square root overdispersion[15]) produce nowcast final observed notifications reference date summing posterior estimates unobserved notification observed notifications reference date. \\[\\begin{align}   n_{g,t,d} \\mid \\lambda_{g,t},p_{g,t,d}  &\\sim \\text{NB} \\left((1 - \\alpha_{g,t})\\lambda_{g,t} \\times p_{g,t,d}, \\phi \\right),\\ t=1,...,T. \\\\     \\frac{1}{\\sqrt{\\phi}} &\\sim \\text{Half-Normal}(0, 1) \\\\   N_{g,t} &= \\sum_{d=0}^{D} n_{g,t,d} \\end{align}\\] \\(\\alpha_{g,t}\\) proportion cases reference date report reference date. default modelled set zero , see accounting reported cases missing reference date section defaults. observation models Poisson distribution also supported. See documentation enw_obs() details. order make best use observed data nowcasting use observations available reported given report reference date use posterior prediction observation model . means nowcast dates become increasingly truncated depend modelled estimates whereas complete majority final count known. Depending use case posterior predictions alone may also interest.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"accounting-for-reported-cases-with-a-missing-reference-date","dir":"Articles","previous_headings":"","what":"Accounting for reported cases with a missing reference date","title":"Model definition and implementation","text":"real-world settings observations may reported without linked reference date. common example cases date symptom onset report date often known onset date may . account support modelling missing process assuming cases missing reference date reporting delay distribution cases known reference date processes drive probability missing reference date (\\(\\alpha_{g,t}\\)) linked unknown date reference rather date report based Lison et al.[11]. model probability flexibly logit scale follows, \\[\\begin{equation}   \\text{logit} (\\alpha_{g,t}) = \\alpha_0 + \\beta_{f,\\alpha} X_{\\alpha} + \\beta_{r,\\alpha} Z_{\\alpha} \\end{equation}\\] \\(\\alpha_0\\) represents intercept, \\(\\beta_{f,\\alpha}\\) fixed effects, \\(\\beta_{r,\\alpha}\\) random effects. link observations date report missing reference date (\\(M_{g,t}\\)) convolve expected notifications probability missing reference date probability reporting given day follows, \\[\\begin{equation}   M_{g,t} \\mid \\lambda_{g,t},p_{g,t,d}, \\alpha_{g,t}  \\sim \\text{NB} \\left( \\sum^D_{d=0} \\alpha_{g,t-d} \\lambda_{g,t-d} p_{g,t-d,d}, \\phi \\right),\\ t=1,...,T. \\end{equation}\\] cases known reference dates observation models supported. implementation details see enw_missing().","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"implementation","dir":"Articles","previous_headings":"","what":"Implementation","title":"Model definition and implementation","text":"model implemented probabilistic programming language stan use cmdstanr interact model[12,13]. Optional within chain parallelisation available across times reference reduce runtimes. Sparse design matrices used covariates limit number probability mass functions need calculated. epinowcast incorporates additional functionality written R[16] enable plotting nowcasts posterior predictions, summarising nowcasts, scoring using scoringutils[17]. flexible formula interface provided enable easier implementation complex user specified models without interacting underlying code base. functionality modular allowing users extend alter underlying model whilst continuing use package framework.","code":""},{"path":"https://package.epinowcast.org/dev/articles/model.html","id":"summary-of-module-parameter-mappings","dir":"Articles","previous_headings":"","what":"Summary of module-parameter mappings","title":"Model definition and implementation","text":"following table summarises module function arguments map parameters model definition: additional implementation details examples, see documentation module function (?enw_reference, ?enw_report, ?enw_expectation) age-stratified nowcasting vignette (vignette(\"germany-age-stratified-nowcasting\")).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"use-case","dir":"Articles","previous_headings":"","what":"Use case","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"epidemic progress. want know effective reproduction number current time. average number secondary infections caused single infected individual given point time measure transmissibility infection population time. Unfortunately, can’t directly observe infections data observe suffers reporting delays.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"what-we-have","dir":"Articles","previous_headings":"","what":"What we have","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"linelist cases date interest (example test positive date) date report (example date hospitalisation report); estimate distribution times infection positive test; estimate generation time distribution, distribution time intervals infection primary case infection secondary cases caused primary case. estimate ascertainment rate, proportion infections reported hospitalisations.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"what-do-we-do","dir":"Articles","previous_headings":"","what":"What do we do","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Visualise contextualise data case study uses (COVID-19 hospitalisations Germany); Specify joint model effective reproduction number, delay infection hospitalisation delay hospitalisation report; Fit model data available real-time, retrospectively; Visualise nowcast real-time data comparison data ultimately observed; Compare real-time retrospective reproduction number estimates delay distribution estimates; Outline limitations strengths approach highlight areas can extended.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"getting-setup","dir":"Articles","previous_headings":"","what":"Getting setup","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"See package documentation guidance installing package getting setup cmdstanr (backend used fitting models). well epinowcast package use following packages vignette. make use data.table simple data transformations tools tidyverse base R tools just easily used; also use purrr make use partial() function allows us partially specify function later reuse. useful specifying model can specify parts model common models specify parts specific model call updated function; use ggplot2 plotting. use primarycensored simulating primary censored right truncated processes need correctly model discrete delays.","code":"library(epinowcast) library(data.table) library(purrr) library(ggplot2) library(primarycensored)"},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"overview","dir":"Articles","previous_headings":"Introducing the data: COVID-19 hospitalisations in Germany","what":"Overview","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"case study, use data sourced Robert Koch Institute via Germany Nowcasting hub. data represent hospitalisation counts date positive test date test report Germany. data used extensively nowcasting forecasting COVID-19 hospitalisations Germany described detail Wolffram et al. (2023). use data good example type data available many settings. first summarise data, case study consider national level data without stratification age group. can filter data using data.table follows,","code":"summary(germany_covid19_hosp) #>  reference_date          location      age_group         confirm        #>  Min.   :2021-04-06   DE     : 90405   00-04:219555   Min.   :   0.00   #>  1st Qu.:2021-05-15   DE-BB  : 90405   00+  :219555   1st Qu.:   0.00   #>  Median :2021-06-23   DE-BE  : 90405   05-14:219555   Median :   1.00   #>  Mean   :2021-06-25   DE-BW  : 90405   15-34:219555   Mean   :  11.44   #>  3rd Qu.:2021-08-02   DE-BY  : 90405   35-59:219555   3rd Qu.:   6.00   #>  Max.   :2021-10-20   DE-HB  : 90405   60-79:219555   Max.   :1552.00   #>                       (Other):994455   80+  :219555                     #>   report_date         #>  Min.   :2021-04-06   #>  1st Qu.:2021-06-24   #>  Median :2021-08-03   #>  Mean   :2021-07-31   #>  3rd Qu.:2021-09-11   #>  Max.   :2021-10-20   #> germany_hosp <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] germany_hosp <- germany_hosp[, .(reference_date, report_date, confirm)] germany_hosp #>        reference_date report_date confirm #>                <IDat>      <Date>   <int> #>     1:     2021-04-06  2021-04-06     149 #>     2:     2021-04-07  2021-04-07     312 #>     3:     2021-04-08  2021-04-08     424 #>     4:     2021-04-09  2021-04-09     288 #>     5:     2021-04-10  2021-04-10     273 #>    ---                                    #> 12911:     2021-07-27  2021-10-16      81 #> 12912:     2021-07-28  2021-10-17     159 #> 12913:     2021-07-29  2021-10-18     145 #> 12914:     2021-07-30  2021-10-19     117 #> 12915:     2021-07-31  2021-10-20     132"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"data-transformations","dir":"Articles","previous_headings":"Introducing the data: COVID-19 hospitalisations in Germany","what":"Data transformations","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"data already format can used epinowcast, contains reference date (column reference_date): date observation, example date positive test report date (column report_date): date report given set observations reference date count (column confirm): total number hospitalisations reference date report date. Note cumulative report date. package also provides range tools convert data line list, incidence, common formats required format (see Data converters). example convert data individual case linelist, linelist converted format epinowcast requires using enw_linelist_to_incidence() function, specified reference_date report_date columns, columns (used group data), max_delay maximum delay reference date report date (note observed delay longer specified delay used instead). enw_linelist_to_incidence() function calculate incidence reference date report date group.","code":"germany_covid19_hosp_linelist <- germany_covid19_hosp |>   enw_add_incidence() |>   enw_incidence_to_linelist()  germany_covid19_hosp_linelist #>                 id reference_date location age_group report_date delay #>              <int>         <IDat>   <fctr>    <fctr>      <IDat> <int> #>        1:        1     2021-04-06       DE       00+  2021-04-06     0 #>        2:        2     2021-04-06       DE       00+  2021-04-06     0 #>        3:        3     2021-04-06       DE       00+  2021-04-06     0 #>        4:        4     2021-04-06       DE       00+  2021-04-06     0 #>        5:        5     2021-04-06       DE       00+  2021-04-06     0 #>       ---                                                              #> 11486202: 11486202     2021-10-20    DE-TH     15-34  2021-10-20   115 #> 11486203: 11486203     2021-10-20    DE-TH     60-79  2021-10-20   117 #> 11486204: 11486204     2021-10-20    DE-TH     60-79  2021-10-20   117 #> 11486205: 11486205     2021-10-20    DE-TH     60-79  2021-10-20   117 #> 11486206: 11486206     2021-10-20    DE-TH     60-79  2021-10-20   117 incidence_from_linelist <- enw_linelist_to_incidence(   germany_covid19_hosp_linelist,   reference_date = \"reference_date\",   report_date = \"report_date\",   by = c(\"age_group\", \"location\"),   max_delay = 30 )  incidence_from_linelist #> Key: <age_group, location> #>          age_group location report_date reference_date new_confirm confirm #>             <fctr>   <fctr>      <IDat>         <IDat>       <int>   <int> #>       1:     00-04    DE-BY  2021-04-06           <NA>           0       0 #>       2:     00-04    DE-BY  2021-04-07           <NA>           0       0 #>       3:     00-04    DE-BY  2021-04-08           <NA>           0       0 #>       4:     00-04    DE-BY  2021-04-09           <NA>           0       0 #>       5:     00-04    DE-BY  2021-04-10           <NA>           0       0 #>      ---                                                                   #> 2049593:       80+    DE-TH  2021-10-19     2021-10-18           0       0 #> 2049594:       80+    DE-TH  2021-10-20     2021-10-18           0       0 #> 2049595:       80+    DE-TH  2021-10-19     2021-10-19           1       1 #> 2049596:       80+    DE-TH  2021-10-20     2021-10-19           0       1 #> 2049597:       80+    DE-TH  2021-10-20     2021-10-20           0       0 #>          delay #>          <int> #>       1:     0 #>       2:     1 #>       3:     2 #>       4:     3 #>       5:     4 #>      ---       #> 2049593:     1 #> 2049594:     2 #> 2049595:     0 #> 2049596:     1 #> 2049597:     0"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"filtering-the-data","dir":"Articles","previous_headings":"Introducing the data: COVID-19 hospitalisations in Germany","what":"Filtering the data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"case study consider data 1st March 2020 onwards. first step, filter data include observations 1st May 2021 1st August 2021. using enw_filter_report_dates() enw_filter_reference_dates() functions, also used enw_complete_dates() make sure complete data dates earliest latest dates. also used enw_add_incidence() add incidence column data. Next split data two parts, data available time used fit model (rt_nat_germany) data available retrospectively time period used evaluate model (retro_nat_germany). using enw_filter_report_dates() enw_filter_reference_dates() functions follows: Create real-time dataset (rt_nat_germany) filtering data include reported observations 1st May 2021 1st July 2021; Create retrospective dataset (retro_germany) filtering data include observations reference dates (.e. may reported anytime 1st August 2021) 1st May 2021 1st July 2021; Finally can create dataset contains latest data available reference date. using enw_latest_data() function,","code":"complete_germany_hosp <- germany_hosp |>   enw_filter_report_dates(latest_date = \"2021-08-01\") |>   enw_filter_reference_dates(earliest_date = \"2021-05-01\") |>   enw_complete_dates(missing_reference = FALSE) |>   enw_add_incidence() rt_germany <- complete_germany_hosp |>   enw_filter_report_dates(latest_date = \"2021-07-01\") rt_germany #>       report_date reference_date confirm new_confirm delay #>            <IDat>         <IDat>   <int>       <int> <int> #>    1:  2021-05-01     2021-05-01     234         234     0 #>    2:  2021-05-02     2021-05-01     352         118     1 #>    3:  2021-05-03     2021-05-01     391          39     2 #>    4:  2021-05-04     2021-05-01     464          73     3 #>    5:  2021-05-05     2021-05-01     507          43     4 #>   ---                                                      #> 1949:  2021-06-30     2021-06-29      31          11     1 #> 1950:  2021-07-01     2021-06-29      35           4     2 #> 1951:  2021-06-30     2021-06-30      20          20     0 #> 1952:  2021-07-01     2021-06-30      37          17     1 #> 1953:  2021-07-01     2021-07-01      20          20     0 retro_germany <- complete_germany_hosp |>   enw_filter_reference_dates(latest_date = \"2021-07-01\") retro_germany #>       report_date reference_date confirm new_confirm delay #>            <IDat>         <IDat>   <int>       <int> <int> #>    1:  2021-05-01     2021-05-01     234         234     0 #>    2:  2021-05-02     2021-05-01     352         118     1 #>    3:  2021-05-03     2021-05-01     391          39     2 #>    4:  2021-05-04     2021-05-01     464          73     3 #>    5:  2021-05-05     2021-05-01     507          43     4 #>   ---                                                      #> 3871:  2021-07-28     2021-07-01      57           0    27 #> 3872:  2021-07-29     2021-07-01      57           0    28 #> 3873:  2021-07-30     2021-07-01      57           0    29 #> 3874:  2021-07-31     2021-07-01      57           0    30 #> 3875:  2021-08-01     2021-07-01      57           0    31 latest_germany_hosp <- retro_germany |>   enw_latest_data() head(latest_germany_hosp, n = 10) #>     reference_date report_date confirm new_confirm delay #>             <IDat>      <IDat>   <int>       <int> <int> #>  1:     2021-05-01  2021-08-01    1007           0    92 #>  2:     2021-05-02  2021-08-01     781           0    91 #>  3:     2021-05-03  2021-08-01     467           0    90 #>  4:     2021-05-04  2021-08-01     823           0    89 #>  5:     2021-05-05  2021-08-01    1028           0    88 #>  6:     2021-05-06  2021-08-01    1016           0    87 #>  7:     2021-05-07  2021-08-01     892           0    86 #>  8:     2021-05-08  2021-08-01     822           0    85 #>  9:     2021-05-09  2021-08-01     561           0    84 #> 10:     2021-05-10  2021-08-01     364           0    83"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"visualising-the-data","dir":"Articles","previous_headings":"Introducing the data: COVID-19 hospitalisations in Germany","what":"Visualising the data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"define, fit, model visualise data get idea trends data reporting structure. currently function epinowcast visualise data, can use ggplot2 package manually follows,","code":"gh_vis_cohorts <- copy(retro_germany)[   ,   report_date := fcase(     report_date <= as.Date(\"2021-05-15\"), as.Date(\"2021-05-15\"),     report_date <= as.Date(\"2021-06-01\"), as.Date(\"2021-06-01\"),     report_date <= as.Date(\"2021-06-15\"), as.Date(\"2021-06-15\"),     report_date <= as.Date(\"2021-07-01\"), as.Date(\"2021-07-01\"),     report_date <= as.Date(\"2021-07-15\"), as.Date(\"2021-07-15\"),     report_date <= as.Date(\"2021-08-01\"), as.Date(\"2021-08-01\")   ) |>     factor(levels = rev(c(       \"2021-05-15\", \"2021-06-01\", \"2021-06-15\", \"2021-07-01\",       \"2021-07-15\", \"2021-08-01\"     ))) ]  gh_vis_cohorts_by_reference <- gh_vis_cohorts[,   .(confirm = sum(new_confirm)),   by = .(reference_date) ]  gh_vis_cohorts_by_ref_rep <- gh_vis_cohorts[,   .(confirm = sum(new_confirm)),   by = .(reference_date, report_date) ]  gh_vis_cohorts_by_ref_rep |>   ggplot() +   aes(     x = reference_date, y = confirm, fill = report_date, group = report_date   ) +   geom_col(position = \"stack\", alpha = 1, col = \"grey\") +   geom_vline(     aes(xintercept = as.Date(report_date)),     linetype = 2, alpha = 0.9   ) +   xlim(c(     min(gh_vis_cohorts_by_ref_rep$reference_date),     max(gh_vis_cohorts_by_ref_rep$reference_date)   )) +   scale_y_continuous(labels = \\(x)(scales::comma(x, accuracy = 1))) +   scale_fill_brewer(     palette = \"Blues\", aesthetics = c(\"color\", \"fill\")   ) +   theme_bw() +   labs(     x = \"Date of positive test\",     y = \"Hospitalised cases by date of positive test\",     fill = \"Report date\"   ) +   guides(fill = guide_legend(reverse = TRUE)) +   theme(legend.position = \"bottom\")"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"model","dir":"Articles","previous_headings":"","what":"Model","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"epinowcast package provides flexible framework modelling incidence infections subsequent measures hospitalisations reported delay. framework based generative model describes hypothesised process data generated. generative model used define likelihood function describes probability observing data given model parameters. likelihood function combined prior information used fit model parameters data. following sections describe generative model incidence infections hospitalisations. like know general framework see model vignette.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"expected-hospitalisations","dir":"Articles","previous_headings":"Model","what":"Expected hospitalisations","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"first part generative process consider expected number hospitalisations date positive test. number hospitalisations expect observe perfect reporting hospitalisations unmodelled variance. part model also decomposed three parts: expected number infections, delay infection positive test, probability hospitalisation given infection. three parts combined give expected number hospitalisations date positive test. describe parts turn.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"expected-infections","dir":"Articles","previous_headings":"Model > Expected hospitalisations","what":"Expected infections","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"model expected infections function effective (instantaneous) reproduction number previous infections weighted generation time using renewal equation[1,2]. corresponds commonly used Susceptible-Exposed-Infected-Recovered (SEIR) model appropriate generation time specified[3].","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"instantaneous-reproduction-number","dir":"Articles","previous_headings":"Model > Expected hospitalisations > Expected infections","what":"Instantaneous reproduction number","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"model instantaneous reproduction number (\\(R_t\\)) log scale weekly random walk follows \\[\\begin{align}   \\text{log} (R_{t}) &= r_0 + \\sum_{= 0}^{t \\% 7} \\epsilon_i \\\\   \\epsilon_i &\\sim \\text{Normal}\\left(0, \\sigma_{\\epsilon} \\right) \\\\   \\sigma_{\\epsilon} &\\sim \\text{HalfNormal}\\left(0, 1 \\right) \\end{align}\\] \\(r_0\\) intercept, \\(\\sum_{= 0}^{t \\% 7} \\epsilon_i\\) weekly random walk. choose model flexible, can used model range different scenarios, parsimonious. example, set \\(\\sigma_{\\epsilon} = 0\\) model reduces constant reproduction number. set \\(\\sigma_{\\epsilon} > 0\\) model allows changes reproduction number time. sensible choices model include random walk longer time scale (e.g. monthly) shorter time scale (e.g. daily), random walk drift term, random walk drift term seasonal component.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"latent-infections","dir":"Articles","previous_headings":"Model > Expected hospitalisations > Expected infections","what":"Latent infections","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"model expected number infections/latent notifications (\\(\\lambda^l\\)) using renewal process[1,2]. model generalisation default epinowcast model implies current infections/notifications dependent past infections/notifications based kernel. kernel defined generation time distribution, probability distribution time infection subsequent infectiousness, previously defined model effective reproduction number. model defined follows, \\[\\begin{align}   \\lambda^l_{t} &\\sim \\text{LogNormal}\\left(\\mu^{l}, \\sigma^{l} \\right),\\ t \\leq P \\\\   \\lambda^l_{t} &= R_{t} \\sum_{p = 1}^{P} g\\left(t - p \\right)  \\lambda^l_{t-p},\\ t \\gt P   \\end{align}\\] assume generation time (\\(g\\)) gamma distribution mean 4 days standard deviation 3 days. initialise model assume first \\(P\\) latent notifications log-normally distributed mean \\(\\mu^{l}_{g,t}\\) standard deviation \\(\\sigma^{l}_{g,t}\\). equivalent assuming first \\(P\\) latent notifications independent identically distributed. mean log-normal distribution group log latest reported case count first reference date group scaled sum latent reporting delay. standard deviation assumed 1.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"latent-reporting-delay-and-ascertainment","dir":"Articles","previous_headings":"Model > Expected hospitalisations","what":"Latent reporting delay and ascertainment","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"many settings, case study, may additional reporting delays top directly observed data, therefore “nowcastable”, common example delay exposure symptom onset. settings support modelling “latent” reporting delays convolution underlying expected counts potential delays vary time group. implementation similar implemented EpiNow2 epidemia well similar models[4–7]. addition , support modelling ascertainment use improper probability mass functions (.e. enforcing sum 1 constraint) inferring ascertainment possible (example day week reporting patterns). assume infection hospitalisation ratio 2% modified random effect day week account within week reporting periodicity. also assume lognormal reporting delay mean 5 days standard deviation 2 days, representing delay infection positive test. assume reporting delay days week. model defined follows, \\[\\begin{align}   \\lambda_{t} &= \\nu_{t \\% 7} \\sum_{\\tau = 0}^{L - 1} f_{g}\\left(t - \\tau \\right)  \\lambda^l_{t - \\tau} \\\\   \\text{log} (\\nu_{}) &\\sim \\text{Normal}\\left(-3.91, \\sigma_{\\nu} \\right) \\\\   \\sigma_{\\nu} &\\sim \\text{HalfNormal}\\left(0, 1 \\right) \\\\ \\end{align}\\] \\(\\nu_{}\\) random effect day week represents reporting periodicity.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"specifying-the-model-using-epinowcastenw_expectation","dir":"Articles","previous_headings":"Model > Expected hospitalisations","what":"Specifying the model using epinowcast::enw_expectation()","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"first need define weekly random walk model effective reproduction number. can using formula interface follows, Next define generation time distribution. already discussed, assume gamma distribution mean 4 days standard deviation 3 days. summary parameters first need transformed shape scale parameters used gamma distribution. need account daily censoring finally normalise probability mass function (PMF) account right truncation. PMFs set maximum delay 15 days gives good coverage majority distribution limits computational burden fitting model. Now define latent reporting delay similar way remembering specified lognormal distribution mean 5 days standard deviation 2 days. also need account daily censoring normalise PMF account right truncation. last part model define remaining part ascertainment model expected hospitalisations. already defined base ascertainment ratio (.e. 2% infection hospitalisation ratio) need define day week random effect. can using formula interface follows, Finally, can combine four parts model define expected hospitalisations date positive test. using epinowcast::enw_expectation() function follows,","code":"rt_formula <- ~ 1 + rw(week) # first transform mean and sd to shape and scale gamma_mean <- 4 gamma_sd <- 3 gamma_shape <- gamma_mean^2 / gamma_sd^2 gamma_scale <- gamma_sd^2 / gamma_mean  # then discretise the distribution gt_pmf <- 0:14 |>   dpcens(pgamma, shape = gamma_shape, scale = gamma_scale, D = 15)  plot(gt_pmf) lgn_mean <- 5 lgn_sd <- 2 meanlog <- log(lgn_mean^2 / sqrt(lgn_sd^2 + lgn_mean^2)) sdlog <- sqrt(log(1 + lgn_sd^2 / lgn_mean^2))  # then discretise the distribution reporting_pmf <- 0:14 |>   dpcens(plnorm, meanlog = meanlog, sdlog = sdlog, D = 15) |> # and scale it by the infection to hospitalisation ration (2%)   (\\(x) x * 0.02)()  plot(reporting_pmf) observation_formula <- ~ 1 + (1 | day_of_week) expectation_module <- partial(   epinowcast::enw_expectation,   r = rt_formula,   generation_time = gt_pmf,   latent_reporting_delay = reporting_pmf,   observation = observation_formula )"},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"defining-the-delay-distribution","dir":"Articles","previous_headings":"Model > Delay distribution","what":"Defining the delay distribution","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Given case counts date reference date report, can estimate reporting delay distribution directly jointly underlying process model, rather relying external estimates sources (though may want account external information priors). consider reporting delay follow \\(\\text{LogNormal} \\left(\\mu^d, \\sigma^d \\right)\\) distribution, parameters \\[\\begin{align}   \\mu^d &\\sim \\text{Normal} \\left(0, 1 \\right) \\\\   \\sigma^d &\\sim \\text{Half-Normal} \\left(0, 1 \\right). \\end{align}\\] distribution discretised daily probabilities \\(p_{t,d}\\) adjusted maximum delay, see vignette(\"distributions\") details.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"specifying-the-model-using-epinowcastenw_reference","dir":"Articles","previous_headings":"Model > Delay distribution","what":"Specifying the model using epinowcast::enw_reference()","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"can define reporting delay distribution using epinowcast::enw_reference() function follows,","code":"reference_module <- partial(enw_reference, ~1, distribution = \"lognormal\")"},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"defining-the-observation-model","dir":"Articles","previous_headings":"Model > Observation model and nowcast","what":"Defining the observation model","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Expected notifications date positive test (\\(t\\)) reporting date can now found multiplying expected final notifications date positive test \\(t\\) probability reporting day delay (\\(p_{t,d}\\)). assume Poisson observation model produce nowcast final observed hospitalisations reference date summing posterior estimates unobserved notification observed notifications reference date. \\[\\begin{align}   n_{t,d} \\mid \\lambda_{t},p_{t,d}  &\\sim \\text{Poisson} \\left(\\lambda_{t} \\times p_{t,d} \\right),\\ t=1,...,T. \\\\   N_{t} &= \\sum_{d=0}^{D} n_{t,d} \\end{align}\\]","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"specifying-the-model-using-epinowcastenw_obs","dir":"Articles","previous_headings":"Model > Observation model and nowcast","what":"Specifying the model using epinowcast::enw_obs()","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"","code":"obs_module <- partial(enw_obs, family = \"poisson\")"},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"preprocess-the-data","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Preprocess the data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"fitting model just defined need preprocess data order correct format work epinowcast produce metadata describes aspects data use model (example maximum delay, number groups, number observations group). using enw_preprocess_data() function follows real-time retrospective datasets. Note set max_delay = 30 constrain modelled maximum delay 30 days. pragmatic choice ensure model can fit reasonable amount time, also set longer wanted data suggested longer delay possible. retrospective data","code":"rt_germany_pobs <- enw_preprocess_data(rt_germany, max_delay = 30) rt_germany_pobs #>                     obs          new_confirm             latest #>                  <list>               <list>             <list> #> 1: <data.table[1425x8]> <data.table[1425x9]> <data.table[62x8]> #>    missing_reference  reporting_triangle      metareference          metareport #>               <list>              <list>             <list>              <list> #> 1: <data.table[0x4]> <data.table[62x32]> <data.table[62x8]> <data.table[91x10]> #>             metadelay max_delay  time snapshots     by groups   max_date #>                <list>     <num> <int>     <int> <list>  <int>     <IDat> #> 1: <data.table[30x5]>        30    62        62 [NULL]      1 2021-07-01 #>    timestep #>      <char> #> 1:      day retro_germany_pobs <- enw_preprocess_data(retro_germany, max_delay = 30) retro_germany_pobs #>                     obs          new_confirm             latest #>                  <list>               <list>             <list> #> 1: <data.table[1860x8]> <data.table[1860x9]> <data.table[62x8]> #>    missing_reference  reporting_triangle      metareference #>               <list>              <list>             <list> #> 1: <data.table[0x4]> <data.table[62x32]> <data.table[62x8]> #>              metareport          metadelay max_delay  time snapshots     by #>                  <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[120x10]> <data.table[30x5]>        30    62        62 [NULL] #>    groups   max_date timestep #>     <int>     <IDat>   <char> #> 1:      1 2021-07-30      day"},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"specifying-the-fitting-options","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Fitting the epinowcast model","what":"Specifying the fitting options","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"ready fit model need first specify fitting options using cmdstanr (information options can found cmdstanr documentation). use 2 chains 2 threads per chain (using 4 CPU cores total) 500 warmup samples 1000 iterations per chain. complex model set adapt_delta 0.98 (default 0.8) Hamiltonian Monte Carlo sampler can explore posterior distribution efficiently. reason, also set max_treedepth 15 (default 10). Finally, set save_warmup FALSE save space (don’t need warmup samples analysis), pp TRUE can use posterior predictive checks assess model fit. 4 CPU cores available can increase number threads per chain make use additional cores. example 8 CPU cores available set threads_per_chain = 4 use 8 cores (2 chains).","code":"fit_module <- partial(enw_fit_opts,   chains = 2,   parallel_chains = 2,   threads_per_chain = floor(min(max(1, parallel::detectCores() /  4), 2)),   iter_warmup = 500,   iter_sampling = 1000,   max_treedepth = 12,   save_warmup = FALSE,   pp = TRUE,   show_messages = interactive(), # set this to TRUE to show fitting messages   refresh = ifelse(interactive(), 100, 0) # remove this to show fitting progress )"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"compiling-the-model","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Fitting the epinowcast model","what":"Compiling the model","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"also need compile model using cmdstanr fitting (installing package). order line work followed installation guide README. take around minute run called first time.","code":"epinowcast_model <- enw_model()"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"fitting-the-model","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Fitting the epinowcast model","what":"Fitting the model","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Now ready bring together modules specified, combine model just compiled, fit synthetic data. first fit data available real-time, Fitting model default options take around 5 minutes run laptop 4 CPU cores. CPU cores available can reduce time takes fit model increasing number threads per chain (see fitting options section ). retrospectively observed data. may see number warning messages cmdstanr fitting model. generally occur model initialised due process currently optimised epinowcast. model still fit correctly unless warnings continue fitting process (outside warmup phase). something actively working improving future versions epinowcast.","code":"germany_nowcast <- epinowcast(   data = rt_germany_pobs,   expectation = expectation_module(data = rt_germany_pobs),   reference = reference_module(data = rt_germany_pobs),   obs = obs_module(data = rt_germany_pobs),   fit = fit_module(),   model = epinowcast_model ) retro_germany_nowcast <- epinowcast(   data = retro_germany_pobs,   expectation = expectation_module(data = retro_germany_pobs),   reference = reference_module(data = retro_germany_pobs),   obs = obs_module(data = retro_germany_pobs),   fit = fit_module(),   model = epinowcast_model )"},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"plotting-the-nowcast-based-on-real-time-data","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Visualising the Nowcast","what":"Plotting the nowcast based on real-time data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"first plot nowcast based real-time data. Effectively trying use model estimate hospitalisations ultimately reported based data currently available. can compare recent observations see well model . Internally, plotting function (see ?plot.epinowcast()) sums observed data posterior estimates unobserved data produce nowcast number hospitalisations ultimately reported. instance, model done good job estimating number hospitalisations ultimately reported based data currently available. always case, model can sometimes estimate number hospitalisations ultimately reported. important thing note model clearly perfect complete data less well estimated model. likely indicates misspecification reporting delay model fixed making complex even making entirely non-parametric (vs based LogNormal).","code":"plot(   germany_nowcast, latest_germany_hosp[reference_date > as.Date(\"2021-06-01\")] )"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"plotting-the-nowcast-based-on-retrospective-data","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany > Visualising the Nowcast","what":"Plotting the nowcast based on retrospective data","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"can also plot nowcast based retrospective data. plot uses observed data available effectively plotting observed data 30 day delay (maximum specified) compared data ultimately observed. can used get feel well specified maximum delay . see small number hospitalisations reported 30 days. impact performance even ideal model able predict hospitalisations accounted model evaluation.","code":"plot(   retro_germany_nowcast,   latest_germany_hosp[reference_date > as.Date(\"2021-06-01\")] )"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"posterior-predictions-for-cases-by-date-of-positive-test-and-report","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Posterior predictions for cases by date of positive test and report","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"better understand fit model data can instead plot posterior predictions observed data. effectively plot instead plotting posterior predictions unobserved data plot posterior predictions observed data. can used get feel well model able predict observed data. Rather using build plot function (changing type = \"posterior_prediction\") instead use enw_plot_pp_quantiles() can control number references dates plot (otherwise plot quite overwhelming!). clear plot example dates model main able predict observed data well. However, also aspects data model less well able predict, particular apparent periodicity reporting delay. likely due model able account day week reporting periodicity. fixed adding day week random effect reporting delay model demonstrate package README.","code":"plot_select_pp_dates <- function(nowcast, dates) {   nowcast |>     summary(type = \"posterior_prediction\") |>     (\\(x) x[reference_date %in% dates])() |>     enw_plot_pp_quantiles() +     facet_wrap(vars(reference_date), scales = \"free\") } plot_select_pp_dates(   retro_germany_nowcast,   as.Date(c(\"2021-05-01\", \"2021-05-14\", \"2021-06-01\", \"2021-07-01\")) )"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"real-time-and-retrospective-estimates-of-the-effective-reproduction-number","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Real-time and retrospective estimates of the effective reproduction number","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"key output model posterior distribution effective reproduction number. can plot real-time retrospective data see estimates change data becomes available. Ideally, hope real-time estimates overlap retrospective estimates. indicate model able accurately estimate hospitalisations ultimately reported based already reported. see good agreement real-time retrospective estimates effective reproduction number dates earlier time expect given data near complete models. Closer date estimation see real-time model good job estimating trend shown retrospective model tendency overpredict. caused changes reporting delay time, model able account day week reporting periodicity, model able account change underlying process time.","code":"get_rt_posterior <- function(nowcast, expectation = expectation_module) {   rt <- enw_posterior(nowcast$fit[[1]], variables = \"r\")   cols <- c(\"mean\", \"median\", \"q5\", \"q20\", \"q80\", \"q95\")   rt[, (cols) := lapply(.SD, exp), .SDcols = cols]   rt <- cbind(     expectation(data = nowcast)$data_raw$r[, .(date)], rt   )   return(rt) }  rt <- rbind(   get_rt_posterior(germany_nowcast)[, Data := \"Real-time\"],   get_rt_posterior(retro_germany_nowcast)[, Data := \"Retrospective\"] )  ggplot(rt) +   aes(x = date, col = Data, fill = Data) +   geom_line(aes(y = median), linewidth = 1, alpha = 0.6) +   geom_line(aes(y = mean), linetype = 2) +   geom_ribbon(aes(ymin = q5, ymax = q95), alpha = 0.2, linewidth = 0.2) +   geom_ribbon(aes(ymin = q20, ymax = q80, col = NULL), alpha = 0.2) +   geom_hline(yintercept = 1, linetype = 2) +   scale_y_continuous(trans = \"log\") +   scale_fill_brewer(palette = \"Dark2\", aesthetics = c(\"color\", \"fill\")) +   theme_bw() +   labs(     x = \"Date of infection\",     y = \"Effective reproduction number\"   ) +   theme(legend.position = \"bottom\")"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"estimates-of-the-delay-from-testing-positive-to-hospitalisation-both-in-real-time-and-retrospectively","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Estimates of the delay from testing positive to hospitalisation both in real-time and retrospectively","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"can also plot posterior distribution delay testing positive hospitalisation. delay used estimate number hospitalisations ultimately reported based number positive tests reported. can plot real-time retrospective data see estimates change data becomes available. Ideally, hope real-time estimates overlap retrospective estimates. indicate model able accurately estimate hospitalisations ultimately reported based already reported. estimates fairly good match indicating delay well estimated real-time model compared retrospective model delay unlikely changing rapidly time example (otherwise expect estimated delays diverge time).","code":"extract_epinowcast_cdf <- function(nowcast) {   draws <- nowcast |>     (\\(x)       x$fit[[1]]$draws(variables = c(\"refp_mean\", \"refp_sd\"), format = \"df\")     )() |>     as.data.table()    draws[     ,     cdf := purrr::map2(       `refp_mean[1]`, `refp_sd[1]`,       ~ data.table(         delay = 1:30, cdf = plnorm(1:30, .x, .y) / plnorm(30, .x, .y)       )     )   ]   draws <- draws[, rbindlist(cdf)]   draws <- draws[,     .(       mean = mean(cdf),       lower_90 = quantile(cdf, probs = 0.05),       upper_90 = quantile(cdf, probs = 0.95)     ),     by = \"delay\"   ] }  nowcast_cdf <- list(   \"Real-time\" = germany_nowcast,   \"Retrospective\" = retro_germany_nowcast ) |>   map(extract_epinowcast_cdf) |>   rbindlist(idcol = \"Data\")  ggplot(nowcast_cdf) +   aes(x = delay, y = mean, col = Data, fill = Data) +   geom_line(size = 1.1, alpha = 0.7) +   geom_ribbon(     aes(ymin = lower_90, ymax = upper_90),     alpha = 0.25   ) +   theme_bw() +   theme(legend.position = \"bottom\") +   scale_fill_brewer(palette = \"Dark2\", aesthetics = c(\"color\", \"fill\")) +   guides(     fill = guide_legend(nrow = 1),     col = guide_legend(nrow = 1)   ) +   labs(     x = \"Delay between positive test and hospitalisation\",     y = \"Cumulative density function of the reporting distribution\"   )"},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"estimates-of-the-number-of-expected-hospitalisations-both-in-real-time-and-retrospectively","dir":"Articles","previous_headings":"Fitting the model to COVID-19 hospitalisations in Germany","what":"Estimates of the number of expected hospitalisations both in real-time and retrospectively","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"can also plot posterior predictions number expected hospitalisations. number hospitalisations reported observation error. can compare number hospitalisations ultimately reported see well model . Retrospectively, expect model fit well data differences due observation error. case indicates may need revisit expected hospitalisation model specification make closer generative process data . real-time, expect model fit less well data trying estimate number hospitalisations ultimately reported based data currently available (.e. also account reporting delay now partially unobserved). expected retrospective estimates fit well data. real-time estimates slightly less good, still capture recent change trend data possible without nowcast (estimates biased towards underpredicting due delay reporting leading right truncation).","code":"get_expected_infections <- function(nowcast, expectation = expectation_module) {   exp_cases <- enw_posterior(     nowcast$fit[[1]],     variables = \"exp_lobs\"   )   cols <- c(\"mean\", \"median\", \"q5\", \"q20\", \"q80\", \"q95\")   exp_cases[, (cols) := lapply(.SD, exp), .SDcols = cols]   exp_cases <- cbind(     expectation(data = nowcast)$data_raw$observation,     exp_cases   )   return(exp_cases) }  exp_cases <- rbind(   get_expected_infections(germany_nowcast)[, Data := \"Real-time\"],   get_expected_infections(retro_germany_nowcast)[, Data := \"Retrospective\"] )  exp_cases <- enw_latest_data(germany_hosp)[, date := reference_date][   exp_cases,   on = \"date\" ]  ggplot(exp_cases) +   aes(x = date, fill = Data, col = Data) +   geom_point(aes(y = confirm), col = \"Black\") +   geom_line(aes(y = median), linewidth = 1, alpha = 0.6) +   geom_line(aes(y = mean), linetype = 2) +   geom_ribbon(aes(ymin = q5, ymax = q95), alpha = 0.2, linewidth = 0.2) +   geom_ribbon(aes(ymin = q20, ymax = q80, col = NULL), alpha = 0.2) +   theme_bw() +   labs(     x = \"Date of positive test\",     y = \"Expected hospitalisations\"   ) +   scale_fill_brewer(palette = \"Dark2\", aesthetics = c(\"color\", \"fill\")) +   theme(legend.position = \"bottom\")"},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"summary","dir":"Articles","previous_headings":"Wrapping up","what":"Summary","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"case study shown use epinowcast estimate effective reproduction number expected number latent reported cases right truncated data. also shown use package perform retrospective real-time nowcasts can useful way understanding real-time performance model.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"strengths","dir":"Articles","previous_headings":"Wrapping up","what":"Strengths","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"used single model estimate effective reproduction number expected number latent reported cases right truncated data. means propagated uncertainty estimation effective reproduction number estimation expected number latent reported cases difficult using multi-stage approach. used flexible model effective reproduction number allows us estimate effective reproduction number time incorporate uncertainty estimation effective reproduction number estimation expected number latent reported cases. accounted delay infection hospitalisation delay hospitalisation reporting estimation expected number reported cases. means reproduction number estimates currently indexed date infection.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"limitations","dir":"Articles","previous_headings":"Wrapping up","what":"Limitations","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"Assumed known static generation time distribution latent reporting delay distribution. reality need estimated data, uncertainty, liable change time. Used fixed parametric reporting delay distribution. reality likely vary time depend things like day week reporting effects. addressed using flexible reporting delay distribution supported epinowcast. Used observation model account overdispersion number reported cases. addressed using flexible observation model supported epinowcast.","code":""},{"path":"https://package.epinowcast.org/dev/articles/single-timeseries-rt-estimation.html","id":"alternative-packages","dir":"Articles","previous_headings":"Wrapping up","what":"Alternative packages","title":"Estimating the effective reproduction number in real-time for a single timeseries with reporting delays","text":"EpiNow2: precursor epinowcast developed members epinowcast community. flexible toolset real-time analysis infectious diseases. less complex epinowcast focus robust default settings also less flexible. time functionality incorporated epinowcast. epidemia: another flexible package estimating effective reproduction number forecasting. designed flexible EpiNow2, similar way epinowcast, potentially difficult use. also generally less functionality dealing delays epinowcast. However, extension rstanarm comes number useful features familiar interface users rstanarm EpiEstim: mature package estimating effective reproduction number. exploits mathematically relationship fit renewal equation uncertainty quickly currently able handle reporting delays aspects real-world data discussed case study. also able perform nowcasts. However, useful package estimating effective reproduction number settings aspects important can handled means.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"epinowcast-and-stan","dir":"Articles","previous_headings":"","what":"Epinowcast and Stan","title":"Resources to help with model fitting using Stan","text":"Stan probabilistic programming language statistical platform statistical modelling powers Bayesian inference epinowcast. statistical models used epinowcast primarily written Stan programming language, statically typed programming language syntax similar C/C++. epinowcast utilises {cmdstanr} package interface CmdStan, program executes models written Stan programming language. important understand CmdStan program distinct interfaced R. R calling separate program execute calculations similar {rjags} relies JAGS library R-INLA. described epinowcast project README, need install {cmdstanr} R package also ability install CmdStan using R interface. Additionally, need make sure software required CmdStan installed configured machine.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"ensuring-you-have-the-proper-toolchain","dir":"Articles","previous_headings":"Epinowcast and Stan","what":"Ensuring you have the proper toolchain","title":"Resources to help with model fitting using Stan","text":"Stan code written epinowcast package converted1 optimised C++ code compiled machine-readable instructions. Stan needs several programs execute compilation process build tool make C++ compiler, need ensure system appropriate supporting software, known toolchain. steps install additional software addition R platform specific. reminder, installation steps occur outside R. Stan team assembled detailed instructions platform: Windows MacOS Linux completing platform-specific toolchain installation, can move R.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"now-install-cmdstanr-and-cmdstan","dir":"Articles","previous_headings":"Epinowcast and Stan","what":"Now install CmdStanR and CmdStan","title":"Resources to help with model fitting using Stan","text":"Now can open session R using favourite IDE like Rstudio Vscode. ’ll need install CmdStanR package, R package allows interface CmdStan R code. detailed installation guide available CmdStanR provides authoritative installation instructions. cmdstanr package installed dependency install epinowcast. ensure toolchain installation occurred successfully, run following code R terminal: function report back toolchain available set follows: get message, return installation instructions ensure steps followed. Assuming toolchain installed, can install CmdStanR.","code":"library(cmdstanr) check_cmdstan_toolchain() #> The C++ toolchain required for CmdStan is set up properly! cmdstanr::install_cmdstan(cores = 2)"},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"installation","dir":"Articles","previous_headings":"Epinowcast modelling","what":"Installation","title":"Resources to help with model fitting using Stan","text":"described project README, can install \"{epinowcast}\" package within R.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"running-your-first-model","dir":"Articles","previous_headings":"Epinowcast modelling","what":"Running your first model","title":"Resources to help with model fitting using Stan","text":"reminder, session, time run model, Stan compile model code. first time run model take moment compilation occur.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"setting-enw_fit_opts","dir":"Articles","previous_headings":"Epinowcast modelling","what":"Setting enw_fit_opts","title":"Resources to help with model fitting using Stan","text":"enw_fit_opts allows set several critical components Stan computational engine. parameters passed Stan model fitting process influence computation time quality model fit. options inference engine agnostic parsed depending sampler choose (e.g., epinowcast::enw_sample full Bayesian inference). Knowing defaults need changed important part Bayesian workflow.[1] parameters passed sampling function available {cmdstanr} used default approach epinowcast::enw_sample.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"investigating-the-quality-of-the-model-fit","dir":"Articles","previous_headings":"","what":"Investigating the quality of the model fit","title":"Resources to help with model fitting using Stan","text":"section discuss common approaches working epinowcast specifically CmdStan/ Bayesian inference generally. major component Bayesian inference key component Bayesian workflow validating quality model fit. consequence, Bayesian workflow utilises tools make issues fit apparent.[1] Additionally, epinowcast provides supplemental information complement existing Stan messages help spot diagnose potential model fitting issues. solutions issues typically require investigate sampler settings, model settings, interrogate data . also important examine posterior predictive","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"sampler-settings","dir":"Articles","previous_headings":"Investigating the quality of the model fit","what":"Sampler settings","title":"Resources to help with model fitting using Stan","text":"epinowcast provides users ability pass arguments directly CmdStan can improve model run time produce better inferences. parameters can passed enw_fit_opts function.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"chains","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"chains","title":"Resources to help with model fitting using Stan","text":"One key components Bayesian inference creating draws independent Markov chains (See post Michael Betancourt detailed introduction). assess convergence reliability given posterior distribution least two chains must used 4 chains common default.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"threads_per_chain","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"threads_per_chain","title":"Resources to help with model fitting using Stan","text":"Stan allows multi-threading Stan code used within epinowcast tried take advantage capabilities possible. Multi-threading allows calculations spread across multiple threads, accelerate inference allowing embarrassingly parallel calculations spread across threads later combined. possible, good default 2, however, available compute machine, can increase higher value may see fit time reductions. Please note theads_per_chain impact model convergence fittings purely means speeding model fitting time. product thread_per_chain chains arguments equal less number cores machine!","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"iter_warmup-and-iter_sampling","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"iter_warmup and iter_sampling","title":"Resources to help with model fitting using Stan","text":"number samples used warmup phase Stan number sampling iterations controlled iter_warmup iter_sampling arguments, respectively. Stan requires sufficient number warmup iterations dynamically estimate step change sizes model fitting. Unlike Gibbs sampling (method used JAGS), generally need set large values iter_warmup iter_sampling, can vary based match data model. Conversely, setting large values iterations sign poor model fit indicates approaches need employed (e.g., priors, adapt_delta, max_treedepth). general heuristic bulk tail effective sample sizes (ESS) greater 100. However, depending complexity problem increasing number iterations can appropriate (.e., \\(\\hat{R}\\) values near 1, Monte Carlo Standard errors low) especially want make inferences regarding tail behaviours. initial model fitting process, may want start lower number iter_warmup 500 iterations per chain increase 750-1000 per chain () needed. Starting slightly short warm-ups can speed model development timelines. Typically found 1000-2000 samples per chain iter_sampling good starting values initial model fitting.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"max_treedepth","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"max_treedepth","title":"Resources to help with model fitting using Stan","text":"value controls maximum size trajectory taken sample (power 2) step. value low, sampler may terminate early causing excess runtimes. necessarily indicate model fit issues, represent runtime performance opportunity (.e., efficient sampling). can increase max_treedepth integer value greater 10 15 (lower). models used epinowcast common max_treedepth set 12 15.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"adapt_delta","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"adapt_delta","title":"Resources to help with model fitting using Stan","text":"parameter sets target average proposal acceptance probability NUTS sampling (real number value 0 1). Higher values adapt_delta result smaller step sizes sampling slow model fitting time can help address divergent transitions. default value 0.8, likely need set slightly higher like 0.9 0.99 given complexity models fit.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"some-decent-defaults","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Sampler settings","what":"Some decent defaults","title":"Resources to help with model fitting using Stan","text":"computer 8 cores, reasonable configuration following: simple models threads_per_chain = 1 may lead models fitting faster even cores available due overhead within chain multi-threading. may also case models complex generative processes (.e. models use complex \\(R_t\\) formulas). suggest explore works best data models.","code":"enw_fit_opts(     save_warmup = FALSE,     pp = TRUE,     chains = 4,     threads_per_chain = 2,     adapt_delta = 0.95,     max_treedepth = 12,     iter_sampling = 2000,     iter_warmup = 1000,     show_messages = FALSE )"},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"setting-priors","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Model settings","what":"Setting priors","title":"Resources to help with model fitting using Stan","text":"Setting sensible priors important Bayesian inference. pre-processing data, can retrieve prior arguments using enw_reference function. shown , can retrieve current files manipulate needed. example, reason believe standard deviation means used smaller, reduce half 0.5. pass new priors epinowcast function. Similarly, take empirical Bayes approach use posteriors fitted model described another vignette.","code":"default_priors <- enw_reference(data = enw_example(\"preprocessed\")) default_priors new_priors <- default_priors$priors  new_priors[ ,sd := 0.5] epinowcast(pobs,   expectation = expectation_module,   fit = fit,   model = multithread_model,   priors = new_priors )"},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"exploring-your-data","dir":"Articles","previous_headings":"Investigating the quality of the model fit","what":"Exploring your data","title":"Resources to help with model fitting using Stan","text":"important understand data passed epinowcast ideas regarding data-generating process data. instance, significant changes reporting triangle, manifest multi-modality posterior distribution (.e., Stan trying fit two different reporting delays parameters). different reporting regimes result long model run times, wide posteriors, ultimately nonsensical inferences. Given nuances data, may need identify fit different regimes data. problems can also manifest longer timescales, data generally better, much data can result ill-fitting models. Sometimes easier examine features fit model due domain knowledge; however, key component Bayesian Workflow examine posterior predictions.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"posterior-predictions","dir":"Articles","previous_headings":"Investigating the quality of the model fit","what":"Posterior predictions","title":"Resources to help with model fitting using Stan","text":"Posterior predictions, addition model fitting diagnostics, provides way examine well model captured data. model poorly captured data (e.g., data points consistently outside posterior credible intervals), model likely lead poor inferences. However, examining posterior predictions data, may able qualitatively quantitatively discern posteriors captured data patterns hint issues. Issues posterior predictions without warnings diagnostics indicate need examine priors underlying data. Utilise enw_plot_pp_quantiles examine posterior predictive quantiles nowcast fits.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"my-model-takes-too-long-to-run","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Approaches to solve common problems","what":"My model takes too long to run","title":"Resources to help with model fitting using Stan","text":"One common issues Bayesian inference sampler may take long time run. can occur sampler difficulty exploring posterior parameter space given model data (.e., Folk Theorem Statistical Computing “computational problems, often ’s problem model”). words, may mismatch data model trying fit. simple steps assist : Increase max_treedepth argument 15 allow longer trajectories used steps sampling. especially important per_at_max_treedepth value high returned CmdStan diagnostics. Use informative priors. Try simplify model understand potential degeneracies. Reduce amount data trying fit. might include reducing duration time points trying fit. can confirm model fit data, may just question computational power fitting larger data. Head community forum ask assistance.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"divergent-transitions","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Approaches to solve common problems","what":"Divergent transitions","title":"Resources to help with model fitting using Stan","text":"CmdStan may alert “divergent transitions” detected model fit. higher number divergent transitions indicates model outputs trusted. first step addressing increase adapt_delta argument numeric near one (e.g., 0.99 0.99). allow smaller step size may result reliable inferences. Importantly, number divergent transitions remains high, model may misspecified given available data. Regardless resolves problem, exploring divergent transitions can helpful way improve models don’t recommend just setting adapt_delta high without checking see can improve things! Sensible places start investigate model parameterisation correct data available priors reasonable.","code":"#>1: There were 32 divergent transitions after warmup."},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"my-hatrs-are-high-and-my-esss-are-low","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Approaches to solve common problems","what":"My \\(\\hat{R}\\)s are high and my esss are low","title":"Resources to help with model fitting using Stan","text":"High values \\(\\hat{R}\\), Gelman-Rubin statistic used measure convergence, indicate lack convergence different model chains. Values greater 1.01 1.05 considered unreliable. used \\(\\hat{R}\\) assess convergence important measures effective sample size MCSE. Lower values effective sample size especially problematic. effective sample size provides insight many independent samples drawn posterior, accounting autocorrelation within Markov chains. Ideally, want values near total number samples passed iter_sample argument. r_hat large ess_bulk/ ess_tail low, consider: Increasing adapt_delta argument numeric value near 1 (e.g., 0.99). reduce step size help sampling risk possible increases runtime. Use informative priors.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"the-posterior-estimates-are-very-wide","dir":"Articles","previous_headings":"Investigating the quality of the model fit > Approaches to solve common problems","what":"The posterior estimates are very wide","title":"Resources to help with model fitting using Stan","text":"Wide posterior values indicate high degree uncertainty given data model. warnings shown (e.g., divergent transitions, low ESS), result simply inference given available data prior likelihood. However, Bayesian model building often iterative process[1] , practice, ’s common realize model’s prior likelihood doesn’t accurately reflect prior beliefs. Priors thought non-informative can turn strongly influence posterior, often unexpected undesirable ways. suspect might case, can make sense revisit priors, iteratively inspecting joint prior model prior predictive simulation tweaking marginal distributions individual parameters. (Stan Prior Choice wiki)[https://github.com/stan-dev/stan/wiki/Prior-Choice-Recommendations] often useful guide process.","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"other-resources","dir":"Articles","previous_headings":"","what":"Other resources","title":"Resources to help with model fitting using Stan","text":"Epinowcast Stan communities pretty warm open places receptive helping others. find issues epinowcast, reach !","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"technical-issues","dir":"Articles","previous_headings":"Other resources","what":"Technical issues","title":"Resources to help with model fitting using Stan","text":"epinowcast forum epinowcast issues Stan forums Stan guide warnings","code":""},{"path":"https://package.epinowcast.org/dev/articles/stan-help.html","id":"learning-more-about-stan-and-bayesian-inference","dir":"Articles","previous_headings":"Other resources","what":"Learning more about Stan and Bayesian inference","title":"Resources to help with model fitting using Stan","text":"Michael Betancourt’s case studies Aki Vehtari Bayesian Data Analysis case studies","code":""},{"path":"https://package.epinowcast.org/dev/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sam Abbott. Author, maintainer. Adrian Lison. Author. Sebastian Funk. Author. Carl Pearson. Author. Hugo Gruson. Author. Felix Guenther. Author. Michael DeWitt. Author. James Mba Azam. Author. Jessalyn Sebastian. Author. Hannah Choi. Contributor. Pratik Gupte. Contributor. Joel Hellewell. Contributor. Luis Rivas. Contributor. Sang Woo Park. Contributor. Nathan McIntosh. Contributor. Kath Sherratt. Contributor. Nikos Bosse. Contributor. Adam Howes. Contributor. Kaitlyn Johnson. Contributor. Barbora Nemcova. Contributor.","code":""},{"path":"https://package.epinowcast.org/dev/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Sam Abbott, Lison , Funk S, Pearson C, Gruson H, Guenther F, DeWitt M, Azam J, Sebastian J (NULL). epinowcast: Bayesian Framework Real-time Infectious Disease Surveillance. doi:10.5281/zenodo.5637165.","code":"@Manual{,   title = {epinowcast: A Bayesian Framework for Real-time Infectious Disease Surveillance},   author = {{Sam Abbott} and Adrian Lison and Sebastian Funk and Carl Pearson and Hugo Gruson and Felix Guenther and Michael DeWitt and James Mba Azam and Jessalyn Sebastian},   year = {NULL},   doi = {10.5281/zenodo.5637165}, }"},{"path":[]},{"path":"https://package.epinowcast.org/dev/index.html","id":"summary","dir":"","previous_headings":"","what":"Summary","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"modular Bayesian framework real-time infectious disease surveillance. Provides tools nowcasting, reproduction number estimation, delay estimation, forecasting data subject reporting delays, right-truncation, missing data, incomplete ascertainment. Users can build models suited setting using flexible formula interface supporting fixed effects, random effects, random walks, time-varying parameters, options including parametric non-parametric delay distributions optional modifiers (via discrete-time hazard models), renewal processes, observation models, missing data imputation, stratified analyses partial pooling. jointly estimating disease dynamics reporting patterns, framework enables earlier reliable detection trends. designed epidemiological applications mind, framework can applied right-truncated time series count data.","code":""},{"path":"https://package.epinowcast.org/dev/index.html","id":"important-note-on-model-specification","dir":"","previous_headings":"","what":"Important Note on Model Specification","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"default lognormal reporting delay distribution may suit data. can fail multimodal complex delay patterns. Evaluate model fit consider alternatives (e.g., non-parametric hazards) needed. See package vignettes guidance.","code":""},{"path":"https://package.epinowcast.org/dev/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"can install latest released version using normal R function, though need point r-universe instead CRAN: Alternatively, can use remotes package install development version Github (warning! version may contain breaking changes /bugs): Similarly, can install historical versions specifying release tag (e.g. installs 0.2.0): Note: can also use last approach install specific commit needed, e.g. want try specific unreleased feature, absolute latest developmental version. wish model fitting nowcasting, need install CmdStan, also entails suitable C++ toolchain setup. recommend using cmdstanr package. Stan team provides instructions Getting started cmdstanr vignette, details support package site along key instructions available Stan resources package vignette, brief version : Note: can speed CmdStan installation using cores argument. installing particular version epinowcast, may also need install past version CmdStan, can version argument. also provide Docker image epinowcast dependencies installed. can use image run epinowcast without installing dependencies.","code":"install.packages(   \"epinowcast\", repos = \"https://epinowcast.r-universe.dev\" ) remotes::install_github(   \"epinowcast/epinowcast\",   dependencies = TRUE ) remotes::install_github(   \"epinowcast/epinowcast\",   dependencies = TRUE, ref = \"v0.2.0\" ) # if you not yet installed `epinowcast`, or you installed it without `Suggests` dependencies install.packages(\"cmdstanr\", repos = c(\"https://mc-stan.org/r-packages/\", getOption(\"repos\"))) # once `cmdstanr` is installed: cmdstanr::install_cmdstan()"},{"path":"https://package.epinowcast.org/dev/index.html","id":"resources","dir":"","previous_headings":"","what":"Resources","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"use package, documentation available via ?enw_ first stop troubleshooting. also provide range documentation, case studies, community spaces ask (answer!) questions: epinowcast website includes function reference, model outline, case studies using package. site mainly concerns release version, can also find documentation latest development version. created package vignettes help get started nowcasting, see quick reference package capabilities (different timesteps, multi-stratification, mixed models, etc.), explore case studies. organisation website includes links resources, guest posts, seminar schedule upcoming past recordings. community forum areas question answer considering new methods tools, among others. generally interested real-time analysis infectious disease, may find useful even use epinowcast. addition vignettes, package also comes example analyses. polished vignettes, typically explore new features may help using development version. installing epinowcast, can find via:","code":"list.files(   system.file(\"examples\", package = \"epinowcast\"), full.names = TRUE )"},{"path":"https://package.epinowcast.org/dev/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"welcome contributions new contributors! particularly appreciate help identifying identified issues. Please check add issues, /add pull request see contributing guide information. need different underlying model work: epinowcast lets pass models! try new model parameterisations expand overall flexibility improve defaults, please let us know either community forum. always like hear new use-cases, whether directed core epinowcast applications.","code":""},{"path":"https://package.epinowcast.org/dev/index.html","id":"how-to-make-a-bug-report-or-feature-request","dir":"","previous_headings":"Contributing","what":"How to make a bug report or feature request","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"Please briefly describe problem output expect issue. question, please don’t open issue. Instead, ask Q page. See contributing guide information.","code":""},{"path":"https://package.epinowcast.org/dev/index.html","id":"code-of-conduct","dir":"","previous_headings":"Contributing","what":"Code of Conduct","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"Please note epinowcast project released Contributor Code Conduct. contributing project, agree abide terms.","code":""},{"path":"https://package.epinowcast.org/dev/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"making use methodology methodology based, please cite relevant papers model outline. use epinowcast work, please consider citing citation(\"epinowcast\").","code":""},{"path":"https://package.epinowcast.org/dev/index.html","id":"contributors","dir":"","previous_headings":"","what":"Contributors","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"contributions project gratefully acknowledged using allcontributors package following -contributors specification. Contributions kind welcome!","code":""},{"path":"https://package.epinowcast.org/dev/index.html","id":"code","dir":"","previous_headings":"Contributors","what":"Code","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"seabbs, adrian-lison, sbfnk, Bisaloo, pearsonca, choi-hannah, medewitt, jamesmbaazam, pitmonticone, athowes, jessalynnsebastian, kathsherratt, barbora-sobolova, kaitejohnson, Lnrivas, natemcintosh, nikosbosse, pratikunterwegs","code":""},{"path":"https://package.epinowcast.org/dev/index.html","id":"issue-authors","dir":"","previous_headings":"Contributors","what":"Issue Authors","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"teojcryan, FelixGuenther, beansrowning, jbracher, zsusswein, christinesangphet, rumackaaron, micahwiesner67, kylieainslie, maria-tang","code":""},{"path":"https://package.epinowcast.org/dev/index.html","id":"issue-contributors","dir":"","previous_headings":"Contributors","what":"Issue Contributors","title":"A Bayesian Framework for Real-time Infectious Disease Surveillance","text":"jhellewell14, Gulfa, parksw3, TimTaylor, WardBrian, jimrothstein","code":""},{"path":"https://package.epinowcast.org/dev/reference/add_max_observed_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Add maximum observed delay — add_max_observed_delay","title":"Add maximum observed delay — add_max_observed_delay","text":"function calculates adds maximum observed delay group reference date provided dataset. first checks validity observation indicator computes maximum delay. observation indicator provided, adjusts maximum observed delay unobserved data negative 1 (indicating maximum observed).","code":""},{"path":"https://package.epinowcast.org/dev/reference/add_max_observed_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add maximum observed delay — add_max_observed_delay","text":"","code":"add_max_observed_delay(new_confirm, observation_indicator = NULL)"},{"path":"https://package.epinowcast.org/dev/reference/add_max_observed_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add maximum observed delay — add_max_observed_delay","text":"new_confirm data.table containing columns: \"reference_date\", \"delay\", \".group\", \"new_confirm\", \"max_obs_delay\". produced enw_preprocess_data() new_confirm output addition \"max_obs_delay\" column produced add_max_observed_delay(). observation_indicator character string specifying column name new_confirm indicates whether observation observed . column logical vector. NULL (default), observations considered observed.","code":""},{"path":"https://package.epinowcast.org/dev/reference/add_max_observed_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add maximum observed delay — add_max_observed_delay","text":"data.table original columns new_confirm additional \"max_obs_delay\" column representing maximum observed delay group reference date. observation indicator provided, unobserved data \"max_obs_delay\" value -1.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/add_pmfs.html","id":null,"dir":"Reference","previous_headings":"","what":"Add probability mass functions — add_pmfs","title":"Add probability mass functions — add_pmfs","text":"function allows addition probability mass functions (PMFs) produce new PMF. useful example context reporting delays PMF sum two Poisson distributions convolution PMFs.","code":""},{"path":"https://package.epinowcast.org/dev/reference/add_pmfs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add probability mass functions — add_pmfs","text":"","code":"add_pmfs(pmfs)"},{"path":"https://package.epinowcast.org/dev/reference/add_pmfs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add probability mass functions — add_pmfs","text":"pmfs list vectors describing probability mass functions ","code":""},{"path":"https://package.epinowcast.org/dev/reference/add_pmfs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add probability mass functions — add_pmfs","text":"vector describing probability mass function sum ","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/add_pmfs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add probability mass functions — add_pmfs","text":"","code":"# Sample and analytical PMFs for two Poisson distributions x <- rpois(10000, 5) xpmf <- dpois(0:20, 5) y <- rpois(10000, 7) ypmf <- dpois(0:20, 7) # Add sampled Poisson distributions up to get combined distribution z <- x + y # Analytical convolution of PMFs conv_pmf <- add_pmfs(list(xpmf, ypmf)) conv_cdf <- cumsum(conv_pmf) # Empirical convolution of PMFs cdf <- ecdf(z)(0:42) # Compare sampled and analytical CDFs plot(conv_cdf) lines(cdf, col = \"black\")"},{"path":"https://package.epinowcast.org/dev/reference/as_forecast_sample.epinowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert an epinowcast object to a forecast_sample object — as_forecast_sample.epinowcast","title":"Convert an epinowcast object to a forecast_sample object — as_forecast_sample.epinowcast","text":"function used convert epinowcast returned epinowcast() object forecast_sample object can used scoring using scoringutils package.","code":""},{"path":"https://package.epinowcast.org/dev/reference/as_forecast_sample.epinowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert an epinowcast object to a forecast_sample object — as_forecast_sample.epinowcast","text":"","code":"# S3 method for class 'epinowcast' as_forecast_sample(data, latest_obs, ...)"},{"path":"https://package.epinowcast.org/dev/reference/as_forecast_sample.epinowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert an epinowcast object to a forecast_sample object — as_forecast_sample.epinowcast","text":"data epinowcast nowcast object returned epinowcast(). latest_obs Latest observations use true values must contain confirm observed variables. ... Additional arguments passed scoringutils::as_forecast_sample()","code":""},{"path":"https://package.epinowcast.org/dev/reference/as_forecast_sample.epinowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert an epinowcast object to a forecast_sample object — as_forecast_sample.epinowcast","text":"forecast_sample object returned scoringutils::as_forecast_sample()","code":""},{"path":"https://package.epinowcast.org/dev/reference/as_forecast_sample.epinowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert an epinowcast object to a forecast_sample object — as_forecast_sample.epinowcast","text":"","code":"if (FALSE) { # interactive() library(scoringutils)  nowcast <- enw_example(\"nowcast\") latest_obs <- enw_example(\"observations\") as_forecast_sample(nowcast, latest_obs) }"},{"path":"https://package.epinowcast.org/dev/reference/as_string_formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Converts formulas to strings — as_string_formula","title":"Converts formulas to strings — as_string_formula","text":"Converts formulas strings","code":""},{"path":"https://package.epinowcast.org/dev/reference/as_string_formula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Converts formulas to strings — as_string_formula","text":"","code":"as_string_formula(formula)"},{"path":"https://package.epinowcast.org/dev/reference/as_string_formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Converts formulas to strings — as_string_formula","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function. See Details section comprehensive explanation supported syntax.","code":""},{"path":"https://package.epinowcast.org/dev/reference/as_string_formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Converts formulas to strings — as_string_formula","text":"character string supplied formula","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/as_string_formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Converts formulas to strings — as_string_formula","text":"","code":"epinowcast:::as_string_formula(~ 1 + age_group) #> [1] \"~1 + age_group\""},{"path":"https://package.epinowcast.org/dev/reference/build_ord_obs.html","id":null,"dir":"Reference","previous_headings":"","what":"Build the ord_obs data.table. — build_ord_obs","title":"Build the ord_obs data.table. — build_ord_obs","text":"Build ord_obs data.table.","code":""},{"path":"https://package.epinowcast.org/dev/reference/build_ord_obs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build the ord_obs data.table. — build_ord_obs","text":"","code":"build_ord_obs(obs, max_delay, internal_timestep, timestep, nowcast = NULL)"},{"path":"https://package.epinowcast.org/dev/reference/build_ord_obs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build the ord_obs data.table. — build_ord_obs","text":"obs Observations pulled nowcast$latest[[1]]. max_delay Whole number representing maximum delay units timestep. internal_timestep internal timestep days. timestep timestep used. can string (\"day\", \"week\", \"month\") numeric whole number representing number days. nowcast getting posterior samples, data frame `.draws“ column get draws , pulled fit attribute nowcast.","code":""},{"path":"https://package.epinowcast.org/dev/reference/build_ord_obs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build the ord_obs data.table. — build_ord_obs","text":"data.table.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/cache_location_message.html","id":null,"dir":"Reference","previous_headings":"","what":"Cache location message for epinowcast package — cache_location_message","title":"Cache location message for epinowcast package — cache_location_message","text":"function generates message epinowcast() package regarding cache location. checks environment setting cache location provides guidance user managing setting.","code":""},{"path":"https://package.epinowcast.org/dev/reference/cache_location_message.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Cache location message for epinowcast package — cache_location_message","text":"","code":"cache_location_message()"},{"path":"https://package.epinowcast.org/dev/reference/cache_location_message.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Cache location message for epinowcast package — cache_location_message","text":"character vector containing messages. enw_cache_location set, returns instructions setting cache location find details. set, function returns confirmation message current cache location.","code":""},{"path":"https://package.epinowcast.org/dev/reference/cache_location_message.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Cache location message for epinowcast package — cache_location_message","text":"cache_location_message() examines enw_cache_location environment variable. variable set, advises user set cache location using enw_set_cache() optimize stan compilation times. enw_cache_location set, confirms current cache location user. Management setting cache location can done using enw_set_cache().","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_design_matrix_sparsity.html","id":null,"dir":"Reference","previous_headings":"","what":"Check design matrix sparsity — check_design_matrix_sparsity","title":"Check design matrix sparsity — check_design_matrix_sparsity","text":"function checks sparsity design matrix provides recommendation matrix considered sparse.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_design_matrix_sparsity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check design matrix sparsity — check_design_matrix_sparsity","text":"","code":"check_design_matrix_sparsity(   matrix,   sparsity_threshold = 0.9,   min_matrix_size = 50,   name = \"checked\" )"},{"path":"https://package.epinowcast.org/dev/reference/check_design_matrix_sparsity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check design matrix sparsity — check_design_matrix_sparsity","text":"matrix numeric matrix checked sparsity. sparsity_threshold numeric value 0 1 indicating threshold considering matrix sparse. Default 0.9. min_matrix_size integer indicating minimum size matrix perform sparsity check. Default 50. name character string specifying name design matrix. Default \"checked\".","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_design_matrix_sparsity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check design matrix sparsity — check_design_matrix_sparsity","text":"function used side effect providing informational message matrix sparse. returns NULL invisibly.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_environment_unset.html","id":null,"dir":"Reference","previous_headings":"","what":"Check environment setting — check_environment_unset","title":"Check environment setting — check_environment_unset","text":"internal function checks whether given environment variable set . returns TRUE variable either null empty string, indicating environment variable set. Otherwise, returns FALSE.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_environment_unset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check environment setting — check_environment_unset","text":"","code":"check_environment_unset(x)"},{"path":"https://package.epinowcast.org/dev/reference/check_environment_unset.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check environment setting — check_environment_unset","text":"x environment variable checked.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_environment_unset.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check environment setting — check_environment_unset","text":"Logical value indicating whether environment variable set (either null empty string).","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Check observations for reserved grouping variables — check_group","title":"Check observations for reserved grouping variables — check_group","text":"Check observations reserved grouping variables","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check observations for reserved grouping variables — check_group","text":"","code":"check_group(obs)"},{"path":"https://package.epinowcast.org/dev/reference/check_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check observations for reserved grouping variables — check_group","text":"obs object coerce_dtd place, contain .group, .old_group, .new_group. reserved names.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check observations for reserved grouping variables — check_group","text":"obs object, modifiable place.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_group_date_unique.html","id":null,"dir":"Reference","previous_headings":"","what":"Check observations for uniqueness of grouping variables with respect to reference_date and report_date — check_group_date_unique","title":"Check observations for uniqueness of grouping variables with respect to reference_date and report_date — check_group_date_unique","text":"function checks input data stratified reference_date, report_date, .group. counting number observations combination variables, throwing warning combination one observation.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_group_date_unique.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check observations for uniqueness of grouping variables with respect to reference_date and report_date — check_group_date_unique","text":"","code":"check_group_date_unique(obs)"},{"path":"https://package.epinowcast.org/dev/reference/check_group_date_unique.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check observations for uniqueness of grouping variables with respect to reference_date and report_date — check_group_date_unique","text":"obs object coerce_dtd place, contains .group, reference_date, report_date columns.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_max_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Check appropriateness of maximum delay — check_max_delay","title":"Check appropriateness of maximum delay — check_max_delay","text":"Check maximum delay specified user long enough raise potential warnings. achieved computing share reference dates cumulative case count aspired coverage.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_max_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check appropriateness of maximum delay — check_max_delay","text":"","code":"check_max_delay(   data,   max_delay = data$max_delay,   cum_coverage = 0.8,   maxdelay_quantile_outlier = 0.97,   warn = TRUE,   warn_internal = FALSE )"},{"path":"https://package.epinowcast.org/dev/reference/check_max_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check appropriateness of maximum delay — check_max_delay","text":"data Output enw_preprocess_data(). max_delay maximum delay model delay distribution, specified units timestep (e.g., timestep = \"week\", max_delay = 3 means 3 weeks). specified maximum observed delay assumed true maximum delay model. Otherwise, integer greater equal 1 can specified. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Steps take determine maximum delay: Consider realistic relevant application. Check proportion observations reported (prop_reported) delay new_confirm output enw_preprocess_obs. Use check_max_delay() check coverage candidate max_delay. doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 intervals (.e. max_delay 1 corresponds delay). cum_coverage aspired percentage cases maximum delay cover. Defaults 0.8 (80%). maxdelay_quantile_outlier reference dates sufficiently far past, determined based maximum observed delay, included (see details). Instead overall maximum observed delay, quantile maximum observed delay reference dates used. robust outliers. Defaults 0.97 (97%). warn warning issued cumulative case count cum_coverage majority reference dates? warn_internal TRUE function called internally another epinowcast function. , warnings adjusted avoid confusing user.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_max_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check appropriateness of maximum delay — check_max_delay","text":"data.table share reference dates cumulative case count cum_coverage, stratified group.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_max_delay.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check appropriateness of maximum delay — check_max_delay","text":"data sparse (e.g., predominantly zero counts), function may able compute meaningful coverage statistics. cases, warning issued function treats data coverage issues. typically occurs groups non-zero observations specified max_delay large relative available data. coverage respect maximum observed case count corresponding reference date. maximum observed case count likely smaller true overall case count yet fully observed reference dates (due right truncation), reference dates maximum observed delay ago included. Still, can use maximum observed delay, unknown true maximum delay, computed coverage values interpreted care, proxies true coverage.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_max_delay.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check appropriateness of maximum delay — check_max_delay","text":"","code":"pobs <- enw_example(type = \"preprocessed_observations\") check_max_delay(pobs, max_delay = 20, cum_coverage = 0.8) #>    .group coverage below_coverage #>    <char>    <num>          <num> #> 1:      1      0.8              0 #> 2:    all      0.8              0"},{"path":"https://package.epinowcast.org/dev/reference/check_module.html","id":null,"dir":"Reference","previous_headings":"","what":"Check a model module contains the required components — check_module","title":"Check a model module contains the required components — check_module","text":"Check model module contains required components","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_module.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check a model module contains the required components — check_module","text":"","code":"check_module(module)"},{"path":"https://package.epinowcast.org/dev/reference/check_module.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check a model module contains the required components — check_module","text":"module model module. example enw_expectation().","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_modules_compatible.html","id":null,"dir":"Reference","previous_headings":"","what":"Check that model modules have compatible specifications — check_modules_compatible","title":"Check that model modules have compatible specifications — check_modules_compatible","text":"Check model modules compatible specifications","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_modules_compatible.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check that model modules have compatible specifications — check_modules_compatible","text":"","code":"check_modules_compatible(modules)"},{"path":"https://package.epinowcast.org/dev/reference/check_modules_compatible.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check that model modules have compatible specifications — check_modules_compatible","text":"modules list model modules.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_numeric_timestep.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Numeric Timestep — check_numeric_timestep","title":"Check Numeric Timestep — check_numeric_timestep","text":"function verifies difference numeric dates provided observations corresponds provided timestep.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_numeric_timestep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Numeric Timestep — check_numeric_timestep","text":"","code":"check_numeric_timestep(dates, date_var, timestep, exact = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/check_numeric_timestep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Numeric Timestep — check_numeric_timestep","text":"dates Vector Date class representing dates. date_var variable obs representing dates. timestep Numeric timestep date difference. exact Logical, TRUE, checks differences exactly match timestep. FALSE, checks sum differences modulo timestep equals zero. Default TRUE.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_numeric_timestep.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Numeric Timestep — check_numeric_timestep","text":"function used side effect stopping check fails. check passes, function returns invisibly.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_observation_indicator.html","id":null,"dir":"Reference","previous_headings":"","what":"Check observation indicator — check_observation_indicator","title":"Check observation indicator — check_observation_indicator","text":"function verifies observation_indicator within provided new_confirm observations logical. check performed ensure observation_indicator correct type.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_observation_indicator.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check observation indicator — check_observation_indicator","text":"","code":"check_observation_indicator(new_confirm, observation_indicator = NULL)"},{"path":"https://package.epinowcast.org/dev/reference/check_observation_indicator.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check observation indicator — check_observation_indicator","text":"new_confirm data frame containing observations checked. observation_indicator character string specifying column name new_confirm represents observation indicator. column logical type. NULL, check performed.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_observation_indicator.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check observation indicator — check_observation_indicator","text":"function used side effect checking observation indicator new_confirm. check passes, function returns invisibly. Otherwise, stops returns error message.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_quantiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Check required quantiles are present — check_quantiles","title":"Check required quantiles are present — check_quantiles","text":"Check required quantiles present","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_quantiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check required quantiles are present — check_quantiles","text":"","code":"check_quantiles(posterior, req_probs = c(0.5, 0.95, 0.2, 0.8))"},{"path":"https://package.epinowcast.org/dev/reference/check_quantiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check required quantiles are present — check_quantiles","text":"posterior data.table coerce_dt()d place; must contain quantiles identified using q5 naming scheme. req_probs numeric vector required probabilities. Default: c(0.5, 0.95, 0.2, 0.8).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_renviron_for_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Check .Renviron for cache location setting — check_renviron_for_cache","title":"Check .Renviron for cache location setting — check_renviron_for_cache","text":"Check .Renviron cache location setting","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_renviron_for_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check .Renviron for cache location setting — check_renviron_for_cache","text":"","code":"check_renviron_for_cache(environ)"},{"path":"https://package.epinowcast.org/dev/reference/check_renviron_for_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check .Renviron for cache location setting — check_renviron_for_cache","text":"environ list containing contents .Renviron file path. output get_renviron_contents() function.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_timestep.html","id":null,"dir":"Reference","previous_headings":"","what":"Check timestep — check_timestep","title":"Check timestep — check_timestep","text":"function verifies difference dates provided observations corresponds provided timestep. exact argument set TRUE, function checks differences exactly match timestep; otherwise, checks sum differences modulo timestep equals zero. check fails, function stops returns error message.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_timestep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check timestep — check_timestep","text":"","code":"check_timestep(   obs,   date_var,   timestep = \"day\",   exact = TRUE,   check_nrow = TRUE )"},{"path":"https://package.epinowcast.org/dev/reference/check_timestep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check timestep — check_timestep","text":"obs types supported data.table::.data.table(). date_var variable obs representing dates. timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used. exact Logical, TRUE, checks differences exactly match timestep. FALSE, checks sum differences modulo timestep equals zero. Default TRUE. check_nrow Logical, TRUE, checks least two observations. Default TRUE. FALSE, function returns invisibly one observation.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_timestep.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check timestep — check_timestep","text":"function used side effect stopping check fails. check passes, function returns invisibly.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_timestep_by_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Check timestep by date — check_timestep_by_date","title":"Check timestep by date — check_timestep_by_date","text":"function verifies difference dates within date provided observations corresponds provided timestep. check performed report_date reference_date group obs.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_timestep_by_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check timestep by date — check_timestep_by_date","text":"","code":"check_timestep_by_date(obs, timestep = \"day\", exact = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/check_timestep_by_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check timestep by date — check_timestep_by_date","text":"obs types supported data.table::.data.table(). timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used. exact Logical, TRUE, checks differences exactly match timestep. FALSE, checks sum differences modulo timestep equals zero. Default TRUE.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_timestep_by_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check timestep by date — check_timestep_by_date","text":"function used side effect checking timestep date obs. check passes dates, function returns invisibly. Otherwise, stops returns error message.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/check_timestep_by_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Check timestep by group — check_timestep_by_group","title":"Check timestep by group — check_timestep_by_group","text":"function verifies difference dates within group provided observations corresponds provided timestep. check performed specified date_var group obs.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_timestep_by_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check timestep by group — check_timestep_by_group","text":"","code":"check_timestep_by_group(obs, date_var, timestep = \"day\", exact = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/check_timestep_by_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check timestep by group — check_timestep_by_group","text":"obs types supported data.table::.data.table(). date_var variable obs representing dates. timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used. exact Logical, TRUE, checks differences exactly match timestep. FALSE, checks sum differences modulo timestep equals zero. Default TRUE.","code":""},{"path":"https://package.epinowcast.org/dev/reference/check_timestep_by_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check timestep by group — check_timestep_by_group","text":"function used side effect checking timestep group obs. check passes groups, function returns invisibly. Otherwise, stops returns error message.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/coerce_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce Dates — coerce_date","title":"Coerce Dates — coerce_date","text":"Provides consistent coercion inputs IDate error handling","code":""},{"path":"https://package.epinowcast.org/dev/reference/coerce_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce Dates — coerce_date","text":"","code":"coerce_date(dates = NULL)"},{"path":"https://package.epinowcast.org/dev/reference/coerce_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce Dates — coerce_date","text":"dates vector-like input, function attempts coerce via data.table::.IDate(). Defaults NULL.","code":""},{"path":"https://package.epinowcast.org/dev/reference/coerce_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce Dates — coerce_date","text":"IDate vector.","code":""},{"path":"https://package.epinowcast.org/dev/reference/coerce_date.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Coerce Dates — coerce_date","text":"elements dates coerced, function result error, indicating indices coerced IDate. Internal methods epinowcast assume dates represented IDate.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/coerce_date.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Coerce Dates — coerce_date","text":"","code":"# works coerce_date(c(\"2020-05-28\", \"2020-05-29\")) #> [1] \"2020-05-28\" \"2020-05-29\" # does not, indicates index 2 is problem tryCatch(   coerce_date(c(\"2020-05-28\", \"2020-o5-29\")),   error = function(e) {     print(e)   } ) #> <error/rlang_error> #> Error in `coerce_date()`: #> ! Failed to parse with `as.IDate`: 2020-o5-29 (indices 2). #> --- #> Backtrace: #>      ▆ #>   1. └─pkgdown::build_site_github_pages(new_process = FALSE, install = FALSE) #>   2.   └─pkgdown::build_site(...) #>   3.     └─pkgdown:::build_site_local(...) #>   4.       └─pkgdown::build_reference(...) #>   5.         ├─pkgdown:::unwrap_purrr_error(...) #>   6.         │ └─base::withCallingHandlers(...) #>   7.         └─purrr::map(...) #>   8.           └─purrr:::map_(\"list\", .x, .f, ..., .progress = .progress) #>   9.             ├─purrr:::with_indexed_errors(...) #>  10.             │ └─base::withCallingHandlers(...) #>  11.             ├─purrr:::call_with_cleanup(...) #>  12.             └─pkgdown (local) .f(.x[[i]], ...) #>  13.               ├─base::withCallingHandlers(...) #>  14.               └─pkgdown:::data_reference_topic(...) #>  15.                 └─pkgdown:::run_examples(...) #>  16.                   └─pkgdown:::highlight_examples(code, topic, env = env) #>  17.                     └─downlit::evaluate_and_highlight(...) #>  18.                       └─evaluate::evaluate(code, child_env(env), new_device = TRUE, output_handler = output_handler) #>  19.                         ├─base::withRestarts(...) #>  20.                         │ └─base (local) withRestartList(expr, restarts) #>  21.                         │   ├─base (local) withOneRestart(withRestartList(expr, restarts[-nr]), restarts[[nr]]) #>  22.                         │   │ └─base (local) doWithOneRestart(return(expr), restart) #>  23.                         │   └─base (local) withRestartList(expr, restarts[-nr]) #>  24.                         │     └─base (local) withOneRestart(expr, restarts[[1L]]) #>  25.                         │       └─base (local) doWithOneRestart(return(expr), restart) #>  26.                         ├─evaluate:::with_handlers(...) #>  27.                         │ ├─base::eval(call) #>  28.                         │ │ └─base::eval(call) #>  29.                         │ └─base::withCallingHandlers(...) #>  30.                         ├─base::withVisible(eval(expr, envir)) #>  31.                         └─base::eval(expr, envir) #>  32.                           └─base::eval(expr, envir) #>  33.                             ├─base::tryCatch(...) #>  34.                             │ └─base (local) tryCatchList(expr, classes, parentenv, handlers) #>  35.                             │   └─base (local) tryCatchOne(expr, names, parentenv, handlers[[1L]]) #>  36.                             │     └─base (local) doTryCatch(return(expr), name, parentenv, handler) #>  37.                             └─epinowcast::coerce_date(c(\"2020-05-28\", \"2020-o5-29\"))"},{"path":"https://package.epinowcast.org/dev/reference/coerce_dt.html","id":null,"dir":"Reference","previous_headings":"","what":"Coerce data.tables — coerce_dt","title":"Coerce data.tables — coerce_dt","text":"Provides consistent coercion inputs data.table error handling, column checking, optional selection.","code":""},{"path":"https://package.epinowcast.org/dev/reference/coerce_dt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Coerce data.tables — coerce_dt","text":"","code":"coerce_dt(   data,   select = NULL,   required_cols = select,   forbidden_cols = NULL,   group = FALSE,   dates = FALSE,   copy = TRUE,   msg_required = \"The following columns are required: \",   msg_forbidden = \"The following columns are forbidden: \" )"},{"path":"https://package.epinowcast.org/dev/reference/coerce_dt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Coerce data.tables — coerce_dt","text":"data types supported data.table::.data.table() select optional character vector columns return; unchecked n.b. error include \".group\"; use group argument required_cols optional character vector required columns forbidden_cols optional character vector forbidden columns group logical; ensure presence .group column? dates logical; ensure presence report_date reference_date? TRUE (default), columns coerced .IDate. copy logical; TRUE (default), new data.table returned msg_required character string; required_cols-related error message msg_forbidden character string; forbidden_cols-related error message","code":""},{"path":"https://package.epinowcast.org/dev/reference/coerce_dt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Coerce data.tables — coerce_dt","text":"data.table; returned object copy, unless copy = FALSE, case modifications made -place","code":""},{"path":"https://package.epinowcast.org/dev/reference/coerce_dt.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Coerce data.tables — coerce_dt","text":"function provides single-point function getting \"local\" version data provided user, internally used data.table format. also enables selectively copying versus , well checking presence /absence various columns. intended address garbage user, generally attempt address garbage developer - e.g. asking overlapping required forbidden columns (though lead always-error condition). dates = TRUE, function ensures report_date reference_date columns coerced IDate class integer storage mode. necessary operations (dplyr::filter()) can convert IDate columns double storage mode whilst preserving class, violates data.table's requirements causes errors subsequent date arithmetic operations.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/construct_re.html","id":null,"dir":"Reference","previous_headings":"","what":"Constructs random effect terms — construct_re","title":"Constructs random effect terms — construct_re","text":"Constructs random effect terms","code":""},{"path":"https://package.epinowcast.org/dev/reference/construct_re.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Constructs random effect terms — construct_re","text":"","code":"construct_re(re, data)"},{"path":"https://package.epinowcast.org/dev/reference/construct_re.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Constructs random effect terms — construct_re","text":"re random effect defined using re() takes random effects specified model formula using lme4 syntax. data data.frame observations used define random effects. Must contain variables specified re() term.","code":""},{"path":"https://package.epinowcast.org/dev/reference/construct_re.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Constructs random effect terms — construct_re","text":"list containing transformed data (\"data\"), fixed effects terms (\"terms\")  data.frame specifying random effect structure terms (effects). Note specified random effect factor converted one.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/construct_re.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Constructs random effect terms — construct_re","text":"","code":"# Simple examples form <- epinowcast:::parse_formula(~ 1 + (1 | day_of_week)) data <- enw_example(\"prepr\")$metareference[[1]] random_effect <- re(form$random[[1]]) epinowcast:::construct_re(random_effect, data) #> $data #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-14      1       DE       00+     0   Wednesday     0     0     0 #>  2: 2021-07-15      1       DE       00+     0    Thursday     1     0     0 #>  3: 2021-07-16      1       DE       00+     0      Friday     2     0     0 #>  4: 2021-07-17      1       DE       00+     0    Saturday     3     0     0 #>  5: 2021-07-18      1       DE       00+     0      Sunday     4     0     0 #>  6: 2021-07-19      1       DE       00+     0      Monday     5     0     0 #>  7: 2021-07-20      1       DE       00+     0     Tuesday     6     0     0 #>  8: 2021-07-21      1       DE       00+     0   Wednesday     7     1     0 #>  9: 2021-07-22      1       DE       00+     0    Thursday     8     1     0 #> 10: 2021-07-23      1       DE       00+     0      Friday     9     1     0 #> 11: 2021-07-24      1       DE       00+     0    Saturday    10     1     0 #> 12: 2021-07-25      1       DE       00+     0      Sunday    11     1     0 #> 13: 2021-07-26      1       DE       00+     0      Monday    12     1     0 #> 14: 2021-07-27      1       DE       00+     0     Tuesday    13     1     0 #> 15: 2021-07-28      1       DE       00+     0   Wednesday    14     2     0 #> 16: 2021-07-29      1       DE       00+     0    Thursday    15     2     0 #> 17: 2021-07-30      1       DE       00+     0      Friday    16     2     0 #> 18: 2021-07-31      1       DE       00+     0    Saturday    17     2     0 #> 19: 2021-08-01      1       DE       00+     0      Sunday    18     2     1 #> 20: 2021-08-02      1       DE       00+     0      Monday    19     2     1 #> 21: 2021-08-03      1       DE       00+     0     Tuesday    20     2     1 #> 22: 2021-08-04      1       DE       00+     0   Wednesday    21     3     1 #> 23: 2021-08-05      1       DE       00+     0    Thursday    22     3     1 #> 24: 2021-08-06      1       DE       00+     0      Friday    23     3     1 #> 25: 2021-08-07      1       DE       00+     0    Saturday    24     3     1 #> 26: 2021-08-08      1       DE       00+     0      Sunday    25     3     1 #> 27: 2021-08-09      1       DE       00+     0      Monday    26     3     1 #> 28: 2021-08-10      1       DE       00+     0     Tuesday    27     3     1 #> 29: 2021-08-11      1       DE       00+     0   Wednesday    28     4     1 #> 30: 2021-08-12      1       DE       00+     0    Thursday    29     4     1 #> 31: 2021-08-13      1       DE       00+     0      Friday    30     4     1 #> 32: 2021-08-14      1       DE       00+     0    Saturday    31     4     1 #> 33: 2021-08-15      1       DE       00+     0      Sunday    32     4     1 #> 34: 2021-08-16      1       DE       00+     0      Monday    33     4     1 #> 35: 2021-08-17      1       DE       00+     0     Tuesday    34     4     1 #> 36: 2021-08-18      1       DE       00+     0   Wednesday    35     5     1 #> 37: 2021-08-19      1       DE       00+     0    Thursday    36     5     1 #> 38: 2021-08-20      1       DE       00+     0      Friday    37     5     1 #> 39: 2021-08-21      1       DE       00+     0    Saturday    38     5     1 #> 40: 2021-08-22      1       DE       00+     0      Sunday    39     5     1 #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  #> $terms #> [1] \"day_of_week\" #>  #> $effects #>                 effects fixed day_of_week #>                  <char> <num>       <num> #> 1:    day_of_weekFriday     0           1 #> 2:    day_of_weekMonday     0           1 #> 3:  day_of_weekSaturday     0           1 #> 4:    day_of_weekSunday     0           1 #> 5:  day_of_weekThursday     0           1 #> 6:   day_of_weekTuesday     0           1 #> 7: day_of_weekWednesday     0           1 #>   # A more complex example form <- epinowcast:::parse_formula(   ~ 1 + disp + (1 + gear | cyl) + (0 + wt | am) ) random_effect <- re(form$random[[1]]) epinowcast:::construct_re(random_effect, mtcars) #> $data #>       mpg    cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb #>     <num> <fctr> <num> <num> <num> <num> <num> <num> <num> <num> <num> #>  1:  21.0      6 160.0   110  3.90 2.620 16.46     0     1     4     4 #>  2:  21.0      6 160.0   110  3.90 2.875 17.02     0     1     4     4 #>  3:  22.8      4 108.0    93  3.85 2.320 18.61     1     1     4     1 #>  4:  21.4      6 258.0   110  3.08 3.215 19.44     1     0     3     1 #>  5:  18.7      8 360.0   175  3.15 3.440 17.02     0     0     3     2 #>  6:  18.1      6 225.0   105  2.76 3.460 20.22     1     0     3     1 #>  7:  14.3      8 360.0   245  3.21 3.570 15.84     0     0     3     4 #>  8:  24.4      4 146.7    62  3.69 3.190 20.00     1     0     4     2 #>  9:  22.8      4 140.8    95  3.92 3.150 22.90     1     0     4     2 #> 10:  19.2      6 167.6   123  3.92 3.440 18.30     1     0     4     4 #> 11:  17.8      6 167.6   123  3.92 3.440 18.90     1     0     4     4 #> 12:  16.4      8 275.8   180  3.07 4.070 17.40     0     0     3     3 #> 13:  17.3      8 275.8   180  3.07 3.730 17.60     0     0     3     3 #> 14:  15.2      8 275.8   180  3.07 3.780 18.00     0     0     3     3 #> 15:  10.4      8 472.0   205  2.93 5.250 17.98     0     0     3     4 #> 16:  10.4      8 460.0   215  3.00 5.424 17.82     0     0     3     4 #> 17:  14.7      8 440.0   230  3.23 5.345 17.42     0     0     3     4 #> 18:  32.4      4  78.7    66  4.08 2.200 19.47     1     1     4     1 #> 19:  30.4      4  75.7    52  4.93 1.615 18.52     1     1     4     2 #> 20:  33.9      4  71.1    65  4.22 1.835 19.90     1     1     4     1 #> 21:  21.5      4 120.1    97  3.70 2.465 20.01     1     0     3     1 #> 22:  15.5      8 318.0   150  2.76 3.520 16.87     0     0     3     2 #> 23:  15.2      8 304.0   150  3.15 3.435 17.30     0     0     3     2 #> 24:  13.3      8 350.0   245  3.73 3.840 15.41     0     0     3     4 #> 25:  19.2      8 400.0   175  3.08 3.845 17.05     0     0     3     2 #> 26:  27.3      4  79.0    66  4.08 1.935 18.90     1     1     4     1 #> 27:  26.0      4 120.3    91  4.43 2.140 16.70     0     1     5     2 #> 28:  30.4      4  95.1   113  3.77 1.513 16.90     1     1     5     2 #> 29:  15.8      8 351.0   264  4.22 3.170 14.50     0     1     5     4 #> 30:  19.7      6 145.0   175  3.62 2.770 15.50     0     1     5     6 #> 31:  15.0      8 301.0   335  3.54 3.570 14.60     0     1     5     8 #> 32:  21.4      4 121.0   109  4.11 2.780 18.60     1     1     4     2 #>       mpg    cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb #>     <num> <fctr> <num> <num> <num> <num> <num> <num> <num> <num> <num> #>  #> $terms #> [1] \"cyl\"      \"gear:cyl\" #>  #> $effects #>      effects fixed   cyl gear__cyl #>       <char> <num> <num>     <num> #> 1:      cyl4     0     1         0 #> 2:      cyl6     0     1         0 #> 3:      cyl8     0     1         0 #> 4: cyl4:gear     0     0         1 #> 5: cyl6:gear     0     0         1 #> 6: cyl8:gear     0     0         1 #>   random_effect2 <- re(form$random[[2]]) epinowcast:::construct_re(random_effect2, mtcars) #> $data #>       mpg   cyl  disp    hp  drat    wt  qsec    vs     am  gear  carb #>     <num> <num> <num> <num> <num> <num> <num> <num> <fctr> <num> <num> #>  1:  21.0     6 160.0   110  3.90 2.620 16.46     0      1     4     4 #>  2:  21.0     6 160.0   110  3.90 2.875 17.02     0      1     4     4 #>  3:  22.8     4 108.0    93  3.85 2.320 18.61     1      1     4     1 #>  4:  21.4     6 258.0   110  3.08 3.215 19.44     1      0     3     1 #>  5:  18.7     8 360.0   175  3.15 3.440 17.02     0      0     3     2 #>  6:  18.1     6 225.0   105  2.76 3.460 20.22     1      0     3     1 #>  7:  14.3     8 360.0   245  3.21 3.570 15.84     0      0     3     4 #>  8:  24.4     4 146.7    62  3.69 3.190 20.00     1      0     4     2 #>  9:  22.8     4 140.8    95  3.92 3.150 22.90     1      0     4     2 #> 10:  19.2     6 167.6   123  3.92 3.440 18.30     1      0     4     4 #> 11:  17.8     6 167.6   123  3.92 3.440 18.90     1      0     4     4 #> 12:  16.4     8 275.8   180  3.07 4.070 17.40     0      0     3     3 #> 13:  17.3     8 275.8   180  3.07 3.730 17.60     0      0     3     3 #> 14:  15.2     8 275.8   180  3.07 3.780 18.00     0      0     3     3 #> 15:  10.4     8 472.0   205  2.93 5.250 17.98     0      0     3     4 #> 16:  10.4     8 460.0   215  3.00 5.424 17.82     0      0     3     4 #> 17:  14.7     8 440.0   230  3.23 5.345 17.42     0      0     3     4 #> 18:  32.4     4  78.7    66  4.08 2.200 19.47     1      1     4     1 #> 19:  30.4     4  75.7    52  4.93 1.615 18.52     1      1     4     2 #> 20:  33.9     4  71.1    65  4.22 1.835 19.90     1      1     4     1 #> 21:  21.5     4 120.1    97  3.70 2.465 20.01     1      0     3     1 #> 22:  15.5     8 318.0   150  2.76 3.520 16.87     0      0     3     2 #> 23:  15.2     8 304.0   150  3.15 3.435 17.30     0      0     3     2 #> 24:  13.3     8 350.0   245  3.73 3.840 15.41     0      0     3     4 #> 25:  19.2     8 400.0   175  3.08 3.845 17.05     0      0     3     2 #> 26:  27.3     4  79.0    66  4.08 1.935 18.90     1      1     4     1 #> 27:  26.0     4 120.3    91  4.43 2.140 16.70     0      1     5     2 #> 28:  30.4     4  95.1   113  3.77 1.513 16.90     1      1     5     2 #> 29:  15.8     8 351.0   264  4.22 3.170 14.50     0      1     5     4 #> 30:  19.7     6 145.0   175  3.62 2.770 15.50     0      1     5     6 #> 31:  15.0     8 301.0   335  3.54 3.570 14.60     0      1     5     8 #> 32:  21.4     4 121.0   109  4.11 2.780 18.60     1      1     4     2 #>       mpg   cyl  disp    hp  drat    wt  qsec    vs     am  gear  carb #>     <num> <num> <num> <num> <num> <num> <num> <num> <fctr> <num> <num> #>  #> $terms #> [1] \"wt:am\" #>  #> $effects #>    effects fixed wt__am #>     <char> <num>  <num> #> 1:  wt:am0     0      1 #> 2:  wt:am1     0      1 #>"},{"path":"https://package.epinowcast.org/dev/reference/construct_rw.html","id":null,"dir":"Reference","previous_headings":"","what":"Constructs random walk terms — construct_rw","title":"Constructs random walk terms — construct_rw","text":"function takes random walks defined rw(), produces required additional variables (denoted using \"c\" prefix constructed using enw_add_cumulative_membership()), returns extended data.frame along new fixed effects random effect structure.","code":""},{"path":"https://package.epinowcast.org/dev/reference/construct_rw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Constructs random walk terms — construct_rw","text":"","code":"construct_rw(rw, data)"},{"path":"https://package.epinowcast.org/dev/reference/construct_rw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Constructs random walk terms — construct_rw","text":"rw random walk term defined rw(). data data.frame observations used define random walk term. Must contain time grouping variables defined rw() term specified.","code":""},{"path":"https://package.epinowcast.org/dev/reference/construct_rw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Constructs random walk terms — construct_rw","text":"list containing following: data: input data.frame addition new variables required specified random walk. added using enw_add_cumulative_membership(). -terms: character vector new fixed effects terms add model formula. effects: data.frame describing random effect structure new effects.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/construct_rw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Constructs random walk terms — construct_rw","text":"","code":"data <- enw_example(\"preproc\")$metareference[[1]]  epinowcast:::construct_rw(rw(week), data) #> $data #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-14      1       DE       00+     0   Wednesday     0     0     0 #>  2: 2021-07-15      1       DE       00+     0    Thursday     1     0     0 #>  3: 2021-07-16      1       DE       00+     0      Friday     2     0     0 #>  4: 2021-07-17      1       DE       00+     0    Saturday     3     0     0 #>  5: 2021-07-18      1       DE       00+     0      Sunday     4     0     0 #>  6: 2021-07-19      1       DE       00+     0      Monday     5     0     0 #>  7: 2021-07-20      1       DE       00+     0     Tuesday     6     0     0 #>  8: 2021-07-21      1       DE       00+     0   Wednesday     7     1     0 #>  9: 2021-07-22      1       DE       00+     0    Thursday     8     1     0 #> 10: 2021-07-23      1       DE       00+     0      Friday     9     1     0 #> 11: 2021-07-24      1       DE       00+     0    Saturday    10     1     0 #> 12: 2021-07-25      1       DE       00+     0      Sunday    11     1     0 #> 13: 2021-07-26      1       DE       00+     0      Monday    12     1     0 #> 14: 2021-07-27      1       DE       00+     0     Tuesday    13     1     0 #> 15: 2021-07-28      1       DE       00+     0   Wednesday    14     2     0 #> 16: 2021-07-29      1       DE       00+     0    Thursday    15     2     0 #> 17: 2021-07-30      1       DE       00+     0      Friday    16     2     0 #> 18: 2021-07-31      1       DE       00+     0    Saturday    17     2     0 #> 19: 2021-08-01      1       DE       00+     0      Sunday    18     2     1 #> 20: 2021-08-02      1       DE       00+     0      Monday    19     2     1 #> 21: 2021-08-03      1       DE       00+     0     Tuesday    20     2     1 #> 22: 2021-08-04      1       DE       00+     0   Wednesday    21     3     1 #> 23: 2021-08-05      1       DE       00+     0    Thursday    22     3     1 #> 24: 2021-08-06      1       DE       00+     0      Friday    23     3     1 #> 25: 2021-08-07      1       DE       00+     0    Saturday    24     3     1 #> 26: 2021-08-08      1       DE       00+     0      Sunday    25     3     1 #> 27: 2021-08-09      1       DE       00+     0      Monday    26     3     1 #> 28: 2021-08-10      1       DE       00+     0     Tuesday    27     3     1 #> 29: 2021-08-11      1       DE       00+     0   Wednesday    28     4     1 #> 30: 2021-08-12      1       DE       00+     0    Thursday    29     4     1 #> 31: 2021-08-13      1       DE       00+     0      Friday    30     4     1 #> 32: 2021-08-14      1       DE       00+     0    Saturday    31     4     1 #> 33: 2021-08-15      1       DE       00+     0      Sunday    32     4     1 #> 34: 2021-08-16      1       DE       00+     0      Monday    33     4     1 #> 35: 2021-08-17      1       DE       00+     0     Tuesday    34     4     1 #> 36: 2021-08-18      1       DE       00+     0   Wednesday    35     5     1 #> 37: 2021-08-19      1       DE       00+     0    Thursday    36     5     1 #> 38: 2021-08-20      1       DE       00+     0      Friday    37     5     1 #> 39: 2021-08-21      1       DE       00+     0    Saturday    38     5     1 #> 40: 2021-08-22      1       DE       00+     0      Sunday    39     5     1 #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>     cweek1 cweek2 cweek3 cweek4 cweek5 #>      <num>  <num>  <num>  <num>  <num> #>  1:      0      0      0      0      0 #>  2:      0      0      0      0      0 #>  3:      0      0      0      0      0 #>  4:      0      0      0      0      0 #>  5:      0      0      0      0      0 #>  6:      0      0      0      0      0 #>  7:      0      0      0      0      0 #>  8:      1      0      0      0      0 #>  9:      1      0      0      0      0 #> 10:      1      0      0      0      0 #> 11:      1      0      0      0      0 #> 12:      1      0      0      0      0 #> 13:      1      0      0      0      0 #> 14:      1      0      0      0      0 #> 15:      1      1      0      0      0 #> 16:      1      1      0      0      0 #> 17:      1      1      0      0      0 #> 18:      1      1      0      0      0 #> 19:      1      1      0      0      0 #> 20:      1      1      0      0      0 #> 21:      1      1      0      0      0 #> 22:      1      1      1      0      0 #> 23:      1      1      1      0      0 #> 24:      1      1      1      0      0 #> 25:      1      1      1      0      0 #> 26:      1      1      1      0      0 #> 27:      1      1      1      0      0 #> 28:      1      1      1      0      0 #> 29:      1      1      1      1      0 #> 30:      1      1      1      1      0 #> 31:      1      1      1      1      0 #> 32:      1      1      1      1      0 #> 33:      1      1      1      1      0 #> 34:      1      1      1      1      0 #> 35:      1      1      1      1      0 #> 36:      1      1      1      1      1 #> 37:      1      1      1      1      1 #> 38:      1      1      1      1      1 #> 39:      1      1      1      1      1 #> 40:      1      1      1      1      1 #>     cweek1 cweek2 cweek3 cweek4 cweek5 #>      <num>  <num>  <num>  <num>  <num> #>  #> $terms #> [1] \"cweek1\" \"cweek2\" \"cweek3\" \"cweek4\" \"cweek5\" #>  #> $effects #>    effects fixed rw__week #>     <char> <num>    <num> #> 1:  cweek1     0        1 #> 2:  cweek2     0        1 #> 3:  cweek3     0        1 #> 4:  cweek4     0        1 #> 5:  cweek5     0        1 #>   epinowcast:::construct_rw(rw(week, day_of_week), data) #> $data #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-14      1       DE       00+     0   Wednesday     0     0     0 #>  2: 2021-07-15      1       DE       00+     0    Thursday     1     0     0 #>  3: 2021-07-16      1       DE       00+     0      Friday     2     0     0 #>  4: 2021-07-17      1       DE       00+     0    Saturday     3     0     0 #>  5: 2021-07-18      1       DE       00+     0      Sunday     4     0     0 #>  6: 2021-07-19      1       DE       00+     0      Monday     5     0     0 #>  7: 2021-07-20      1       DE       00+     0     Tuesday     6     0     0 #>  8: 2021-07-21      1       DE       00+     0   Wednesday     7     1     0 #>  9: 2021-07-22      1       DE       00+     0    Thursday     8     1     0 #> 10: 2021-07-23      1       DE       00+     0      Friday     9     1     0 #> 11: 2021-07-24      1       DE       00+     0    Saturday    10     1     0 #> 12: 2021-07-25      1       DE       00+     0      Sunday    11     1     0 #> 13: 2021-07-26      1       DE       00+     0      Monday    12     1     0 #> 14: 2021-07-27      1       DE       00+     0     Tuesday    13     1     0 #> 15: 2021-07-28      1       DE       00+     0   Wednesday    14     2     0 #> 16: 2021-07-29      1       DE       00+     0    Thursday    15     2     0 #> 17: 2021-07-30      1       DE       00+     0      Friday    16     2     0 #> 18: 2021-07-31      1       DE       00+     0    Saturday    17     2     0 #> 19: 2021-08-01      1       DE       00+     0      Sunday    18     2     1 #> 20: 2021-08-02      1       DE       00+     0      Monday    19     2     1 #> 21: 2021-08-03      1       DE       00+     0     Tuesday    20     2     1 #> 22: 2021-08-04      1       DE       00+     0   Wednesday    21     3     1 #> 23: 2021-08-05      1       DE       00+     0    Thursday    22     3     1 #> 24: 2021-08-06      1       DE       00+     0      Friday    23     3     1 #> 25: 2021-08-07      1       DE       00+     0    Saturday    24     3     1 #> 26: 2021-08-08      1       DE       00+     0      Sunday    25     3     1 #> 27: 2021-08-09      1       DE       00+     0      Monday    26     3     1 #> 28: 2021-08-10      1       DE       00+     0     Tuesday    27     3     1 #> 29: 2021-08-11      1       DE       00+     0   Wednesday    28     4     1 #> 30: 2021-08-12      1       DE       00+     0    Thursday    29     4     1 #> 31: 2021-08-13      1       DE       00+     0      Friday    30     4     1 #> 32: 2021-08-14      1       DE       00+     0    Saturday    31     4     1 #> 33: 2021-08-15      1       DE       00+     0      Sunday    32     4     1 #> 34: 2021-08-16      1       DE       00+     0      Monday    33     4     1 #> 35: 2021-08-17      1       DE       00+     0     Tuesday    34     4     1 #> 36: 2021-08-18      1       DE       00+     0   Wednesday    35     5     1 #> 37: 2021-08-19      1       DE       00+     0    Thursday    36     5     1 #> 38: 2021-08-20      1       DE       00+     0      Friday    37     5     1 #> 39: 2021-08-21      1       DE       00+     0    Saturday    38     5     1 #> 40: 2021-08-22      1       DE       00+     0      Sunday    39     5     1 #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>     cweek1 cweek2 cweek3 cweek4 cweek5 #>      <num>  <num>  <num>  <num>  <num> #>  1:      0      0      0      0      0 #>  2:      0      0      0      0      0 #>  3:      0      0      0      0      0 #>  4:      0      0      0      0      0 #>  5:      0      0      0      0      0 #>  6:      0      0      0      0      0 #>  7:      0      0      0      0      0 #>  8:      1      0      0      0      0 #>  9:      1      0      0      0      0 #> 10:      1      0      0      0      0 #> 11:      1      0      0      0      0 #> 12:      1      0      0      0      0 #> 13:      1      0      0      0      0 #> 14:      1      0      0      0      0 #> 15:      1      1      0      0      0 #> 16:      1      1      0      0      0 #> 17:      1      1      0      0      0 #> 18:      1      1      0      0      0 #> 19:      1      1      0      0      0 #> 20:      1      1      0      0      0 #> 21:      1      1      0      0      0 #> 22:      1      1      1      0      0 #> 23:      1      1      1      0      0 #> 24:      1      1      1      0      0 #> 25:      1      1      1      0      0 #> 26:      1      1      1      0      0 #> 27:      1      1      1      0      0 #> 28:      1      1      1      0      0 #> 29:      1      1      1      1      0 #> 30:      1      1      1      1      0 #> 31:      1      1      1      1      0 #> 32:      1      1      1      1      0 #> 33:      1      1      1      1      0 #> 34:      1      1      1      1      0 #> 35:      1      1      1      1      0 #> 36:      1      1      1      1      1 #> 37:      1      1      1      1      1 #> 38:      1      1      1      1      1 #> 39:      1      1      1      1      1 #> 40:      1      1      1      1      1 #>     cweek1 cweek2 cweek3 cweek4 cweek5 #>      <num>  <num>  <num>  <num>  <num> #>  #> $terms #> [1] \"day_of_week:cweek1\" \"day_of_week:cweek2\" \"day_of_week:cweek3\" #> [4] \"day_of_week:cweek4\" \"day_of_week:cweek5\" #>  #> $effects #>                         effects fixed rw__day_of_weekWednesday__week #>                          <char> <num>                          <num> #>  1:    day_of_weekFriday:cweek1     0                              0 #>  2:    day_of_weekMonday:cweek1     0                              0 #>  3:  day_of_weekSaturday:cweek1     0                              0 #>  4:    day_of_weekSunday:cweek1     0                              0 #>  5:  day_of_weekThursday:cweek1     0                              0 #>  6:   day_of_weekTuesday:cweek1     0                              0 #>  7: day_of_weekWednesday:cweek1     0                              1 #>  8:    day_of_weekFriday:cweek2     0                              0 #>  9:    day_of_weekMonday:cweek2     0                              0 #> 10:  day_of_weekSaturday:cweek2     0                              0 #> 11:    day_of_weekSunday:cweek2     0                              0 #> 12:  day_of_weekThursday:cweek2     0                              0 #> 13:   day_of_weekTuesday:cweek2     0                              0 #> 14: day_of_weekWednesday:cweek2     0                              1 #> 15:    day_of_weekFriday:cweek3     0                              0 #> 16:    day_of_weekMonday:cweek3     0                              0 #> 17:  day_of_weekSaturday:cweek3     0                              0 #> 18:    day_of_weekSunday:cweek3     0                              0 #> 19:  day_of_weekThursday:cweek3     0                              0 #> 20:   day_of_weekTuesday:cweek3     0                              0 #> 21: day_of_weekWednesday:cweek3     0                              1 #> 22:    day_of_weekFriday:cweek4     0                              0 #> 23:    day_of_weekMonday:cweek4     0                              0 #> 24:  day_of_weekSaturday:cweek4     0                              0 #> 25:    day_of_weekSunday:cweek4     0                              0 #> 26:  day_of_weekThursday:cweek4     0                              0 #> 27:   day_of_weekTuesday:cweek4     0                              0 #> 28: day_of_weekWednesday:cweek4     0                              1 #> 29:    day_of_weekFriday:cweek5     0                              0 #> 30:    day_of_weekMonday:cweek5     0                              0 #> 31:  day_of_weekSaturday:cweek5     0                              0 #> 32:    day_of_weekSunday:cweek5     0                              0 #> 33:  day_of_weekThursday:cweek5     0                              0 #> 34:   day_of_weekTuesday:cweek5     0                              0 #> 35: day_of_weekWednesday:cweek5     0                              1 #>                         effects fixed rw__day_of_weekWednesday__week #>                          <char> <num>                          <num> #>     rw__day_of_weekThursday__week rw__day_of_weekFriday__week #>                             <num>                       <num> #>  1:                             0                           1 #>  2:                             0                           0 #>  3:                             0                           0 #>  4:                             0                           0 #>  5:                             1                           0 #>  6:                             0                           0 #>  7:                             0                           0 #>  8:                             0                           1 #>  9:                             0                           0 #> 10:                             0                           0 #> 11:                             0                           0 #> 12:                             1                           0 #> 13:                             0                           0 #> 14:                             0                           0 #> 15:                             0                           1 #> 16:                             0                           0 #> 17:                             0                           0 #> 18:                             0                           0 #> 19:                             1                           0 #> 20:                             0                           0 #> 21:                             0                           0 #> 22:                             0                           1 #> 23:                             0                           0 #> 24:                             0                           0 #> 25:                             0                           0 #> 26:                             1                           0 #> 27:                             0                           0 #> 28:                             0                           0 #> 29:                             0                           1 #> 30:                             0                           0 #> 31:                             0                           0 #> 32:                             0                           0 #> 33:                             1                           0 #> 34:                             0                           0 #> 35:                             0                           0 #>     rw__day_of_weekThursday__week rw__day_of_weekFriday__week #>                             <num>                       <num> #>     rw__day_of_weekSaturday__week rw__day_of_weekSunday__week #>                             <num>                       <num> #>  1:                             0                           0 #>  2:                             0                           0 #>  3:                             1                           0 #>  4:                             0                           1 #>  5:                             0                           0 #>  6:                             0                           0 #>  7:                             0                           0 #>  8:                             0                           0 #>  9:                             0                           0 #> 10:                             1                           0 #> 11:                             0                           1 #> 12:                             0                           0 #> 13:                             0                           0 #> 14:                             0                           0 #> 15:                             0                           0 #> 16:                             0                           0 #> 17:                             1                           0 #> 18:                             0                           1 #> 19:                             0                           0 #> 20:                             0                           0 #> 21:                             0                           0 #> 22:                             0                           0 #> 23:                             0                           0 #> 24:                             1                           0 #> 25:                             0                           1 #> 26:                             0                           0 #> 27:                             0                           0 #> 28:                             0                           0 #> 29:                             0                           0 #> 30:                             0                           0 #> 31:                             1                           0 #> 32:                             0                           1 #> 33:                             0                           0 #> 34:                             0                           0 #> 35:                             0                           0 #>     rw__day_of_weekSaturday__week rw__day_of_weekSunday__week #>                             <num>                       <num> #>     rw__day_of_weekMonday__week rw__day_of_weekTuesday__week #>                           <num>                        <num> #>  1:                           0                            0 #>  2:                           1                            0 #>  3:                           0                            0 #>  4:                           0                            0 #>  5:                           0                            0 #>  6:                           0                            1 #>  7:                           0                            0 #>  8:                           0                            0 #>  9:                           1                            0 #> 10:                           0                            0 #> 11:                           0                            0 #> 12:                           0                            0 #> 13:                           0                            1 #> 14:                           0                            0 #> 15:                           0                            0 #> 16:                           1                            0 #> 17:                           0                            0 #> 18:                           0                            0 #> 19:                           0                            0 #> 20:                           0                            1 #> 21:                           0                            0 #> 22:                           0                            0 #> 23:                           1                            0 #> 24:                           0                            0 #> 25:                           0                            0 #> 26:                           0                            0 #> 27:                           0                            1 #> 28:                           0                            0 #> 29:                           0                            0 #> 30:                           1                            0 #> 31:                           0                            0 #> 32:                           0                            0 #> 33:                           0                            0 #> 34:                           0                            1 #> 35:                           0                            0 #>     rw__day_of_weekMonday__week rw__day_of_weekTuesday__week #>                           <num>                        <num> #>"},{"path":"https://package.epinowcast.org/dev/reference/convolution_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Construct a convolution matrix — convolution_matrix","title":"Construct a convolution matrix — convolution_matrix","text":"function allows construction convolution matrices can combined vector primary events produce vector secondary events example form renewal equation simulate reporting delays. Time-varying delays supported well distribution padding (allow use renewal equation like approaches).","code":""},{"path":"https://package.epinowcast.org/dev/reference/convolution_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Construct a convolution matrix — convolution_matrix","text":"","code":"convolution_matrix(dist, t, include_partial = FALSE)"},{"path":"https://package.epinowcast.org/dev/reference/convolution_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Construct a convolution matrix — convolution_matrix","text":"dist vector list vectors describing distribution convolved probability mass function. t Integer value indicating number time steps convolve . include_partial Logical, defaults FALSE. TRUE, convolution include partially complete secondary events.","code":""},{"path":"https://package.epinowcast.org/dev/reference/convolution_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Construct a convolution matrix — convolution_matrix","text":"matrix column indicating primary event row indicating secondary event.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/convolution_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Construct a convolution matrix — convolution_matrix","text":"","code":"# Simple convolution matrix with a static distribution convolution_matrix(c(1, 2, 3), 10) #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] #>  [1,]    0    0    0    0    0    0    0    0    0     0 #>  [2,]    0    0    0    0    0    0    0    0    0     0 #>  [3,]    3    2    1    0    0    0    0    0    0     0 #>  [4,]    0    3    2    1    0    0    0    0    0     0 #>  [5,]    0    0    3    2    1    0    0    0    0     0 #>  [6,]    0    0    0    3    2    1    0    0    0     0 #>  [7,]    0    0    0    0    3    2    1    0    0     0 #>  [8,]    0    0    0    0    0    3    2    1    0     0 #>  [9,]    0    0    0    0    0    0    3    2    1     0 #> [10,]    0    0    0    0    0    0    0    3    2     1 # Include partially reported convolutions convolution_matrix(c(1, 2, 3), 10, include_partial = TRUE) #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] #>  [1,]    1    0    0    0    0    0    0    0    0     0 #>  [2,]    2    1    0    0    0    0    0    0    0     0 #>  [3,]    3    2    1    0    0    0    0    0    0     0 #>  [4,]    0    3    2    1    0    0    0    0    0     0 #>  [5,]    0    0    3    2    1    0    0    0    0     0 #>  [6,]    0    0    0    3    2    1    0    0    0     0 #>  [7,]    0    0    0    0    3    2    1    0    0     0 #>  [8,]    0    0    0    0    0    3    2    1    0     0 #>  [9,]    0    0    0    0    0    0    3    2    1     0 #> [10,]    0    0    0    0    0    0    0    3    2     1 # Use a list of distributions convolution_matrix(rep(list(c(1, 2, 3)), 10), 10) #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] #>  [1,]    0    0    0    0    0    0    0    0    0     0 #>  [2,]    0    0    0    0    0    0    0    0    0     0 #>  [3,]    3    2    1    0    0    0    0    0    0     0 #>  [4,]    0    3    2    1    0    0    0    0    0     0 #>  [5,]    0    0    3    2    1    0    0    0    0     0 #>  [6,]    0    0    0    3    2    1    0    0    0     0 #>  [7,]    0    0    0    0    3    2    1    0    0     0 #>  [8,]    0    0    0    0    0    3    2    1    0     0 #>  [9,]    0    0    0    0    0    0    3    2    1     0 #> [10,]    0    0    0    0    0    0    0    3    2     1 # Use a time-varying list of distributions convolution_matrix(c(rep(list(c(1, 2, 3)), 10), list(c(4, 5, 6))), 11) #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] #>  [1,]    0    0    0    0    0    0    0    0    0     0     0 #>  [2,]    0    0    0    0    0    0    0    0    0     0     0 #>  [3,]    3    2    1    0    0    0    0    0    0     0     0 #>  [4,]    0    3    2    1    0    0    0    0    0     0     0 #>  [5,]    0    0    3    2    1    0    0    0    0     0     0 #>  [6,]    0    0    0    3    2    1    0    0    0     0     0 #>  [7,]    0    0    0    0    3    2    1    0    0     0     0 #>  [8,]    0    0    0    0    0    3    2    1    0     0     0 #>  [9,]    0    0    0    0    0    0    3    2    1     0     0 #> [10,]    0    0    0    0    0    0    0    3    2     1     0 #> [11,]    0    0    0    0    0    0    0    0    3     2     4"},{"path":"https://package.epinowcast.org/dev/reference/create_cache_dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Stan cache directory — create_cache_dir","title":"Create Stan cache directory — create_cache_dir","text":"function creates cache directory Stan models already exist. useful users want set persistent cache location want create directory manually.","code":""},{"path":"https://package.epinowcast.org/dev/reference/create_cache_dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Stan cache directory — create_cache_dir","text":"","code":"create_cache_dir(path)"},{"path":"https://package.epinowcast.org/dev/reference/create_cache_dir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Stan cache directory — create_cache_dir","text":"path valid filepath representing desired cache location. directory exist created.","code":""},{"path":"https://package.epinowcast.org/dev/reference/create_cache_dir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Stan cache directory — create_cache_dir","text":"NULL","code":""},{"path":"https://package.epinowcast.org/dev/reference/date_to_numeric_modulus.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","title":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","text":"function processes date column data.table, converting numeric representation computing modulus provided timestep.","code":""},{"path":"https://package.epinowcast.org/dev/reference/date_to_numeric_modulus.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","text":"","code":"date_to_numeric_modulus(dt, date_column, timestep)"},{"path":"https://package.epinowcast.org/dev/reference/date_to_numeric_modulus.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","text":"dt data.table. date_column character string representing name date column dt. timestep integer representing internal timestep.","code":""},{"path":"https://package.epinowcast.org/dev/reference/date_to_numeric_modulus.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert date column to numeric and calculate its modulus with given timestep. — date_to_numeric_modulus","text":"modified data.table two new columns: one numeric representation date minus minimum date another modulus timestep.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/dot-are_delays_valid.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if delay values are valid — .are_delays_valid","title":"Check if delay values are valid — .are_delays_valid","text":"Check delay values valid","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-are_delays_valid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if delay values are valid — .are_delays_valid","text":"","code":".are_delays_valid(max_delay, daily_max_delay)"},{"path":"https://package.epinowcast.org/dev/reference/dot-are_delays_valid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if delay values are valid — .are_delays_valid","text":"max_delay Delay value timestep units daily_max_delay Delay value days","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-are_delays_valid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if delay values are valid — .are_delays_valid","text":"Logical indicating values valid","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-format_daily_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Format delay for daily timestep — .format_daily_delay","title":"Format delay for daily timestep — .format_daily_delay","text":"Format delay daily timestep","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-format_daily_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format delay for daily timestep — .format_daily_delay","text":"","code":".format_daily_delay(daily_max_delay)"},{"path":"https://package.epinowcast.org/dev/reference/dot-format_daily_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format delay for daily timestep — .format_daily_delay","text":"daily_max_delay Delay value days","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-format_daily_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format delay for daily timestep — .format_daily_delay","text":"Formatted string","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-format_delay_with_units.html","id":null,"dir":"Reference","previous_headings":"","what":"Format delay with appropriate units — .format_delay_with_units","title":"Format delay with appropriate units — .format_delay_with_units","text":"Internal helper format delays units based timestep. weekly/custom timesteps, shows timestep units days.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-format_delay_with_units.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format delay with appropriate units — .format_delay_with_units","text":"","code":".format_delay_with_units(max_delay, timestep, daily_max_delay = NULL)"},{"path":"https://package.epinowcast.org/dev/reference/dot-format_delay_with_units.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format delay with appropriate units — .format_delay_with_units","text":"max_delay Integer delay value timestep units timestep Timestep specification (character numeric) daily_max_delay Pre-computed delay days (optional)","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-format_delay_with_units.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format delay with appropriate units — .format_delay_with_units","text":"Character string formatted delay","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-format_nondaily_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Format delay for non-daily timestep — .format_nondaily_delay","title":"Format delay for non-daily timestep — .format_nondaily_delay","text":"Format delay non-daily timestep","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-format_nondaily_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format delay for non-daily timestep — .format_nondaily_delay","text":"","code":".format_nondaily_delay(max_delay, timestep_unit, daily_max_delay)"},{"path":"https://package.epinowcast.org/dev/reference/dot-format_nondaily_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format delay for non-daily timestep — .format_nondaily_delay","text":"max_delay Delay value timestep units timestep_unit Unit name daily_max_delay Delay value days","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-format_nondaily_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format delay for non-daily timestep — .format_nondaily_delay","text":"Formatted string","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-get_timestep_unit.html","id":null,"dir":"Reference","previous_headings":"","what":"Get timestep unit name — .get_timestep_unit","title":"Get timestep unit name — .get_timestep_unit","text":"Get timestep unit name","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-get_timestep_unit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get timestep unit name — .get_timestep_unit","text":"","code":".get_timestep_unit(timestep)"},{"path":"https://package.epinowcast.org/dev/reference/dot-get_timestep_unit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get timestep unit name — .get_timestep_unit","text":"timestep Timestep specification (character numeric)","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-get_timestep_unit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get timestep unit name — .get_timestep_unit","text":"Character string unit name (singular form)","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-pluralise_unit.html","id":null,"dir":"Reference","previous_headings":"","what":"Pluralise unit name if needed — .pluralise_unit","title":"Pluralise unit name if needed — .pluralise_unit","text":"Pluralise unit name needed","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-pluralise_unit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pluralise unit name if needed — .pluralise_unit","text":"","code":".pluralise_unit(unit, count)"},{"path":"https://package.epinowcast.org/dev/reference/dot-pluralise_unit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pluralise unit name if needed — .pluralise_unit","text":"unit Character string unit name count Numeric value determine plural needed","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-pluralise_unit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pluralise unit name if needed — .pluralise_unit","text":"Character string potentially pluralised unit","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_aggregation_lookups.html","id":null,"dir":"Reference","previous_headings":"","what":"Precompute aggregation index lookups for Stan — .precompute_aggregation_lookups","title":"Precompute aggregation index lookups for Stan — .precompute_aggregation_lookups","text":"Takes nested list structure aggregation indicator matrices precomputes sparse index lookups efficient Stan operations.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_aggregation_lookups.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Precompute aggregation index lookups for Stan — .precompute_aggregation_lookups","text":"","code":".precompute_aggregation_lookups(structural, n_groups, n_times, max_delay)"},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_aggregation_lookups.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Precompute aggregation index lookups for Stan — .precompute_aggregation_lookups","text":"structural nested list structure: list(groups) list(times) matrices (max_delay x max_delay). matrix contains 0s 1s indicating delays aggregate reporting delays. n_groups Integer number groups. n_times Integer number time points. max_delay Integer maximum delay.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_aggregation_lookups.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Precompute aggregation index lookups for Stan — .precompute_aggregation_lookups","text":"list two components: n_selected: 3D array dimensions (groups, times, max_delay) containing number selected indices per row selected_idx: 4D array dimensions (groups, times, max_delay, max_delay) containing column indices row 1s","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_aggregation_lookups.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Precompute aggregation index lookups for Stan — .precompute_aggregation_lookups","text":"Row precomputed indices contains column indices j j <= , ensuring reports aggregate current earlier delays .","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_matrix_indices.html","id":null,"dir":"Reference","previous_headings":"","what":"Precompute indices from aggregation indicator matrix — .precompute_matrix_indices","title":"Precompute indices from aggregation indicator matrix — .precompute_matrix_indices","text":"Extracts column indices row binary indicator matrix 1s. used numerically stable aggregation operations Stan.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_matrix_indices.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Precompute indices from aggregation indicator matrix — .precompute_matrix_indices","text":"","code":".precompute_matrix_indices(matrix)"},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_matrix_indices.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Precompute indices from aggregation indicator matrix — .precompute_matrix_indices","text":"matrix binary indicator matrix (0s 1s) row indicates columns aggregated together.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_matrix_indices.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Precompute indices from aggregation indicator matrix — .precompute_matrix_indices","text":"list two components: n_selected: Integer vector length nrow(matrix) containing number selected (non-zero) indices per row selected_idx: Integer matrix dimensions [nrow(matrix), ncol(matrix)] containing column indices row 1s, unused positions filled 0","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-precompute_matrix_indices.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Precompute indices from aggregation indicator matrix — .precompute_matrix_indices","text":"helper function primarily used tests .precompute_aggregation_lookups() precompute sparse index lookups aggregation operations.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-structural_reporting_to_matrices.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert structural reporting data.table to nested list of matrices — .structural_reporting_to_matrices","title":"Convert structural reporting data.table to nested list of matrices — .structural_reporting_to_matrices","text":"Takes structural reporting data.table converts nested list structure required .convert_structural_to_arrays(). involves creating delay columns splitting group date.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-structural_reporting_to_matrices.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert structural reporting data.table to nested list of matrices — .structural_reporting_to_matrices","text":"","code":".structural_reporting_to_matrices(structural, pobs)"},{"path":"https://package.epinowcast.org/dev/reference/dot-structural_reporting_to_matrices.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert structural reporting data.table to nested list of matrices — .structural_reporting_to_matrices","text":"structural data.table data.frame columns .group, date, report_date, report. pobs preprocessed observation list enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-structural_reporting_to_matrices.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert structural reporting data.table to nested list of matrices — .structural_reporting_to_matrices","text":"nested list: list(groups) list(times) matrices (max_delay x max_delay). matrix contains 0s 1s indicating delays aggregate reporting delays.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-validate_check_max_delay_args.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate check_max_delay arguments — .validate_check_max_delay_args","title":"Validate check_max_delay arguments — .validate_check_max_delay_args","text":"Validate check_max_delay arguments","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-validate_check_max_delay_args.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate check_max_delay arguments — .validate_check_max_delay_args","text":"","code":".validate_check_max_delay_args(   max_delay,   cum_coverage,   maxdelay_quantile_outlier )"},{"path":"https://package.epinowcast.org/dev/reference/dot-validate_check_max_delay_args.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate check_max_delay arguments — .validate_check_max_delay_args","text":"max_delay Maximum delay cum_coverage Cumulative coverage threshold maxdelay_quantile_outlier Quantile outlier detection","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-validate_check_max_delay_args.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate check_max_delay arguments — .validate_check_max_delay_args","text":"Integer max_delay value","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-validate_structural_reporting.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate structural reporting data.table — .validate_structural_reporting","title":"Validate structural reporting data.table — .validate_structural_reporting","text":"Checks structural reporting data.table required columns correct structure conversion matrices.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-validate_structural_reporting.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate structural reporting data.table — .validate_structural_reporting","text":"","code":".validate_structural_reporting(structural)"},{"path":"https://package.epinowcast.org/dev/reference/dot-validate_structural_reporting.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate structural reporting data.table — .validate_structural_reporting","text":"structural data.table data.frame columns .group, date, report_date, report.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-validate_structural_reporting.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate structural reporting data.table — .validate_structural_reporting","text":"validated coerced data.table (invisible). Aborts error validation fails.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-validate_structural_reporting.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Validate structural reporting data.table — .validate_structural_reporting","text":"structural reporting matrix ensures reports can aggregate current earlier delays. example, report delay 5 can aggregate delays 1 5, delay 6 later. function validates report_date >= date ensure valid delays.","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-warn_insufficient_coverage_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Warn about insufficient data for coverage check — .warn_insufficient_coverage_data","title":"Warn about insufficient data for coverage check — .warn_insufficient_coverage_data","text":"Warn insufficient data coverage check","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-warn_insufficient_coverage_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Warn about insufficient data for coverage check — .warn_insufficient_coverage_data","text":"","code":".warn_insufficient_coverage_data(   latest_obs_count,   max_delay_obs_q,   timestep,   internal_timestep,   warn_internal )"},{"path":"https://package.epinowcast.org/dev/reference/dot-warn_insufficient_coverage_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Warn about insufficient data for coverage check — .warn_insufficient_coverage_data","text":"latest_obs_count Number observations filtered data max_delay_obs_q Quantile-based maximum delay timestep Timestep specification internal_timestep Internal timestep multiplier warn_internal Whether function called internally","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-warn_max_delay_exceeds_observed.html","id":null,"dir":"Reference","previous_headings":"","what":"Warn about max delay exceeding observed delay — .warn_max_delay_exceeds_observed","title":"Warn about max delay exceeding observed delay — .warn_max_delay_exceeds_observed","text":"Warn max delay exceeding observed delay","code":""},{"path":"https://package.epinowcast.org/dev/reference/dot-warn_max_delay_exceeds_observed.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Warn about max delay exceeding observed delay — .warn_max_delay_exceeds_observed","text":"","code":".warn_max_delay_exceeds_observed(   max_delay,   timestep,   daily_max_delay,   max_delay_obs,   internal_timestep )"},{"path":"https://package.epinowcast.org/dev/reference/dot-warn_max_delay_exceeds_observed.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Warn about max delay exceeding observed delay — .warn_max_delay_exceeds_observed","text":"max_delay Maximum delay timestep units timestep Timestep specification daily_max_delay Specified maximum delay daily units max_delay_obs Maximum observed delay daily units internal_timestep Internal timestep multiplier","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"Calculate cumulative reported cases incidence new reports","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"","code":"enw_add_cumulative(obs, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), new_confirm (incident observations reference report date). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"input data.frame new variable confirm.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate cumulative reported cases from incidence of new reports — enw_add_cumulative","text":"","code":"# Default reconstruct incidence dt <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] dt <- enw_add_incidence(dt) dt <- dt[, confirm := NULL] enw_add_cumulative(dt) #> Key: <reference_date, report_date> #>        reference_date location age_group report_date new_confirm delay confirm #>                <IDat>   <fctr>    <fctr>      <IDat>       <int> <int>   <int> #>     1:     2021-04-06       DE       00+  2021-04-06         149     0     149 #>     2:     2021-04-06       DE       00+  2021-04-07         140     1     289 #>     3:     2021-04-06       DE       00+  2021-04-08          61     2     350 #>     4:     2021-04-06       DE       00+  2021-04-09          52     3     402 #>     5:     2021-04-06       DE       00+  2021-04-10          36     4     438 #>    ---                                                                         #> 12911:     2021-10-18       DE       00+  2021-10-19          70     1     113 #> 12912:     2021-10-18       DE       00+  2021-10-20          29     2     142 #> 12913:     2021-10-19       DE       00+  2021-10-19         223     0     223 #> 12914:     2021-10-19       DE       00+  2021-10-20         164     1     387 #> 12915:     2021-10-20       DE       00+  2021-10-20         235     0     235  # Make use of maximum reported to calculate empirical daily reporting enw_add_cumulative(dt) #> Key: <reference_date, report_date> #>        reference_date location age_group report_date new_confirm delay confirm #>                <IDat>   <fctr>    <fctr>      <IDat>       <int> <int>   <int> #>     1:     2021-04-06       DE       00+  2021-04-06         149     0     149 #>     2:     2021-04-06       DE       00+  2021-04-07         140     1     289 #>     3:     2021-04-06       DE       00+  2021-04-08          61     2     350 #>     4:     2021-04-06       DE       00+  2021-04-09          52     3     402 #>     5:     2021-04-06       DE       00+  2021-04-10          36     4     438 #>    ---                                                                         #> 12911:     2021-10-18       DE       00+  2021-10-19          70     1     113 #> 12912:     2021-10-18       DE       00+  2021-10-20          29     2     142 #> 12913:     2021-10-19       DE       00+  2021-10-19         223     0     223 #> 12914:     2021-10-19       DE       00+  2021-10-20         164     1     387 #> 12915:     2021-10-20       DE       00+  2021-10-20         235     0     235"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative_membership.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"function adds cumulative membership effect data frame. useful specifying models random walks (using rw()) features can used design matrix appropriate formula. Supports grouping via optional .group column. Note cumulative membership indexed start zero (.e. first observation assigned cumulative membership zero).","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative_membership.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"","code":"enw_add_cumulative_membership(metaobs, feature, copy = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative_membership.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"metaobs data.frame column named feature contains numeric vector values. feature name column metaobs contains numeric vector values. copy metaobs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative_membership.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"data.frame new columns cfeature$ contain cumulative membership effect value feature. example original feature week (numeric entries 1, 2, 3) new columns cweek1, cweek2, cweek3.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_add_cumulative_membership.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a cumulative membership effect to a data.frame — enw_add_cumulative_membership","text":"","code":"metaobs <- data.frame(week = 1:2) enw_add_cumulative_membership(metaobs, \"week\") #>     week .group cweek2 #>    <int>  <num>  <num> #> 1:     1      1      0 #> 2:     2      1      1  metaobs <- data.frame(week = 1:3, .group = c(1,1,2)) enw_add_cumulative_membership(metaobs, \"week\") #>     week .group cweek2 cweek3 #>    <int>  <num>  <num>  <num> #> 1:     1      1      0      0 #> 2:     2      1      1      0 #> 3:     3      2      0      1"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a delay variable to the observations — enw_add_delay","title":"Add a delay variable to the observations — enw_add_delay","text":"helper function takes data.frame data.table observations adds delay (numeric, days) reference_date report_date observation.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a delay variable to the observations — enw_add_delay","text":"","code":"enw_add_delay(obs, timestep = \"day\", copy = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a delay variable to the observations — enw_add_delay","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used. copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add a delay variable to the observations — enw_add_delay","text":"data.table observations new column delay.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_add_delay.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a delay variable to the observations — enw_add_delay","text":"","code":"obs <- data.frame(report_date = as.Date(\"2021-01-01\") + -2:0) obs$reference_date <- as.Date(\"2021-01-01\") enw_add_delay(obs) #>    report_date reference_date delay #>         <IDat>         <IDat> <num> #> 1:  2020-12-30     2021-01-01    -2 #> 2:  2020-12-31     2021-01-01    -1 #> 3:  2021-01-01     2021-01-01     0"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_incidence.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"Calculate incidence new reports cumulative reports","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_incidence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"","code":"enw_add_incidence(obs, set_negatives_to_zero = TRUE, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_incidence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). set_negatives_to_zero Logical, defaults TRUE. negative counts (calculated incidence observations) set zero? Currently downstream modelling support negative counts setting must TRUE intending use epinowcast(). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_incidence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"input data.frame new variable new_confirm. max_confirm present data.frame, proportion reported day (prop_reported) also added.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_add_incidence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate incidence of new reports from cumulative reports — enw_add_incidence","text":"","code":"# Default reconstruct incidence dt <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] enw_add_incidence(dt) #> Key: <reference_date, report_date> #>        reference_date location age_group confirm report_date new_confirm delay #>                <IDat>   <fctr>    <fctr>   <int>      <IDat>       <int> <int> #>     1:     2021-04-06       DE       00+     149  2021-04-06         149     0 #>     2:     2021-04-06       DE       00+     289  2021-04-07         140     1 #>     3:     2021-04-06       DE       00+     350  2021-04-08          61     2 #>     4:     2021-04-06       DE       00+     402  2021-04-09          52     3 #>     5:     2021-04-06       DE       00+     438  2021-04-10          36     4 #>    ---                                                                         #> 12911:     2021-10-18       DE       00+     113  2021-10-19          70     1 #> 12912:     2021-10-18       DE       00+     142  2021-10-20          29     2 #> 12913:     2021-10-19       DE       00+     223  2021-10-19         223     0 #> 12914:     2021-10-19       DE       00+     387  2021-10-20         164     1 #> 12915:     2021-10-20       DE       00+     235  2021-10-20         235     0  # Make use of maximum reported to calculate empirical daily reporting dt <- enw_add_max_reported(dt) enw_add_incidence(dt) #> Key: <reference_date, report_date> #>        reference_date report_date .group max_confirm location age_group confirm #>                <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     1:     2021-04-06  2021-04-06      1         708       DE       00+     149 #>     2:     2021-04-06  2021-04-07      1         708       DE       00+     289 #>     3:     2021-04-06  2021-04-08      1         708       DE       00+     350 #>     4:     2021-04-06  2021-04-09      1         708       DE       00+     402 #>     5:     2021-04-06  2021-04-10      1         708       DE       00+     438 #>    ---                                                                          #> 12911:     2021-10-18  2021-10-19      1         142       DE       00+     113 #> 12912:     2021-10-18  2021-10-20      1         142       DE       00+     142 #> 12913:     2021-10-19  2021-10-19      1         387       DE       00+     223 #> 12914:     2021-10-19  2021-10-20      1         387       DE       00+     387 #> 12915:     2021-10-20  2021-10-20      1         235       DE       00+     235 #>        cum_prop_reported new_confirm delay prop_reported #>                    <num>       <int> <int>         <num> #>     1:         0.2104520         149     0    0.21045198 #>     2:         0.4081921         140     1    0.19774011 #>     3:         0.4943503          61     2    0.08615819 #>     4:         0.5677966          52     3    0.07344633 #>     5:         0.6186441          36     4    0.05084746 #>    ---                                                   #> 12911:         0.7957746          70     1    0.49295775 #> 12912:         1.0000000          29     2    0.20422535 #> 12913:         0.5762274         223     0    0.57622739 #> 12914:         1.0000000         164     1    0.42377261 #> 12915:         1.0000000         235     0    1.00000000"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_latest_obs_to_nowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"Add latest observations nowcast output. useful plotting nowcast latest observations.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_latest_obs_to_nowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"","code":"enw_add_latest_obs_to_nowcast(nowcast, obs)"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_latest_obs_to_nowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"nowcast data.frame nowcast output enw_nowcast_summary(). obs observation data.frame containing reference_date columns length number rows posterior date observation date. used align posterior observations. easiest source data output latest output enw_preprocess_data() enw_latest_data().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_latest_obs_to_nowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"data.frame nowcast output latest observations added.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_add_latest_obs_to_nowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add latest observations to nowcast output — enw_add_latest_obs_to_nowcast","text":"","code":"fit <- enw_example(\"nowcast\") obs <- enw_example(\"obs\") nowcast <- summary(fit, type = \"nowcast\") enw_add_latest_obs_to_nowcast(nowcast, obs) #> Key: <reference_date, .group> #>     reference_date .group latest_confirm confirm report_date max_confirm #>             <IDat>  <num>          <int>   <int>      <IDat>       <int> #>  1:     2021-08-03      1            156     149  2021-08-22         149 #>  2:     2021-08-04      1            183     166  2021-08-22         166 #>  3:     2021-08-05      1            147     133  2021-08-22         133 #>  4:     2021-08-06      1            155     137  2021-08-22         137 #>  5:     2021-08-07      1            159     139  2021-08-22         139 #>  6:     2021-08-08      1            119      97  2021-08-22          97 #>  7:     2021-08-09      1             65      58  2021-08-22          58 #>  8:     2021-08-10      1            204     175  2021-08-22         175 #>  9:     2021-08-11      1            275     233  2021-08-22         233 #> 10:     2021-08-12      1            273     237  2021-08-22         237 #> 11:     2021-08-13      1            270     204  2021-08-22         204 #> 12:     2021-08-14      1            262     189  2021-08-22         189 #> 13:     2021-08-15      1            192     125  2021-08-22         125 #> 14:     2021-08-16      1            140      98  2021-08-22          98 #> 15:     2021-08-17      1            323     242  2021-08-22         242 #> 16:     2021-08-18      1            409     223  2021-08-22         223 #> 17:     2021-08-19      1            370     202  2021-08-22         202 #> 18:     2021-08-20      1            361     171  2021-08-22         171 #> 19:     2021-08-21      1            339     112  2021-08-22         112 #> 20:     2021-08-22      1            258      45  2021-08-22          45 #>     reference_date .group latest_confirm confirm report_date max_confirm #>             <IDat>  <num>          <int>   <int>      <IDat>       <int> #>     location age_group cum_prop_reported delay prop_reported    mean median #>       <fctr>    <fctr>             <num> <num>         <num>   <num>  <num> #>  1:       DE       00+                 1    19   0.000000000 149.000  149.0 #>  2:       DE       00+                 1    18   0.000000000 167.480  167.0 #>  3:       DE       00+                 1    17   0.000000000 135.797  136.0 #>  4:       DE       00+                 1    16   0.000000000 141.272  141.0 #>  5:       DE       00+                 1    15   0.007194245 145.764  145.0 #>  6:       DE       00+                 1    14   0.000000000 103.614  103.0 #>  7:       DE       00+                 1    13   0.000000000  62.838   63.0 #>  8:       DE       00+                 1    12   0.000000000 185.149  185.0 #>  9:       DE       00+                 1    11   0.000000000 256.191  256.0 #> 10:       DE       00+                 1    10   0.004219409 267.189  266.0 #> 11:       DE       00+                 1     9   0.000000000 236.218  235.0 #> 12:       DE       00+                 1     8   0.015873016 230.463  230.0 #> 13:       DE       00+                 1     7   0.040000000 165.184  165.0 #> 14:       DE       00+                 1     6   0.010204082 129.535  129.0 #> 15:       DE       00+                 1     5   0.012396694 293.236  292.0 #> 16:       DE       00+                 1     4   0.017937220 293.392  292.0 #> 17:       DE       00+                 1     3   0.019801980 291.537  290.0 #> 18:       DE       00+                 1     2   0.070175439 295.258  292.5 #> 19:       DE       00+                 1     1   0.383928571 310.440  304.0 #> 20:       DE       00+                 1     0   1.000000000 384.142  368.0 #>     location age_group cum_prop_reported delay prop_reported    mean median #>       <fctr>    <fctr>             <num> <num>         <num>   <num>  <num> #>             sd     mad     q5   q20    q35   q50   q65   q80    q95      rhat #>          <num>   <num>  <num> <num>  <num> <num> <num> <num>  <num>     <num> #>  1:   0.000000  0.0000 149.00   149 149.00 149.0   149 149.0 149.00        NA #>  2:   1.403414  1.4826 166.00   166 167.00 167.0   168 168.0 170.00 1.0011717 #>  3:   1.858291  1.4826 133.00   134 135.00 136.0   136 137.0 139.00 1.0023790 #>  4:   2.414507  2.9652 138.00   139 140.00 141.0   142 143.0 146.00 0.9997357 #>  5:   3.070461  2.9652 141.00   143 144.00 145.0   147 148.0 151.00 1.0009523 #>  6:   2.892987  2.9652  99.00   101 102.00 103.0   105 106.0 109.00 1.0056338 #>  7:   2.595475  2.9652  59.00    61  62.00  63.0    64  65.0  68.00 0.9989559 #>  8:   3.655155  2.9652 180.00   182 183.00 185.0   186 188.0 192.00 1.0008924 #>  9:   7.084540  7.4130 246.00   250 253.00 256.0   258 262.0 269.00 1.0019152 #> 10:   8.269563  7.4130 255.00   260 264.00 266.0   270 274.0 282.00 0.9991677 #> 11:   8.635453  8.8956 224.00   229 232.00 235.0   239 243.0 252.00 1.0025829 #> 12:  10.395995 10.3782 215.00   222 226.00 230.0   234 239.0 249.00 1.0004028 #> 13:   9.660925  8.8956 150.00   157 161.00 165.0   168 173.0 182.00 1.0063929 #> 14:   8.499354  8.8956 117.00   122 125.00 129.0   132 136.0 144.00 1.0015131 #> 15:  11.922603 11.8608 276.00   283 288.00 292.0   297 302.0 315.00 1.0036606 #> 16:  15.981231 14.8260 269.00   280 286.00 292.0   299 306.0 321.00 0.9996327 #> 17:  20.271200 20.7564 262.00   274 282.00 290.0   298 308.0 327.05 0.9994497 #> 18:  29.356997 27.4281 252.00   271 282.00 292.5   304 317.0 350.00 0.9986679 #> 19:  50.020660 47.4432 238.95   269 287.00 304.0   324 349.0 396.10 0.9996761 #> 20: 115.713601 97.8516 235.00   288 329.65 368.0   406 462.2 602.00 1.0026839 #>             sd     mad     q5   q20    q35   q50   q65   q80    q95      rhat #>          <num>   <num>  <num> <num>  <num> <num> <num> <num>  <num>     <num> #>      ess_bulk  ess_tail #>         <num>     <num> #>  1:        NA        NA #>  2: 1032.9494 1005.1434 #>  3:  927.8688  880.2070 #>  4: 1024.0598  943.1194 #>  5: 1192.6161  903.2221 #>  6: 1020.5322 1049.4998 #>  7: 1026.9068  976.3448 #>  8:  874.1838  752.9787 #>  9:  840.3245  950.3159 #> 10: 1046.7181  969.9759 #> 11:  884.3839  943.4474 #> 12:  857.4908  808.3249 #> 13:  942.5139  877.8069 #> 14: 1034.7024  934.5488 #> 15:  886.4727  919.5960 #> 16: 1073.2110 1004.6946 #> 17: 1455.4791 1067.2793 #> 18: 1075.3975  898.2947 #> 19: 1254.5799  923.0215 #> 20: 1616.8851  595.4893 #>      ess_bulk  ess_tail #>         <num>     <num>"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_max_reported.html","id":null,"dir":"Reference","previous_headings":"","what":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"helper function adds maximum (sense latest observed) number reported cases reference_date computes proportion already reported cases combination reference_date report_date.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_max_reported.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"","code":"enw_add_max_reported(obs, copy = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_max_reported.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_max_reported.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"data.table new columns max_confirm cum_prop_reported. max_confirm maximum number cases reported certain reference_date. cum_prop_reported proportion cases certain reference_date reported given report_day, relative cases far observed reference_date.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_add_max_reported.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add the maximum number of reported cases for each reference_date — enw_add_max_reported","text":"","code":"obs <- data.frame(report_date = as.Date(\"2021-01-01\") + 0:2) obs$reference_date <- as.Date(\"2021-01-01\") obs$confirm <- 1:3 enw_add_max_reported(obs) #>    reference_date report_date .group max_confirm confirm cum_prop_reported #>            <IDat>      <IDat>  <num>       <int>   <int>             <num> #> 1:     2021-01-01  2021-01-01      1           3       1         0.3333333 #> 2:     2021-01-01  2021-01-02      1           3       2         0.6666667 #> 3:     2021-01-01  2021-01-03      1           3       3         1.0000000"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_metaobs_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Add common metadata variables — enw_add_metaobs_features","title":"Add common metadata variables — enw_add_metaobs_features","text":"already present, annotates time series data metadata commonly used models: day week, days, weeks, months since start time series.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_metaobs_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add common metadata variables — enw_add_metaobs_features","text":"","code":"enw_add_metaobs_features(   metaobs,   holidays = NULL,   holidays_to = \"Sunday\",   datecol = \"date\" )"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_metaobs_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add common metadata variables — enw_add_metaobs_features","text":"metaobs Raw data, coercible via data.table::.data.table(). Coerced object must Dates column corresponding datecol name. holidays (potentially empty) vector dates (input coercible ; see coerce_date()). day_of_week column set holidays_to dates. holidays_to character string assign holidays, holidays argument non-empty. Replaces day_of_week column value datecol column metaobs corresponding pertinent dates.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_metaobs_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add common metadata variables — enw_add_metaobs_features","text":"copy metaobs input, additional columns: day_of_week, factor values output weekdays() possibly holiday_to distinct weekdays values day, numeric, 0 based start time series week, numeric, 0 based start time series month, numeric, 0 based start time series","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_metaobs_features.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Add common metadata variables — enw_add_metaobs_features","text":"Effects models often need include covariates time-based features, day week (e.g. reflect different care-seeking /reporting behaviour). function called within enw_preprocess_data() systematically annotate metaobs commonly used metadata, already present. However, can also used directly data.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_add_metaobs_features.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add common metadata variables — enw_add_metaobs_features","text":"","code":"# make some example date nat_germany_hosp <- subset(   germany_covid19_hosp,   location == \"DE\" & age_group == \"80+\" )[1:40]  basemeta <- enw_add_metaobs_features(   nat_germany_hosp,   datecol = \"report_date\" ) basemeta #> Key: <report_date> #>     reference_date location age_group confirm report_date day_of_week   day #>             <IDat>   <fctr>    <fctr>   <int>      <Date>      <fctr> <num> #>  1:     2021-04-06       DE       80+      35  2021-04-06     Tuesday     0 #>  2:     2021-04-07       DE       80+      81  2021-04-07   Wednesday     1 #>  3:     2021-04-08       DE       80+      85  2021-04-08    Thursday     2 #>  4:     2021-04-09       DE       80+      62  2021-04-09      Friday     3 #>  5:     2021-04-10       DE       80+      45  2021-04-10    Saturday     4 #>  6:     2021-04-11       DE       80+      23  2021-04-11      Sunday     5 #>  7:     2021-04-12       DE       80+      33  2021-04-12      Monday     6 #>  8:     2021-04-13       DE       80+      66  2021-04-13     Tuesday     7 #>  9:     2021-04-14       DE       80+      50  2021-04-14   Wednesday     8 #> 10:     2021-04-15       DE       80+      66  2021-04-15    Thursday     9 #> 11:     2021-04-16       DE       80+      67  2021-04-16      Friday    10 #> 12:     2021-04-17       DE       80+      50  2021-04-17    Saturday    11 #> 13:     2021-04-18       DE       80+      33  2021-04-18      Sunday    12 #> 14:     2021-04-19       DE       80+      25  2021-04-19      Monday    13 #> 15:     2021-04-20       DE       80+      53  2021-04-20     Tuesday    14 #> 16:     2021-04-21       DE       80+      68  2021-04-21   Wednesday    15 #> 17:     2021-04-22       DE       80+      56  2021-04-22    Thursday    16 #> 18:     2021-04-23       DE       80+      61  2021-04-23      Friday    17 #> 19:     2021-04-24       DE       80+      45  2021-04-24    Saturday    18 #> 20:     2021-04-25       DE       80+      35  2021-04-25      Sunday    19 #> 21:     2021-04-26       DE       80+      17  2021-04-26      Monday    20 #> 22:     2021-04-27       DE       80+      50  2021-04-27     Tuesday    21 #> 23:     2021-04-28       DE       80+      56  2021-04-28   Wednesday    22 #> 24:     2021-04-29       DE       80+      44  2021-04-29    Thursday    23 #> 25:     2021-04-30       DE       80+      54  2021-04-30      Friday    24 #> 26:     2021-05-01       DE       80+      48  2021-05-01    Saturday    25 #> 27:     2021-05-02       DE       80+      27  2021-05-02      Sunday    26 #> 28:     2021-05-03       DE       80+      26  2021-05-03      Monday    27 #> 29:     2021-05-04       DE       80+      55  2021-05-04     Tuesday    28 #> 30:     2021-05-05       DE       80+      59  2021-05-05   Wednesday    29 #> 31:     2021-05-06       DE       80+      58  2021-05-06    Thursday    30 #> 32:     2021-05-07       DE       80+      48  2021-05-07      Friday    31 #> 33:     2021-05-08       DE       80+      34  2021-05-08    Saturday    32 #> 34:     2021-05-09       DE       80+      10  2021-05-09      Sunday    33 #> 35:     2021-05-10       DE       80+      24  2021-05-10      Monday    34 #> 36:     2021-05-11       DE       80+      49  2021-05-11     Tuesday    35 #> 37:     2021-05-12       DE       80+      42  2021-05-12   Wednesday    36 #> 38:     2021-05-13       DE       80+      39  2021-05-13    Thursday    37 #> 39:     2021-05-14       DE       80+      15  2021-05-14      Friday    38 #> 40:     2021-05-15       DE       80+      23  2021-05-15    Saturday    39 #>     reference_date location age_group confirm report_date day_of_week   day #>             <IDat>   <fctr>    <fctr>   <int>      <Date>      <fctr> <num> #>      week month #>     <num> <num> #>  1:     0     0 #>  2:     0     0 #>  3:     0     0 #>  4:     0     0 #>  5:     0     0 #>  6:     0     0 #>  7:     0     0 #>  8:     1     0 #>  9:     1     0 #> 10:     1     0 #> 11:     1     0 #> 12:     1     0 #> 13:     1     0 #> 14:     1     0 #> 15:     2     0 #> 16:     2     0 #> 17:     2     0 #> 18:     2     0 #> 19:     2     0 #> 20:     2     0 #> 21:     2     0 #> 22:     3     0 #> 23:     3     0 #> 24:     3     0 #> 25:     3     0 #> 26:     3     1 #> 27:     3     1 #> 28:     3     1 #> 29:     4     1 #> 30:     4     1 #> 31:     4     1 #> 32:     4     1 #> 33:     4     1 #> 34:     4     1 #> 35:     4     1 #> 36:     5     1 #> 37:     5     1 #> 38:     5     1 #> 39:     5     1 #> 40:     5     1 #>      week month #>     <num> <num>  # with holidays - n.b.: holidays not found are silently ignored holidaymeta <- enw_add_metaobs_features(   nat_germany_hosp,   datecol = \"report_date\",   holidays = c(     \"2021-04-04\", \"2021-04-05\",     \"2021-05-01\", \"2021-05-13\",     \"2021-05-24\"   ),   holidays_to = \"Holiday\" ) holidaymeta #> Key: <report_date> #>     reference_date location age_group confirm report_date day_of_week   day #>             <IDat>   <fctr>    <fctr>   <int>      <Date>      <fctr> <num> #>  1:     2021-04-06       DE       80+      35  2021-04-06     Tuesday     0 #>  2:     2021-04-07       DE       80+      81  2021-04-07   Wednesday     1 #>  3:     2021-04-08       DE       80+      85  2021-04-08    Thursday     2 #>  4:     2021-04-09       DE       80+      62  2021-04-09      Friday     3 #>  5:     2021-04-10       DE       80+      45  2021-04-10    Saturday     4 #>  6:     2021-04-11       DE       80+      23  2021-04-11      Sunday     5 #>  7:     2021-04-12       DE       80+      33  2021-04-12      Monday     6 #>  8:     2021-04-13       DE       80+      66  2021-04-13     Tuesday     7 #>  9:     2021-04-14       DE       80+      50  2021-04-14   Wednesday     8 #> 10:     2021-04-15       DE       80+      66  2021-04-15    Thursday     9 #> 11:     2021-04-16       DE       80+      67  2021-04-16      Friday    10 #> 12:     2021-04-17       DE       80+      50  2021-04-17    Saturday    11 #> 13:     2021-04-18       DE       80+      33  2021-04-18      Sunday    12 #> 14:     2021-04-19       DE       80+      25  2021-04-19      Monday    13 #> 15:     2021-04-20       DE       80+      53  2021-04-20     Tuesday    14 #> 16:     2021-04-21       DE       80+      68  2021-04-21   Wednesday    15 #> 17:     2021-04-22       DE       80+      56  2021-04-22    Thursday    16 #> 18:     2021-04-23       DE       80+      61  2021-04-23      Friday    17 #> 19:     2021-04-24       DE       80+      45  2021-04-24    Saturday    18 #> 20:     2021-04-25       DE       80+      35  2021-04-25      Sunday    19 #> 21:     2021-04-26       DE       80+      17  2021-04-26      Monday    20 #> 22:     2021-04-27       DE       80+      50  2021-04-27     Tuesday    21 #> 23:     2021-04-28       DE       80+      56  2021-04-28   Wednesday    22 #> 24:     2021-04-29       DE       80+      44  2021-04-29    Thursday    23 #> 25:     2021-04-30       DE       80+      54  2021-04-30      Friday    24 #> 26:     2021-05-01       DE       80+      48  2021-05-01     Holiday    25 #> 27:     2021-05-02       DE       80+      27  2021-05-02      Sunday    26 #> 28:     2021-05-03       DE       80+      26  2021-05-03      Monday    27 #> 29:     2021-05-04       DE       80+      55  2021-05-04     Tuesday    28 #> 30:     2021-05-05       DE       80+      59  2021-05-05   Wednesday    29 #> 31:     2021-05-06       DE       80+      58  2021-05-06    Thursday    30 #> 32:     2021-05-07       DE       80+      48  2021-05-07      Friday    31 #> 33:     2021-05-08       DE       80+      34  2021-05-08    Saturday    32 #> 34:     2021-05-09       DE       80+      10  2021-05-09      Sunday    33 #> 35:     2021-05-10       DE       80+      24  2021-05-10      Monday    34 #> 36:     2021-05-11       DE       80+      49  2021-05-11     Tuesday    35 #> 37:     2021-05-12       DE       80+      42  2021-05-12   Wednesday    36 #> 38:     2021-05-13       DE       80+      39  2021-05-13     Holiday    37 #> 39:     2021-05-14       DE       80+      15  2021-05-14      Friday    38 #> 40:     2021-05-15       DE       80+      23  2021-05-15    Saturday    39 #>     reference_date location age_group confirm report_date day_of_week   day #>             <IDat>   <fctr>    <fctr>   <int>      <Date>      <fctr> <num> #>      week month #>     <num> <num> #>  1:     0     0 #>  2:     0     0 #>  3:     0     0 #>  4:     0     0 #>  5:     0     0 #>  6:     0     0 #>  7:     0     0 #>  8:     1     0 #>  9:     1     0 #> 10:     1     0 #> 11:     1     0 #> 12:     1     0 #> 13:     1     0 #> 14:     1     0 #> 15:     2     0 #> 16:     2     0 #> 17:     2     0 #> 18:     2     0 #> 19:     2     0 #> 20:     2     0 #> 21:     2     0 #> 22:     3     0 #> 23:     3     0 #> 24:     3     0 #> 25:     3     0 #> 26:     3     1 #> 27:     3     1 #> 28:     3     1 #> 29:     4     1 #> 30:     4     1 #> 31:     4     1 #> 32:     4     1 #> 33:     4     1 #> 34:     4     1 #> 35:     4     1 #> 36:     5     1 #> 37:     5     1 #> 38:     5     1 #> 39:     5     1 #> 40:     5     1 #>      week month #>     <num> <num> subset(holidaymeta, day_of_week == \"Holiday\") #> Key: <report_date> #>    reference_date location age_group confirm report_date day_of_week   day #>            <IDat>   <fctr>    <fctr>   <int>      <Date>      <fctr> <num> #> 1:     2021-05-01       DE       80+      48  2021-05-01     Holiday    25 #> 2:     2021-05-13       DE       80+      39  2021-05-13     Holiday    37 #>     week month #>    <num> <num> #> 1:     3     1 #> 2:     5     1"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_pooling_effect.html","id":null,"dir":"Reference","previous_headings":"","what":"Add a pooling effect to model design metadata — enw_add_pooling_effect","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"function adds pooling effect metadata returned enw_effects_metadata(). updating fixed column 0 effects match string argument adding new column var_name 1 effects match string argument 0 otherwise.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_pooling_effect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"","code":"enw_add_pooling_effect(effects, var_name = \"sd\", finder_fn = startsWith, ...)"},{"path":"https://package.epinowcast.org/dev/reference/enw_add_pooling_effect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"effects data.table following columns: effects: name effect fixed: logical indicating whether effect fixed (1) random (0). output enw_effects_metadata(). var_name name new column added effects data.table. column 1 effects match string 0 otherwise. Defaults 'sd'. finder_fn function used find effects match string. Defaults startsWith(). can function takes character first argument (effects$effects column) arguments ... returns logical vector indicating whether effects matched. ... Additional arguments finder_fn. E.g. finder_fn = startsWith default, prefix = \"somestring\".","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_add_pooling_effect.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"data.table following columns: effects: name effect fixed: logical indicating whether effect fixed (1) random (0). Argument supplied var_name: logical indicating whether effect pooled (1) (0).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_add_pooling_effect.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add a pooling effect to model design metadata — enw_add_pooling_effect","text":"","code":"data <- data.frame(a = 1:3, b = as.character(1:3), c = c(1,1,2)) design <- enw_design(a ~ b + c, data)$design effects <- enw_effects_metadata(design) enw_add_pooling_effect(effects, prefix = \"b\") #>    effects fixed    sd #>     <char> <num> <num> #> 1:      b2     0     1 #> 2:      b3     0     1 #> 3:       c     1     0"},{"path":"https://package.epinowcast.org/dev/reference/enw_aggregate_cumulative.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"function aggregates observations specified timestep, ensuring alignment day week report reference dates.  useful aggregating data weekly timestep, example may desirable testing using weekly timestep concerned runtime. Note start timestep determined min_date + single timestep (.e. first timestep \"2022-10-23\" minimum reference date \"2022-10-16\"). Observations report dates form complete timestep dropped aggregated output.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_aggregate_cumulative.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"","code":"enw_aggregate_cumulative(   obs,   timestep = \"day\",   by = NULL,   min_reference_date = min(obs$reference_date, na.rm = TRUE),   copy = TRUE )"},{"path":"https://package.epinowcast.org/dev/reference/enw_aggregate_cumulative.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"obs object coercible data.table (data.frame) must new_confirm numeric column, report_date reference_date date columns. input must timestep day complete. See enw_complete_dates() information. NA values present confirm column set zero aggregation may desirable missingness meaningful. aggregation, dates completed last reference date ensure reference dates required report dates specified timestep. timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used. character vector variables also aggregate (.e. well using reference_date report_date). supplied function aggregate just reference_date report_date. min_reference_date minimum reference date start aggregation . Note timestep start minimum reference date + single time step (.e. first timestep \"2022-10-23\" minimum reference date \"2022-10-16\"). default minimum reference date obs object. sensible values minimum report date obs object + 1 day reporting already weekly wish ensure timestep output matches reporting timestep. copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_aggregate_cumulative.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"data.table aggregated observations.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_aggregate_cumulative.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Aggregate observations over a given timestep for both report and reference dates. — enw_aggregate_cumulative","text":"","code":"nat_hosp <- germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] enw_aggregate_cumulative(nat_hosp, timestep = \"week\") #> Key: <reference_date, report_date> #>      report_date reference_date location age_group confirm new_confirm delay #>           <IDat>         <IDat>   <fctr>    <fctr>   <int>       <int> <int> #>   1:  2021-04-12           <NA>     <NA>      <NA>       0           0     0 #>   2:  2021-04-19           <NA>     <NA>      <NA>       0           0     1 #>   3:  2021-04-26           <NA>     <NA>      <NA>       0           0     2 #>   4:  2021-05-03           <NA>     <NA>      <NA>       0           0     3 #>   5:  2021-05-10           <NA>     <NA>      <NA>       0           0     4 #>  ---                                                                         #> 430:  2021-10-11     2021-10-04       DE       00+    2091         799     1 #> 431:  2021-10-18     2021-10-04       DE       00+    2346         255     2 #> 432:  2021-10-11     2021-10-11       DE       00+    1312        1312     0 #> 433:  2021-10-18     2021-10-11       DE       00+    2163         851     1 #> 434:  2021-10-18     2021-10-18       DE       00+    1597        1597     0"},{"path":"https://package.epinowcast.org/dev/reference/enw_assign_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Assign a group to each row of a data.table — enw_assign_group","title":"Assign a group to each row of a data.table — enw_assign_group","text":"Assign group row data.table. specified, unique combination columns assigned unique group. specified, rows assigned group.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_assign_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assign a group to each row of a data.table — enw_assign_group","text":"","code":"enw_assign_group(obs, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_assign_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assign a group to each row of a data.table — enw_assign_group","text":"obs data.table data.frame without .group column. character vector column names group . Defaults empty vector. copy logical; make copy (default) obs modify place?","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_assign_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assign a group to each row of a data.table — enw_assign_group","text":"data.table .group column added ordered .group existing key obs.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_assign_group.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Assign a group to each row of a data.table — enw_assign_group","text":"","code":"obs <- data.frame(x = 1:3, y = 1:3) enw_assign_group(obs) #> Key: <.group> #>        x     y .group #>    <int> <int>  <num> #> 1:     1     1      1 #> 2:     2     2      1 #> 3:     3     3      1 enw_assign_group(obs, by = \"x\") #> Key: <.group> #>        x     y .group #>    <int> <int>  <int> #> 1:     1     1      1 #> 2:     2     2      2 #> 3:     3     3      3"},{"path":"https://package.epinowcast.org/dev/reference/enw_complete_dates.html","id":null,"dir":"Reference","previous_headings":"","what":"Complete missing reference and report dates — enw_complete_dates","title":"Complete missing reference and report dates — enw_complete_dates","text":"Ensures reference report dates present groups based maximum minimum dates found data. function may use users preprocessing data. general features may consider using grouping variables covariates need included variable.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_complete_dates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Complete missing reference and report dates — enw_complete_dates","text":"","code":"enw_complete_dates(   obs,   by = NULL,   max_delay,   min_date = min(obs$reference_date, na.rm = TRUE),   max_date = max(obs$report_date, na.rm = TRUE),   timestep = \"day\",   missing_reference = TRUE,   completion_beyond_max_report = FALSE,   flag_observation = FALSE )"},{"path":"https://package.epinowcast.org/dev/reference/enw_complete_dates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Complete missing reference and report dates — enw_complete_dates","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling max_delay maximum delay model delay distribution, specified units timestep (e.g., timestep = \"week\", max_delay = 3 means 3 weeks). specified maximum observed delay assumed true maximum delay model. Otherwise, integer greater equal 1 can specified. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Steps take determine maximum delay: Consider realistic relevant application. Check proportion observations reported (prop_reported) delay new_confirm output enw_preprocess_obs. Use check_max_delay() check coverage candidate max_delay. doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 intervals (.e. max_delay 1 corresponds delay). min_date minimum date include data. Defaults minimum reference date found data. max_date maximum date include data. Defaults maximum report date found data. timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used. missing_reference Logical, entries cases missing reference date completed well?, Default: TRUE completion_beyond_max_report Logical, entries completed beyond maximum date found data? Default: FALSE flag_observation Logical, observations imputed missing flagged observed?. Makes use enw_flag_observed_observations() add .observed logical vector indicates observations imputed. vector can passed observation_indicator argument enw_obs() control observations used likelihood. Default: FALSE","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_complete_dates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Complete missing reference and report dates — enw_complete_dates","text":"data.table completed entries combinations reference dates, groups possible report dates.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_complete_dates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Complete missing reference and report dates — enw_complete_dates","text":"","code":"obs <- data.frame(   report_date = c(\"2021-10-01\", \"2021-10-03\"), reference_date = \"2021-10-01\",   confirm = 1 ) enw_complete_dates(obs) #> Key: <reference_date, report_date> #>    report_date reference_date confirm #>         <IDat>         <IDat>   <num> #> 1:  2021-10-01           <NA>       0 #> 2:  2021-10-02           <NA>       0 #> 3:  2021-10-03           <NA>       0 #> 4:  2021-10-01     2021-10-01       1 #> 5:  2021-10-02     2021-10-01       1 #> 6:  2021-10-03     2021-10-01       1 #> 7:  2021-10-02     2021-10-02       0 #> 8:  2021-10-03     2021-10-02       0 #> 9:  2021-10-03     2021-10-03       0  # Allow completion beyond the maximum date found in the data enw_complete_dates(obs, completion_beyond_max_report = TRUE, max_delay = 10) #> Key: <reference_date, report_date> #>     report_date reference_date confirm #>          <IDat>         <IDat>   <num> #>  1:  2021-10-01           <NA>       0 #>  2:  2021-10-02           <NA>       0 #>  3:  2021-10-03           <NA>       0 #>  4:  2021-10-01     2021-10-01       1 #>  5:  2021-10-02     2021-10-01       1 #>  6:  2021-10-03     2021-10-01       1 #>  7:  2021-10-04     2021-10-01       1 #>  8:  2021-10-05     2021-10-01       1 #>  9:  2021-10-06     2021-10-01       1 #> 10:  2021-10-07     2021-10-01       1 #> 11:  2021-10-08     2021-10-01       1 #> 12:  2021-10-09     2021-10-01       1 #> 13:  2021-10-10     2021-10-01       1 #> 14:  2021-10-11     2021-10-01       1 #> 15:  2021-10-02     2021-10-02       0 #> 16:  2021-10-03     2021-10-02       0 #> 17:  2021-10-04     2021-10-02       0 #> 18:  2021-10-05     2021-10-02       0 #> 19:  2021-10-06     2021-10-02       0 #> 20:  2021-10-07     2021-10-02       0 #> 21:  2021-10-08     2021-10-02       0 #> 22:  2021-10-09     2021-10-02       0 #> 23:  2021-10-10     2021-10-02       0 #> 24:  2021-10-11     2021-10-02       0 #> 25:  2021-10-12     2021-10-02       0 #> 26:  2021-10-03     2021-10-03       0 #> 27:  2021-10-04     2021-10-03       0 #> 28:  2021-10-05     2021-10-03       0 #> 29:  2021-10-06     2021-10-03       0 #> 30:  2021-10-07     2021-10-03       0 #> 31:  2021-10-08     2021-10-03       0 #> 32:  2021-10-09     2021-10-03       0 #> 33:  2021-10-10     2021-10-03       0 #> 34:  2021-10-11     2021-10-03       0 #> 35:  2021-10-12     2021-10-03       0 #> 36:  2021-10-13     2021-10-03       0 #>     report_date reference_date confirm #>          <IDat>         <IDat>   <num>"},{"path":"https://package.epinowcast.org/dev/reference/enw_construct_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Construct preprocessed data — enw_construct_data","title":"Construct preprocessed data — enw_construct_data","text":"function used internally enw_preprocess_data() combine various pieces processed observed data single object. exposed user order allow modular data preprocessing though currently recommended. See documentation code enw_preprocess_data() expected inputs.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_construct_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Construct preprocessed data — enw_construct_data","text":"","code":"enw_construct_data(   obs,   new_confirm,   latest,   missing_reference,   reporting_triangle,   metareport,   metareference,   metadelay,   max_delay,   timestep,   by )"},{"path":"https://package.epinowcast.org/dev/reference/enw_construct_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Construct preprocessed data — enw_construct_data","text":"obs Observations addition empirical reporting proportions restricted specified maximum delay. new_confirm Incidence notifications reference report date. Empirical reporting distributions also added. latest latest available observations. missing_reference data.frame reported observations missing reference date. reporting_triangle Incident observations report reference date standard reporting triangle matrix format. metareport Metadata report dates. metareference Metadata reference dates derived observations. metadelay Metadata reporting delays produced using enw_metadata_delay(). max_delay maximum delay model delay distribution, specified units timestep (e.g., timestep = \"week\", max_delay = 3 means 3 weeks). specified maximum observed delay assumed true maximum delay model. Otherwise, integer greater equal 1 can specified. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Steps take determine maximum delay: Consider realistic relevant application. Check proportion observations reported (prop_reported) delay new_confirm output enw_preprocess_obs. Use check_max_delay() check coverage candidate max_delay. doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 intervals (.e. max_delay 1 corresponds delay). timestep timestep used process model (.e. reference date model). can string (\"day\", \"week\", \"month\") numeric whole number representing number days. data timestep may wish make use enw_aggregate_cumulative() aggregate data desired timestep. character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_construct_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Construct preprocessed data — enw_construct_data","text":"data.table containing processed observations series nested data.frames well variables containing metadata. : obs: (observations addition empirical reporting proportions restricted specified maximum delay). new_confirm: Incidence notifications reference report date. Empirical reporting distributions also added. latest: latest available observations. missing_reference: Observations missing reference dates. reporting_triangle: Incident observations report reference date standard reporting triangle matrix format. metareference: Metadata reference dates derived observations. metrareport: Metadata report dates. metadelay: Metadata reporting delays produced using enw_metadata_delay(). max_delay: Maximum delay modelled epinowcast. time: Numeric, number timepoints data. snapshots: Numeric, number available data snapshots use nowcasting. groups: Numeric, Number groups/strata supplied observations (set using ). max_date: maximum available report date.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_construct_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Construct preprocessed data — enw_construct_data","text":"","code":"pobs <- enw_example(\"preprocessed\") enw_construct_data(   obs = pobs$obs[[1]],   new_confirm = pobs$new_confirm[[1]],   latest = pobs$latest[[1]],   missing_reference = pobs$missing_reference[[1]],   reporting_triangle = pobs$reporting_triangle[[1]],   metareport = pobs$metareport[[1]],   metareference = pobs$metareference[[1]],   metadelay = pobs$metadelay[[1]],   max_delay = pobs$max_delay,   timestep = pobs$timestep[[1]],   by = c() ) #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[650x9]> <data.table[610x11]> <data.table[40x10]> #>     missing_reference  reporting_triangle      metareference #>                <list>              <list>             <list> #> 1: <data.table[40x6]> <data.table[40x22]> <data.table[40x9]> #>             metareport          metadelay max_delay  time snapshots     by #>                 <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[59x12]> <data.table[20x5]>        20    40        40 [NULL] #>    groups   max_date timestep #>     <int>     <IDat>   <char> #> 1:      1 2021-08-22      day"},{"path":"https://package.epinowcast.org/dev/reference/enw_dayofweek_structural_reporting.html","id":null,"dir":"Reference","previous_headings":"","what":"Create day-of-week structural reporting pattern — enw_dayofweek_structural_reporting","title":"Create day-of-week structural reporting pattern — enw_dayofweek_structural_reporting","text":"Creates structural reporting pattern cases reporting occurs specific days week (e.g., Wednesday-reporting). convenience function builds enw_structural_reporting_metadata().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_dayofweek_structural_reporting.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create day-of-week structural reporting pattern — enw_dayofweek_structural_reporting","text":"","code":"enw_dayofweek_structural_reporting(pobs, day_of_week)"},{"path":"https://package.epinowcast.org/dev/reference/enw_dayofweek_structural_reporting.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create day-of-week structural reporting pattern — enw_dayofweek_structural_reporting","text":"pobs preprocessed observation list enw_preprocess_data(). day_of_week Character vector weekday names reporting occurs (e.g., \"Wednesday\" c(\"Monday\", \"Wednesday\")).","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_dayofweek_structural_reporting.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create day-of-week structural reporting pattern — enw_dayofweek_structural_reporting","text":"data.table columns: .group: Group identifier date: Reference date report_date: Report date report: Binary indicator (1 = reporting occurs, 0 = reporting)","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_dayofweek_structural_reporting.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create day-of-week structural reporting pattern — enw_dayofweek_structural_reporting","text":"","code":"if (FALSE) { # \\dontrun{ pobs <- enw_preprocess_data(obs, max_delay = 30)  # Wednesday-only reporting enw_dayofweek_structural_reporting(   pobs, day_of_week = \"Wednesday\" )  # Multiple reporting days enw_dayofweek_structural_reporting(   pobs, day_of_week = c(\"Monday\", \"Wednesday\", \"Friday\") ) } # }"},{"path":"https://package.epinowcast.org/dev/reference/enw_design.html","id":null,"dir":"Reference","previous_headings":"","what":"A helper function to construct a design matrix from a formula — enw_design","title":"A helper function to construct a design matrix from a formula — enw_design","text":"function wrapper around stats::model.matrix() can optionally return sparse design matrix defined unique number rows design matrix index vector allows full design matrix reconstructed. useful models many repeated rows design matrix computationally expensive fit. function also allows specification contrasts categorical variables.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_design.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A helper function to construct a design matrix from a formula — enw_design","text":"","code":"enw_design(formula, data, no_contrasts = FALSE, sparse = TRUE, ...)"},{"path":"https://package.epinowcast.org/dev/reference/enw_design.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A helper function to construct a design matrix from a formula — enw_design","text":"formula R formula. data data.frame containing variables formula. no_contrasts vector variable names converted contrasts. no_contrasts = FALSE categorical variables use contrasts. no_contrasts = TRUE categorical variables use contrasts. sparse Logical, TRUE return sparse design matrix. Defaults TRUE. ... Arguments passed stats::model.matrix object object appropriate class.  default     method, model formula terms object.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_design.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A helper function to construct a design matrix from a formula — enw_design","text":"list containing formula, design matrix, index.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_design.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"A helper function to construct a design matrix from a formula — enw_design","text":"","code":"data <- data.frame(a = 1:3, b = as.character(1:3), c = c(1,1,2)) enw_design(a ~ b + c, data) #> $formula #> [1] \"a ~ b + c\" #>  #> $design #>   (Intercept) b2 b3 c #> 1           1  0  0 1 #> 2           1  1  0 1 #> 3           1  0  1 2 #>  #> $index #> [1] 1 2 3 #>  enw_design(a ~ b + c, data, no_contrasts = TRUE) #> $formula #> [1] \"a ~ b + c\" #>  #> $design #>   (Intercept) b1 b2 b3 c #> 1           1  1  0  0 1 #> 2           1  0  1  0 1 #> 3           1  0  0  1 2 #>  #> $index #> [1] 1 2 3 #>  enw_design(a ~ b + c, data, no_contrasts = c(\"b\")) #> $formula #> [1] \"a ~ b + c\" #>  #> $design #>   (Intercept) b1 b2 b3 c #> 1           1  1  0  0 1 #> 2           1  0  1  0 1 #> 3           1  0  0  1 2 #>  #> $index #> [1] 1 2 3 #>  enw_design(a ~ c, data, sparse = TRUE) #> $formula #> [1] \"a ~ c\" #>  #> $design #>   (Intercept) c #> 1           1 1 #> 3           1 2 #>  #> $index #> [1] 1 1 2 #>  enw_design(a ~ c, data, sparse = FALSE) #> $formula #> [1] \"a ~ c\" #>  #> $design #>   (Intercept) c #> 1           1 1 #> 2           1 1 #> 3           1 2 #> attr(,\"assign\") #> [1] 0 1 #>  #> $index #> [1] 1 2 3 #>"},{"path":"https://package.epinowcast.org/dev/reference/enw_effects_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Extracts metadata from a design matrix — enw_effects_metadata","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"function extracts metadata design matrix returns data.table following columns: effects: name effect fixed: logical indicating whether effect fixed (1) random (0). automatically drops intercept (defined \"(Intercept)\"). function useful constructing model design object random effects used combination ewn_add_pooling_effect.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_effects_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"","code":"enw_effects_metadata(design)"},{"path":"https://package.epinowcast.org/dev/reference/enw_effects_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"design design matrix returned stats::model.matrix().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_effects_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"data.table following columns: effects: name effect fixed: logical indicating whether effect fixed (1) random (0)","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_effects_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extracts metadata from a design matrix — enw_effects_metadata","text":"","code":"data <- data.frame(a = 1:3, b = as.character(1:3), c = c(1,1,2)) design <- enw_design(a ~ b + c, data)$design enw_effects_metadata(design) #>    effects fixed #>     <char> <num> #> 1:      b2     1 #> 2:      b3     1 #> 3:       c     1"},{"path":"https://package.epinowcast.org/dev/reference/enw_example.html","id":null,"dir":"Reference","previous_headings":"","what":"Load a package example — enw_example","title":"Load a package example — enw_example","text":"Loads examples nowcasts produced using example scripts. Used streamline examples, package tests enable users explore package functionality without needing install cmdstanr.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_example.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load a package example — enw_example","text":"","code":"enw_example(   type = c(\"nowcast\", \"preprocessed_observations\", \"observations\", \"script\") )"},{"path":"https://package.epinowcast.org/dev/reference/enw_example.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load a package example — enw_example","text":"type character string indicating example load. Supported options \"nowcast\", epinowcast() applied germany_covid19_hosp \"preprocessed_observations\", enw_preprocess_data() applied germany_covid19_hosp \"observations\", enw_latest_data() applied germany_covid19_hosp \"script\", code used generate examples.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_example.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load a package example — enw_example","text":"Depending type, data.table requested output file name(s) generate outputs (type = \"script\")","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_example.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load a package example — enw_example","text":"","code":"# Load the nowcast enw_example(type = \"nowcast\") #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[650x9]> <data.table[610x11]> <data.table[40x10]> #>     missing_reference  reporting_triangle      metareference #>                <list>              <list>             <list> #> 1: <data.table[40x6]> <data.table[40x22]> <data.table[40x9]> #>             metareport          metadelay max_delay  time snapshots     by #>                 <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[59x12]> <data.table[20x5]>        20    40        40 [NULL] #>    groups   max_date timestep             priors #>     <int>     <IDat>   <char>             <list> #> 1:      1 2021-08-22      day <data.table[14x6]> #>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             fit #>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <list> #> 1: <CmdStanMCMC>\\n  Inherits from: <CmdStanFit>\\n  Public:\\n    clone: function (deep = FALSE) \\n    cmdstan_diagnose: function () \\n    cmdstan_summary: function (flags = NULL) \\n    code: function () \\n    config_files: function (include_failed = FALSE) \\n    constrain_variables: function (unconstrained_variables, transformed_parameters = TRUE, \\n    data_file: function () \\n    diagnostic_summary: function (diagnostics = c(\"divergences\", \"treedepth\", \"ebfmi\"), \\n    draws: function (variables = NULL, inc_warmup = FALSE, format = getOption(\"cmdstanr_draws_format\", \\n    expose_functions: function (global = FALSE, verbose = FALSE) \\n    functions: environment\\n    grad_log_prob: function (unconstrained_variables, jacobian = TRUE, jacobian_adjustment = NULL) \\n    hessian: function (unconstrained_variables, jacobian = TRUE, jacobian_adjustment = NULL) \\n    init: function () \\n    init_model_methods: function (seed = 1, verbose = FALSE, hessian = FALSE) \\n    initialize: function (runset) \\n    inv_metric: function (matrix = TRUE) \\n    latent_dynamics_files: function (include_failed = FALSE) \\n    log_prob: function (unconstrained_variables, jacobian = TRUE, jacobian_adjustment = NULL) \\n    loo: function (variables = \"log_lik\", r_eff = TRUE, moment_match = FALSE, \\n    lp: function () \\n    metadata: function () \\n    metric_files: function (include_failed = FALSE) \\n    num_chains: function () \\n    num_procs: function () \\n    output: function (id = NULL) \\n    output_files: function (include_failed = FALSE) \\n    print: function (variables = NULL, ..., digits = 2, max_rows = getOption(\"cmdstanr_max_rows\", \\n    profile_files: function (include_failed = FALSE) \\n    profiles: function () \\n    return_codes: function () \\n    runset: CmdStanRun, R6\\n    sampler_diagnostics: function (inc_warmup = FALSE, format = getOption(\"cmdstanr_draws_format\", \\n    save_config_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_data_file: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_latent_dynamics_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_metric_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_object: function (file, ...) \\n    save_output_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    save_profile_files: function (dir = \".\", basename = NULL, timestamp = TRUE, random = TRUE) \\n    summary: function (variables = NULL, ...) \\n    time: function () \\n    unconstrain_draws: function (files = NULL, draws = NULL, format = getOption(\"cmdstanr_draws_format\", \\n    unconstrain_variables: function (variables) \\n    variable_skeleton: function (transformed_parameters = TRUE, generated_quantities = TRUE) \\n  Private:\\n    draws_: -1350.196 -1351.1578 -1352.7977 -1347.4477 -1344.1504 -1 ...\\n    init_: NULL\\n    inv_metric_: list\\n    metadata_: list\\n    model_methods_env_: environment\\n    profiles_: NULL\\n    read_csv_: function (variables = NULL, sampler_diagnostics = NULL, format = getOption(\"cmdstanr_draws_format\", \\n    return_codes_: 0 0\\n    sampler_diagnostics_: 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7  ...\\n    warmup_draws_: NULL\\n    warmup_sampler_diagnostics_: NULL #>           data  fit_args init_method_output samples max_rhat #>         <list>    <list>             <list>   <int>    <num> #> 1: <list[112]> <list[5]>             [NULL]    1000     1.01 #>    divergent_transitions per_divergent_transitions max_treedepth #>                    <num>                     <num>         <num> #> 1:                     0                         0             8 #>    no_at_max_treedepth per_at_max_treedepth run_time #>                  <int>                <num>    <num> #> 1:                   3                0.003       26  # Load the preprocessed observations enw_example(type = \"preprocessed_observations\") #>                    obs          new_confirm              latest #>                 <list>               <list>              <list> #> 1: <data.table[650x9]> <data.table[610x11]> <data.table[40x10]> #>     missing_reference  reporting_triangle      metareference #>                <list>              <list>             <list> #> 1: <data.table[40x6]> <data.table[40x22]> <data.table[40x9]> #>             metareport          metadelay max_delay  time snapshots     by #>                 <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[59x12]> <data.table[20x5]>        20    40        40 [NULL] #>    groups   max_date timestep #>     <int>     <IDat>   <char> #> 1:      1 2021-08-22      day  # Load the latest observations enw_example(type = \"observations\") #>     reference_date location age_group report_date confirm #>             <IDat>   <fctr>    <fctr>      <IDat>   <int> #>  1:     2021-08-03       DE       00+  2021-10-01     156 #>  2:     2021-08-04       DE       00+  2021-10-01     183 #>  3:     2021-08-05       DE       00+  2021-10-01     147 #>  4:     2021-08-06       DE       00+  2021-10-01     155 #>  5:     2021-08-07       DE       00+  2021-10-01     159 #>  6:     2021-08-08       DE       00+  2021-10-01     119 #>  7:     2021-08-09       DE       00+  2021-10-01      65 #>  8:     2021-08-10       DE       00+  2021-10-01     204 #>  9:     2021-08-11       DE       00+  2021-10-01     275 #> 10:     2021-08-12       DE       00+  2021-10-01     273 #> 11:     2021-08-13       DE       00+  2021-10-01     270 #> 12:     2021-08-14       DE       00+  2021-10-01     262 #> 13:     2021-08-15       DE       00+  2021-10-01     192 #> 14:     2021-08-16       DE       00+  2021-10-01     140 #> 15:     2021-08-17       DE       00+  2021-10-01     323 #> 16:     2021-08-18       DE       00+  2021-10-01     409 #> 17:     2021-08-19       DE       00+  2021-10-01     370 #> 18:     2021-08-20       DE       00+  2021-10-01     361 #> 19:     2021-08-21       DE       00+  2021-10-01     339 #> 20:     2021-08-22       DE       00+  2021-10-01     258 #>     reference_date location age_group report_date confirm #>             <IDat>   <fctr>    <fctr>      <IDat>   <int>  # Load the script used to generate these examples # Optionally source this script to regenerate the example readLines(enw_example(type = \"script\")) #>  [1] \"# Load epinowcast and data.table\"                                                   #>  [2] \"library(epinowcast)\"                                                                #>  [3] \"library(data.table)\"                                                                #>  [4] \"\"                                                                                   #>  [5] \"# Load and filter germany hospitalisations\"                                         #>  [6] \"nat_germany_hosp <- germany_covid19_hosp[location == \\\"DE\\\"][age_group == \\\"00+\\\"]\" #>  [7] \"nat_germany_hosp <- enw_filter_report_dates(\"                                       #>  [8] \"  nat_germany_hosp, latest_date = \\\"2021-10-01\\\"\"                                   #>  [9] \")\"                                                                                  #> [10] \"\"                                                                                   #> [11] \"# Make sure observations are complete\"                                              #> [12] \"nat_germany_hosp <- enw_complete_dates(\"                                            #> [13] \"  nat_germany_hosp, by = c(\\\"location\\\", \\\"age_group\\\")\"                            #> [14] \")\"                                                                                  #> [15] \"\"                                                                                   #> [16] \"# Make a retrospective dataset\"                                                     #> [17] \"retro_nat_germany <- enw_filter_report_dates(\"                                      #> [18] \"  nat_germany_hosp, remove_days = 40\"                                               #> [19] \")\"                                                                                  #> [20] \"retro_nat_germany <- enw_filter_reference_dates(\"                                   #> [21] \"  retro_nat_germany, include_days = 40\"                                             #> [22] \")\"                                                                                  #> [23] \"\"                                                                                   #> [24] \"# Get latest observations for the same time period\"                                 #> [25] \"latest_obs <- enw_latest_data(nat_germany_hosp)\"                                    #> [26] \"latest_obs <- enw_filter_reference_dates(\"                                          #> [27] \"  latest_obs, remove_days = 40, include_days = 20\"                                  #> [28] \")\"                                                                                  #> [29] \"\"                                                                                   #> [30] \"# Preprocess observations\"                                                          #> [31] \"pobs <- enw_preprocess_data(retro_nat_germany, max_delay = 20)\"                     #> [32] \"\"                                                                                   #> [33] \"# Reference date model\"                                                             #> [34] \"reference_module <- enw_reference(~1, data = pobs)\"                                 #> [35] \"\"                                                                                   #> [36] \"# Report date model\"                                                                #> [37] \"report_module <- enw_report(~ (1 | day_of_week), data = pobs)\"                      #> [38] \"\"                                                                                   #> [39] \"# Fit nowcast model and produce a nowcast\"                                          #> [40] \"# Note that we have reduced samples for this example to reduce runtimes\"            #> [41] \"nowcast <- epinowcast(pobs,\"                                                        #> [42] \"  reference = reference_module,\"                                                    #> [43] \"  report = report_module,\"                                                          #> [44] \"  fit = enw_fit_opts(\"                                                              #> [45] \"    save_warmup = FALSE, pp = TRUE,\"                                                #> [46] \"    chains = 2, threads_per_chain = 2,\"                                             #> [47] \"    iter_warmup = 500, iter_sampling = 500\"                                         #> [48] \"  )\"                                                                                #> [49] \")\""},{"path":"https://package.epinowcast.org/dev/reference/enw_expectation.html","id":null,"dir":"Reference","previous_headings":"","what":"Expectation model module — enw_expectation","title":"Expectation model module — enw_expectation","text":"Expectation model module","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_expectation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Expectation model module — enw_expectation","text":"","code":"enw_expectation(   r = ~0 + (1 | day:.group),   generation_time = 1,   observation = ~1,   latent_reporting_delay = 1,   data,   ... )"},{"path":"https://package.epinowcast.org/dev/reference/enw_expectation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Expectation model module — enw_expectation","text":"r formula (implemented enw_formula()) describing generative process used expected incidence. can use features defined reference date defined metareference produced enw_preprocess_data(). default set use daily random effect group. parameterisation highly flexible may appropriate choice data sparsely reported reporting delays substantial. settings alternative group-specific weekly random walk (specified rw(week, = .group)). Setting ~0 produce error expectation model required. See enw_formula() details formula syntax. generation_time numeric vector sums 1 defaults 1. Describes weighting apply previous generations (.e part renewal equation). set 1 (default) corresponds modelling daily growth rate. observation formula (implemented enw_formula()) describing modifiers used adjust expected observations. can use features defined reference date defined metareference produced enw_preprocess_data(). default modifiers used common choice might adjust day week. Note baseline modification, intercept always used set 0. Set ~0 disable observation modifiers (internally converted ~1 flagged inactive). See enw_formula() details formula syntax. latent_reporting_delay numeric vector defaults 1. Describes weighting apply past current latent expected observations (recent least). can used convolve based assumed reporting delay rescale observations (multiplying probability mass function fraction) account ascertainment etc. list PMFs can provided allow time-varying PMFs. length modelled time period plus length generation time supplied. data Output enw_preprocess_data(). ... Additional parameters passed enw_add_metaobs_features(). arguments passed enw_preprocess_data() used .","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_expectation.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Expectation model module — enw_expectation","text":"list containing supplied formulas, data passed list describing models, data.frame describing priors used, function takes output data priors returns function can used sample tightened version prior distribution.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_expectation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Expectation model module — enw_expectation","text":"","code":"enw_expectation(data = enw_example(\"preprocessed\")) #> A random effect using .group is not possible as this variable has fewer than 2 #> unique values. #> ℹ The r design matrix is sparse (>90% zeros). Consider using `sparse_design = TRUE` in `enw_fit_opts()` to potentially reduce memory usage and computation time. #> $formula #> $formula$r #> [1] \"~0 + (1 | day:.group)\" #>  #> $formula$observation #> [1] \"~1\" #>  #>  #> $data_raw #> $data_raw$r #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-15      1       DE       00+     0    Thursday     1     0     0 #>  2: 2021-07-16      1       DE       00+     0      Friday     2     0     0 #>  3: 2021-07-17      1       DE       00+     0    Saturday     3     0     0 #>  4: 2021-07-18      1       DE       00+     0      Sunday     4     0     0 #>  5: 2021-07-19      1       DE       00+     0      Monday     5     0     0 #>  6: 2021-07-20      1       DE       00+     0     Tuesday     6     0     0 #>  7: 2021-07-21      1       DE       00+     0   Wednesday     7     1     0 #>  8: 2021-07-22      1       DE       00+     0    Thursday     8     1     0 #>  9: 2021-07-23      1       DE       00+     0      Friday     9     1     0 #> 10: 2021-07-24      1       DE       00+     0    Saturday    10     1     0 #> 11: 2021-07-25      1       DE       00+     0      Sunday    11     1     0 #> 12: 2021-07-26      1       DE       00+     0      Monday    12     1     0 #> 13: 2021-07-27      1       DE       00+     0     Tuesday    13     1     0 #> 14: 2021-07-28      1       DE       00+     0   Wednesday    14     2     0 #> 15: 2021-07-29      1       DE       00+     0    Thursday    15     2     0 #> 16: 2021-07-30      1       DE       00+     0      Friday    16     2     0 #> 17: 2021-07-31      1       DE       00+     0    Saturday    17     2     0 #> 18: 2021-08-01      1       DE       00+     0      Sunday    18     2     1 #> 19: 2021-08-02      1       DE       00+     0      Monday    19     2     1 #> 20: 2021-08-03      1       DE       00+     0     Tuesday    20     2     1 #> 21: 2021-08-04      1       DE       00+     0   Wednesday    21     3     1 #> 22: 2021-08-05      1       DE       00+     0    Thursday    22     3     1 #> 23: 2021-08-06      1       DE       00+     0      Friday    23     3     1 #> 24: 2021-08-07      1       DE       00+     0    Saturday    24     3     1 #> 25: 2021-08-08      1       DE       00+     0      Sunday    25     3     1 #> 26: 2021-08-09      1       DE       00+     0      Monday    26     3     1 #> 27: 2021-08-10      1       DE       00+     0     Tuesday    27     3     1 #> 28: 2021-08-11      1       DE       00+     0   Wednesday    28     4     1 #> 29: 2021-08-12      1       DE       00+     0    Thursday    29     4     1 #> 30: 2021-08-13      1       DE       00+     0      Friday    30     4     1 #> 31: 2021-08-14      1       DE       00+     0    Saturday    31     4     1 #> 32: 2021-08-15      1       DE       00+     0      Sunday    32     4     1 #> 33: 2021-08-16      1       DE       00+     0      Monday    33     4     1 #> 34: 2021-08-17      1       DE       00+     0     Tuesday    34     4     1 #> 35: 2021-08-18      1       DE       00+     0   Wednesday    35     5     1 #> 36: 2021-08-19      1       DE       00+     0    Thursday    36     5     1 #> 37: 2021-08-20      1       DE       00+     0      Friday    37     5     1 #> 38: 2021-08-21      1       DE       00+     0    Saturday    38     5     1 #> 39: 2021-08-22      1       DE       00+     0      Sunday    39     5     1 #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  #> $data_raw$observation #> Key: <.group, date> #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  1: 2021-07-14      1       DE       00+     0   Wednesday     0     0     0 #>  2: 2021-07-15      1       DE       00+     0    Thursday     1     0     0 #>  3: 2021-07-16      1       DE       00+     0      Friday     2     0     0 #>  4: 2021-07-17      1       DE       00+     0    Saturday     3     0     0 #>  5: 2021-07-18      1       DE       00+     0      Sunday     4     0     0 #>  6: 2021-07-19      1       DE       00+     0      Monday     5     0     0 #>  7: 2021-07-20      1       DE       00+     0     Tuesday     6     0     0 #>  8: 2021-07-21      1       DE       00+     0   Wednesday     7     1     0 #>  9: 2021-07-22      1       DE       00+     0    Thursday     8     1     0 #> 10: 2021-07-23      1       DE       00+     0      Friday     9     1     0 #> 11: 2021-07-24      1       DE       00+     0    Saturday    10     1     0 #> 12: 2021-07-25      1       DE       00+     0      Sunday    11     1     0 #> 13: 2021-07-26      1       DE       00+     0      Monday    12     1     0 #> 14: 2021-07-27      1       DE       00+     0     Tuesday    13     1     0 #> 15: 2021-07-28      1       DE       00+     0   Wednesday    14     2     0 #> 16: 2021-07-29      1       DE       00+     0    Thursday    15     2     0 #> 17: 2021-07-30      1       DE       00+     0      Friday    16     2     0 #> 18: 2021-07-31      1       DE       00+     0    Saturday    17     2     0 #> 19: 2021-08-01      1       DE       00+     0      Sunday    18     2     1 #> 20: 2021-08-02      1       DE       00+     0      Monday    19     2     1 #> 21: 2021-08-03      1       DE       00+     0     Tuesday    20     2     1 #> 22: 2021-08-04      1       DE       00+     0   Wednesday    21     3     1 #> 23: 2021-08-05      1       DE       00+     0    Thursday    22     3     1 #> 24: 2021-08-06      1       DE       00+     0      Friday    23     3     1 #> 25: 2021-08-07      1       DE       00+     0    Saturday    24     3     1 #> 26: 2021-08-08      1       DE       00+     0      Sunday    25     3     1 #> 27: 2021-08-09      1       DE       00+     0      Monday    26     3     1 #> 28: 2021-08-10      1       DE       00+     0     Tuesday    27     3     1 #> 29: 2021-08-11      1       DE       00+     0   Wednesday    28     4     1 #> 30: 2021-08-12      1       DE       00+     0    Thursday    29     4     1 #> 31: 2021-08-13      1       DE       00+     0      Friday    30     4     1 #> 32: 2021-08-14      1       DE       00+     0    Saturday    31     4     1 #> 33: 2021-08-15      1       DE       00+     0      Sunday    32     4     1 #> 34: 2021-08-16      1       DE       00+     0      Monday    33     4     1 #> 35: 2021-08-17      1       DE       00+     0     Tuesday    34     4     1 #> 36: 2021-08-18      1       DE       00+     0   Wednesday    35     5     1 #> 37: 2021-08-19      1       DE       00+     0    Thursday    36     5     1 #> 38: 2021-08-20      1       DE       00+     0      Friday    37     5     1 #> 39: 2021-08-21      1       DE       00+     0    Saturday    38     5     1 #> 40: 2021-08-22      1       DE       00+     0      Sunday    39     5     1 #>           date .group location age_group delay day_of_week   day  week month #>         <IDat>  <num>   <fctr>    <fctr> <num>      <fctr> <num> <num> <num> #>  #>  #> $data #> $data$expr_r_seed #> [1] 1 #>  #> $data$expr_gt_n #> [1] 1 #>  #> $data$expr_lrgt #> [1] 0 #>  #> $data$expr_t #> [1] 39 #>  #> $data$expr_obs #> [1] 0 #>  #> $data$expr_g #> [1] 0 #>  #> $data$expr_ft #> [1] 40 #>  #> $data$expr_fintercept #> [1] 0 #>  #> $data$expr_fnrow #> [1] 39 #>  #> $data$expr_findex #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 #>  #> $data$expr_fnindex #> [1] 39 #>  #> $data$expr_fncol #> [1] 39 #>  #> $data$expr_rncol #> [1] 1 #>  #> $data$expr_fdesign #>    day1 day2 day3 day4 day5 day6 day7 day8 day9 day10 day11 day12 day13 day14 #> 1     1    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 2     0    1    0    0    0    0    0    0    0     0     0     0     0     0 #> 3     0    0    1    0    0    0    0    0    0     0     0     0     0     0 #> 4     0    0    0    1    0    0    0    0    0     0     0     0     0     0 #> 5     0    0    0    0    1    0    0    0    0     0     0     0     0     0 #> 6     0    0    0    0    0    1    0    0    0     0     0     0     0     0 #> 7     0    0    0    0    0    0    1    0    0     0     0     0     0     0 #> 8     0    0    0    0    0    0    0    1    0     0     0     0     0     0 #> 9     0    0    0    0    0    0    0    0    1     0     0     0     0     0 #> 10    0    0    0    0    0    0    0    0    0     1     0     0     0     0 #> 11    0    0    0    0    0    0    0    0    0     0     1     0     0     0 #> 12    0    0    0    0    0    0    0    0    0     0     0     1     0     0 #> 13    0    0    0    0    0    0    0    0    0     0     0     0     1     0 #> 14    0    0    0    0    0    0    0    0    0     0     0     0     0     1 #> 15    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 16    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 17    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 18    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 19    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 20    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 21    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 22    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 23    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 24    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 25    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 26    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 27    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 28    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 29    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 30    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 31    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 32    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 33    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 34    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 35    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 36    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 37    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 38    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #> 39    0    0    0    0    0    0    0    0    0     0     0     0     0     0 #>    day15 day16 day17 day18 day19 day20 day21 day22 day23 day24 day25 day26 #> 1      0     0     0     0     0     0     0     0     0     0     0     0 #> 2      0     0     0     0     0     0     0     0     0     0     0     0 #> 3      0     0     0     0     0     0     0     0     0     0     0     0 #> 4      0     0     0     0     0     0     0     0     0     0     0     0 #> 5      0     0     0     0     0     0     0     0     0     0     0     0 #> 6      0     0     0     0     0     0     0     0     0     0     0     0 #> 7      0     0     0     0     0     0     0     0     0     0     0     0 #> 8      0     0     0     0     0     0     0     0     0     0     0     0 #> 9      0     0     0     0     0     0     0     0     0     0     0     0 #> 10     0     0     0     0     0     0     0     0     0     0     0     0 #> 11     0     0     0     0     0     0     0     0     0     0     0     0 #> 12     0     0     0     0     0     0     0     0     0     0     0     0 #> 13     0     0     0     0     0     0     0     0     0     0     0     0 #> 14     0     0     0     0     0     0     0     0     0     0     0     0 #> 15     1     0     0     0     0     0     0     0     0     0     0     0 #> 16     0     1     0     0     0     0     0     0     0     0     0     0 #> 17     0     0     1     0     0     0     0     0     0     0     0     0 #> 18     0     0     0     1     0     0     0     0     0     0     0     0 #> 19     0     0     0     0     1     0     0     0     0     0     0     0 #> 20     0     0     0     0     0     1     0     0     0     0     0     0 #> 21     0     0     0     0     0     0     1     0     0     0     0     0 #> 22     0     0     0     0     0     0     0     1     0     0     0     0 #> 23     0     0     0     0     0     0     0     0     1     0     0     0 #> 24     0     0     0     0     0     0     0     0     0     1     0     0 #> 25     0     0     0     0     0     0     0     0     0     0     1     0 #> 26     0     0     0     0     0     0     0     0     0     0     0     1 #> 27     0     0     0     0     0     0     0     0     0     0     0     0 #> 28     0     0     0     0     0     0     0     0     0     0     0     0 #> 29     0     0     0     0     0     0     0     0     0     0     0     0 #> 30     0     0     0     0     0     0     0     0     0     0     0     0 #> 31     0     0     0     0     0     0     0     0     0     0     0     0 #> 32     0     0     0     0     0     0     0     0     0     0     0     0 #> 33     0     0     0     0     0     0     0     0     0     0     0     0 #> 34     0     0     0     0     0     0     0     0     0     0     0     0 #> 35     0     0     0     0     0     0     0     0     0     0     0     0 #> 36     0     0     0     0     0     0     0     0     0     0     0     0 #> 37     0     0     0     0     0     0     0     0     0     0     0     0 #> 38     0     0     0     0     0     0     0     0     0     0     0     0 #> 39     0     0     0     0     0     0     0     0     0     0     0     0 #>    day27 day28 day29 day30 day31 day32 day33 day34 day35 day36 day37 day38 #> 1      0     0     0     0     0     0     0     0     0     0     0     0 #> 2      0     0     0     0     0     0     0     0     0     0     0     0 #> 3      0     0     0     0     0     0     0     0     0     0     0     0 #> 4      0     0     0     0     0     0     0     0     0     0     0     0 #> 5      0     0     0     0     0     0     0     0     0     0     0     0 #> 6      0     0     0     0     0     0     0     0     0     0     0     0 #> 7      0     0     0     0     0     0     0     0     0     0     0     0 #> 8      0     0     0     0     0     0     0     0     0     0     0     0 #> 9      0     0     0     0     0     0     0     0     0     0     0     0 #> 10     0     0     0     0     0     0     0     0     0     0     0     0 #> 11     0     0     0     0     0     0     0     0     0     0     0     0 #> 12     0     0     0     0     0     0     0     0     0     0     0     0 #> 13     0     0     0     0     0     0     0     0     0     0     0     0 #> 14     0     0     0     0     0     0     0     0     0     0     0     0 #> 15     0     0     0     0     0     0     0     0     0     0     0     0 #> 16     0     0     0     0     0     0     0     0     0     0     0     0 #> 17     0     0     0     0     0     0     0     0     0     0     0     0 #> 18     0     0     0     0     0     0     0     0     0     0     0     0 #> 19     0     0     0     0     0     0     0     0     0     0     0     0 #> 20     0     0     0     0     0     0     0     0     0     0     0     0 #> 21     0     0     0     0     0     0     0     0     0     0     0     0 #> 22     0     0     0     0     0     0     0     0     0     0     0     0 #> 23     0     0     0     0     0     0     0     0     0     0     0     0 #> 24     0     0     0     0     0     0     0     0     0     0     0     0 #> 25     0     0     0     0     0     0     0     0     0     0     0     0 #> 26     0     0     0     0     0     0     0     0     0     0     0     0 #> 27     1     0     0     0     0     0     0     0     0     0     0     0 #> 28     0     1     0     0     0     0     0     0     0     0     0     0 #> 29     0     0     1     0     0     0     0     0     0     0     0     0 #> 30     0     0     0     1     0     0     0     0     0     0     0     0 #> 31     0     0     0     0     1     0     0     0     0     0     0     0 #> 32     0     0     0     0     0     1     0     0     0     0     0     0 #> 33     0     0     0     0     0     0     1     0     0     0     0     0 #> 34     0     0     0     0     0     0     0     1     0     0     0     0 #> 35     0     0     0     0     0     0     0     0     1     0     0     0 #> 36     0     0     0     0     0     0     0     0     0     1     0     0 #> 37     0     0     0     0     0     0     0     0     0     0     1     0 #> 38     0     0     0     0     0     0     0     0     0     0     0     1 #> 39     0     0     0     0     0     0     0     0     0     0     0     0 #>    day39 #> 1      0 #> 2      0 #> 3      0 #> 4      0 #> 5      0 #> 6      0 #> 7      0 #> 8      0 #> 9      0 #> 10     0 #> 11     0 #> 12     0 #> 13     0 #> 14     0 #> 15     0 #> 16     0 #> 17     0 #> 18     0 #> 19     0 #> 20     0 #> 21     0 #> 22     0 #> 23     0 #> 24     0 #> 25     0 #> 26     0 #> 27     0 #> 28     0 #> 29     0 #> 30     0 #> 31     0 #> 32     0 #> 33     0 #> 34     0 #> 35     0 #> 36     0 #> 37     0 #> 38     0 #> 39     1 #> attr(,\"assign\") #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 #> attr(,\"contrasts\") #> attr(,\"contrasts\")$day #>    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #> 1  1 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 2  0 1 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 3  0 0 1 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 4  0 0 0 1 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 5  0 0 0 0 1 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 6  0 0 0 0 0 1 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 7  0 0 0 0 0 0 1 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 8  0 0 0 0 0 0 0 1 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 9  0 0 0 0 0 0 0 0 1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 10 0 0 0 0 0 0 0 0 0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 11 0 0 0 0 0 0 0 0 0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 12 0 0 0 0 0 0 0 0 0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 13 0 0 0 0 0 0 0 0 0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 14 0 0 0 0 0 0 0 0 0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 15 0 0 0 0 0 0 0 0 0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 16 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0  0 #> 17 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0  0 #> 18 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0  0 #> 19 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0  0 #> 20 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0  0 #> 21 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0  0 #> 22 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0  0 #> 23 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0  0 #> 24 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0  0 #> 25 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0  0 #> 26 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0  0 #> 27 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1  0 #> 28 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  1 #> 29 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 30 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 31 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 32 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 33 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 34 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 35 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 36 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 37 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 38 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> 39 0 0 0 0 0 0 0 0 0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #>    29 30 31 32 33 34 35 36 37 38 39 #> 1   0  0  0  0  0  0  0  0  0  0  0 #> 2   0  0  0  0  0  0  0  0  0  0  0 #> 3   0  0  0  0  0  0  0  0  0  0  0 #> 4   0  0  0  0  0  0  0  0  0  0  0 #> 5   0  0  0  0  0  0  0  0  0  0  0 #> 6   0  0  0  0  0  0  0  0  0  0  0 #> 7   0  0  0  0  0  0  0  0  0  0  0 #> 8   0  0  0  0  0  0  0  0  0  0  0 #> 9   0  0  0  0  0  0  0  0  0  0  0 #> 10  0  0  0  0  0  0  0  0  0  0  0 #> 11  0  0  0  0  0  0  0  0  0  0  0 #> 12  0  0  0  0  0  0  0  0  0  0  0 #> 13  0  0  0  0  0  0  0  0  0  0  0 #> 14  0  0  0  0  0  0  0  0  0  0  0 #> 15  0  0  0  0  0  0  0  0  0  0  0 #> 16  0  0  0  0  0  0  0  0  0  0  0 #> 17  0  0  0  0  0  0  0  0  0  0  0 #> 18  0  0  0  0  0  0  0  0  0  0  0 #> 19  0  0  0  0  0  0  0  0  0  0  0 #> 20  0  0  0  0  0  0  0  0  0  0  0 #> 21  0  0  0  0  0  0  0  0  0  0  0 #> 22  0  0  0  0  0  0  0  0  0  0  0 #> 23  0  0  0  0  0  0  0  0  0  0  0 #> 24  0  0  0  0  0  0  0  0  0  0  0 #> 25  0  0  0  0  0  0  0  0  0  0  0 #> 26  0  0  0  0  0  0  0  0  0  0  0 #> 27  0  0  0  0  0  0  0  0  0  0  0 #> 28  0  0  0  0  0  0  0  0  0  0  0 #> 29  1  0  0  0  0  0  0  0  0  0  0 #> 30  0  1  0  0  0  0  0  0  0  0  0 #> 31  0  0  1  0  0  0  0  0  0  0  0 #> 32  0  0  0  1  0  0  0  0  0  0  0 #> 33  0  0  0  0  1  0  0  0  0  0  0 #> 34  0  0  0  0  0  1  0  0  0  0  0 #> 35  0  0  0  0  0  0  1  0  0  0  0 #> 36  0  0  0  0  0  0  0  1  0  0  0 #> 37  0  0  0  0  0  0  0  0  1  0  0 #> 38  0  0  0  0  0  0  0  0  0  1  0 #> 39  0  0  0  0  0  0  0  0  0  0  1 #>  #>  #> $data$expr_rdesign #>    fixed day #> 1      0   1 #> 2      0   1 #> 3      0   1 #> 4      0   1 #> 5      0   1 #> 6      0   1 #> 7      0   1 #> 8      0   1 #> 9      0   1 #> 10     0   1 #> 11     0   1 #> 12     0   1 #> 13     0   1 #> 14     0   1 #> 15     0   1 #> 16     0   1 #> 17     0   1 #> 18     0   1 #> 19     0   1 #> 20     0   1 #> 21     0   1 #> 22     0   1 #> 23     0   1 #> 24     0   1 #> 25     0   1 #> 26     0   1 #> 27     0   1 #> 28     0   1 #> 29     0   1 #> 30     0   1 #> 31     0   1 #> 32     0   1 #> 33     0   1 #> 34     0   1 #> 35     0   1 #> 36     0   1 #> 37     0   1 #> 38     0   1 #> 39     0   1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $data$expl_lrd_n #> [1] 1 #>  #> $data$expl_lrd #>       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] #>  [1,]    1    0    0    0    0    0    0    0    0     0     0     0     0 #>  [2,]    0    1    0    0    0    0    0    0    0     0     0     0     0 #>  [3,]    0    0    1    0    0    0    0    0    0     0     0     0     0 #>  [4,]    0    0    0    1    0    0    0    0    0     0     0     0     0 #>  [5,]    0    0    0    0    1    0    0    0    0     0     0     0     0 #>  [6,]    0    0    0    0    0    1    0    0    0     0     0     0     0 #>  [7,]    0    0    0    0    0    0    1    0    0     0     0     0     0 #>  [8,]    0    0    0    0    0    0    0    1    0     0     0     0     0 #>  [9,]    0    0    0    0    0    0    0    0    1     0     0     0     0 #> [10,]    0    0    0    0    0    0    0    0    0     1     0     0     0 #> [11,]    0    0    0    0    0    0    0    0    0     0     1     0     0 #> [12,]    0    0    0    0    0    0    0    0    0     0     0     1     0 #> [13,]    0    0    0    0    0    0    0    0    0     0     0     0     1 #> [14,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [15,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [16,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [17,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [18,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [19,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [20,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [21,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [22,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [23,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [24,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [25,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [26,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [27,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [28,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [29,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [30,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [31,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [32,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [33,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [34,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [35,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [36,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [37,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [38,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [39,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #> [40,]    0    0    0    0    0    0    0    0    0     0     0     0     0 #>       [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] #>  [1,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [2,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [3,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [4,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [5,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [6,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [7,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [8,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [9,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [10,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [11,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [12,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [13,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [14,]     1     0     0     0     0     0     0     0     0     0     0     0 #> [15,]     0     1     0     0     0     0     0     0     0     0     0     0 #> [16,]     0     0     1     0     0     0     0     0     0     0     0     0 #> [17,]     0     0     0     1     0     0     0     0     0     0     0     0 #> [18,]     0     0     0     0     1     0     0     0     0     0     0     0 #> [19,]     0     0     0     0     0     1     0     0     0     0     0     0 #> [20,]     0     0     0     0     0     0     1     0     0     0     0     0 #> [21,]     0     0     0     0     0     0     0     1     0     0     0     0 #> [22,]     0     0     0     0     0     0     0     0     1     0     0     0 #> [23,]     0     0     0     0     0     0     0     0     0     1     0     0 #> [24,]     0     0     0     0     0     0     0     0     0     0     1     0 #> [25,]     0     0     0     0     0     0     0     0     0     0     0     1 #> [26,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [27,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [28,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [29,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [30,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [31,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [32,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [33,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [34,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [35,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [36,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [37,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [38,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [39,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [40,]     0     0     0     0     0     0     0     0     0     0     0     0 #>       [,26] [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] #>  [1,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [2,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [3,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [4,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [5,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [6,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [7,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [8,]     0     0     0     0     0     0     0     0     0     0     0     0 #>  [9,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [10,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [11,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [12,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [13,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [14,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [15,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [16,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [17,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [18,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [19,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [20,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [21,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [22,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [23,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [24,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [25,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [26,]     1     0     0     0     0     0     0     0     0     0     0     0 #> [27,]     0     1     0     0     0     0     0     0     0     0     0     0 #> [28,]     0     0     1     0     0     0     0     0     0     0     0     0 #> [29,]     0     0     0     1     0     0     0     0     0     0     0     0 #> [30,]     0     0     0     0     1     0     0     0     0     0     0     0 #> [31,]     0     0     0     0     0     1     0     0     0     0     0     0 #> [32,]     0     0     0     0     0     0     1     0     0     0     0     0 #> [33,]     0     0     0     0     0     0     0     1     0     0     0     0 #> [34,]     0     0     0     0     0     0     0     0     1     0     0     0 #> [35,]     0     0     0     0     0     0     0     0     0     1     0     0 #> [36,]     0     0     0     0     0     0     0     0     0     0     1     0 #> [37,]     0     0     0     0     0     0     0     0     0     0     0     1 #> [38,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [39,]     0     0     0     0     0     0     0     0     0     0     0     0 #> [40,]     0     0     0     0     0     0     0     0     0     0     0     0 #>       [,38] [,39] [,40] #>  [1,]     0     0     0 #>  [2,]     0     0     0 #>  [3,]     0     0     0 #>  [4,]     0     0     0 #>  [5,]     0     0     0 #>  [6,]     0     0     0 #>  [7,]     0     0     0 #>  [8,]     0     0     0 #>  [9,]     0     0     0 #> [10,]     0     0     0 #> [11,]     0     0     0 #> [12,]     0     0     0 #> [13,]     0     0     0 #> [14,]     0     0     0 #> [15,]     0     0     0 #> [16,]     0     0     0 #> [17,]     0     0     0 #> [18,]     0     0     0 #> [19,]     0     0     0 #> [20,]     0     0     0 #> [21,]     0     0     0 #> [22,]     0     0     0 #> [23,]     0     0     0 #> [24,]     0     0     0 #> [25,]     0     0     0 #> [26,]     0     0     0 #> [27,]     0     0     0 #> [28,]     0     0     0 #> [29,]     0     0     0 #> [30,]     0     0     0 #> [31,]     0     0     0 #> [32,]     0     0     0 #> [33,]     0     0     0 #> [34,]     0     0     0 #> [35,]     0     0     0 #> [36,]     0     0     0 #> [37,]     0     0     0 #> [38,]     1     0     0 #> [39,]     0     1     0 #> [40,]     0     0     1 #>  #> $data$expl_obs #> [1] 0 #>  #> $data$expl_fintercept #> [1] 1 #>  #> $data$expl_fnrow #> [1] 40 #>  #> $data$expl_findex #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #>  #> $data$expl_fnindex #> [1] 40 #>  #> $data$expl_fncol #> [1] 0 #>  #> $data$expl_rncol #> [1] 0 #>  #> $data$expl_fdesign #>    #> 1  #> 2  #> 3  #> 4  #> 5  #> 6  #> 7  #> 8  #> 9  #> 10 #> 11 #> 12 #> 13 #> 14 #> 15 #> 16 #> 17 #> 18 #> 19 #> 20 #> 21 #> 22 #> 23 #> 24 #> 25 #> 26 #> 27 #> 28 #> 29 #> 30 #> 31 #> 32 #> 33 #> 34 #> 35 #> 36 #> 37 #> 38 #> 39 #> 40 #>  #> $data$expl_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #>  #> $priors #>             variable dimension #>               <char>     <num> #> 1:        expr_r_int         1 #> 2:      expr_beta_sd         1 #> 3: expr_lelatent_int         1 #> 4:      expl_beta_sd         1 #>                                                                description #>                                                                     <char> #> 1:                                        Intercept of the log growth rate #> 2:             Standard deviation of scaled pooled log growth rate effects #> 3: Intercept for initial log observations (ordered by group and then time) #> 4:             Standard deviation of scaled pooled log growth rate effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   0.0   0.2 #> 2: Zero truncated normal   0.0   1.0 #> 3:                Normal   4.3   1.0 #> 4: Zero truncated normal   0.0   1.0 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(expr_beta = numeric(0), expr_beta_sd = numeric(0),  #>             expr_lelatent_int = matrix(purrr::map2_dbl(as.vector(priors$expr_lelatent_int_p[1]),  #>                 as.vector(priors$expr_lelatent_int_p[2]), function(x,  #>                   y) { #>                   rnorm(1, x, y * 0.1) #>                 }), nrow = data$expr_gt_n, ncol = data$g), expr_r_int = numeric(0),  #>             expl_beta = numeric(0), expl_beta_sd = numeric(0)) #>         if (data$expr_fncol > 0) { #>             init$expr_beta <- array(rnorm(data$expr_fncol, 0,  #>                 0.01)) #>         } #>         if (data$expr_rncol > 0) { #>             init$expr_beta_sd <- array(abs(rnorm(data$expr_rncol,  #>                 priors$expr_beta_sd_p[1], priors$expr_beta_sd_p[2]/10))) #>         } #>         if (data$expr_fintercept > 0) { #>             init$expr_r_int <- array(rnorm(1, priors$expr_r_int_p[1],  #>                 priors$expr_r_int_p[2] * 0.1)) #>         } #>         if (data$expl_fncol > 0) { #>             init$expl_beta <- array(rnorm(data$expl_fncol, 0,  #>                 0.01)) #>         } #>         if (data$expl_rncol > 0) { #>             init$expl_beta_sd <- array(abs(rnorm(data$expl_rncol,  #>                 priors$expl_beta_sd_p[1], priors$expl_beta_sd_p[2]/10))) #>         } #>         init #>     } #>     fn #> } #> <bytecode: 0x55d51f064b18> #> <environment: 0x55d51e20c038> #>"},{"path":"https://package.epinowcast.org/dev/reference/enw_extend_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Extend a time series with additional dates — enw_extend_date","title":"Extend a time series with additional dates — enw_extend_date","text":"Extend time series additional dates. useful extending report dates time series include future dates nowcasting purposes include additional dates backcasting using renewal process expectation model.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_extend_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extend a time series with additional dates — enw_extend_date","text":"","code":"enw_extend_date(   metaobs,   days = 20,   direction = c(\"end\", \"start\"),   timestep = \"day\" )"},{"path":"https://package.epinowcast.org/dev/reference/enw_extend_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extend a time series with additional dates — enw_extend_date","text":"metaobs data.frame date column. days Number days add time series. Defaults 20. direction new dates added beginning end data. Default \"end\" \"start\" also available. timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_extend_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extend a time series with additional dates — enw_extend_date","text":"data.table columns metaobs additional rows date range date date + days (date - days direction = \"start\"). additional variable observed added value FALSE new dates TRUE existing dates.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_extend_date.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extend a time series with additional dates — enw_extend_date","text":"","code":"metaobs <- data.frame(date = as.Date(\"2021-01-01\") + 0:4) enw_extend_date(metaobs, days = 2) #> Key: <.group, date> #>          date .group observed #>        <Date>  <num>   <lgcl> #> 1: 2021-01-01      1     TRUE #> 2: 2021-01-02      1     TRUE #> 3: 2021-01-03      1     TRUE #> 4: 2021-01-04      1     TRUE #> 5: 2021-01-05      1     TRUE #> 6: 2021-01-06      1    FALSE #> 7: 2021-01-07      1    FALSE enw_extend_date(metaobs, days = 2, direction = \"start\") #> Key: <.group, date> #>          date .group observed #>        <Date>  <num>   <lgcl> #> 1: 2020-12-30      1    FALSE #> 2: 2020-12-31      1    FALSE #> 3: 2021-01-01      1     TRUE #> 4: 2021-01-02      1     TRUE #> 5: 2021-01-03      1     TRUE #> 6: 2021-01-04      1     TRUE #> 7: 2021-01-05      1     TRUE"},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter observations to have a consistent maximum delay period — enw_filter_delay","title":"Filter observations to have a consistent maximum delay period — enw_filter_delay","text":"Filter observations consistent maximum delay period","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter observations to have a consistent maximum delay period — enw_filter_delay","text":"","code":"enw_filter_delay(obs, max_delay, timestep = \"day\")"},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter observations to have a consistent maximum delay period — enw_filter_delay","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). max_delay maximum delay model delay distribution, specified units timestep (e.g., timestep = \"week\", max_delay = 3 means 3 weeks). specified maximum observed delay assumed true maximum delay model. Otherwise, integer greater equal 1 can specified. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Steps take determine maximum delay: Consider realistic relevant application. Check proportion observations reported (prop_reported) delay new_confirm output enw_preprocess_obs. Use check_max_delay() check coverage candidate max_delay. doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 intervals (.e. max_delay 1 corresponds delay). timestep timestep used process model (.e. reference date model). can string (\"day\", \"week\", \"month\") numeric whole number representing number days. data timestep may wish make use enw_aggregate_cumulative() aggregate data desired timestep.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter observations to have a consistent maximum delay period — enw_filter_delay","text":"data.frame filtered dates report less equal reference date plus maximum delay.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_delay.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter observations to have a consistent maximum delay period — enw_filter_delay","text":"","code":"obs <- enw_example(\"preprocessed\")$obs[[1]] enw_filter_delay(obs, max_delay = 2) #>      reference_date .group report_date max_confirm location age_group confirm #>              <IDat>  <num>      <IDat>       <int>   <fctr>    <fctr>   <int> #>   1:           <NA>      1  2021-07-14           0       DE       00+       0 #>   2:           <NA>      1  2021-07-15           0       DE       00+       0 #>   3:           <NA>      1  2021-07-16           0       DE       00+       0 #>   4:           <NA>      1  2021-07-17           0       DE       00+       0 #>   5:           <NA>      1  2021-07-18           0       DE       00+       0 #>  ---                                                                          #> 115:     2021-08-20      1  2021-08-20         171       DE       00+      98 #> 116:     2021-08-20      1  2021-08-21         171       DE       00+     159 #> 117:     2021-08-21      1  2021-08-21         112       DE       00+      69 #> 118:     2021-08-21      1  2021-08-22         112       DE       00+     112 #> 119:     2021-08-22      1  2021-08-22          45       DE       00+      45 #>      cum_prop_reported delay #>                  <num> <num> #>   1:               NaN    NA #>   2:               NaN    NA #>   3:               NaN    NA #>   4:               NaN    NA #>   5:               NaN    NA #>  ---                         #> 115:         0.5730994     0 #> 116:         0.9298246     1 #> 117:         0.6160714     0 #> 118:         1.0000000     1 #> 119:         1.0000000     0"},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_reference_dates.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter by reference dates — enw_filter_reference_dates","title":"Filter by reference dates — enw_filter_reference_dates","text":"helper function allows users filter datasets reference date. useful, example, evaluating nowcast performance fully observed data. Users may wish combine function enw_filter_report_dates(). Note definition assumed report dates must equal greater corresponding reference date (.e report happen event reported occurs). means function also filter report dates earlier corresponding reference date.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_reference_dates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter by reference dates — enw_filter_reference_dates","text":"","code":"enw_filter_reference_dates(   obs,   earliest_date,   include_days,   latest_date,   remove_days )"},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_reference_dates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter by reference dates — enw_filter_reference_dates","text":"obs data.frame; must report_date reference_date columns. earliest_date earliest reference date include data set include_days earliest_date given, number reference dates include, ending latest reference date included (determined latest_date remove_days). example, include_days = 10 returns exactly 10 reference dates. latest_date Date, latest reference date include returned dataset. remove_days Integer, latest_date given, number reference dates remove, starting latest date included.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_reference_dates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter by reference dates — enw_filter_reference_dates","text":"data.table filtered report date","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_reference_dates.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Filter by reference dates — enw_filter_reference_dates","text":"include_days parameter filters include exactly specified number recent reference dates. example, latest reference date 2021-10-20 include_days = 10, filtered data contain reference dates 2021-10-11 2021-10-20 (10 days inclusive).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_reference_dates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter by reference dates — enw_filter_reference_dates","text":"","code":"# Filter by date enw_filter_reference_dates(   germany_covid19_hosp,   earliest_date = \"2021-09-01\",   latest_date = \"2021-10-01\" ) #>         reference_date location age_group confirm report_date #>                 <IDat>   <fctr>    <fctr>   <int>      <IDat> #>      1:     2021-09-01       DE       00+     124  2021-09-01 #>      2:     2021-09-02       DE       00+      94  2021-09-02 #>      3:     2021-09-03       DE       00+     130  2021-09-03 #>      4:     2021-09-04       DE       00+      82  2021-09-04 #>      5:     2021-09-05       DE       00+      42  2021-09-05 #>     ---                                                       #> 129111:     2021-09-01    DE-TH     05-14       0  2021-10-20 #> 129112:     2021-09-01    DE-TH     15-34       0  2021-10-20 #> 129113:     2021-09-01    DE-TH     35-59       1  2021-10-20 #> 129114:     2021-09-01    DE-TH     60-79       2  2021-10-20 #> 129115:     2021-09-01    DE-TH       80+       2  2021-10-20 # # Filter by days enw_filter_reference_dates(   germany_covid19_hosp,   include_days = 10, remove_days = 10 ) #>        reference_date location age_group confirm report_date #>                <IDat>   <fctr>    <fctr>   <int>      <IDat> #>     1:     2021-10-01       DE       00+     105  2021-10-01 #>     2:     2021-10-02       DE       00+      97  2021-10-02 #>     3:     2021-10-03       DE       00+      41  2021-10-03 #>     4:     2021-10-04       DE       00+      23  2021-10-04 #>     5:     2021-10-05       DE       00+     120  2021-10-05 #>    ---                                                       #> 18441:     2021-10-01    DE-TH     05-14       0  2021-10-20 #> 18442:     2021-10-01    DE-TH     15-34       1  2021-10-20 #> 18443:     2021-10-01    DE-TH     35-59       3  2021-10-20 #> 18444:     2021-10-01    DE-TH     60-79       3  2021-10-20 #> 18445:     2021-10-01    DE-TH       80+       2  2021-10-20"},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_report_dates.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter by report dates — enw_filter_report_dates","title":"Filter by report dates — enw_filter_report_dates","text":"helper function allows users create truncated data sets past time points given larger data set. useful evaluating nowcast performance fully observed data. Users may wish combine function enw_filter_reference_dates().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_report_dates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter by report dates — enw_filter_report_dates","text":"","code":"enw_filter_report_dates(obs, latest_date, remove_days)"},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_report_dates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter by report dates — enw_filter_report_dates","text":"obs data.frame; must report_date reference_date columns. latest_date Date, latest report date include returned dataset. remove_days Integer, latest_date given, number report dates remove, starting latest date included.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_report_dates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter by report dates — enw_filter_report_dates","text":"data.table  filtered report date","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_filter_report_dates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter by report dates — enw_filter_report_dates","text":"","code":"# Filter by date enw_filter_report_dates(germany_covid19_hosp, latest_date = \"2021-09-01\") #>          reference_date location age_group confirm report_date #>                  <IDat>   <fctr>    <fctr>   <int>      <IDat> #>       1:     2021-04-06       DE       00+     149  2021-04-06 #>       2:     2021-04-07       DE       00+     312  2021-04-07 #>       3:     2021-04-08       DE       00+     424  2021-04-08 #>       4:     2021-04-09       DE       00+     288  2021-04-09 #>       5:     2021-04-10       DE       00+     273  2021-04-10 #>      ---                                                       #> 1058739:     2021-06-08    DE-TH       80+       4  2021-08-28 #> 1058740:     2021-06-09    DE-TH       80+       4  2021-08-29 #> 1058741:     2021-06-10    DE-TH       80+       1  2021-08-30 #> 1058742:     2021-06-11    DE-TH       80+       0  2021-08-31 #> 1058743:     2021-06-12    DE-TH       80+       2  2021-09-01  # Filter by days enw_filter_report_dates(germany_covid19_hosp, remove_days = 10) #>          reference_date location age_group confirm report_date #>                  <IDat>   <fctr>    <fctr>   <int>      <IDat> #>       1:     2021-04-06       DE       00+     149  2021-04-06 #>       2:     2021-04-07       DE       00+     312  2021-04-07 #>       3:     2021-04-08       DE       00+     424  2021-04-08 #>       4:     2021-04-09       DE       00+     288  2021-04-09 #>       5:     2021-04-10       DE       00+     273  2021-04-10 #>      ---                                                       #> 1439301:     2021-07-17    DE-TH       80+       1  2021-10-06 #> 1439302:     2021-07-18    DE-TH       80+       0  2021-10-07 #> 1439303:     2021-07-19    DE-TH       80+       0  2021-10-08 #> 1439304:     2021-07-20    DE-TH       80+       0  2021-10-09 #> 1439305:     2021-07-21    DE-TH       80+       0  2021-10-10"},{"path":"https://package.epinowcast.org/dev/reference/enw_fit_opts.html","id":null,"dir":"Reference","previous_headings":"","what":"Format model fitting options for use with stan — enw_fit_opts","title":"Format model fitting options for use with stan — enw_fit_opts","text":"Format model fitting options use stan","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_fit_opts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format model fitting options for use with stan — enw_fit_opts","text":"","code":"enw_fit_opts(   sampler = epinowcast::enw_sample,   nowcast = TRUE,   pp = FALSE,   likelihood = TRUE,   likelihood_aggregation = c(\"snapshots\", \"groups\"),   threads_per_chain = 1L,   debug = FALSE,   output_loglik = FALSE,   sparse_design = FALSE,   ... )"},{"path":"https://package.epinowcast.org/dev/reference/enw_fit_opts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format model fitting options for use with stan — enw_fit_opts","text":"sampler function creates object used extract posterior samples specified model. default enw_sample() makes use cmdstanr::sample(). nowcast Logical, defaults TRUE. nowcast made using posterior predictions unobserved future reported notifications. pp Logical, defaults FALSE. posterior predictions made observed data. Useful evaluating performance model. likelihood Logical, defaults TRUE. likelihood included model likelihood_aggregation Character string, aggregation stratify likelihood threads_per_chain greater 1; enforced base::match.arg(). Currently supported options: \"snapshots\" aggregates report dates groups (.e lowest level observations reported ), \"groups\" aggregates across user defined groups. Note model modules override setting depending model requirements. example, enw_missing() module model forces \"groups\" option. Generally, Users typically want default \"snapshots\" aggregation. threads_per_chain Integer, defaults 1. number threads use within MCMC chain. greater 1 components likelihood calculated parallel within chain. debug Logical, defaults FALSE. within model debug information returned. output_loglik Logical, defaults FALSE. log-likelihood output. Disabling speed fitting evaluating model fit required. sparse_design Logical, defaults FALSE. sparse design matrices used design matrices. reduces memory requirements may reduce computation time fitting models sparse design matrices (90% zeros). ... Additional arguments pass fitting function used epinowcast(). default enw_sample() cmdstanr options used.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_fit_opts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format model fitting options for use with stan — enw_fit_opts","text":"list containing specified sampler function, data list specifying fitting options use, additional arguments pass sampler function called.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_fit_opts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format model fitting options for use with stan — enw_fit_opts","text":"","code":"# Default options along with settings to pass to enw_sample enw_fit_opts(iter_sampling = 1000, iter_warmup = 1000) #> $sampler #> function (data, model = epinowcast::enw_model(), init = NULL,  #>     init_method = c(\"prior\", \"pathfinder\"), init_method_args = list(),  #>     diagnostics = TRUE, ...)  #> { #>     init_method <- rlang::arg_match(init_method) #>     updated_inits <- update_inits(data, model, init, init_method,  #>         init_method_args, ...) #>     cli::cli_alert_info(\"Fitting the model using NUTS\") #>     fit <- model$sample(data = data, init = updated_inits$init,  #>         ...) #>     out <- data.table(fit = list(fit), data = list(data), fit_args = list(list(...)),  #>         init_method_output = list(updated_inits$method_output)) #>     if (diagnostics) { #>         fit <- out$fit[[1]] #>         diag <- fit$sampler_diagnostics(format = \"df\") #>         diagnostics <- data.table(samples = nrow(diag), max_rhat = round(max(fit$summary(variables = NULL,  #>             posterior::rhat, .args = list(na.rm = TRUE))$`posterior::rhat`,  #>             na.rm = TRUE), 2), divergent_transitions = sum(diag$divergent__),  #>             per_divergent_transitions = sum(diag$divergent__)/nrow(diag),  #>             max_treedepth = max(diag$treedepth__)) #>         diagnostics[, `:=`(no_at_max_treedepth, sum(diag$treedepth__ ==  #>             max_treedepth))] #>         diagnostics[, `:=`(per_at_max_treedepth, no_at_max_treedepth/nrow(diag))] #>         out <- cbind(out, diagnostics) #>         timing <- round(fit$time()$total, 1) #>         out[, `:=`(run_time, timing)] #>     } #>     out[] #> } #> <bytecode: 0x55d51080bf50> #> <environment: namespace:epinowcast> #>  #> $data #> $data$debug #> [1] 0 #>  #> $data$likelihood #> [1] 1 #>  #> $data$likelihood_aggregation #> [1] 0 #>  #> $data$parallelise_likelihood #> [1] 0 #>  #> $data$pp #> [1] 0 #>  #> $data$cast #> [1] 1 #>  #> $data$ologlik #> [1] 0 #>  #> $data$sparse_design #> [1] 0 #>  #>  #> $args #> $args$threads_per_chain #> [1] 1 #>  #> $args$iter_sampling #> [1] 1000 #>  #> $args$iter_warmup #> [1] 1000 #>  #>"},{"path":"https://package.epinowcast.org/dev/reference/enw_flag_observed_observations.html","id":null,"dir":"Reference","previous_headings":"","what":"Flag observed observations — enw_flag_observed_observations","title":"Flag observed observations — enw_flag_observed_observations","text":"Flags observations based 'confirm' column. '.observed' column exist, created. Observations flagged observed (TRUE) 'confirm' NA.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_flag_observed_observations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Flag observed observations — enw_flag_observed_observations","text":"","code":"enw_flag_observed_observations(obs, copy = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_flag_observed_observations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Flag observed observations — enw_flag_observed_observations","text":"obs data.frame least confirm column. copy logical; TRUE (default) creates copy; otherwise, modifies obs place.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_flag_observed_observations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Flag observed observations — enw_flag_observed_observations","text":"data.table additional column '.observed' indicating observed observations.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_flag_observed_observations.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Flag observed observations — enw_flag_observed_observations","text":"","code":"dt <- data.frame(id = 1:3, confirm = c(NA, 1, 2)) enw_flag_observed_observations(dt) #>       id confirm .observed #>    <int>   <num>    <lgcl> #> 1:     1      NA     FALSE #> 2:     2       1      TRUE #> 3:     3       2      TRUE"},{"path":"https://package.epinowcast.org/dev/reference/enw_formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Define a model using a formula interface — enw_formula","title":"Define a model using a formula interface — enw_formula","text":"function allows models defined using flexible formula interface supports fixed effects, random effects (using lme4 syntax), random walks. formula syntax builds standard R formula notation extends lme4 style random effects custom random walk terms. Users familiar mixed models lme4 brms recognise syntax. Note returned fixed effects design matrix sparse index supplied required link observations appropriate design matrix row.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_formula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define a model using a formula interface — enw_formula","text":"","code":"enw_formula(formula, data, sparse = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define a model using a formula interface — enw_formula","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function. See Details section comprehensive explanation supported syntax. data data.frame observations. must include variables used supplied formula. sparse Logical, defaults  TRUE. fixed effects design matrix sparely defined.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define a model using a formula interface — enw_formula","text":"list containing following: formula: user supplied formula parsed_formula: formula parsed parse_formula() expanded_formula: flattened version formula user supplied terms terms added user supplied complex model components. fixed:  list containing fixed effect formula, sparse design matrix, index linking design matrix observations. random: list containing random effect formula, sparse design matrix, index linking design matrix random effects.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_formula.html","id":"formula-syntax-overview","dir":"Reference","previous_headings":"","what":"Formula syntax overview","title":"Define a model using a formula interface — enw_formula","text":"formula interface supports three types model components: Fixed effects: Standard R formula syntax used stats::lm() similar functions. example: ~ 1: intercept ~ age_group: intercept plus categorical predictor ~ age_group + location: multiple predictors ~ 0 + age_group: intercept (contrasts) Random effects: Uses lme4 syntax vertical bar notation. Random effects allow parameters vary group whilst sharing information across groups partial pooling. Note epinowcast assumes independent standard deviations random effects rather correlated random effects supported lme4. example: ~ 1 + (1 | location): random intercepts location ~ 1 + age_group + (1 | location): fixed age effect random location intercepts ~ (age_group | location): random slopes age within location ~ (1 + week | location:month): random intercepts week effects location-month combination (using interaction create independent random effects per strata) Interactions (e.g., location:month) can used right-hand side vertical bar specify independent random effects combination interacting variables. See lme4 package documentation details random effects syntax. Random walks: Uses rw() helper function specify time-varying effects evolve smoothly time. example: ~ rw(week): random walk weeks ~ rw(week, location): independent random walks location ~ rw(week, location, type = \"dependent\"): random walks shared variance across locations three types effects can combined single formula, example: ~ 1 + age_group + (1 | location) + rw(week, location) specifies fixed age effects, random location intercepts, location-specific random walks time.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_formula.html","id":"turning-off-model-components","dir":"Reference","previous_headings":"","what":"Turning off model components","title":"Define a model using a formula interface — enw_formula","text":"epinowcast model specification functions (enw_reference(), enw_report(), enw_expectation()), formula arguments can set ~0 disable model component entirely. package-specific convention. Note formula specified ~0, typically converted internally ~1 (intercept ) ensure valid model structure, component flagged inactive.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_formula.html","id":"how-formulas-map-to-the-model","dir":"Reference","previous_headings":"","what":"How formulas map to the model","title":"Define a model using a formula interface — enw_formula","text":"formula specify controls covariates effects enter linear predictor model. instance, reference date model (enw_reference()), formula determines reporting delay parameters vary covariates groups. formula converted design matrices: fixed effects matrix (may sparse computational efficiency) random effects matrix defines hierarchical structure.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_formula.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Define a model using a formula interface — enw_formula","text":"users new formula syntax R: Fixed effects: See ?formula \"Statistical Models R\" chapter \"Introduction R\" URL: https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Statistical-models--R # nolint: line_length_linter Random effects: See lme4 package documentation vignettes. Mixed models: Bates et al. (2015) \"Fitting Linear Mixed-Effects Models Using lme4\". Journal Statistical Software, 67(1), 1-48. doi:10.18637/jss.v067.i01","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Define a model using a formula interface — enw_formula","text":"","code":"# Use meta data for references dates from the Germany COVID-19 # hospitalisation data. obs <- enw_filter_report_dates(   germany_covid19_hosp[location == \"DE\"],   remove_days = 40 ) obs <- enw_filter_reference_dates(obs, include_days = 40) pobs <- enw_preprocess_data(   obs, by = c(\"age_group\", \"location\"), max_delay = 20   ) data <- pobs$metareference[[1]]  # Intercept only enw_formula(~ 1, data) #> $formula #> [1] \"~1\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> NULL #>  #> $parsed_formula$rw #> character(0) #>  #>  #> $expanded_formula #> [1] \"~1\" #>  #> $fixed #> $fixed$formula #> [1] \"~1\" #>  #> $fixed$design #>   (Intercept) #> 1           1 #>  #> $fixed$index #>   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #>  [38] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #>  [75] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [112] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [149] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [186] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [223] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [260] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #>  #>  #> $random #> $random$formula #> [1] \"~1\" #>  #> $random$design #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $random$index #> integer(0) #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Fixed effect enw_formula(~ 1 + age_group, data) #> $formula #> [1] \"~1 + age_group\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\"         \"age_group\" #>  #> $parsed_formula$random #> NULL #>  #> $parsed_formula$rw #> character(0) #>  #>  #> $expanded_formula #> [1] \"~1 + age_group\" #>  #> $fixed #> $fixed$formula #> [1] \"~1 + age_group\" #>  #> $fixed$design #>     (Intercept) age_group00+ age_group05-14 age_group15-34 age_group35-59 #> 1             1            1              0              0              0 #> 41            1            0              0              0              0 #> 81            1            0              1              0              0 #> 121           1            0              0              1              0 #> 161           1            0              0              0              1 #> 201           1            0              0              0              0 #> 241           1            0              0              0              0 #>     age_group60-79 age_group80+ #> 1                0            0 #> 41               0            0 #> 81               0            0 #> 121              0            0 #> 161              0            0 #> 201              1            0 #> 241              0            1 #>  #> $fixed$index #>   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #>  [38] 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 #>  [75] 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 #> [112] 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 #> [149] 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 #> [186] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 #> [223] 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 #> [260] 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 #>  #>  #> $random #> $random$formula #> [1] \"~1\" #>  #> $random$design #>   (Intercept) #> 1           1 #> 2           1 #> 3           1 #> 4           1 #> 5           1 #> 6           1 #> attr(,\"assign\") #> [1] 0 #>  #> $random$index #> [1] 1 2 3 4 5 6 #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Random intercepts enw_formula(~ 1 + (1 | age_group), data) #> $formula #> [1] \"~1 + (1 | age_group)\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> $parsed_formula$random[[1]] #> 1 | age_group #>  #>  #> $parsed_formula$rw #> character(0) #>  #>  #> $expanded_formula #> [1] \"~1 + age_group\" #>  #> $fixed #> $fixed$formula #> [1] \"~1 + age_group\" #>  #> $fixed$design #>     (Intercept) age_group00-04 age_group00+ age_group05-14 age_group15-34 #> 1             1              0            1              0              0 #> 41            1              1            0              0              0 #> 81            1              0            0              1              0 #> 121           1              0            0              0              1 #> 161           1              0            0              0              0 #> 201           1              0            0              0              0 #> 241           1              0            0              0              0 #>     age_group35-59 age_group60-79 age_group80+ #> 1                0              0            0 #> 41               0              0            0 #> 81               0              0            0 #> 121              0              0            0 #> 161              1              0            0 #> 201              0              1            0 #> 241              0              0            1 #>  #> $fixed$index #>   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #>  [38] 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 #>  [75] 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 #> [112] 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 #> [149] 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 #> [186] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 #> [223] 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 #> [260] 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 #>  #>  #> $random #> $random$formula #> [1] \"~0 + fixed + age_group\" #>  #> $random$design #>   fixed age_group #> 1     0         1 #> 2     0         1 #> 3     0         1 #> 4     0         1 #> 5     0         1 #> 6     0         1 #> 7     0         1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $random$index #> [1] 1 2 3 4 5 6 7 #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Random walk enw_formula(~ 1 + rw(week), data) #> $formula #> [1] \"~1 + rw(week)\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> NULL #>  #> $parsed_formula$rw #> [1] \"rw(week)\" #>  #>  #> $expanded_formula #> [1] \"~1 + cweek1 + cweek2 + cweek3 + cweek4 + cweek5\" #>  #> $fixed #> $fixed$formula #> [1] \"~1 + cweek1 + cweek2 + cweek3 + cweek4 + cweek5\" #>  #> $fixed$design #>    (Intercept) cweek1 cweek2 cweek3 cweek4 cweek5 #> 1            1      0      0      0      0      0 #> 8            1      1      0      0      0      0 #> 15           1      1      1      0      0      0 #> 22           1      1      1      1      0      0 #> 29           1      1      1      1      1      0 #> 36           1      1      1      1      1      1 #>  #> $fixed$index #>   [1] 1 1 1 1 1 1 1 2 2 2 2 2 2 2 3 3 3 3 3 3 3 4 4 4 4 4 4 4 5 5 5 5 5 5 5 6 6 #>  [38] 6 6 6 1 1 1 1 1 1 1 2 2 2 2 2 2 2 3 3 3 3 3 3 3 4 4 4 4 4 4 4 5 5 5 5 5 5 #>  [75] 5 6 6 6 6 6 1 1 1 1 1 1 1 2 2 2 2 2 2 2 3 3 3 3 3 3 3 4 4 4 4 4 4 4 5 5 5 #> [112] 5 5 5 5 6 6 6 6 6 1 1 1 1 1 1 1 2 2 2 2 2 2 2 3 3 3 3 3 3 3 4 4 4 4 4 4 4 #> [149] 5 5 5 5 5 5 5 6 6 6 6 6 1 1 1 1 1 1 1 2 2 2 2 2 2 2 3 3 3 3 3 3 3 4 4 4 4 #> [186] 4 4 4 5 5 5 5 5 5 5 6 6 6 6 6 1 1 1 1 1 1 1 2 2 2 2 2 2 2 3 3 3 3 3 3 3 4 #> [223] 4 4 4 4 4 4 5 5 5 5 5 5 5 6 6 6 6 6 1 1 1 1 1 1 1 2 2 2 2 2 2 2 3 3 3 3 3 #> [260] 3 3 4 4 4 4 4 4 4 5 5 5 5 5 5 5 6 6 6 6 6 #>  #>  #> $random #> $random$formula #> [1] \"~0 + fixed + rw__week\" #>  #> $random$design #>   fixed rw__week #> 1     0        1 #> 2     0        1 #> 3     0        1 #> 4     0        1 #> 5     0        1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $random$index #> [1] 1 2 3 4 5 #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Model with a random effect for age group and a random walk enw_formula(~ 1 + (1 | age_group) + rw(week), data) #> $formula #> [1] \"~1 + (1 | age_group) + rw(week)\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> $parsed_formula$random[[1]] #> 1 | age_group #>  #>  #> $parsed_formula$rw #> [1] \"rw(week)\" #>  #>  #> $expanded_formula #> [1] \"~1 + age_group + cweek1 + cweek2 + cweek3 + cweek4 + cweek5\" #>  #> $fixed #> $fixed$formula #> [1] \"~1 + age_group + cweek1 + cweek2 + cweek3 + cweek4 + cweek5\" #>  #> $fixed$design #>     (Intercept) age_group00-04 age_group00+ age_group05-14 age_group15-34 #> 1             1              0            1              0              0 #> 8             1              0            1              0              0 #> 15            1              0            1              0              0 #> 22            1              0            1              0              0 #> 29            1              0            1              0              0 #> 36            1              0            1              0              0 #> 41            1              1            0              0              0 #> 48            1              1            0              0              0 #> 55            1              1            0              0              0 #> 62            1              1            0              0              0 #> 69            1              1            0              0              0 #> 76            1              1            0              0              0 #> 81            1              0            0              1              0 #> 88            1              0            0              1              0 #> 95            1              0            0              1              0 #> 102           1              0            0              1              0 #> 109           1              0            0              1              0 #> 116           1              0            0              1              0 #> 121           1              0            0              0              1 #> 128           1              0            0              0              1 #> 135           1              0            0              0              1 #> 142           1              0            0              0              1 #> 149           1              0            0              0              1 #> 156           1              0            0              0              1 #> 161           1              0            0              0              0 #> 168           1              0            0              0              0 #> 175           1              0            0              0              0 #> 182           1              0            0              0              0 #> 189           1              0            0              0              0 #> 196           1              0            0              0              0 #> 201           1              0            0              0              0 #> 208           1              0            0              0              0 #> 215           1              0            0              0              0 #> 222           1              0            0              0              0 #> 229           1              0            0              0              0 #> 236           1              0            0              0              0 #> 241           1              0            0              0              0 #> 248           1              0            0              0              0 #> 255           1              0            0              0              0 #> 262           1              0            0              0              0 #> 269           1              0            0              0              0 #> 276           1              0            0              0              0 #>     age_group35-59 age_group60-79 age_group80+ cweek1 cweek2 cweek3 cweek4 #> 1                0              0            0      0      0      0      0 #> 8                0              0            0      1      0      0      0 #> 15               0              0            0      1      1      0      0 #> 22               0              0            0      1      1      1      0 #> 29               0              0            0      1      1      1      1 #> 36               0              0            0      1      1      1      1 #> 41               0              0            0      0      0      0      0 #> 48               0              0            0      1      0      0      0 #> 55               0              0            0      1      1      0      0 #> 62               0              0            0      1      1      1      0 #> 69               0              0            0      1      1      1      1 #> 76               0              0            0      1      1      1      1 #> 81               0              0            0      0      0      0      0 #> 88               0              0            0      1      0      0      0 #> 95               0              0            0      1      1      0      0 #> 102              0              0            0      1      1      1      0 #> 109              0              0            0      1      1      1      1 #> 116              0              0            0      1      1      1      1 #> 121              0              0            0      0      0      0      0 #> 128              0              0            0      1      0      0      0 #> 135              0              0            0      1      1      0      0 #> 142              0              0            0      1      1      1      0 #> 149              0              0            0      1      1      1      1 #> 156              0              0            0      1      1      1      1 #> 161              1              0            0      0      0      0      0 #> 168              1              0            0      1      0      0      0 #> 175              1              0            0      1      1      0      0 #> 182              1              0            0      1      1      1      0 #> 189              1              0            0      1      1      1      1 #> 196              1              0            0      1      1      1      1 #> 201              0              1            0      0      0      0      0 #> 208              0              1            0      1      0      0      0 #> 215              0              1            0      1      1      0      0 #> 222              0              1            0      1      1      1      0 #> 229              0              1            0      1      1      1      1 #> 236              0              1            0      1      1      1      1 #> 241              0              0            1      0      0      0      0 #> 248              0              0            1      1      0      0      0 #> 255              0              0            1      1      1      0      0 #> 262              0              0            1      1      1      1      0 #> 269              0              0            1      1      1      1      1 #> 276              0              0            1      1      1      1      1 #>     cweek5 #> 1        0 #> 8        0 #> 15       0 #> 22       0 #> 29       0 #> 36       1 #> 41       0 #> 48       0 #> 55       0 #> 62       0 #> 69       0 #> 76       1 #> 81       0 #> 88       0 #> 95       0 #> 102      0 #> 109      0 #> 116      1 #> 121      0 #> 128      0 #> 135      0 #> 142      0 #> 149      0 #> 156      1 #> 161      0 #> 168      0 #> 175      0 #> 182      0 #> 189      0 #> 196      1 #> 201      0 #> 208      0 #> 215      0 #> 222      0 #> 229      0 #> 236      1 #> 241      0 #> 248      0 #> 255      0 #> 262      0 #> 269      0 #> 276      1 #>  #> $fixed$index #>   [1]  1  1  1  1  1  1  1  2  2  2  2  2  2  2  3  3  3  3  3  3  3  4  4  4  4 #>  [26]  4  4  4  5  5  5  5  5  5  5  6  6  6  6  6  7  7  7  7  7  7  7  8  8  8 #>  [51]  8  8  8  8  9  9  9  9  9  9  9 10 10 10 10 10 10 10 11 11 11 11 11 11 11 #>  [76] 12 12 12 12 12 13 13 13 13 13 13 13 14 14 14 14 14 14 14 15 15 15 15 15 15 #> [101] 15 16 16 16 16 16 16 16 17 17 17 17 17 17 17 18 18 18 18 18 19 19 19 19 19 #> [126] 19 19 20 20 20 20 20 20 20 21 21 21 21 21 21 21 22 22 22 22 22 22 22 23 23 #> [151] 23 23 23 23 23 24 24 24 24 24 25 25 25 25 25 25 25 26 26 26 26 26 26 26 27 #> [176] 27 27 27 27 27 27 28 28 28 28 28 28 28 29 29 29 29 29 29 29 30 30 30 30 30 #> [201] 31 31 31 31 31 31 31 32 32 32 32 32 32 32 33 33 33 33 33 33 33 34 34 34 34 #> [226] 34 34 34 35 35 35 35 35 35 35 36 36 36 36 36 37 37 37 37 37 37 37 38 38 38 #> [251] 38 38 38 38 39 39 39 39 39 39 39 40 40 40 40 40 40 40 41 41 41 41 41 41 41 #> [276] 42 42 42 42 42 #>  #>  #> $random #> $random$formula #> [1] \"~0 + fixed + age_group + rw__week\" #>  #> $random$design #>    fixed age_group rw__week #> 1      0         1        0 #> 2      0         1        0 #> 3      0         1        0 #> 4      0         1        0 #> 5      0         1        0 #> 6      0         1        0 #> 7      0         1        0 #> 8      0         0        1 #> 9      0         0        1 #> 10     0         0        1 #> 11     0         0        1 #> 12     0         0        1 #> attr(,\"assign\") #> [1] 1 2 3 #>  #> $random$index #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Model defined without a sparse fixed effects design matrix enw_formula(~1, data[1:20, ], sparse = FALSE) #> $formula #> [1] \"~1\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> NULL #>  #> $parsed_formula$rw #> character(0) #>  #>  #> $expanded_formula #> [1] \"~1\" #>  #> $fixed #> $fixed$formula #> [1] \"~1\" #>  #> $fixed$design #>    (Intercept) #> 1            1 #> 2            1 #> 3            1 #> 4            1 #> 5            1 #> 6            1 #> 7            1 #> 8            1 #> 9            1 #> 10           1 #> 11           1 #> 12           1 #> 13           1 #> 14           1 #> 15           1 #> 16           1 #> 17           1 #> 18           1 #> 19           1 #> 20           1 #> attr(,\"assign\") #> [1] 0 #>  #> $fixed$index #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 #>  #>  #> $random #> $random$formula #> [1] \"~1\" #>  #> $random$design #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $random$index #> integer(0) #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\"         # Model using an interaction in the right hand side of a random effect # to specify an independent random effect per strata. enw_formula(~ (1 + day | week:month), data = data) #> $formula #> [1] \"~(1 + day | week:month)\" #>  #> $parsed_formula #> $parsed_formula$fixed #> [1] \"1\" #>  #> $parsed_formula$random #> $parsed_formula$random[[1]] #> 1 + day | week:month #>  #>  #> $parsed_formula$rw #> character(0) #>  #>  #> $expanded_formula #> [1] \"~1 + week:month + day:week:month\" #>  #> $fixed #> $fixed$formula #> [1] \"~1 + week:month + day:week:month\" #>  #> $fixed$design #>    (Intercept) week0:month0 week1:month0 week2:month0 week3:month0 week4:month0 #> 1            1            1            0            0            0            0 #> 2            1            1            0            0            0            0 #> 3            1            1            0            0            0            0 #> 4            1            1            0            0            0            0 #> 5            1            1            0            0            0            0 #> 6            1            1            0            0            0            0 #> 7            1            1            0            0            0            0 #> 8            1            0            1            0            0            0 #> 9            1            0            1            0            0            0 #> 10           1            0            1            0            0            0 #> 11           1            0            1            0            0            0 #> 12           1            0            1            0            0            0 #> 13           1            0            1            0            0            0 #> 14           1            0            1            0            0            0 #> 15           1            0            0            1            0            0 #> 16           1            0            0            1            0            0 #> 17           1            0            0            1            0            0 #> 18           1            0            0            1            0            0 #> 19           1            0            0            1            0            0 #> 20           1            0            0            1            0            0 #> 21           1            0            0            1            0            0 #> 22           1            0            0            0            1            0 #> 23           1            0            0            0            1            0 #> 24           1            0            0            0            1            0 #> 25           1            0            0            0            1            0 #> 26           1            0            0            0            1            0 #> 27           1            0            0            0            1            0 #> 28           1            0            0            0            1            0 #> 29           1            0            0            0            0            1 #> 30           1            0            0            0            0            1 #> 31           1            0            0            0            0            0 #> 32           1            0            0            0            0            0 #> 33           1            0            0            0            0            0 #> 34           1            0            0            0            0            0 #> 35           1            0            0            0            0            0 #> 36           1            0            0            0            0            0 #> 37           1            0            0            0            0            0 #> 38           1            0            0            0            0            0 #> 39           1            0            0            0            0            0 #> 40           1            0            0            0            0            0 #>    week5:month0 week0:month1 week1:month1 week2:month1 week3:month1 #> 1             0            0            0            0            0 #> 2             0            0            0            0            0 #> 3             0            0            0            0            0 #> 4             0            0            0            0            0 #> 5             0            0            0            0            0 #> 6             0            0            0            0            0 #> 7             0            0            0            0            0 #> 8             0            0            0            0            0 #> 9             0            0            0            0            0 #> 10            0            0            0            0            0 #> 11            0            0            0            0            0 #> 12            0            0            0            0            0 #> 13            0            0            0            0            0 #> 14            0            0            0            0            0 #> 15            0            0            0            0            0 #> 16            0            0            0            0            0 #> 17            0            0            0            0            0 #> 18            0            0            0            0            0 #> 19            0            0            0            0            0 #> 20            0            0            0            0            0 #> 21            0            0            0            0            0 #> 22            0            0            0            0            0 #> 23            0            0            0            0            0 #> 24            0            0            0            0            0 #> 25            0            0            0            0            0 #> 26            0            0            0            0            0 #> 27            0            0            0            0            0 #> 28            0            0            0            0            0 #> 29            0            0            0            0            0 #> 30            0            0            0            0            0 #> 31            0            0            0            0            0 #> 32            0            0            0            0            0 #> 33            0            0            0            0            0 #> 34            0            0            0            0            0 #> 35            0            0            0            0            0 #> 36            0            0            0            0            0 #> 37            0            0            0            0            0 #> 38            0            0            0            0            0 #> 39            0            0            0            0            0 #> 40            0            0            0            0            0 #>    week4:month1 week5:month1 week0:month0:day week1:month0:day week2:month0:day #> 1             0            0                0                0                0 #> 2             0            0                1                0                0 #> 3             0            0                2                0                0 #> 4             0            0                3                0                0 #> 5             0            0                4                0                0 #> 6             0            0                5                0                0 #> 7             0            0                6                0                0 #> 8             0            0                0                7                0 #> 9             0            0                0                8                0 #> 10            0            0                0                9                0 #> 11            0            0                0               10                0 #> 12            0            0                0               11                0 #> 13            0            0                0               12                0 #> 14            0            0                0               13                0 #> 15            0            0                0                0               14 #> 16            0            0                0                0               15 #> 17            0            0                0                0               16 #> 18            0            0                0                0               17 #> 19            0            0                0                0               18 #> 20            0            0                0                0               19 #> 21            0            0                0                0               20 #> 22            0            0                0                0                0 #> 23            0            0                0                0                0 #> 24            0            0                0                0                0 #> 25            0            0                0                0                0 #> 26            0            0                0                0                0 #> 27            0            0                0                0                0 #> 28            0            0                0                0                0 #> 29            0            0                0                0                0 #> 30            0            0                0                0                0 #> 31            1            0                0                0                0 #> 32            1            0                0                0                0 #> 33            1            0                0                0                0 #> 34            1            0                0                0                0 #> 35            1            0                0                0                0 #> 36            0            1                0                0                0 #> 37            0            1                0                0                0 #> 38            0            1                0                0                0 #> 39            0            1                0                0                0 #> 40            0            1                0                0                0 #>    week3:month0:day week4:month0:day week5:month0:day week0:month1:day #> 1                 0                0                0                0 #> 2                 0                0                0                0 #> 3                 0                0                0                0 #> 4                 0                0                0                0 #> 5                 0                0                0                0 #> 6                 0                0                0                0 #> 7                 0                0                0                0 #> 8                 0                0                0                0 #> 9                 0                0                0                0 #> 10                0                0                0                0 #> 11                0                0                0                0 #> 12                0                0                0                0 #> 13                0                0                0                0 #> 14                0                0                0                0 #> 15                0                0                0                0 #> 16                0                0                0                0 #> 17                0                0                0                0 #> 18                0                0                0                0 #> 19                0                0                0                0 #> 20                0                0                0                0 #> 21                0                0                0                0 #> 22               21                0                0                0 #> 23               22                0                0                0 #> 24               23                0                0                0 #> 25               24                0                0                0 #> 26               25                0                0                0 #> 27               26                0                0                0 #> 28               27                0                0                0 #> 29                0               28                0                0 #> 30                0               29                0                0 #> 31                0                0                0                0 #> 32                0                0                0                0 #> 33                0                0                0                0 #> 34                0                0                0                0 #> 35                0                0                0                0 #> 36                0                0                0                0 #> 37                0                0                0                0 #> 38                0                0                0                0 #> 39                0                0                0                0 #> 40                0                0                0                0 #>    week1:month1:day week2:month1:day week3:month1:day week4:month1:day #> 1                 0                0                0                0 #> 2                 0                0                0                0 #> 3                 0                0                0                0 #> 4                 0                0                0                0 #> 5                 0                0                0                0 #> 6                 0                0                0                0 #> 7                 0                0                0                0 #> 8                 0                0                0                0 #> 9                 0                0                0                0 #> 10                0                0                0                0 #> 11                0                0                0                0 #> 12                0                0                0                0 #> 13                0                0                0                0 #> 14                0                0                0                0 #> 15                0                0                0                0 #> 16                0                0                0                0 #> 17                0                0                0                0 #> 18                0                0                0                0 #> 19                0                0                0                0 #> 20                0                0                0                0 #> 21                0                0                0                0 #> 22                0                0                0                0 #> 23                0                0                0                0 #> 24                0                0                0                0 #> 25                0                0                0                0 #> 26                0                0                0                0 #> 27                0                0                0                0 #> 28                0                0                0                0 #> 29                0                0                0                0 #> 30                0                0                0                0 #> 31                0                0                0               30 #> 32                0                0                0               31 #> 33                0                0                0               32 #> 34                0                0                0               33 #> 35                0                0                0               34 #> 36                0                0                0                0 #> 37                0                0                0                0 #> 38                0                0                0                0 #> 39                0                0                0                0 #> 40                0                0                0                0 #>    week5:month1:day #> 1                 0 #> 2                 0 #> 3                 0 #> 4                 0 #> 5                 0 #> 6                 0 #> 7                 0 #> 8                 0 #> 9                 0 #> 10                0 #> 11                0 #> 12                0 #> 13                0 #> 14                0 #> 15                0 #> 16                0 #> 17                0 #> 18                0 #> 19                0 #> 20                0 #> 21                0 #> 22                0 #> 23                0 #> 24                0 #> 25                0 #> 26                0 #> 27                0 #> 28                0 #> 29                0 #> 30                0 #> 31                0 #> 32                0 #> 33                0 #> 34                0 #> 35                0 #> 36               35 #> 37               36 #> 38               37 #> 39               38 #> 40               39 #>  #> $fixed$index #>   [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #>  [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  1  2  3  4  5  6  7  8  9 10 #>  [51] 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #>  [76] 36 37 38 39 40  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 #> [101] 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  1  2  3  4  5 #> [126]  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #> [151] 31 32 33 34 35 36 37 38 39 40  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 #> [176] 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #> [201]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [226] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  1  2  3  4  5  6  7  8  9 10 #> [251] 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #> [276] 36 37 38 39 40 #>  #>  #> $random #> $random$formula #> [1] \"~0 + fixed + week__month0 + week__month1 + day__week__month0 + day__week__month1\" #>  #> $random$design #>    fixed week__month0 week__month1 day__week__month0 day__week__month1 #> 1      0            1            0                 0                 0 #> 2      0            1            0                 0                 0 #> 3      0            1            0                 0                 0 #> 4      0            1            0                 0                 0 #> 5      0            1            0                 0                 0 #> 6      0            1            0                 0                 0 #> 7      0            0            1                 0                 0 #> 8      0            0            1                 0                 0 #> 9      0            0            1                 0                 0 #> 10     0            0            1                 0                 0 #> 11     0            0            1                 0                 0 #> 12     0            0            1                 0                 0 #> 13     0            0            0                 1                 0 #> 14     0            0            0                 1                 0 #> 15     0            0            0                 1                 0 #> 16     0            0            0                 1                 0 #> 17     0            0            0                 1                 0 #> 18     0            0            0                 1                 0 #> 19     0            0            0                 0                 1 #> 20     0            0            0                 0                 1 #> 21     0            0            0                 0                 1 #> 22     0            0            0                 0                 1 #> 23     0            0            0                 0                 1 #> 24     0            0            0                 0                 1 #> attr(,\"assign\") #> [1] 1 2 3 4 5 #>  #> $random$index #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #>  #>  #> attr(,\"class\") #> [1] \"enw_formula\" \"list\""},{"path":"https://package.epinowcast.org/dev/reference/enw_formula_as_data_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Format formula data for use with stan — enw_formula_as_data_list","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"Format formula data use stan","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_formula_as_data_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"","code":"enw_formula_as_data_list(formula, prefix, drop_intercept = FALSE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_formula_as_data_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"formula output enw_formula(). prefix character string indicating variable label use prefix. drop_intercept Logical, defaults FALSE. intercept included fixed effect excluded. used internally model modules intercept must present/absent.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_formula_as_data_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"list defining model formula. includes: prefix_fintercept: intercept present fixed effects design matrix. prefix_fdesign: fixed effects design matrix prefix_fnrow: number rows fixed design matrix prefix_findex: index linking design matrix rows  observations prefix_fnindex: length index prefix_fncol: number columns (.e effects) fixed effect design matrix (minus 1 intercept present). prefix_rdesign: random effects design matrix prefix_rncol: number columns (.e random effects) random effect design matrix (minus 1 intercept dropped).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_formula_as_data_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Format formula data for use with stan — enw_formula_as_data_list","text":"","code":"f <- enw_formula(~ 1 + (1 | cyl), mtcars) enw_formula_as_data_list(f, \"mtcars\") #> $mtcars_fintercept #> [1] 1 #>  #> $mtcars_fnrow #> [1] 3 #>  #> $mtcars_findex #>  [1] 1 1 2 1 3 1 3 2 2 1 1 3 3 3 3 3 3 2 2 2 2 3 3 3 3 2 2 2 3 1 3 2 #>  #> $mtcars_fnindex #> [1] 32 #>  #> $mtcars_fncol #> [1] 3 #>  #> $mtcars_rncol #> [1] 1 #>  #> $mtcars_fdesign #>   cyl4 cyl6 cyl8 #> 1    0    1    0 #> 3    1    0    0 #> 5    0    0    1 #>  #> $mtcars_rdesign #>   fixed cyl #> 1     0   1 #> 2     0   1 #> 3     0   1 #> attr(,\"assign\") #> [1] 1 2 #>   # A missing formula produces the default list enw_formula_as_data_list(prefix = \"missing\") #> $missing_fintercept #> [1] 0 #>  #> $missing_fnrow #> [1] 0 #>  #> $missing_findex #> numeric(0) #>  #> $missing_fnindex #> [1] 0 #>  #> $missing_fncol #> [1] 0 #>  #> $missing_rncol #> [1] 0 #>  #> $missing_fdesign #> numeric(0) #>  #> $missing_rdesign #> numeric(0) #>"},{"path":"https://package.epinowcast.org/dev/reference/enw_get_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Retrieve Stan cache location — enw_get_cache","title":"Retrieve Stan cache location — enw_get_cache","text":"Retrieves user set cache location Stan models. path can set enw_cache_location function call. environmental variable available output tempdir() returned.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_get_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retrieve Stan cache location — enw_get_cache","text":"","code":"enw_get_cache()"},{"path":"https://package.epinowcast.org/dev/reference/enw_get_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retrieve Stan cache location — enw_get_cache","text":"string representing file path cache location","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_impute_na_observations.html","id":null,"dir":"Reference","previous_headings":"","what":"Impute NA observations — enw_impute_na_observations","title":"Impute NA observations — enw_impute_na_observations","text":"Imputes NA values 'confirm' column. NA values replaced last available observation 0.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_impute_na_observations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Impute NA observations — enw_impute_na_observations","text":"","code":"enw_impute_na_observations(obs, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_impute_na_observations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Impute NA observations — enw_impute_na_observations","text":"obs data.frame least 'confirm' 'reference_date' columns. character vector column names group . Defaults empty vector. copy logical; TRUE (default) creates copy; otherwise, modifies obs place.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_impute_na_observations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Impute NA observations — enw_impute_na_observations","text":"data.table imputed 'confirm' column NA values replaced zero.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_impute_na_observations.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Impute NA observations — enw_impute_na_observations","text":"","code":"dt <- data.frame(   id = 1:3, confirm = c(NA, 1, 2),   reference_date = as.Date(\"2021-01-01\") ) enw_impute_na_observations(dt) #> Key: <reference_date> #>       id confirm reference_date #>    <int>   <num>         <Date> #> 1:     1       0     2021-01-01 #> 2:     2       1     2021-01-01 #> 3:     3       2     2021-01-01"},{"path":"https://package.epinowcast.org/dev/reference/enw_incidence_to_linelist.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"function takes data.table aggregate counts something coercible data.table (data.frame) converts line list row represents case.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_incidence_to_linelist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"","code":"enw_incidence_to_linelist(   obs,   reference_date = \"reference_date\",   report_date = \"report_date\" )"},{"path":"https://package.epinowcast.org/dev/reference/enw_incidence_to_linelist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"obs object coercible data.table (data.frame) must new_confirm column. reference_date character string variable name use reference_date line list. default \"reference_date\". report_date character string variable name use report_date line list. default \"report_date\".","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_incidence_to_linelist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"data.table following variables: id, reference_date, report_date, variables obs object. Rows obs duplicated based new_confirm column. reference_date report_date may renamed reference_date report_date supplied.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_incidence_to_linelist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Aggregate Counts (Incidence) to a Line List — enw_incidence_to_linelist","text":"","code":"incidence <- enw_add_incidence(germany_covid19_hosp) incidence <- enw_filter_reference_dates(   incidence[location == \"DE\"], include_days = 10 ) enw_incidence_to_linelist(incidence, reference_date = \"onset_date\") #>           id onset_date location age_group report_date delay #>        <int>     <IDat>   <fctr>    <fctr>      <IDat> <int> #>     1:     1 2021-10-11       DE       00+  2021-10-11     0 #>     2:     2 2021-10-11       DE       00+  2021-10-11     0 #>     3:     3 2021-10-11       DE       00+  2021-10-11     0 #>     4:     4 2021-10-11       DE       00+  2021-10-11     0 #>     5:     5 2021-10-11       DE       00+  2021-10-11     0 #>    ---                                                       #> 16227: 16227 2021-10-20       DE       80+  2021-10-20     6 #> 16228: 16228 2021-10-20       DE       80+  2021-10-20     6 #> 16229: 16229 2021-10-20       DE       80+  2021-10-20     6 #> 16230: 16230 2021-10-20       DE       80+  2021-10-20     6 #> 16231: 16231 2021-10-20       DE       80+  2021-10-20     6"},{"path":"https://package.epinowcast.org/dev/reference/enw_latest_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter observations to the latest available reported — enw_latest_data","title":"Filter observations to the latest available reported — enw_latest_data","text":"Filter observations latest available reported data reference date. Note filtering maximum report date cases data may updated maximum number days.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_latest_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter observations to the latest available reported — enw_latest_data","text":"","code":"enw_latest_data(obs)"},{"path":"https://package.epinowcast.org/dev/reference/enw_latest_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter observations to the latest available reported — enw_latest_data","text":"obs data.frame; must report_date reference_date columns.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_latest_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter observations to the latest available reported — enw_latest_data","text":"data.table observations filtered latest available data reference date.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_latest_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Filter observations to the latest available reported — enw_latest_data","text":"","code":"# Filter for latest reported data enw_latest_data(germany_covid19_hosp) #>        reference_date location age_group confirm report_date #>                <IDat>   <fctr>    <fctr>   <int>      <IDat> #>     1:     2021-04-06       DE       00+     708  2021-06-26 #>     2:     2021-04-06       DE     00-04      11  2021-06-26 #>     3:     2021-04-06       DE     05-14       5  2021-06-26 #>     4:     2021-04-06       DE     15-34      75  2021-06-26 #>     5:     2021-04-06       DE     35-59     192  2021-06-26 #>    ---                                                       #> 23558:     2021-10-20    DE-TH     05-14       1  2021-10-20 #> 23559:     2021-10-20    DE-TH     15-34       2  2021-10-20 #> 23560:     2021-10-20    DE-TH     35-59       1  2021-10-20 #> 23561:     2021-10-20    DE-TH     60-79       5  2021-10-20 #> 23562:     2021-10-20    DE-TH       80+       5  2021-10-20"},{"path":"https://package.epinowcast.org/dev/reference/enw_linelist_to_incidence.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"function takes line list (.e. tabular data row represents case) aggregates count (new_confirm) cases user-specified reference_dates report_dates. enables use enw_preprocess_data() epinowcast() preprocessing functions.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_linelist_to_incidence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"","code":"enw_linelist_to_incidence(   linelist,   reference_date = \"reference_date\",   report_date = \"report_date\",   by = NULL,   max_delay,   completion_beyond_max_report = FALSE,   copy = TRUE )"},{"path":"https://package.epinowcast.org/dev/reference/enw_linelist_to_incidence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"linelist object coercible data.table (data.frame) row represents case. Must contain least two date variables variables can coerced dates. reference_date date variable can coerced date represents date interest case. example, reference_date date symptom onset new_confirm number new cases reported (based report_date) day onset day. default \"reference_date\". report_date date variable can coerced date represents date case reported. default \"report_date\". character vector variables also aggregate (.e. well using reference_date report_date). supplied function aggregate just reference_date report_date. max_delay maximum delay (days) reference_date report_date. supplied function use maximum observed delay. Note function operates timestep conversion, max_delay always days . max_delay less maximum number days reference_date report_date linelist function use value instead inform user. completion_beyond_max_report Logical, entries completed beyond maximum date found data? Default: FALSE copy obs copied (default) modified place?","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_linelist_to_incidence.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"data.table following variables: reference_date, report_date, new_confirm, confirm, delay, variables specified .","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_linelist_to_incidence.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert a Line List to Aggregate Counts (Incidence) — enw_linelist_to_incidence","text":"","code":"linelist <- data.frame(   onset_date = as.Date(c(\"2021-01-02\", \"2021-01-03\", \"2021-01-02\")),   report_date = as.Date(c(\"2021-01-03\", \"2021-01-05\", \"2021-01-04\")) ) enw_linelist_to_incidence(linelist, reference_date = \"onset_date\") #> Using the maximum observed delay of 4 days to complete the incidence data. #> Key: <reference_date, report_date> #>     report_date reference_date new_confirm confirm delay #>          <IDat>         <IDat>       <int>   <int> <int> #>  1:  2021-01-02           <NA>           0       0     0 #>  2:  2021-01-03           <NA>           0       0     1 #>  3:  2021-01-04           <NA>           0       0     2 #>  4:  2021-01-05           <NA>           0       0     3 #>  5:  2021-01-02     2021-01-02           0       0     0 #>  6:  2021-01-03     2021-01-02           1       1     1 #>  7:  2021-01-04     2021-01-02           1       2     2 #>  8:  2021-01-05     2021-01-02           0       2     3 #>  9:  2021-01-03     2021-01-03           0       0     0 #> 10:  2021-01-04     2021-01-03           0       0     1 #> 11:  2021-01-05     2021-01-03           1       1     2 #> 12:  2021-01-04     2021-01-04           0       0     0 #> 13:  2021-01-05     2021-01-04           0       0     1 #> 14:  2021-01-05     2021-01-05           0       0     0  # Specify a custom maximum delay and allow completion beyond the maximum # observed delay enw_linelist_to_incidence(  linelist, reference_date = \"onset_date\", max_delay = 5,  completion_beyond_max_report = TRUE ) #> Key: <reference_date, report_date> #>     report_date reference_date new_confirm confirm delay #>          <IDat>         <IDat>       <int>   <int> <int> #>  1:  2021-01-02           <NA>           0       0     0 #>  2:  2021-01-03           <NA>           0       0     1 #>  3:  2021-01-04           <NA>           0       0     2 #>  4:  2021-01-05           <NA>           0       0     3 #>  5:  2021-01-02     2021-01-02           0       0     0 #>  6:  2021-01-03     2021-01-02           1       1     1 #>  7:  2021-01-04     2021-01-02           1       2     2 #>  8:  2021-01-05     2021-01-02           0       2     3 #>  9:  2021-01-06     2021-01-02           0       2     4 #> 10:  2021-01-07     2021-01-02           0       2     5 #> 11:  2021-01-03     2021-01-03           0       0     0 #> 12:  2021-01-04     2021-01-03           0       0     1 #> 13:  2021-01-05     2021-01-03           1       1     2 #> 14:  2021-01-06     2021-01-03           0       1     3 #> 15:  2021-01-07     2021-01-03           0       1     4 #> 16:  2021-01-08     2021-01-03           0       1     5 #> 17:  2021-01-04     2021-01-04           0       0     0 #> 18:  2021-01-05     2021-01-04           0       0     1 #> 19:  2021-01-06     2021-01-04           0       0     2 #> 20:  2021-01-07     2021-01-04           0       0     3 #> 21:  2021-01-08     2021-01-04           0       0     4 #> 22:  2021-01-09     2021-01-04           0       0     5 #> 23:  2021-01-05     2021-01-05           0       0     0 #> 24:  2021-01-06     2021-01-05           0       0     1 #> 25:  2021-01-07     2021-01-05           0       0     2 #> 26:  2021-01-08     2021-01-05           0       0     3 #> 27:  2021-01-09     2021-01-05           0       0     4 #> 28:  2021-01-10     2021-01-05           0       0     5 #>     report_date reference_date new_confirm confirm delay #>          <IDat>         <IDat>       <int>   <int> <int>"},{"path":"https://package.epinowcast.org/dev/reference/enw_manual_formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Define a model manually using fixed and random effects — enw_manual_formula","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"typical use cases enw_formula() provide sufficient flexibility allow models defined. However, may instances manual model specification required. function supports allowing user supply vectors fixed, random, customised random effects (first treated fixed effect terms). Prior 1.0.0 main interface specifying models still used internally handle parts model specification process.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_manual_formula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"","code":"enw_manual_formula(   data,   fixed = NULL,   random = NULL,   custom_random = NULL,   no_contrasts = FALSE,   add_intercept = TRUE )"},{"path":"https://package.epinowcast.org/dev/reference/enw_manual_formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"data data.frame observations. must include variables used supplied formula. fixed character vector fixed effects. random character vector random effects. Random effects specified added fixed effects. custom_random vector random effects. Random effects added added vector fixed effects. can used random effects fixed effects partial name match. no_contrasts Logical, defaults FALSE. TRUE means variable uses contrast. Alternatively character vector variables can supplied indicating variables  contrasts. add_intercept Logical, defaults FALSE. intercept added fixed effects.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_manual_formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"list specifying fixed effects (formula, design matrix, design matrix index), random effects (formula design matrix).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_manual_formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Define a model manually using fixed and random effects — enw_manual_formula","text":"","code":"data <- enw_example(\"prep\")$metareference[[1]] enw_manual_formula(data, fixed = \"week\", random = \"day_of_week\") #> $fixed #> $fixed$formula #> [1] \"~1 + week + day_of_week\" #>  #> $fixed$design #>    (Intercept) week day_of_weekFriday day_of_weekMonday day_of_weekSaturday #> 1            1    0                 0                 0                   0 #> 2            1    0                 0                 0                   0 #> 3            1    0                 1                 0                   0 #> 4            1    0                 0                 0                   1 #> 5            1    0                 0                 0                   0 #> 6            1    0                 0                 1                   0 #> 7            1    0                 0                 0                   0 #> 8            1    1                 0                 0                   0 #> 9            1    1                 0                 0                   0 #> 10           1    1                 1                 0                   0 #> 11           1    1                 0                 0                   1 #> 12           1    1                 0                 0                   0 #> 13           1    1                 0                 1                   0 #> 14           1    1                 0                 0                   0 #> 15           1    2                 0                 0                   0 #> 16           1    2                 0                 0                   0 #> 17           1    2                 1                 0                   0 #> 18           1    2                 0                 0                   1 #> 19           1    2                 0                 0                   0 #> 20           1    2                 0                 1                   0 #> 21           1    2                 0                 0                   0 #> 22           1    3                 0                 0                   0 #> 23           1    3                 0                 0                   0 #> 24           1    3                 1                 0                   0 #> 25           1    3                 0                 0                   1 #> 26           1    3                 0                 0                   0 #> 27           1    3                 0                 1                   0 #> 28           1    3                 0                 0                   0 #> 29           1    4                 0                 0                   0 #> 30           1    4                 0                 0                   0 #> 31           1    4                 1                 0                   0 #> 32           1    4                 0                 0                   1 #> 33           1    4                 0                 0                   0 #> 34           1    4                 0                 1                   0 #> 35           1    4                 0                 0                   0 #> 36           1    5                 0                 0                   0 #> 37           1    5                 0                 0                   0 #> 38           1    5                 1                 0                   0 #> 39           1    5                 0                 0                   1 #> 40           1    5                 0                 0                   0 #>    day_of_weekSunday day_of_weekThursday day_of_weekTuesday #> 1                  0                   0                  0 #> 2                  0                   1                  0 #> 3                  0                   0                  0 #> 4                  0                   0                  0 #> 5                  1                   0                  0 #> 6                  0                   0                  0 #> 7                  0                   0                  1 #> 8                  0                   0                  0 #> 9                  0                   1                  0 #> 10                 0                   0                  0 #> 11                 0                   0                  0 #> 12                 1                   0                  0 #> 13                 0                   0                  0 #> 14                 0                   0                  1 #> 15                 0                   0                  0 #> 16                 0                   1                  0 #> 17                 0                   0                  0 #> 18                 0                   0                  0 #> 19                 1                   0                  0 #> 20                 0                   0                  0 #> 21                 0                   0                  1 #> 22                 0                   0                  0 #> 23                 0                   1                  0 #> 24                 0                   0                  0 #> 25                 0                   0                  0 #> 26                 1                   0                  0 #> 27                 0                   0                  0 #> 28                 0                   0                  1 #> 29                 0                   0                  0 #> 30                 0                   1                  0 #> 31                 0                   0                  0 #> 32                 0                   0                  0 #> 33                 1                   0                  0 #> 34                 0                   0                  0 #> 35                 0                   0                  1 #> 36                 0                   0                  0 #> 37                 0                   1                  0 #> 38                 0                   0                  0 #> 39                 0                   0                  0 #> 40                 1                   0                  0 #>    day_of_weekWednesday #> 1                     1 #> 2                     0 #> 3                     0 #> 4                     0 #> 5                     0 #> 6                     0 #> 7                     0 #> 8                     1 #> 9                     0 #> 10                    0 #> 11                    0 #> 12                    0 #> 13                    0 #> 14                    0 #> 15                    1 #> 16                    0 #> 17                    0 #> 18                    0 #> 19                    0 #> 20                    0 #> 21                    0 #> 22                    1 #> 23                    0 #> 24                    0 #> 25                    0 #> 26                    0 #> 27                    0 #> 28                    0 #> 29                    1 #> 30                    0 #> 31                    0 #> 32                    0 #> 33                    0 #> 34                    0 #> 35                    0 #> 36                    1 #> 37                    0 #> 38                    0 #> 39                    0 #> 40                    0 #>  #> $fixed$index #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #>  #>  #> $random #> $random$formula #> [1] \"~0 + fixed + day_of_week\" #>  #> $random$design #>   fixed day_of_week #> 1     1           0 #> 2     0           1 #> 3     0           1 #> 4     0           1 #> 5     0           1 #> 6     0           1 #> 7     0           1 #> 8     0           1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $random$index #> [1] 1 2 3 4 5 6 7 8 #>  #>"},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract metadata from raw data — enw_metadata","title":"Extract metadata from raw data — enw_metadata","text":"Extract metadata raw data, either reference report date. target date chosen (reference report), confirm, max_confirm``, cum_prop_reported` dropped first observation group date retained.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract metadata from raw data — enw_metadata","text":"","code":"enw_metadata(obs, target_date = c(\"reference_date\", \"report_date\"))"},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract metadata from raw data — enw_metadata","text":"obs data.frame data.table columns: reference_date / report_date; least one must provided, .group, grouping column date, Date column. target_date character string, either \"reference_date\" \"report_date\". column corresponding string used target date metadata extraction.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract metadata from raw data — enw_metadata","text":"data.table columns: date, Date column .group, grouping column first observation group date. data.table sorted .group date.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract metadata from raw data — enw_metadata","text":"","code":"obs <- data.frame(   reference_date = as.Date(\"2021-01-01\"),   report_date = as.Date(\"2022-01-01\"), x = 1:10 ) enw_metadata(obs, target_date = \"reference_date\") #> Key: <.group, date> #>          date .group     x #>        <Date>  <num> <int> #> 1: 2021-01-01      1     1"},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata_delay.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":"Calculate delay metadata based supplied maximum delay independent metadata date indexing. data meant used conjunction metadata date reference. Users can build additional features  data.frame  regenerate using function output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata_delay.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":"","code":"enw_metadata_delay(max_delay = 20, breaks = 4, timestep = \"day\")"},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata_delay.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":"max_delay maximum delay model delay distribution, specified units timestep (e.g., timestep = \"week\", max_delay = 3 means 3 weeks). specified maximum observed delay assumed true maximum delay model. Otherwise, integer greater equal 1 can specified. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Steps take determine maximum delay: Consider realistic relevant application. Check proportion observations reported (prop_reported) delay new_confirm output enw_preprocess_obs. Use check_max_delay() check coverage candidate max_delay. doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 intervals (.e. max_delay 1 corresponds delay). breaks Numeric, defaults 4. number breaks use constructing categorised version numeric delays. timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata_delay.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":" data.frame  delay metadata. includes: delay: numeric delay reference date report. delay_cat: categorised delay. may useful model building. delay_week: numeric week since delay reported. may useful model building. delay_head: logical variable defining delay lower 25% potential delays. may particularly useful building models assume parametric distribution order increase weight head reporting distribution pragmatic way. delay_tail: logical variable defining delay upper 75% potential delays. may particularly useful building models assume parametric distribution order increase weight tail reporting distribution pragmatic way.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_metadata_delay.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate reporting delay metadata for a given maximum delay — enw_metadata_delay","text":"","code":"enw_metadata_delay(max_delay = 20, breaks = 4) #>     delay delay_cat delay_week delay_head delay_tail #>     <int>    <fctr>      <int>     <lgcl>     <lgcl> #>  1:     0     [0,5)          0       TRUE      FALSE #>  2:     1     [0,5)          0       TRUE      FALSE #>  3:     2     [0,5)          0       TRUE      FALSE #>  4:     3     [0,5)          0       TRUE      FALSE #>  5:     4     [0,5)          0       TRUE      FALSE #>  6:     5    [5,10)          0      FALSE      FALSE #>  7:     6    [5,10)          0      FALSE      FALSE #>  8:     7    [5,10)          1      FALSE      FALSE #>  9:     8    [5,10)          1      FALSE      FALSE #> 10:     9    [5,10)          1      FALSE      FALSE #> 11:    10   [10,15)          1      FALSE      FALSE #> 12:    11   [10,15)          1      FALSE      FALSE #> 13:    12   [10,15)          1      FALSE      FALSE #> 14:    13   [10,15)          1      FALSE      FALSE #> 15:    14   [10,15)          2      FALSE      FALSE #> 16:    15   [15,20)          2      FALSE       TRUE #> 17:    16   [15,20)          2      FALSE       TRUE #> 18:    17   [15,20)          2      FALSE       TRUE #> 19:    18   [15,20)          2      FALSE       TRUE #> 20:    19   [15,20)          2      FALSE       TRUE #>     delay delay_cat delay_week delay_head delay_tail #>     <int>    <fctr>      <int>     <lgcl>     <lgcl>"},{"path":"https://package.epinowcast.org/dev/reference/enw_missing.html","id":null,"dir":"Reference","previous_headings":"","what":"Missing reference data model module — enw_missing","title":"Missing reference data model module — enw_missing","text":"Missing reference data model module","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_missing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Missing reference data model module — enw_missing","text":"","code":"enw_missing(formula = ~1, data)"},{"path":"https://package.epinowcast.org/dev/reference/enw_missing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Missing reference data model module — enw_missing","text":"formula formula (implemented enw_formula()) describing missing data proportion logit scale reference date. can use features defined reference date defined metareference produced enw_preprocess_data(). Set ~0 disable missing data model missingness present (model estimated case). model specified, intercept always required. See enw_formula() details formula syntax. data Output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_missing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Missing reference data model module — enw_missing","text":"list containing supplied formulas, data passed list describing models, data.frame describing priors used, function takes output data priors returns function can used sample tightened version prior distribution.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_missing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Missing reference data model module — enw_missing","text":"","code":"# Missingness model with a fixed intercept only enw_missing(data = enw_example(\"preprocessed\")) #> $formula #> [1] \"~1\" #>  #> $data #> $data$miss_fintercept #> [1] 1 #>  #> $data$miss_fnrow #> [1] 40 #>  #> $data$miss_findex #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #>  #> $data$miss_fnindex #> [1] 40 #>  #> $data$miss_fncol #> [1] 0 #>  #> $data$miss_rncol #> [1] 0 #>  #> $data$miss_fdesign #>    #> 1  #> 2  #> 3  #> 4  #> 5  #> 6  #> 7  #> 8  #> 9  #> 10 #> 11 #> 12 #> 13 #> 14 #> 15 #> 16 #> 17 #> 18 #> 19 #> 20 #> 21 #> 22 #> 23 #> 24 #> 25 #> 26 #> 27 #> 28 #> 29 #> 30 #> 31 #> 32 #> 33 #> 34 #> 35 #> 36 #> 37 #> 38 #> 39 #> 40 #>  #> $data$miss_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$miss_st #> [1] 21 #>  #> $data$miss_cst #> [1] 21 #>  #> $data$missing_reference #>  [1] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 #>  #> $data$obs_by_report #>         0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17 #>  [1,] 381 362 343 324 305 286 267 248 229 210 191 172 153 134 115  96  77  58 #>  [2,] 401 382 363 344 325 306 287 268 249 230 211 192 173 154 135 116  97  78 #>  [3,] 421 402 383 364 345 326 307 288 269 250 231 212 193 174 155 136 117  98 #>  [4,] 441 422 403 384 365 346 327 308 289 270 251 232 213 194 175 156 137 118 #>  [5,] 461 442 423 404 385 366 347 328 309 290 271 252 233 214 195 176 157 138 #>  [6,] 481 462 443 424 405 386 367 348 329 310 291 272 253 234 215 196 177 158 #>  [7,] 501 482 463 444 425 406 387 368 349 330 311 292 273 254 235 216 197 178 #>  [8,] 521 502 483 464 445 426 407 388 369 350 331 312 293 274 255 236 217 198 #>  [9,] 541 522 503 484 465 446 427 408 389 370 351 332 313 294 275 256 237 218 #> [10,] 561 542 523 504 485 466 447 428 409 390 371 352 333 314 295 276 257 238 #> [11,] 581 562 543 524 505 486 467 448 429 410 391 372 353 334 315 296 277 258 #> [12,] 601 582 563 544 525 506 487 468 449 430 411 392 373 354 335 316 297 278 #> [13,] 621 602 583 564 545 526 507 488 469 450 431 412 393 374 355 336 317 298 #> [14,] 641 622 603 584 565 546 527 508 489 470 451 432 413 394 375 356 337 318 #> [15,] 661 642 623 604 585 566 547 528 509 490 471 452 433 414 395 376 357 338 #> [16,] 681 662 643 624 605 586 567 548 529 510 491 472 453 434 415 396 377 358 #> [17,] 701 682 663 644 625 606 587 568 549 530 511 492 473 454 435 416 397 378 #> [18,] 721 702 683 664 645 626 607 588 569 550 531 512 493 474 455 436 417 398 #> [19,] 741 722 703 684 665 646 627 608 589 570 551 532 513 494 475 456 437 418 #> [20,] 761 742 723 704 685 666 647 628 609 590 571 552 533 514 495 476 457 438 #> [21,] 781 762 743 724 705 686 667 648 629 610 591 572 553 534 515 496 477 458 #>        18  19 #>  [1,]  39  20 #>  [2,]  59  40 #>  [3,]  79  60 #>  [4,]  99  80 #>  [5,] 119 100 #>  [6,] 139 120 #>  [7,] 159 140 #>  [8,] 179 160 #>  [9,] 199 180 #> [10,] 219 200 #> [11,] 239 220 #> [12,] 259 240 #> [13,] 279 260 #> [14,] 299 280 #> [15,] 319 300 #> [16,] 339 320 #> [17,] 359 340 #> [18,] 379 360 #> [19,] 399 380 #> [20,] 419 400 #> [21,] 439 420 #>  #> $data$model_miss #> [1] 1 #>  #> $data$miss_obs #> [1] 21 #>  #>  #> $priors #>        variable #>          <char> #> 1:     miss_int #> 2: miss_beta_sd #>                                                                         description #>                                                                              <char> #> 1:          Intercept on the logit scale for the proportion missing reference dates #> 2: Standard deviation of scaled pooled logit missing reference date\\n       effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal     0     1 #> 2: Zero truncated normal     0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(miss_int = numeric(0), miss_beta = numeric(0),  #>             miss_beta_sd = numeric(0)) #>         if (data$model_miss) { #>             init$miss_int <- array(rnorm(1, priors$miss_int_p[1],  #>                 priors$miss_int_p[2])) #>             if (data$miss_fncol > 0) { #>                 init$miss_beta <- array(rnorm(data$miss_fncol,  #>                   0, 0.01)) #>             } #>             if (data$miss_rncol > 0) { #>                 init$miss_beta_sd <- array(abs(rnorm(data$miss_rncol,  #>                   priors$miss_beta_sd_p[1], priors$miss_beta_sd_p[2]/10))) #>             } #>         } #>         init #>     } #>     fn #> } #> <bytecode: 0x55d51deb45c8> #> <environment: 0x55d51deb10f0> #>   # No missingness model specified enw_missing(~0, data = enw_example(\"preprocessed\")) #> $formula #> [1] \"~0\" #>  #> $data #> $data$miss_fintercept #> [1] 0 #>  #> $data$miss_fnrow #> [1] 0 #>  #> $data$miss_findex #> numeric(0) #>  #> $data$miss_fnindex #> [1] 0 #>  #> $data$miss_fncol #> [1] 0 #>  #> $data$miss_rncol #> [1] 0 #>  #> $data$miss_fdesign #> numeric(0) #>  #> $data$miss_rdesign #> numeric(0) #>  #> $data$missing_reference #> numeric(0) #>  #> $data$obs_by_report #> numeric(0) #>  #> $data$miss_st #> numeric(0) #>  #> $data$miss_cst #> numeric(0) #>  #> $data$model_miss #> [1] 0 #>  #> $data$miss_obs #> [1] 0 #>  #>  #> $priors #>        variable #>          <char> #> 1:     miss_int #> 2: miss_beta_sd #>                                                                         description #>                                                                              <char> #> 1:          Intercept on the logit scale for the proportion missing reference dates #> 2: Standard deviation of scaled pooled logit missing reference date\\n       effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal     0     1 #> 2: Zero truncated normal     0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(miss_int = numeric(0), miss_beta = numeric(0),  #>             miss_beta_sd = numeric(0)) #>         if (data$model_miss) { #>             init$miss_int <- array(rnorm(1, priors$miss_int_p[1],  #>                 priors$miss_int_p[2])) #>             if (data$miss_fncol > 0) { #>                 init$miss_beta <- array(rnorm(data$miss_fncol,  #>                   0, 0.01)) #>             } #>             if (data$miss_rncol > 0) { #>                 init$miss_beta_sd <- array(abs(rnorm(data$miss_rncol,  #>                   priors$miss_beta_sd_p[1], priors$miss_beta_sd_p[2]/10))) #>             } #>         } #>         init #>     } #>     fn #> } #> <bytecode: 0x55d51deb45c8> #> <environment: 0x55d51edb0430> #>"},{"path":"https://package.epinowcast.org/dev/reference/enw_missing_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract reports with missing reference dates — enw_missing_reference","title":"Extract reports with missing reference dates — enw_missing_reference","text":"Returns reports missing reference dates well calculating proportion reports given reference date missing.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_missing_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract reports with missing reference dates — enw_missing_reference","text":"","code":"enw_missing_reference(obs)"},{"path":"https://package.epinowcast.org/dev/reference/enw_missing_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract reports with missing reference dates — enw_missing_reference","text":"obs data.frame produced enw_add_incidence(). Must contain following variables: report_date, reference_date, .group, confirm, new_confirm.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_missing_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract reports with missing reference dates — enw_missing_reference","text":"data.table missing counts proportions report date group.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_missing_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract reports with missing reference dates — enw_missing_reference","text":"","code":"obs <- data.frame(   report_date = c(\"2021-10-01\", \"2021-10-03\"), reference_date = \"2021-10-01\",   confirm = 1 ) obs <- rbind(   obs,   data.frame(report_date = \"2021-10-04\", reference_date = NA, confirm = 4) ) obs <- enw_complete_dates(obs) obs <- enw_assign_group(obs) obs <- enw_add_incidence(obs) enw_missing_reference(obs) #> Key: <.group, report_date> #>    report_date .group confirm prop_missing #>         <IDat>  <num>   <num>        <num> #> 1:  2021-10-01      1       0            0 #> 2:  2021-10-02      1       0          NaN #> 3:  2021-10-03      1       0          NaN #> 4:  2021-10-04      1       4            1"},{"path":"https://package.epinowcast.org/dev/reference/enw_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Load and compile the nowcasting model — enw_model","title":"Load and compile the nowcasting model — enw_model","text":"Load compile nowcasting model","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load and compile the nowcasting model — enw_model","text":"","code":"enw_model(   model = system.file(\"stan\", \"epinowcast.stan\", package = \"epinowcast\"),   include = system.file(\"stan\", package = \"epinowcast\"),   compile = TRUE,   threads = TRUE,   profile = FALSE,   target_dir = epinowcast::enw_get_cache(),   stanc_options = list(),   cpp_options = list(),   verbose = TRUE,   ... )"},{"path":"https://package.epinowcast.org/dev/reference/enw_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load and compile the nowcasting model — enw_model","text":"model character string indicating path model. supplied package default model used. include character string specifying path stan files include model. missing package default used. compile Logical, defaults TRUE. model loaded compiled using cmdstanr::cmdstan_model(). threads Logical, defaults TRUE. model compile support multi-thread support chain. Note setting produce warning threads_to_chain set ignored. Changing FALSE expected yield performance benefits even using multithreading thus recommended. profile Logical, defaults FALSE. model profiled? profiling see cmdstanr documentation. # nolint target_dir path directory manipulated .stan files without profiling statements stored. avoid overriding original .stan files, different directory original model include_paths. stanc_options list options pass stanc_options cmdstanr::cmdstan_model(). default nothing passed potentially users may wish pass optimisation flags example. See documentation cmdstanr::cmdstan_model() details. cpp_options list options pass cpp_options cmdstanr::cmdstan_model(). default nothing passed potentially users may wish pass optimisation flags example. See documentation cmdstanr::cmdstan_model() details. Note threads argument replaces stan_threads. verbose Logical, defaults TRUE. verbose messages shown. ... Additional arguments passed cmdstanr::cmdstan_model().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load and compile the nowcasting model — enw_model","text":"cmdstanr model.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load and compile the nowcasting model — enw_model","text":"","code":"if (FALSE) { # interactive() mod <- enw_model() }"},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_samples.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"generic wrapper around posterior::draws_df() opinionated defaults extract posterior samples nowcast (\"pp_inf_obs\" stan code). functionality function can used directly output epinowcast() using supplied summary.epinowcast() method.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_samples.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"","code":"enw_nowcast_samples(fit, obs, max_delay = NULL, timestep = \"day\")"},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_samples.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"fit cmdstanr fit object. obs observation data.frame containing reference_date columns length number rows posterior date observation date. used align posterior observations. easiest source data output latest output enw_preprocess_data() enw_latest_data(). max_delay Maximum delay nowcasts extracted, units timestep used preprocessing. Must equal (default) larger modelled maximum delay. larger, nowcasts unmodelled dates added assuming case counts beyond modelled maximum delay fully observed. timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_samples.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"data.frame posterior samples nowcast prediction. uses observed data available posterior prediction .","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_samples.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract posterior samples for the nowcast prediction — enw_nowcast_samples","text":"","code":"fit <- enw_example(\"nowcast\") enw_nowcast_samples(   fit$fit[[1]],   fit$latest[[1]],   fit$max_delay,   \"day\"   ) #>        reference_date report_date .group max_confirm location age_group confirm #>                <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     1:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     2:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     3:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     4:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     5:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>    ---                                                                          #> 19996:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19997:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19998:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19999:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 20000:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>        cum_prop_reported delay prop_reported .chain .iteration .draw sample #>                    <num> <num>         <num>  <int>      <int> <int>  <num> #>     1:                 1    19             0      1          1     1    149 #>     2:                 1    19             0      1          2     2    149 #>     3:                 1    19             0      1          3     3    149 #>     4:                 1    19             0      1          4     4    149 #>     5:                 1    19             0      1          5     5    149 #>    ---                                                                      #> 19996:                 1     0             1      2        496   996    453 #> 19997:                 1     0             1      2        497   997    274 #> 19998:                 1     0             1      2        498   998    250 #> 19999:                 1     0             1      2        499   999    432 #> 20000:                 1     0             1      2        500  1000    491"},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise the posterior nowcast prediction — enw_nowcast_summary","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"generic wrapper around enw_posterior() opinionated defaults extract posterior prediction nowcast (\"pp_inf_obs\" stan code). functionality function can used directly output epinowcast() using supplied summary.epinowcast() method.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"","code":"enw_nowcast_summary(   fit,   obs,   max_delay = NULL,   timestep = \"day\",   probs = c(0.05, 0.2, 0.35, 0.5, 0.65, 0.8, 0.95) )"},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"fit cmdstanr fit object. obs observation data.frame containing reference_date columns length number rows posterior date observation date. used align posterior observations. easiest source data output latest output enw_preprocess_data() enw_latest_data(). max_delay Maximum delay nowcasts summarised, units timestep used preprocessing. Must equal (default) larger modelled maximum delay. larger, nowcasts unmodelled dates added assuming case counts beyond modelled maximum delay fully observed. timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used. probs vector numeric probabilities produce quantile summaries . default 5%, 20%, 80%, 95% quantiles also minimum set required plotting functions work.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"data.frame summarising model posterior nowcast prediction. uses observed data available posterior prediction .","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_nowcast_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise the posterior nowcast prediction — enw_nowcast_summary","text":"","code":"fit <- enw_example(\"nowcast\") enw_nowcast_summary(   fit$fit[[1]],   fit$latest[[1]],   fit$max_delay   ) #>     reference_date report_date .group max_confirm location age_group confirm #>             <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>  1:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>  2:     2021-08-04  2021-08-22      1         166       DE       00+     166 #>  3:     2021-08-05  2021-08-22      1         133       DE       00+     133 #>  4:     2021-08-06  2021-08-22      1         137       DE       00+     137 #>  5:     2021-08-07  2021-08-22      1         139       DE       00+     139 #>  6:     2021-08-08  2021-08-22      1          97       DE       00+      97 #>  7:     2021-08-09  2021-08-22      1          58       DE       00+      58 #>  8:     2021-08-10  2021-08-22      1         175       DE       00+     175 #>  9:     2021-08-11  2021-08-22      1         233       DE       00+     233 #> 10:     2021-08-12  2021-08-22      1         237       DE       00+     237 #> 11:     2021-08-13  2021-08-22      1         204       DE       00+     204 #> 12:     2021-08-14  2021-08-22      1         189       DE       00+     189 #> 13:     2021-08-15  2021-08-22      1         125       DE       00+     125 #> 14:     2021-08-16  2021-08-22      1          98       DE       00+      98 #> 15:     2021-08-17  2021-08-22      1         242       DE       00+     242 #> 16:     2021-08-18  2021-08-22      1         223       DE       00+     223 #> 17:     2021-08-19  2021-08-22      1         202       DE       00+     202 #> 18:     2021-08-20  2021-08-22      1         171       DE       00+     171 #> 19:     2021-08-21  2021-08-22      1         112       DE       00+     112 #> 20:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>     reference_date report_date .group max_confirm location age_group confirm #>             <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>                 <num> <num>         <num>   <num>  <num>      <num>   <num> #>  1:                 1    19   0.000000000 149.000  149.0   0.000000  0.0000 #>  2:                 1    18   0.000000000 167.480  167.0   1.403414  1.4826 #>  3:                 1    17   0.000000000 135.797  136.0   1.858291  1.4826 #>  4:                 1    16   0.000000000 141.272  141.0   2.414507  2.9652 #>  5:                 1    15   0.007194245 145.764  145.0   3.070461  2.9652 #>  6:                 1    14   0.000000000 103.614  103.0   2.892987  2.9652 #>  7:                 1    13   0.000000000  62.838   63.0   2.595475  2.9652 #>  8:                 1    12   0.000000000 185.149  185.0   3.655155  2.9652 #>  9:                 1    11   0.000000000 256.191  256.0   7.084540  7.4130 #> 10:                 1    10   0.004219409 267.189  266.0   8.269563  7.4130 #> 11:                 1     9   0.000000000 236.218  235.0   8.635453  8.8956 #> 12:                 1     8   0.015873016 230.463  230.0  10.395995 10.3782 #> 13:                 1     7   0.040000000 165.184  165.0   9.660925  8.8956 #> 14:                 1     6   0.010204082 129.535  129.0   8.499354  8.8956 #> 15:                 1     5   0.012396694 293.236  292.0  11.922603 11.8608 #> 16:                 1     4   0.017937220 293.392  292.0  15.981231 14.8260 #> 17:                 1     3   0.019801980 291.537  290.0  20.271200 20.7564 #> 18:                 1     2   0.070175439 295.258  292.5  29.356997 27.4281 #> 19:                 1     1   0.383928571 310.440  304.0  50.020660 47.4432 #> 20:                 1     0   1.000000000 384.142  368.0 115.713601 97.8516 #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>                 <num> <num>         <num>   <num>  <num>      <num>   <num> #>         q5   q20    q35   q50   q65   q80    q95      rhat  ess_bulk  ess_tail #>      <num> <num>  <num> <num> <num> <num>  <num>     <num>     <num>     <num> #>  1: 149.00   149 149.00 149.0   149 149.0 149.00        NA        NA        NA #>  2: 166.00   166 167.00 167.0   168 168.0 170.00 1.0011717 1032.9494 1005.1434 #>  3: 133.00   134 135.00 136.0   136 137.0 139.00 1.0023790  927.8688  880.2070 #>  4: 138.00   139 140.00 141.0   142 143.0 146.00 0.9997357 1024.0598  943.1194 #>  5: 141.00   143 144.00 145.0   147 148.0 151.00 1.0009523 1192.6161  903.2221 #>  6:  99.00   101 102.00 103.0   105 106.0 109.00 1.0056338 1020.5322 1049.4998 #>  7:  59.00    61  62.00  63.0    64  65.0  68.00 0.9989559 1026.9068  976.3448 #>  8: 180.00   182 183.00 185.0   186 188.0 192.00 1.0008924  874.1838  752.9787 #>  9: 246.00   250 253.00 256.0   258 262.0 269.00 1.0019152  840.3245  950.3159 #> 10: 255.00   260 264.00 266.0   270 274.0 282.00 0.9991677 1046.7181  969.9759 #> 11: 224.00   229 232.00 235.0   239 243.0 252.00 1.0025829  884.3839  943.4474 #> 12: 215.00   222 226.00 230.0   234 239.0 249.00 1.0004028  857.4908  808.3249 #> 13: 150.00   157 161.00 165.0   168 173.0 182.00 1.0063929  942.5139  877.8069 #> 14: 117.00   122 125.00 129.0   132 136.0 144.00 1.0015131 1034.7024  934.5488 #> 15: 276.00   283 288.00 292.0   297 302.0 315.00 1.0036606  886.4727  919.5960 #> 16: 269.00   280 286.00 292.0   299 306.0 321.00 0.9996327 1073.2110 1004.6946 #> 17: 262.00   274 282.00 290.0   298 308.0 327.05 0.9994497 1455.4791 1067.2793 #> 18: 252.00   271 282.00 292.5   304 317.0 350.00 0.9986679 1075.3975  898.2947 #> 19: 238.95   269 287.00 304.0   324 349.0 396.10 0.9996761 1254.5799  923.0215 #> 20: 235.00   288 329.65 368.0   406 462.2 602.00 1.0026839 1616.8851  595.4893 #>         q5   q20    q35   q50   q65   q80    q95      rhat  ess_bulk  ess_tail #>      <num> <num>  <num> <num> <num> <num>  <num>     <num>     <num>     <num>"},{"path":"https://package.epinowcast.org/dev/reference/enw_obs.html","id":null,"dir":"Reference","previous_headings":"","what":"Setup observation model and data — enw_obs","title":"Setup observation model and data — enw_obs","text":"Setup observation model data","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_obs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Setup observation model and data — enw_obs","text":"","code":"enw_obs(   family = c(\"negbin\", \"negbin1d\", \"poisson\"),   observation_indicator = NULL,   data )"},{"path":"https://package.epinowcast.org/dev/reference/enw_obs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Setup observation model and data — enw_obs","text":"family Character string, observation model use likelihood; enforced base::match.arg(). default negative binomial quadratic mean-variance relationship (\"negbin\"). Negative binomial linear mean-variance relationship (\"negbin1d\") Poisson (\"poisson\") also available. observation_indicator character string, name column data indicates whether observation observed (using logical variable) therefore whether used likelihood. variable present data input enw_preprocess_data(). can generated using flag_observation enw_complete_dates() can created directly using enw_flag_observed_observations(). either approaches used variable name .observed. Default NULL. data Output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_obs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Setup observation model and data — enw_obs","text":"list required stan.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_obs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Setup observation model and data — enw_obs","text":"","code":"enw_obs(data = enw_example(\"preprocessed\")) #> $family #> [1] \"negbin\" #>  #> $data #> $data$n #> [1] 610 #>  #> $data$t #> [1] 40 #>  #> $data$s #> [1] 40 #>  #> $data$g #> [1] 1 #>  #> $data$groups #> [1] 1 #>  #> $data$st #>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #> [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #>  #> $data$ts #>        1 #>  [1,]  1 #>  [2,]  2 #>  [3,]  3 #>  [4,]  4 #>  [5,]  5 #>  [6,]  6 #>  [7,]  7 #>  [8,]  8 #>  [9,]  9 #> [10,] 10 #> [11,] 11 #> [12,] 12 #> [13,] 13 #> [14,] 14 #> [15,] 15 #> [16,] 16 #> [17,] 17 #> [18,] 18 #> [19,] 19 #> [20,] 20 #> [21,] 21 #> [22,] 22 #> [23,] 23 #> [24,] 24 #> [25,] 25 #> [26,] 26 #> [27,] 27 #> [28,] 28 #> [29,] 29 #> [30,] 30 #> [31,] 31 #> [32,] 32 #> [33,] 33 #> [34,] 34 #> [35,] 35 #> [36,] 36 #> [37,] 37 #> [38,] 38 #> [39,] 39 #> [40,] 40 #>  #> $data$sl #>  [1] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 19 18 17 16 #> [26] 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1 #>  #> $data$csl #>  [1]  20  40  60  80 100 120 140 160 180 200 220 240 260 280 300 320 340 360 380 #> [20] 400 420 439 457 474 490 505 519 532 544 555 565 574 582 589 595 600 604 607 #> [39] 609 610 #>  #> $data$lsl #>  [1] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 19 18 17 16 #> [26] 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1 #>  #> $data$clsl #>  [1]  20  40  60  80 100 120 140 160 180 200 220 240 260 280 300 320 340 360 380 #> [20] 400 420 439 457 474 490 505 519 532 544 555 565 574 582 589 595 600 604 607 #> [39] 609 610 #>  #> $data$nsl #>  [1] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 19 18 17 16 #> [26] 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1 #>  #> $data$cnsl #>  [1]  20  40  60  80 100 120 140 160 180 200 220 240 260 280 300 320 340 360 380 #> [20] 400 420 439 457 474 490 505 519 532 544 555 565 574 582 589 595 600 604 607 #> [39] 609 610 #>  #> $data$sg #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 #>  #> $data$dmax #> [1] 20 #>  #> $data$sdmax #>  [1] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 #> [26] 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 #>  #> $data$csdmax #>  [1]  20  40  60  80 100 120 140 160 180 200 220 240 260 280 300 320 340 360 380 #> [20] 400 420 440 460 480 500 520 540 560 580 600 620 640 660 680 700 720 740 760 #> [39] 780 800 #>  #> $data$obs #>        0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 #>  [1,] 22 12  4  5  0  1 10  2  5  3  0  1  0  3  1  0  1  0  0  0 #>  [2,] 28 15  3  3  0  1  3  2  3  2  1  0  2  3  0  3  0  0  0  0 #>  [3,] 19 13  0  0  0  4  2  2  2  1  1  1  0  1  0  0  1  0  0  0 #>  [4,] 20  7  1  3 10  3  0  4  3  3  2  0  1  2  0  1  2  1  0  0 #>  [5,]  9  6  6  0  4  5  4  0  1  4  0  0  1  1  1  2  0  0  0  2 #>  [6,]  3 16  4  4  1  1  2  0  0  0  0  1  1  1  1  0  0  0  1  0 #>  [7,] 36 19 10  4  2  3  0  3  2  3  0  2  1  1  2  2  0  0  1  0 #>  [8,] 28 18  8  4  1  2  3  6  1  5  2  2  3  0  2  0  1  0  0  0 #>  [9,] 34 19  2  1  5  2  4  3  7  3  1  0  4  3  3  1  2  0  0  1 #> [10,] 30 12  4  1 10  6  0  2  2  1  2  1  4  0  2  3  0  0  4  0 #> [11,] 31  8  4  9  8  2  5  2  1  1  2  4  1  3  1  0  1  2  2  2 #> [12,]  8  4 14  8  6  5  1  3  0  4  1  2  4  2  0  1  2  2  2  0 #> [13,]  9  6  2  3  0  0  0  0  1  2  4  1  0  0  0  0  0  0  0  0 #> [14,] 35 11  6  4  4  1  0  2  2  2  2  0  0  1  4  1  0  0  0  0 #> [15,] 51 28 25  3  5  2  3  5  5  7  1  0  0  4  5  5  1  1  0  0 #> [16,] 47 37  9  2  2  3  4  4  4  3  0  2  0 10  4  3  0  0  0  0 #> [17,] 36 20  2  4 11  8  8  3  5  2  0  2  4  4  0  2  2  0  0  1 #> [18,] 38 16  3 15 14  7  5  5  0  0  5  0  5  1  6  0  0  3  1  0 #> [19,]  7  5  5 11  7  5  1  3  1  6  3  3  4  1  1  7  2  3  2  0 #> [20,] 13 13  8  6  1  3  2  0  0  2  0  2  0  5  3  0  0  0  0  1 #> [21,] 51 43  6  4  4  3  1  6  4  5  5  4  0  4  5  0  2  2  0  0 #> [22,] 51 43 18  5  6  1  2  8  7  7  6  1  0  4  3  1  3  0  0  0 #> [23,] 45 21  6  2  2 11 17  5  7  4  1  0  5  3  0  2  2  0  0  0 #> [24,] 47 31  5  4 20  6  1  9  3  1  0  2  1  5  2  0  0  0  0  0 #> [25,] 40 15  6 23 14 13  8  9  0  1  3  3  2  0  1  1  0  0  0  0 #> [26,] 13 14 27 14  7  7  0  0  0  7  1  4  2  1  0  0  0  0  0  0 #> [27,] 14 23 11  3  1  1  0  0  0  1  0  2  2  0  0  0  0  0  0  0 #> [28,] 78 43 23 11  5  1  0  5  2  2  1  4  0  0  0  0  0  0  0  0 #> [29,] 80 53 17 15  7  3 14 12 13 13  6  0  0  0  0  0  0  0  0  0 #> [30,] 89 48 28  8  1 14 13 13 10 12  1  0  0  0  0  0  0  0  0  0 #> [31,] 86 44  9  3 27 13  7 11  4  0  0  0  0  0  0  0  0  0  0  0 #> [32,] 79 36  7 16 19 13  8  8  3  0  0  0  0  0  0  0  0  0  0  0 #> [33,] 22 24 35 18 10  4  7  5  0  0  0  0  0  0  0  0  0  0  0  0 #> [34,] 23 32 22 10  8  2  1  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [35,] 96 85 30 18 10  3  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [36,] 92 86 23 18  4  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [37,] 84 87 27  4  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [38,] 98 61 12  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [39,] 69 43  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #> [40,] 45  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0 #>  #> $data$flat_obs #>   [1] 22 12  4  5  0  1 10  2  5  3  0  1  0  3  1  0  1  0  0  0 28 15  3  3  0 #>  [26]  1  3  2  3  2  1  0  2  3  0  3  0  0  0  0 19 13  0  0  0  4  2  2  2  1 #>  [51]  1  1  0  1  0  0  1  0  0  0 20  7  1  3 10  3  0  4  3  3  2  0  1  2  0 #>  [76]  1  2  1  0  0  9  6  6  0  4  5  4  0  1  4  0  0  1  1  1  2  0  0  0  2 #> [101]  3 16  4  4  1  1  2  0  0  0  0  1  1  1  1  0  0  0  1  0 36 19 10  4  2 #> [126]  3  0  3  2  3  0  2  1  1  2  2  0  0  1  0 28 18  8  4  1  2  3  6  1  5 #> [151]  2  2  3  0  2  0  1  0  0  0 34 19  2  1  5  2  4  3  7  3  1  0  4  3  3 #> [176]  1  2  0  0  1 30 12  4  1 10  6  0  2  2  1  2  1  4  0  2  3  0  0  4  0 #> [201] 31  8  4  9  8  2  5  2  1  1  2  4  1  3  1  0  1  2  2  2  8  4 14  8  6 #> [226]  5  1  3  0  4  1  2  4  2  0  1  2  2  2  0  9  6  2  3  0  0  0  0  1  2 #> [251]  4  1  0  0  0  0  0  0  0  0 35 11  6  4  4  1  0  2  2  2  2  0  0  1  4 #> [276]  1  0  0  0  0 51 28 25  3  5  2  3  5  5  7  1  0  0  4  5  5  1  1  0  0 #> [301] 47 37  9  2  2  3  4  4  4  3  0  2  0 10  4  3  0  0  0  0 36 20  2  4 11 #> [326]  8  8  3  5  2  0  2  4  4  0  2  2  0  0  1 38 16  3 15 14  7  5  5  0  0 #> [351]  5  0  5  1  6  0  0  3  1  0  7  5  5 11  7  5  1  3  1  6  3  3  4  1  1 #> [376]  7  2  3  2  0 13 13  8  6  1  3  2  0  0  2  0  2  0  5  3  0  0  0  0  1 #> [401] 51 43  6  4  4  3  1  6  4  5  5  4  0  4  5  0  2  2  0  0 51 43 18  5  6 #> [426]  1  2  8  7  7  6  1  0  4  3  1  3  0  0 45 21  6  2  2 11 17  5  7  4  1 #> [451]  0  5  3  0  2  2  0 47 31  5  4 20  6  1  9  3  1  0  2  1  5  2  0  0 40 #> [476] 15  6 23 14 13  8  9  0  1  3  3  2  0  1  1 13 14 27 14  7  7  0  0  0  7 #> [501]  1  4  2  1  0 14 23 11  3  1  1  0  0  0  1  0  2  2  0 78 43 23 11  5  1 #> [526]  0  5  2  2  1  4  0 80 53 17 15  7  3 14 12 13 13  6  0 89 48 28  8  1 14 #> [551] 13 13 10 12  1 86 44  9  3 27 13  7 11  4  0 79 36  7 16 19 13  8  8  3 22 #> [576] 24 35 18 10  4  7  5 23 32 22 10  8  2  1 96 85 30 18 10  3 92 86 23 18  4 #> [601] 84 87 27  4 98 61 12 69 43 45 #>  #> $data$flat_obs_lookup #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 #> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 #> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 #> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 #> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 #> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 #> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 #> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 #> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 #> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 #> [271] 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 #> [289] 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 #> [307] 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 #> [325] 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 #> [343] 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 #> [361] 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 #> [379] 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 #> [397] 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 #> [415] 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 #> [433] 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 #> [451] 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 #> [469] 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 #> [487] 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 #> [505] 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 #> [523] 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 #> [541] 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 #> [559] 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 #> [577] 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 #> [595] 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 #>  #> $data$latest_obs #>         1 #>  [1,]  70 #>  [2,]  69 #>  [3,]  47 #>  [4,]  63 #>  [5,]  46 #>  [6,]  36 #>  [7,]  91 #>  [8,]  86 #>  [9,]  95 #> [10,]  84 #> [11,]  89 #> [12,]  69 #> [13,]  28 #> [14,]  75 #> [15,] 151 #> [16,] 134 #> [17,] 114 #> [18,] 124 #> [19,]  77 #> [20,]  59 #> [21,] 149 #> [22,] 166 #> [23,] 133 #> [24,] 137 #> [25,] 139 #> [26,]  97 #> [27,]  58 #> [28,] 175 #> [29,] 233 #> [30,] 237 #> [31,] 204 #> [32,] 189 #> [33,] 125 #> [34,]  98 #> [35,] 242 #> [36,] 223 #> [37,] 202 #> [38,] 171 #> [39,] 112 #> [40,]  45 #>  #> $data$model_obs #> [1] 1 #>  #>  #> $priors #>    variable                                              description #>      <char>                                                   <char> #> 1: sqrt_phi One over the square root of the reporting overdispersion #>             distribution  mean    sd #>                   <char> <num> <num> #> 1: Zero truncated normal     0   0.5 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(sqrt_phi = numeric(0), phi = numeric(0)) #>         if (data$model_obs > 0) { #>             init$sqrt_phi <- array(abs(rnorm(1, priors$sqrt_phi_p[1],  #>                 priors$sqrt_phi_p[2]/10))) #>             init$phi <- 1/(init$sqrt_phi^2) #>         } #>         init #>     } #>     fn #> } #> <bytecode: 0x55d520446cc8> #> <environment: 0x55d520447e90> #>"},{"path":"https://package.epinowcast.org/dev/reference/enw_one_hot_encode_feature.html","id":null,"dir":"Reference","previous_headings":"","what":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","title":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","text":"function takes data.frame categorical variable, performs one-hot encoding, column-binds encoded variables back data.frame.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_one_hot_encode_feature.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","text":"","code":"enw_one_hot_encode_feature(metaobs, feature, contrasts = FALSE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_one_hot_encode_feature.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","text":"metaobs data.frame containing data encoded. feature name categorical variable one-hot encode character string. contrasts Logical. TRUE, create one-hot encoded variables contrasts; FALSE, create without contrasts. Defaults FALSE.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_one_hot_encode_feature.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"One-hot encode a variable and column-bind it to the original data.table — enw_one_hot_encode_feature","text":"","code":"metaobs <- data.frame(week = 1:2) enw_one_hot_encode_feature(metaobs, \"week\") #>     week week1 week2 #>    <int> <num> <num> #> 1:     1     1     0 #> 2:     2     0     1 enw_one_hot_encode_feature(metaobs, \"week\", contrasts = TRUE) #>     week week2 #>    <int> <num> #> 1:     1     0 #> 2:     2     1  metaobs <- data.frame(week = 1:6) enw_one_hot_encode_feature(metaobs, \"week\") #>     week week1 week2 week3 week4 week5 week6 #>    <int> <num> <num> <num> <num> <num> <num> #> 1:     1     1     0     0     0     0     0 #> 2:     2     0     1     0     0     0     0 #> 3:     3     0     0     1     0     0     0 #> 4:     4     0     0     0     1     0     0 #> 5:     5     0     0     0     0     1     0 #> 6:     6     0     0     0     0     0     1 enw_one_hot_encode_feature(metaobs, \"week\", contrasts = TRUE) #>     week week2 week3 week4 week5 week6 #>    <int> <num> <num> <num> <num> <num> #> 1:     1     0     0     0     0     0 #> 2:     2     1     0     0     0     0 #> 3:     3     0     1     0     0     0 #> 4:     4     0     0     1     0     0 #> 5:     5     0     0     0     1     0 #> 6:     6     0     0     0     0     1"},{"path":"https://package.epinowcast.org/dev/reference/enw_pathfinder.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a CmdStan model using the pathfinder algorithm — enw_pathfinder","title":"Fit a CmdStan model using the pathfinder algorithm — enw_pathfinder","text":"information pathfinder algorithm see CmdStan documentation. # nolint","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_pathfinder.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a CmdStan model using the pathfinder algorithm — enw_pathfinder","text":"","code":"enw_pathfinder(   data,   model = epinowcast::enw_model(),   diagnostics = TRUE,   init = NULL,   ... )"},{"path":"https://package.epinowcast.org/dev/reference/enw_pathfinder.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a CmdStan model using the pathfinder algorithm — enw_pathfinder","text":"data list data produced model modules (example enw_expectation(), enw_obs(), etc.) required use model used. model cmdstanr model object loaded enw_model() supplied user. diagnostics Logical, defaults TRUE. fitting diagnostics returned data.frame. init list initial values function generate initial values. provided, model attempt generate initial values ... Additional parameters passed CmdStanModel$pathfinder().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_pathfinder.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a CmdStan model using the pathfinder algorithm — enw_pathfinder","text":"data.table containing fit, data, fit_args. diagnostics TRUE, also includes run_time column timing information.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_pathfinder.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit a CmdStan model using the pathfinder algorithm — enw_pathfinder","text":"Note threads_per_chain argument renamed num_threads match CmdStanModel$pathfinder() method. fitting method faster approximate NUTS sampler used enw_sample() recommended use exploratory analysis model development.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_pathfinder.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit a CmdStan model using the pathfinder algorithm — enw_pathfinder","text":"","code":"if (FALSE) { # interactive() pobs <- enw_example(\"preprocessed\")  nowcast <- epinowcast(pobs,  expectation = enw_expectation(~1, data = pobs),  fit = enw_fit_opts(enw_pathfinder, pp = TRUE),  obs = enw_obs(family = \"poisson\", data = pobs), )  summary(nowcast) }"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_nowcast_quantiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"Plot nowcast quantiles","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_nowcast_quantiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"","code":"enw_plot_nowcast_quantiles(nowcast, latest_obs = NULL, log = FALSE, ...)"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_nowcast_quantiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"nowcast data.frame summarised posterior nowcast estimates containing least confirm count column reference_date date variable. latest_obs data.frame observed data containing least confirm count variable date variable main data.frame used plotting. log Logical, defaults FALSE. counts plot log scale. ... Additional arguments passed enw_plot_pp_quantiles().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_nowcast_quantiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"ggplot2 plot.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_nowcast_quantiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot nowcast quantiles — enw_plot_nowcast_quantiles","text":"","code":"nowcast <- enw_example(\"nowcast\") nowcast <- summary(nowcast, probs = c(0.05, 0.2, 0.8, 0.95)) enw_plot_nowcast_quantiles(nowcast)"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_obs.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic quantile plot — enw_plot_obs","title":"Generic quantile plot — enw_plot_obs","text":"Generic quantile plot","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_obs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic quantile plot — enw_plot_obs","text":"","code":"enw_plot_obs(obs, latest_obs = NULL, log = TRUE, ...)"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_obs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic quantile plot — enw_plot_obs","text":"obs data.frame summarised posterior estimates containing least confirm count column date variable latest_obs data.frame observed data containing least confirm count variable date variable main data.frame used plotting. log Logical, defaults FALSE. counts plot log scale. ... Additional arguments passed ggplot2::aes() must least specify x date variable.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_obs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic quantile plot — enw_plot_obs","text":"ggplot2 plot.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_obs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic quantile plot — enw_plot_obs","text":"","code":"nowcast <- enw_example(\"nowcast\") obs <- enw_example(\"obs\")  # Plot observed data by reference date enw_plot_obs(obs, x = reference_date)   # Plot observed data by reference date with more recent data enw_plot_obs(nowcast$latest[[1]], obs, x = reference_date)"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_pp_quantiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"Plot posterior prediction quantiles","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_pp_quantiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"","code":"enw_plot_pp_quantiles(pp, log = FALSE, ...)"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_pp_quantiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"pp data.frame summarised posterior predictions estimates containing least confirm count column report_date date variable. log Logical, defaults FALSE. counts plot log scale. ... Additional arguments passed enw_plot_pp_quantiles().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_pp_quantiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"ggplot2 plot.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_pp_quantiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot posterior prediction quantiles — enw_plot_pp_quantiles","text":"","code":"nowcast <- enw_example(\"nowcast\") nowcast <- summary(  nowcast, type = \"posterior_prediction\", probs = c(0.05, 0.2, 0.8, 0.95) ) enw_plot_pp_quantiles(nowcast) +  ggplot2::facet_wrap(ggplot2::vars(reference_date), scales = \"free\") #> `geom_line()`: Each group consists of only one observation. #> ℹ Do you need to adjust the group aesthetic? #> `geom_line()`: Each group consists of only one observation. #> ℹ Do you need to adjust the group aesthetic?"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_quantiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Generic quantile plot — enw_plot_quantiles","title":"Generic quantile plot — enw_plot_quantiles","text":"Generic quantile plot","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_quantiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generic quantile plot — enw_plot_quantiles","text":"","code":"enw_plot_quantiles(posterior, latest_obs = NULL, log = FALSE, ...)"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_quantiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generic quantile plot — enw_plot_quantiles","text":"posterior data.frame summarised posterior estimates containing least confirm count column date variable, quantile estimates 5%, 20%, 80%, 95% quantiles mean median. function wrapped enw_plot_nowcast_quantiles() enw_plot_pp_quantiles() sensible default labels. latest_obs data.frame observed data containing least confirm count variable date variable main data.frame used plotting. log Logical, defaults FALSE. counts plot log scale. ... Additional arguments passed ggplot2::aes() must least specify x date variable.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_quantiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generic quantile plot — enw_plot_quantiles","text":"ggplot2 plot.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_quantiles.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generic quantile plot — enw_plot_quantiles","text":"","code":"nowcast <- enw_example(\"nowcast\") nowcast <- summary(nowcast, probs = c(0.05, 0.2, 0.8, 0.95)) enw_plot_quantiles(nowcast, x = reference_date)"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_theme.html","id":null,"dir":"Reference","previous_headings":"","what":"Package plot theme — enw_plot_theme","title":"Package plot theme — enw_plot_theme","text":"Package plot theme","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_theme.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Package plot theme — enw_plot_theme","text":"","code":"enw_plot_theme(plot)"},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_theme.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Package plot theme — enw_plot_theme","text":"plot ggplot2 plot object.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_plot_theme.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Package plot theme — enw_plot_theme","text":"ggplot2 plot object.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_posterior.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise the posterior — enw_posterior","title":"Summarise the posterior — enw_posterior","text":"generic wrapper around posterior::summarise_draws() opinionated defaults.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_posterior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise the posterior — enw_posterior","text":"","code":"enw_posterior(fit, variables = NULL, probs = c(0.05, 0.2, 0.8, 0.95), ...)"},{"path":"https://package.epinowcast.org/dev/reference/enw_posterior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise the posterior — enw_posterior","text":"fit cmdstanr fit object. variables character vector variables return posterior summaries . default summaries parameters returned. probs vector numeric probabilities produce quantile summaries . default 5%, 20%, 80%, 95% quantiles also minimum set required plotting functions work. ... Additional arguments may passed used.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_posterior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise the posterior — enw_posterior","text":"data.frame summarising model posterior.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_posterior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise the posterior — enw_posterior","text":"","code":"fit <- enw_example(\"nowcast\") enw_posterior(fit$fit[[1]], variables = \"expr_beta\") #>          variable        mean      median        sd       mad         q5 #>            <char>       <num>       <num>     <num>     <num>      <num> #>  1:  expr_beta[1] -0.36231237 -0.35151193 0.5850323 0.6006064 -1.3159711 #>  2:  expr_beta[2] -0.81956125 -0.81313828 0.5819066 0.5560748 -1.7628072 #>  3:  expr_beta[3]  0.46612639  0.49545094 0.5655799 0.5622846 -0.4949055 #>  4:  expr_beta[4] -0.48794876 -0.49916739 0.5589527 0.5466011 -1.3540056 #>  5:  expr_beta[5] -0.22884095 -0.24754695 0.5903614 0.5921100 -1.1685938 #>  6:  expr_beta[6]  1.73624712  1.70249710 0.5808644 0.5712751  0.7963793 #>  7:  expr_beta[7]  0.31247778  0.30180589 0.5438900 0.5319103 -0.5481479 #>  8:  expr_beta[8]  0.27411988  0.25767186 0.5339315 0.5099338 -0.6125495 #>  9:  expr_beta[9] -0.37902061 -0.38080532 0.5177745 0.5149070 -1.2208034 #> 10: expr_beta[10] -0.13800267 -0.13863863 0.5126915 0.4773898 -0.9891446 #> 11: expr_beta[11] -0.56535928 -0.54510019 0.5349959 0.4969682 -1.4540302 #> 12: expr_beta[12] -1.23616337 -1.23939545 0.5669137 0.5490113 -2.2006179 #> 13: expr_beta[13]  1.52430200  1.50412600 0.6083542 0.5898186  0.5706043 #> 14: expr_beta[14]  1.80409074  1.75511405 0.5630083 0.5551297  0.9537094 #> 15: expr_beta[15] -0.21820779 -0.20997694 0.4942602 0.4706036 -0.9992519 #> 16: expr_beta[16] -0.24226832 -0.24057451 0.4896806 0.4745631 -1.0390083 #> 17: expr_beta[17] -0.18186565 -0.18607635 0.4885592 0.4840573 -0.9573425 #> 18: expr_beta[18] -0.56179968 -0.55139067 0.5233220 0.5032514 -1.4664948 #> 19: expr_beta[19] -0.32415045 -0.34557810 0.5414081 0.4867231 -1.2015871 #> 20: expr_beta[20]  1.62616667  1.60915960 0.5308494 0.5013420  0.7826004 #> 21: expr_beta[21]  0.44747037  0.44964237 0.4927074 0.4847680 -0.3446012 #> 22: expr_beta[22] -0.28153522 -0.29583439 0.4731531 0.4539509 -1.0268855 #> 23: expr_beta[23] -0.36288210 -0.35493043 0.5065852 0.4978106 -1.2188500 #> 24: expr_beta[24] -0.11913917 -0.11253562 0.5030405 0.4948383 -0.9200924 #> 25: expr_beta[25] -0.85023634 -0.84443731 0.4808408 0.4926400 -1.6473357 #> 26: expr_beta[26] -0.65606987 -0.64917948 0.5315031 0.4869885 -1.5168655 #> 27: expr_beta[27]  2.09818328  2.07172435 0.6009010 0.5828347  1.1135353 #> 28: expr_beta[28]  1.61234161  1.61686790 0.5287609 0.5388000  0.7493838 #> 29: expr_beta[29]  0.09712640  0.10143074 0.4698238 0.4568917 -0.6671413 #> 30: expr_beta[30] -0.62193854 -0.61202998 0.4911750 0.4764071 -1.4610819 #> 31: expr_beta[31] -0.25666914 -0.24656807 0.5032483 0.4953429 -1.0916028 #> 32: expr_beta[32] -0.63714072 -0.62861597 0.5150330 0.4915710 -1.4770739 #> 33: expr_beta[33] -0.14580387 -0.16495427 0.5645721 0.5251862 -1.0306670 #> 34: expr_beta[34]  1.47075466  1.44993585 0.5893215 0.5336735  0.5148384 #> 35: expr_beta[35]  0.17575746  0.16139901 0.5545039 0.5552362 -0.7371526 #> 36: expr_beta[36]  0.04687313  0.03002159 0.5723066 0.5528774 -0.8561952 #> 37: expr_beta[37]  0.08724014  0.05556753 0.5980743 0.5931941 -0.8643870 #> 38: expr_beta[38]  0.17819387  0.16938760 0.6788880 0.6819758 -0.9490598 #> 39: expr_beta[39]  0.42262333  0.42980613 0.7639196 0.7547569 -0.8700442 #>          variable        mean      median        sd       mad         q5 #>            <char>       <num>       <num>     <num>     <num>      <num> #>             q20         q80         q95      rhat  ess_bulk ess_tail #>           <num>       <num>       <num>     <num>     <num>    <num> #>  1: -0.87133971  0.12555731  0.56508046 0.9989587 1034.8155 784.3484 #>  2: -1.27793500 -0.35128993  0.10315747 1.0012032 1219.4900 659.5294 #>  3: -0.01216879  0.93607003  1.35838524 1.0007621 1436.5899 628.6754 #>  4: -0.95466409 -0.03895863  0.49544196 1.0008615 1124.3042 688.5391 #>  5: -0.72499127  0.26687294  0.74611517 1.0020059 1257.3737 916.6946 #>  6:  1.25857018  2.23777830  2.70428653 1.0015001 1175.0875 937.0116 #>  7: -0.11994888  0.76649043  1.20764185 0.9999581 1422.5973 797.0406 #>  8: -0.16944823  0.72601092  1.14223692 1.0006645 1271.9763 827.1159 #>  9: -0.80719373  0.04970144  0.47068590 0.9997404 1253.8721 796.6055 #> 10: -0.55146267  0.26209196  0.70929364 0.9997342 1247.4815 812.6574 #> 11: -0.97577538 -0.13774556  0.24113021 0.9996867 1167.9192 731.0374 #> 12: -1.69440914 -0.76736135 -0.34887406 1.0017817 1058.8636 813.4761 #> 13:  1.02702416  2.03352926  2.52405496 1.0059446 1064.2396 770.2097 #> 14:  1.33421322  2.28054282  2.76657796 1.0085878  938.2817 644.0399 #> 15: -0.62194760  0.16917189  0.59835233 1.0066819 1141.9916 758.6467 #> 16: -0.63600774  0.16621049  0.54314613 1.0019863 1120.5716 562.4977 #> 17: -0.61136918  0.20751536  0.63155207 1.0029007  770.5252 563.1756 #> 18: -0.98965963 -0.11010908  0.26152720 1.0013634 1130.7799 692.9768 #> 19: -0.74655571  0.09641736  0.55604595 0.9999846 1088.1731 689.8266 #> 20:  1.18499112  2.04806982  2.52287568 1.0048840  666.1959 718.7960 #> 21:  0.01769111  0.84117455  1.29764955 0.9989889 1255.2466 720.4613 #> 22: -0.67767772  0.10544919  0.51079736 1.0008952 1042.3838 667.5575 #> 23: -0.76521636  0.04122409  0.47322174 1.0011551  927.7012 677.4681 #> 24: -0.55313653  0.27715696  0.71077097 1.0055471 1234.8771 642.6127 #> 25: -1.23696004 -0.43866941 -0.09357462 1.0005179 1003.9991 732.4665 #> 26: -1.08055646 -0.24322699  0.19951345 1.0009004 1022.0853 704.1599 #> 27:  1.61533832  2.59578078  3.12353828 1.0030772  699.4889 481.3586 #> 28:  1.16813958  2.07291802  2.44034505 1.0028804  997.7398 787.7762 #> 29: -0.29967880  0.48647851  0.87632563 1.0060800 1086.4967 804.1704 #> 30: -1.02467426 -0.21999886  0.16220810 1.0057719 1074.2416 908.8440 #> 31: -0.68746043  0.16230600  0.55967256 1.0021082 1338.2938 902.4538 #> 32: -1.05282160 -0.22627583  0.17844925 1.0011134 1012.3729 646.3955 #> 33: -0.59472951  0.30289449  0.74514686 1.0036005 1104.3458 855.6841 #> 34:  1.00136246  1.92662572  2.44258336 1.0009131 1219.4466 773.5495 #> 35: -0.29302284  0.65335792  1.09055307 1.0009167 1069.8313 540.1782 #> 36: -0.42408784  0.51637944  1.02373972 1.0088049 1271.9392 723.2950 #> 37: -0.41256106  0.58398682  1.08271750 1.0031225 1570.9752 868.4931 #> 38: -0.41310494  0.76460447  1.32156526 0.9987118 1650.8947 567.5275 #> 39: -0.19550220  1.07287042  1.63541228 1.0052628 1443.3048 638.0017 #>             q20         q80         q95      rhat  ess_bulk ess_tail #>           <num>       <num>       <num>     <num>     <num>    <num>"},{"path":"https://package.epinowcast.org/dev/reference/enw_pp_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Posterior predictive summary — enw_pp_summary","title":"Posterior predictive summary — enw_pp_summary","text":"function summarises posterior predictives observed data (report reference date). functionality function can used directly output epinowcast() using supplied summary.epinowcast() method.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_pp_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Posterior predictive summary — enw_pp_summary","text":"","code":"enw_pp_summary(fit, diff_obs, probs = c(0.05, 0.2, 0.35, 0.5, 0.65, 0.8, 0.95))"},{"path":"https://package.epinowcast.org/dev/reference/enw_pp_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Posterior predictive summary — enw_pp_summary","text":"fit cmdstanr fit object. diff_obs data.frame observed data least date variable reference_date, grouping variable .group. probs vector numeric probabilities produce quantile summaries . default 5%, 20%, 80%, 95% quantiles also minimum set required plotting functions work.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_pp_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Posterior predictive summary — enw_pp_summary","text":"data.table summarising posterior predictions.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_pp_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Posterior predictive summary — enw_pp_summary","text":"","code":"fit <- enw_example(\"nowcast\") enw_pp_summary(fit$fit[[1]], fit$new_confirm[[1]], probs = c(0.5)) #>      reference_date report_date .group max_confirm location age_group confirm #>              <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>   1:     2021-07-14  2021-07-14      1          72       DE       00+      22 #>   2:     2021-07-14  2021-07-15      1          72       DE       00+      34 #>   3:     2021-07-14  2021-07-16      1          72       DE       00+      38 #>   4:     2021-07-14  2021-07-17      1          72       DE       00+      43 #>   5:     2021-07-14  2021-07-18      1          72       DE       00+      43 #>  ---                                                                          #> 606:     2021-08-20  2021-08-21      1         171       DE       00+     159 #> 607:     2021-08-20  2021-08-22      1         171       DE       00+     171 #> 608:     2021-08-21  2021-08-21      1         112       DE       00+      69 #> 609:     2021-08-21  2021-08-22      1         112       DE       00+     112 #> 610:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>      cum_prop_reported delay new_confirm prop_reported   mean median        sd #>                  <num> <num>       <int>         <num>  <num>  <num>     <num> #>   1:         0.3055556     0          22    0.30555556 22.049     20 10.447476 #>   2:         0.4722222     1          12    0.16666667 22.031     21 10.062370 #>   3:         0.5277778     2           4    0.05555556  7.992      8  4.118361 #>   4:         0.5972222     3           5    0.06944444  4.261      4  2.692978 #>   5:         0.5972222     4           0    0.00000000  1.326      1  1.258295 #>  ---                                                                           #> 606:         0.9298246     1          61    0.35672515 81.048     77 33.870413 #> 607:         1.0000000     2          12    0.07017544 12.586     11  6.299229 #> 608:         0.6160714     0          69    0.61607143 73.471     69 32.792995 #> 609:         1.0000000     1          43    0.38392857 47.332     44 20.074730 #> 610:         1.0000000     0          45    1.00000000 40.534     37 20.435911 #>          mad   q50      rhat  ess_bulk  ess_tail #>        <num> <num>     <num>     <num>     <num> #>   1:  8.8956    20 1.0007087  981.0605  957.4820 #>   2: 10.3782    21 1.0006400 1010.0549  860.7285 #>   3:  4.4478     8 1.0018374 1046.7610  956.3804 #>   4:  2.9652     4 1.0008338  959.7921  978.0414 #>   5:  1.4826     1 1.0003294  999.1432  873.2038 #>  ---                                             #> 606: 31.1346    77 0.9999674 1016.8230 1000.9385 #> 607:  5.9304    11 1.0006309  965.7202  850.5506 #> 608: 29.6520    69 0.9983329 1072.1422  973.6582 #> 609: 19.2738    44 0.9993679 1127.5257  906.6164 #> 610: 17.7912    37 1.0003136 1372.2704 1042.6714"},{"path":"https://package.epinowcast.org/dev/reference/enw_preprocess_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Preprocess observations — enw_preprocess_data","title":"Preprocess observations — enw_preprocess_data","text":"function preprocesses raw observations assumption reported cumulative counts reference report date used assign groups. also constructs data objects used visualisation modelling functions including observed empirical probability report given day, cumulative probability report, latest available observations, incidence observations, metadata date reference report (used construct models). function wraps preprocessing functions may instead used individually required. Note internally reports beyond user specified delay dropped modelling purposes cum_prop_reported max_confirm variables allowing user check impact may (cum_prop_reported significantly 1 longer max_delay may appropriate). Also note missing reference report dates suspected occur data need completed enw_complete_dates().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_preprocess_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Preprocess observations — enw_preprocess_data","text":"","code":"enw_preprocess_data(   obs,   by = NULL,   max_delay,   timestep = \"day\",   set_negatives_to_zero = TRUE,   ...,   copy = TRUE )"},{"path":"https://package.epinowcast.org/dev/reference/enw_preprocess_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Preprocess observations — enw_preprocess_data","text":"obs data.frame containing least following variables: reference_date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling max_delay maximum delay model delay distribution, specified units timestep (e.g., timestep = \"week\", max_delay = 3 means 3 weeks). specified maximum observed delay assumed true maximum delay model. Otherwise, integer greater equal 1 can specified. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Steps take determine maximum delay: Consider realistic relevant application. Check proportion observations reported (prop_reported) delay new_confirm output enw_preprocess_obs. Use check_max_delay() check coverage candidate max_delay. doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 intervals (.e. max_delay 1 corresponds delay). timestep timestep used process model (.e. reference date model). can string (\"day\", \"week\", \"month\") numeric whole number representing number days. data timestep may wish make use enw_aggregate_cumulative() aggregate data desired timestep. set_negatives_to_zero Logical, defaults TRUE. negative counts (calculated incidence observations) set zero? Currently downstream modelling support negative counts setting must TRUE intending use epinowcast(). ... arguments enw_add_metaobs_features(), e.g. holidays, sets commonly used metadata (e.g. day week, days since start time series) copy logical; TRUE (default) creates copy; otherwise, modifies obs place.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_preprocess_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Preprocess observations — enw_preprocess_data","text":"data.table containing processed observations series nested data.frames well variables containing metadata. : obs: (observations addition empirical reporting proportions restricted specified maximum delay). new_confirm: Incidence notifications reference report date. Empirical reporting distributions also added. latest: latest available observations. missing_reference: Observations missing reference dates. reporting_triangle: Incident observations report reference date standard reporting triangle matrix format. metareference: Metadata reference dates derived observations. metrareport: Metadata report dates. metadelay: Metadata reporting delays produced using enw_metadata_delay(). max_delay: Maximum delay modelled epinowcast. time: Numeric, number timepoints data. snapshots: Numeric, number available data snapshots use nowcasting. groups: Numeric, Number groups/strata supplied observations (set using ). max_date: maximum available report date.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_preprocess_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Preprocess observations — enw_preprocess_data","text":"max_delay numeric, internally coerced integer using .integer()).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_preprocess_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Preprocess observations — enw_preprocess_data","text":"","code":"library(data.table)  # Filter example hospitalisation data to be national and over all ages nat_germany_hosp <- germany_covid19_hosp[location == \"DE\"] nat_germany_hosp <- nat_germany_hosp[age_group == \"00+\"]  # Preprocess with default settings pobs <- enw_preprocess_data(nat_germany_hosp) #> Using the maximum observed delay of 82 days. You may want to specify a shorter #> (or, in special cases, longer) maximum delay via the `max_delay` argument. See #> help(enw_preprocess_data) (`?epinowcast::enw_preprocess_data()`) for details. pobs #>                      obs            new_confirm               latest #>                   <list>                 <list>               <list> #> 1: <data.table[12915x9]> <data.table[12915x11]> <data.table[198x10]> #>    missing_reference   reporting_triangle       metareference #>               <list>               <list>              <list> #> 1: <data.table[0x6]> <data.table[198x84]> <data.table[198x9]> #>              metareport          metadelay max_delay  time snapshots     by #>                  <list>             <list>     <num> <int>     <int> <list> #> 1: <data.table[279x12]> <data.table[82x5]>        82   198       198 [NULL] #>    groups   max_date timestep #>     <int>     <IDat>   <char> #> 1:      1 2021-10-20      day"},{"path":"https://package.epinowcast.org/dev/reference/enw_priors_as_data_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert prior data.frame to list — enw_priors_as_data_list","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"Converts priors defined data.frame list format use stan. addition adds \"_p\" variable names order allow distinguished standard usage within modelling code.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_priors_as_data_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"","code":"enw_priors_as_data_list(priors)"},{"path":"https://package.epinowcast.org/dev/reference/enw_priors_as_data_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"priors data.frame following variables: variable, mean, sd describing normal priors. Priors appropriate format returned enw_reference() well similar model specification functions.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_priors_as_data_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"named list entry specifying prior length two vector (specifying mean standard deviation prior).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_priors_as_data_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert prior data.frame to list — enw_priors_as_data_list","text":"","code":"priors <- data.frame(variable = \"x\", mean = 1, sd = 2) enw_priors_as_data_list(priors) #> $x_p #>      [,1] #> mean    1 #> sd      2 #>"},{"path":"https://package.epinowcast.org/dev/reference/enw_quantiles_to_long.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"Convert summarised quantiles wide long format","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_quantiles_to_long.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"","code":"enw_quantiles_to_long(posterior)"},{"path":"https://package.epinowcast.org/dev/reference/enw_quantiles_to_long.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"posterior data.frame output enw_posterior().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_quantiles_to_long.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"data.frame quantiles long format.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_quantiles_to_long.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert summarised quantiles from wide to long format — enw_quantiles_to_long","text":"","code":"fit <- enw_example(\"nowcast\") posterior <- enw_posterior(fit$fit[[1]], var = \"expr_lelatent_int[1,1]\") enw_quantiles_to_long(posterior) #>                  variable     mean   median        sd       mad      rhat #>                    <char>    <num>    <num>     <num>     <num>     <num> #> 1: expr_lelatent_int[1,1] 4.313129 4.312379 0.1671607 0.1600364 0.9991704 #> 2: expr_lelatent_int[1,1] 4.313129 4.312379 0.1671607 0.1600364 0.9991704 #> 3: expr_lelatent_int[1,1] 4.313129 4.312379 0.1671607 0.1600364 0.9991704 #> 4: expr_lelatent_int[1,1] 4.313129 4.312379 0.1671607 0.1600364 0.9991704 #>    ess_bulk ess_tail quantile prediction #>       <num>    <num>    <num>      <num> #> 1: 1006.782 735.6759     0.05   4.022114 #> 2: 1006.782 735.6759     0.20   4.180943 #> 3: 1006.782 735.6759     0.80   4.457060 #> 4: 1006.782 735.6759     0.95   4.588217"},{"path":"https://package.epinowcast.org/dev/reference/enw_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Reference date logit hazard reporting model module — enw_reference","title":"Reference date logit hazard reporting model module — enw_reference","text":"Specifies reference date reporting delay model using parametric /non-parametric hazard formulations.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reference date logit hazard reporting model module — enw_reference","text":"","code":"enw_reference(   parametric = ~1,   distribution = c(\"lognormal\", \"none\", \"exponential\", \"gamma\", \"loglogistic\"),   non_parametric = ~0,   data )"},{"path":"https://package.epinowcast.org/dev/reference/enw_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reference date logit hazard reporting model module — enw_reference","text":"parametric formula (implemented enw_formula()) describing parametric reference date delay model. can use features defined report date defined metareference produced enw_preprocess_data(). Note formula applied summary statistics chosen parametric distribution summary parameter separate effects. Set ~0 disable parametric component (internally converted ~1 distribution set \"none\"). See enw_formula() details formula syntax including fixed effects, random effects, random walks. distribution character vector describing parametric delay distribution use. Current options : \"none\", \"lognormal\", \"gamma\", \"exponential\", \"loglogistic\", default \"lognormal\". non_parametric formula (implemented enw_formula()) describing non-parametric logit hazard model. can use features defined reference date delay. draws linked data.frame using metareference metadelay produced enw_preprocess_data(). effect per delay specified approximates Cox proportional hazards model discrete time single strata. Set ~0 disable non-parametric component (internally converted ~1 flagged inactive). used conjunction parametric model often makes sense disable intercept ensure model identifiability (e.g., ~ 0 + (1 | delay)). See enw_formula() details formula syntax. data Output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reference date logit hazard reporting model module — enw_reference","text":"list containing supplied formulas, data passed list describing models, data.frame describing priors used, function takes output data priors returns function can used sample tightened version prior distribution.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Reference date logit hazard reporting model module — enw_reference","text":"","code":"# Parametric model with a lognormal distribution enw_reference(  parametric = ~1, distribution = \"lognormal\",  data = enw_example(\"preprocessed\") ) #> $formula #> $formula$parametric #> [1] \"~1\" #>  #> $formula$non_parametric #> [1] \"~1\" #>  #>  #> $data #> $data$refp_fintercept #> [1] 1 #>  #> $data$refp_fnrow #> [1] 1 #>  #> $data$refp_findex #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 #>  #> $data$refp_fnindex #> [1] 40 #>  #> $data$refp_fncol #> [1] 0 #>  #> $data$refp_rncol #> [1] 0 #>  #> $data$refp_fdesign #> numeric(0) #>  #> $data$refp_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$model_refp #> [1] 2 #>  #> $data$refnp_fintercept #> [1] 1 #>  #> $data$refnp_fnrow #> [1] 800 #>  #> $data$refnp_findex #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 #> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 #> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 #> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 #> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 #> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 #> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 #> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 #> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 #> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 #> [271] 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 #> [289] 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 #> [307] 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 #> [325] 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 #> [343] 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 #> [361] 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 #> [379] 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 #> [397] 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 #> [415] 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 #> [433] 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 #> [451] 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 #> [469] 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 #> [487] 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 #> [505] 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 #> [523] 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 #> [541] 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 #> [559] 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 #> [577] 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 #> [595] 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 #> [613] 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 #> [631] 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 #> [649] 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 #> [667] 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 #> [685] 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 #> [703] 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 #> [721] 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 #> [739] 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 #> [757] 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 #> [775] 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 #> [793] 793 794 795 796 797 798 799 800 #>  #> $data$refnp_fnindex #> [1] 800 #>  #> $data$refnp_fncol #> [1] 0 #>  #> $data$refnp_rncol #> [1] 0 #>  #> $data$refnp_fdesign #>     #> 1   #> 2   #> 3   #> 4   #> 5   #> 6   #> 7   #> 8   #> 9   #> 10  #> 11  #> 12  #> 13  #> 14  #> 15  #> 16  #> 17  #> 18  #> 19  #> 20  #> 21  #> 22  #> 23  #> 24  #> 25  #> 26  #> 27  #> 28  #> 29  #> 30  #> 31  #> 32  #> 33  #> 34  #> 35  #> 36  #> 37  #> 38  #> 39  #> 40  #> 41  #> 42  #> 43  #> 44  #> 45  #> 46  #> 47  #> 48  #> 49  #> 50  #> 51  #> 52  #> 53  #> 54  #> 55  #> 56  #> 57  #> 58  #> 59  #> 60  #> 61  #> 62  #> 63  #> 64  #> 65  #> 66  #> 67  #> 68  #> 69  #> 70  #> 71  #> 72  #> 73  #> 74  #> 75  #> 76  #> 77  #> 78  #> 79  #> 80  #> 81  #> 82  #> 83  #> 84  #> 85  #> 86  #> 87  #> 88  #> 89  #> 90  #> 91  #> 92  #> 93  #> 94  #> 95  #> 96  #> 97  #> 98  #> 99  #> 100 #> 101 #> 102 #> 103 #> 104 #> 105 #> 106 #> 107 #> 108 #> 109 #> 110 #> 111 #> 112 #> 113 #> 114 #> 115 #> 116 #> 117 #> 118 #> 119 #> 120 #> 121 #> 122 #> 123 #> 124 #> 125 #> 126 #> 127 #> 128 #> 129 #> 130 #> 131 #> 132 #> 133 #> 134 #> 135 #> 136 #> 137 #> 138 #> 139 #> 140 #> 141 #> 142 #> 143 #> 144 #> 145 #> 146 #> 147 #> 148 #> 149 #> 150 #> 151 #> 152 #> 153 #> 154 #> 155 #> 156 #> 157 #> 158 #> 159 #> 160 #> 161 #> 162 #> 163 #> 164 #> 165 #> 166 #> 167 #> 168 #> 169 #> 170 #> 171 #> 172 #> 173 #> 174 #> 175 #> 176 #> 177 #> 178 #> 179 #> 180 #> 181 #> 182 #> 183 #> 184 #> 185 #> 186 #> 187 #> 188 #> 189 #> 190 #> 191 #> 192 #> 193 #> 194 #> 195 #> 196 #> 197 #> 198 #> 199 #> 200 #> 201 #> 202 #> 203 #> 204 #> 205 #> 206 #> 207 #> 208 #> 209 #> 210 #> 211 #> 212 #> 213 #> 214 #> 215 #> 216 #> 217 #> 218 #> 219 #> 220 #> 221 #> 222 #> 223 #> 224 #> 225 #> 226 #> 227 #> 228 #> 229 #> 230 #> 231 #> 232 #> 233 #> 234 #> 235 #> 236 #> 237 #> 238 #> 239 #> 240 #> 241 #> 242 #> 243 #> 244 #> 245 #> 246 #> 247 #> 248 #> 249 #> 250 #> 251 #> 252 #> 253 #> 254 #> 255 #> 256 #> 257 #> 258 #> 259 #> 260 #> 261 #> 262 #> 263 #> 264 #> 265 #> 266 #> 267 #> 268 #> 269 #> 270 #> 271 #> 272 #> 273 #> 274 #> 275 #> 276 #> 277 #> 278 #> 279 #> 280 #> 281 #> 282 #> 283 #> 284 #> 285 #> 286 #> 287 #> 288 #> 289 #> 290 #> 291 #> 292 #> 293 #> 294 #> 295 #> 296 #> 297 #> 298 #> 299 #> 300 #> 301 #> 302 #> 303 #> 304 #> 305 #> 306 #> 307 #> 308 #> 309 #> 310 #> 311 #> 312 #> 313 #> 314 #> 315 #> 316 #> 317 #> 318 #> 319 #> 320 #> 321 #> 322 #> 323 #> 324 #> 325 #> 326 #> 327 #> 328 #> 329 #> 330 #> 331 #> 332 #> 333 #> 334 #> 335 #> 336 #> 337 #> 338 #> 339 #> 340 #> 341 #> 342 #> 343 #> 344 #> 345 #> 346 #> 347 #> 348 #> 349 #> 350 #> 351 #> 352 #> 353 #> 354 #> 355 #> 356 #> 357 #> 358 #> 359 #> 360 #> 361 #> 362 #> 363 #> 364 #> 365 #> 366 #> 367 #> 368 #> 369 #> 370 #> 371 #> 372 #> 373 #> 374 #> 375 #> 376 #> 377 #> 378 #> 379 #> 380 #> 381 #> 382 #> 383 #> 384 #> 385 #> 386 #> 387 #> 388 #> 389 #> 390 #> 391 #> 392 #> 393 #> 394 #> 395 #> 396 #> 397 #> 398 #> 399 #> 400 #> 401 #> 402 #> 403 #> 404 #> 405 #> 406 #> 407 #> 408 #> 409 #> 410 #> 411 #> 412 #> 413 #> 414 #> 415 #> 416 #> 417 #> 418 #> 419 #> 420 #> 421 #> 422 #> 423 #> 424 #> 425 #> 426 #> 427 #> 428 #> 429 #> 430 #> 431 #> 432 #> 433 #> 434 #> 435 #> 436 #> 437 #> 438 #> 439 #> 440 #> 441 #> 442 #> 443 #> 444 #> 445 #> 446 #> 447 #> 448 #> 449 #> 450 #> 451 #> 452 #> 453 #> 454 #> 455 #> 456 #> 457 #> 458 #> 459 #> 460 #> 461 #> 462 #> 463 #> 464 #> 465 #> 466 #> 467 #> 468 #> 469 #> 470 #> 471 #> 472 #> 473 #> 474 #> 475 #> 476 #> 477 #> 478 #> 479 #> 480 #> 481 #> 482 #> 483 #> 484 #> 485 #> 486 #> 487 #> 488 #> 489 #> 490 #> 491 #> 492 #> 493 #> 494 #> 495 #> 496 #> 497 #> 498 #> 499 #> 500 #> 501 #> 502 #> 503 #> 504 #> 505 #> 506 #> 507 #> 508 #> 509 #> 510 #> 511 #> 512 #> 513 #> 514 #> 515 #> 516 #> 517 #> 518 #> 519 #> 520 #> 521 #> 522 #> 523 #> 524 #> 525 #> 526 #> 527 #> 528 #> 529 #> 530 #> 531 #> 532 #> 533 #> 534 #> 535 #> 536 #> 537 #> 538 #> 539 #> 540 #> 541 #> 542 #> 543 #> 544 #> 545 #> 546 #> 547 #> 548 #> 549 #> 550 #> 551 #> 552 #> 553 #> 554 #> 555 #> 556 #> 557 #> 558 #> 559 #> 560 #> 561 #> 562 #> 563 #> 564 #> 565 #> 566 #> 567 #> 568 #> 569 #> 570 #> 571 #> 572 #> 573 #> 574 #> 575 #> 576 #> 577 #> 578 #> 579 #> 580 #> 581 #> 582 #> 583 #> 584 #> 585 #> 586 #> 587 #> 588 #> 589 #> 590 #> 591 #> 592 #> 593 #> 594 #> 595 #> 596 #> 597 #> 598 #> 599 #> 600 #> 601 #> 602 #> 603 #> 604 #> 605 #> 606 #> 607 #> 608 #> 609 #> 610 #> 611 #> 612 #> 613 #> 614 #> 615 #> 616 #> 617 #> 618 #> 619 #> 620 #> 621 #> 622 #> 623 #> 624 #> 625 #> 626 #> 627 #> 628 #> 629 #> 630 #> 631 #> 632 #> 633 #> 634 #> 635 #> 636 #> 637 #> 638 #> 639 #> 640 #> 641 #> 642 #> 643 #> 644 #> 645 #> 646 #> 647 #> 648 #> 649 #> 650 #> 651 #> 652 #> 653 #> 654 #> 655 #> 656 #> 657 #> 658 #> 659 #> 660 #> 661 #> 662 #> 663 #> 664 #> 665 #> 666 #> 667 #> 668 #> 669 #> 670 #> 671 #> 672 #> 673 #> 674 #> 675 #> 676 #> 677 #> 678 #> 679 #> 680 #> 681 #> 682 #> 683 #> 684 #> 685 #> 686 #> 687 #> 688 #> 689 #> 690 #> 691 #> 692 #> 693 #> 694 #> 695 #> 696 #> 697 #> 698 #> 699 #> 700 #> 701 #> 702 #> 703 #> 704 #> 705 #> 706 #> 707 #> 708 #> 709 #> 710 #> 711 #> 712 #> 713 #> 714 #> 715 #> 716 #> 717 #> 718 #> 719 #> 720 #> 721 #> 722 #> 723 #> 724 #> 725 #> 726 #> 727 #> 728 #> 729 #> 730 #> 731 #> 732 #> 733 #> 734 #> 735 #> 736 #> 737 #> 738 #> 739 #> 740 #> 741 #> 742 #> 743 #> 744 #> 745 #> 746 #> 747 #> 748 #> 749 #> 750 #> 751 #> 752 #> 753 #> 754 #> 755 #> 756 #> 757 #> 758 #> 759 #> 760 #> 761 #> 762 #> 763 #> 764 #> 765 #> 766 #> 767 #> 768 #> 769 #> 770 #> 771 #> 772 #> 773 #> 774 #> 775 #> 776 #> 777 #> 778 #> 779 #> 780 #> 781 #> 782 #> 783 #> 784 #> 785 #> 786 #> 787 #> 788 #> 789 #> 790 #> 791 #> 792 #> 793 #> 794 #> 795 #> 796 #> 797 #> 798 #> 799 #> 800 #>  #> $data$refnp_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$model_refnp #> [1] 0 #>  #>  #> $priors #>             variable #>               <char> #> 1:     refp_mean_int #> 2:       refp_sd_int #> 3: refp_mean_beta_sd #> 4:   refp_sd_beta_sd #> 5:         refnp_int #> 6:     refnp_beta_sd #>                                                       description #>                                                            <char> #> 1:         Log mean intercept for parametric reference date delay #> 2: Log standard deviation for the parametric reference date delay #> 3:    Standard deviation of scaled pooled parametric mean effects #> 4:      Standard deviation of scaled pooled parametric sd effects #> 5:              Intercept for non-parametric reference date delay #> 6:     Standard deviation of scaled pooled non-parametric effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   1.0     1 #> 2: Zero truncated normal   0.5     1 #> 3: Zero truncated normal   0.0     1 #> 4: Zero truncated normal   0.0     1 #> 5:                Normal   0.0     1 #> 6: Zero truncated normal   0.0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(refp_mean_int = numeric(0), refp_sd_int = numeric(0),  #>             refp_mean_beta = numeric(0), refp_sd_beta = numeric(0),  #>             refp_mean_beta_sd = numeric(0), refp_sd_beta_sd = numeric(0),  #>             refnp_int = numeric(0), refnp_beta = numeric(0),  #>             refnp_beta_sd = numeric(0)) #>         if (data$model_refp > 0) { #>             init$refp_mean_int <- array(rnorm(1, priors$refp_mean_int_p[1],  #>                 priors$refp_mean_int_p[2]/10)) #>         } #>         if (data$model_refp > 1) { #>             init$refp_sd_int <- array(abs(rnorm(1, priors$refp_sd_int_p[1],  #>                 priors$refp_sd_int_p[2]/10))) #>         } #>         init$refp_mean <- rep(init$refp_mean_int, data$refp_fnrow) #>         init$refp_sd <- rep(init$refp_sd_int, data$refp_fnrow) #>         if (data$refp_fncol > 0) { #>             init$refp_mean_beta <- array(rnorm(data$refp_fncol,  #>                 0, 0.01)) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta <- array(rnorm(data$refp_fncol,  #>                   0, 0.01)) #>             } #>         } #>         if (data$refp_rncol > 0) { #>             init$refp_mean_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                 priors$refp_mean_beta_sd_p[1], priors$refp_mean_beta_sd_p[2]/10))) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                   priors$refp_sd_beta_sd_p[1], priors$refp_sd_beta_sd_p[2]/10))) #>             } #>         } #>         if (data$model_refnp > 0) { #>             if (data$refnp_fintercept > 0) { #>                 init$refnp_int <- array(rnorm(1, priors$refnp_int_p[1],  #>                   priors$refnp_int_p[2]/10)) #>             } #>             if (data$refnp_fncol > 0) { #>                 init$refnp_beta <- array(rnorm(data$refnp_fncol,  #>                   0, 0.01)) #>             } #>             if (data$refnp_rncol > 0) { #>                 init$refnp_beta_sd <- array(abs(rnorm(data$refnp_rncol,  #>                   priors$refnp_beta_sd_p[1], priors$refnp_beta_sd_p[2]/10))) #>             } #>         } #>         init #>     } #>     fn #> } #> <bytecode: 0x55d527481040> #> <environment: 0x55d5274941c0> #>   # Non-parametric model with a random effect per delay enw_reference(  parametric = ~ 0, non_parametric = ~ 1 + (1 | delay),  data = enw_example(\"preprocessed\") ) #> ℹ The non-parametric reference date effects design matrix is sparse (>90% zeros). Consider using `sparse_design = TRUE` in `enw_fit_opts()` to potentially reduce memory usage and computation time. #> $formula #> $formula$parametric #> [1] \"~1\" #>  #> $formula$non_parametric #> [1] \"~1 + (1 | delay)\" #>  #>  #> $data #> $data$refp_fintercept #> [1] 1 #>  #> $data$refp_fnrow #> [1] 1 #>  #> $data$refp_findex #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 #>  #> $data$refp_fnindex #> [1] 40 #>  #> $data$refp_fncol #> [1] 0 #>  #> $data$refp_rncol #> [1] 0 #>  #> $data$refp_fdesign #> numeric(0) #>  #> $data$refp_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$model_refp #> [1] 0 #>  #> $data$refnp_fintercept #> [1] 1 #>  #> $data$refnp_fnrow #> [1] 800 #>  #> $data$refnp_findex #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 #> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 #> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 #> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 #> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 #> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 #> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 #> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 #> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 #> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 #> [271] 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 #> [289] 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 #> [307] 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 #> [325] 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 #> [343] 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 #> [361] 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 #> [379] 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 #> [397] 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 #> [415] 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 #> [433] 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 #> [451] 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 #> [469] 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 #> [487] 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 #> [505] 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 #> [523] 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 #> [541] 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 #> [559] 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 #> [577] 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 #> [595] 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 #> [613] 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 #> [631] 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 #> [649] 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 #> [667] 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 #> [685] 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 #> [703] 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 #> [721] 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 #> [739] 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 #> [757] 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 #> [775] 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 #> [793] 793 794 795 796 797 798 799 800 #>  #> $data$refnp_fnindex #> [1] 800 #>  #> $data$refnp_fncol #> [1] 20 #>  #> $data$refnp_rncol #> [1] 1 #>  #> $data$refnp_fdesign #>     delay0 delay1 delay2 delay3 delay4 delay5 delay6 delay7 delay8 delay9 #> 1        1      0      0      0      0      0      0      0      0      0 #> 2        0      1      0      0      0      0      0      0      0      0 #> 3        0      0      1      0      0      0      0      0      0      0 #> 4        0      0      0      1      0      0      0      0      0      0 #> 5        0      0      0      0      1      0      0      0      0      0 #> 6        0      0      0      0      0      1      0      0      0      0 #> 7        0      0      0      0      0      0      1      0      0      0 #> 8        0      0      0      0      0      0      0      1      0      0 #> 9        0      0      0      0      0      0      0      0      1      0 #> 10       0      0      0      0      0      0      0      0      0      1 #> 11       0      0      0      0      0      0      0      0      0      0 #> 12       0      0      0      0      0      0      0      0      0      0 #> 13       0      0      0      0      0      0      0      0      0      0 #> 14       0      0      0      0      0      0      0      0      0      0 #> 15       0      0      0      0      0      0      0      0      0      0 #> 16       0      0      0      0      0      0      0      0      0      0 #> 17       0      0      0      0      0      0      0      0      0      0 #> 18       0      0      0      0      0      0      0      0      0      0 #> 19       0      0      0      0      0      0      0      0      0      0 #> 20       0      0      0      0      0      0      0      0      0      0 #> 21       1      0      0      0      0      0      0      0      0      0 #> 22       0      1      0      0      0      0      0      0      0      0 #> 23       0      0      1      0      0      0      0      0      0      0 #> 24       0      0      0      1      0      0      0      0      0      0 #> 25       0      0      0      0      1      0      0      0      0      0 #> 26       0      0      0      0      0      1      0      0      0      0 #> 27       0      0      0      0      0      0      1      0      0      0 #> 28       0      0      0      0      0      0      0      1      0      0 #> 29       0      0      0      0      0      0      0      0      1      0 #> 30       0      0      0      0      0      0      0      0      0      1 #> 31       0      0      0      0      0      0      0      0      0      0 #> 32       0      0      0      0      0      0      0      0      0      0 #> 33       0      0      0      0      0      0      0      0      0      0 #> 34       0      0      0      0      0      0      0      0      0      0 #> 35       0      0      0      0      0      0      0      0      0      0 #> 36       0      0      0      0      0      0      0      0      0      0 #> 37       0      0      0      0      0      0      0      0      0      0 #> 38       0      0      0      0      0      0      0      0      0      0 #> 39       0      0      0      0      0      0      0      0      0      0 #> 40       0      0      0      0      0      0      0      0      0      0 #> 41       1      0      0      0      0      0      0      0      0      0 #> 42       0      1      0      0      0      0      0      0      0      0 #> 43       0      0      1      0      0      0      0      0      0      0 #> 44       0      0      0      1      0      0      0      0      0      0 #> 45       0      0      0      0      1      0      0      0      0      0 #> 46       0      0      0      0      0      1      0      0      0      0 #> 47       0      0      0      0      0      0      1      0      0      0 #> 48       0      0      0      0      0      0      0      1      0      0 #> 49       0      0      0      0      0      0      0      0      1      0 #> 50       0      0      0      0      0      0      0      0      0      1 #> 51       0      0      0      0      0      0      0      0      0      0 #> 52       0      0      0      0      0      0      0      0      0      0 #> 53       0      0      0      0      0      0      0      0      0      0 #> 54       0      0      0      0      0      0      0      0      0      0 #> 55       0      0      0      0      0      0      0      0      0      0 #> 56       0      0      0      0      0      0      0      0      0      0 #> 57       0      0      0      0      0      0      0      0      0      0 #> 58       0      0      0      0      0      0      0      0      0      0 #> 59       0      0      0      0      0      0      0      0      0      0 #> 60       0      0      0      0      0      0      0      0      0      0 #> 61       1      0      0      0      0      0      0      0      0      0 #> 62       0      1      0      0      0      0      0      0      0      0 #> 63       0      0      1      0      0      0      0      0      0      0 #> 64       0      0      0      1      0      0      0      0      0      0 #> 65       0      0      0      0      1      0      0      0      0      0 #> 66       0      0      0      0      0      1      0      0      0      0 #> 67       0      0      0      0      0      0      1      0      0      0 #> 68       0      0      0      0      0      0      0      1      0      0 #> 69       0      0      0      0      0      0      0      0      1      0 #> 70       0      0      0      0      0      0      0      0      0      1 #> 71       0      0      0      0      0      0      0      0      0      0 #> 72       0      0      0      0      0      0      0      0      0      0 #> 73       0      0      0      0      0      0      0      0      0      0 #> 74       0      0      0      0      0      0      0      0      0      0 #> 75       0      0      0      0      0      0      0      0      0      0 #> 76       0      0      0      0      0      0      0      0      0      0 #> 77       0      0      0      0      0      0      0      0      0      0 #> 78       0      0      0      0      0      0      0      0      0      0 #> 79       0      0      0      0      0      0      0      0      0      0 #> 80       0      0      0      0      0      0      0      0      0      0 #> 81       1      0      0      0      0      0      0      0      0      0 #> 82       0      1      0      0      0      0      0      0      0      0 #> 83       0      0      1      0      0      0      0      0      0      0 #> 84       0      0      0      1      0      0      0      0      0      0 #> 85       0      0      0      0      1      0      0      0      0      0 #> 86       0      0      0      0      0      1      0      0      0      0 #> 87       0      0      0      0      0      0      1      0      0      0 #> 88       0      0      0      0      0      0      0      1      0      0 #> 89       0      0      0      0      0      0      0      0      1      0 #> 90       0      0      0      0      0      0      0      0      0      1 #> 91       0      0      0      0      0      0      0      0      0      0 #> 92       0      0      0      0      0      0      0      0      0      0 #> 93       0      0      0      0      0      0      0      0      0      0 #> 94       0      0      0      0      0      0      0      0      0      0 #> 95       0      0      0      0      0      0      0      0      0      0 #> 96       0      0      0      0      0      0      0      0      0      0 #> 97       0      0      0      0      0      0      0      0      0      0 #> 98       0      0      0      0      0      0      0      0      0      0 #> 99       0      0      0      0      0      0      0      0      0      0 #> 100      0      0      0      0      0      0      0      0      0      0 #> 101      1      0      0      0      0      0      0      0      0      0 #> 102      0      1      0      0      0      0      0      0      0      0 #> 103      0      0      1      0      0      0      0      0      0      0 #> 104      0      0      0      1      0      0      0      0      0      0 #> 105      0      0      0      0      1      0      0      0      0      0 #> 106      0      0      0      0      0      1      0      0      0      0 #> 107      0      0      0      0      0      0      1      0      0      0 #> 108      0      0      0      0      0      0      0      1      0      0 #> 109      0      0      0      0      0      0      0      0      1      0 #> 110      0      0      0      0      0      0      0      0      0      1 #> 111      0      0      0      0      0      0      0      0      0      0 #> 112      0      0      0      0      0      0      0      0      0      0 #> 113      0      0      0      0      0      0      0      0      0      0 #> 114      0      0      0      0      0      0      0      0      0      0 #> 115      0      0      0      0      0      0      0      0      0      0 #> 116      0      0      0      0      0      0      0      0      0      0 #> 117      0      0      0      0      0      0      0      0      0      0 #> 118      0      0      0      0      0      0      0      0      0      0 #> 119      0      0      0      0      0      0      0      0      0      0 #> 120      0      0      0      0      0      0      0      0      0      0 #> 121      1      0      0      0      0      0      0      0      0      0 #> 122      0      1      0      0      0      0      0      0      0      0 #> 123      0      0      1      0      0      0      0      0      0      0 #> 124      0      0      0      1      0      0      0      0      0      0 #> 125      0      0      0      0      1      0      0      0      0      0 #> 126      0      0      0      0      0      1      0      0      0      0 #> 127      0      0      0      0      0      0      1      0      0      0 #> 128      0      0      0      0      0      0      0      1      0      0 #> 129      0      0      0      0      0      0      0      0      1      0 #> 130      0      0      0      0      0      0      0      0      0      1 #> 131      0      0      0      0      0      0      0      0      0      0 #> 132      0      0      0      0      0      0      0      0      0      0 #> 133      0      0      0      0      0      0      0      0      0      0 #> 134      0      0      0      0      0      0      0      0      0      0 #> 135      0      0      0      0      0      0      0      0      0      0 #> 136      0      0      0      0      0      0      0      0      0      0 #> 137      0      0      0      0      0      0      0      0      0      0 #> 138      0      0      0      0      0      0      0      0      0      0 #> 139      0      0      0      0      0      0      0      0      0      0 #> 140      0      0      0      0      0      0      0      0      0      0 #> 141      1      0      0      0      0      0      0      0      0      0 #> 142      0      1      0      0      0      0      0      0      0      0 #> 143      0      0      1      0      0      0      0      0      0      0 #> 144      0      0      0      1      0      0      0      0      0      0 #> 145      0      0      0      0      1      0      0      0      0      0 #> 146      0      0      0      0      0      1      0      0      0      0 #> 147      0      0      0      0      0      0      1      0      0      0 #> 148      0      0      0      0      0      0      0      1      0      0 #> 149      0      0      0      0      0      0      0      0      1      0 #> 150      0      0      0      0      0      0      0      0      0      1 #> 151      0      0      0      0      0      0      0      0      0      0 #> 152      0      0      0      0      0      0      0      0      0      0 #> 153      0      0      0      0      0      0      0      0      0      0 #> 154      0      0      0      0      0      0      0      0      0      0 #> 155      0      0      0      0      0      0      0      0      0      0 #> 156      0      0      0      0      0      0      0      0      0      0 #> 157      0      0      0      0      0      0      0      0      0      0 #> 158      0      0      0      0      0      0      0      0      0      0 #> 159      0      0      0      0      0      0      0      0      0      0 #> 160      0      0      0      0      0      0      0      0      0      0 #> 161      1      0      0      0      0      0      0      0      0      0 #> 162      0      1      0      0      0      0      0      0      0      0 #> 163      0      0      1      0      0      0      0      0      0      0 #> 164      0      0      0      1      0      0      0      0      0      0 #> 165      0      0      0      0      1      0      0      0      0      0 #> 166      0      0      0      0      0      1      0      0      0      0 #> 167      0      0      0      0      0      0      1      0      0      0 #> 168      0      0      0      0      0      0      0      1      0      0 #> 169      0      0      0      0      0      0      0      0      1      0 #> 170      0      0      0      0      0      0      0      0      0      1 #> 171      0      0      0      0      0      0      0      0      0      0 #> 172      0      0      0      0      0      0      0      0      0      0 #> 173      0      0      0      0      0      0      0      0      0      0 #> 174      0      0      0      0      0      0      0      0      0      0 #> 175      0      0      0      0      0      0      0      0      0      0 #> 176      0      0      0      0      0      0      0      0      0      0 #> 177      0      0      0      0      0      0      0      0      0      0 #> 178      0      0      0      0      0      0      0      0      0      0 #> 179      0      0      0      0      0      0      0      0      0      0 #> 180      0      0      0      0      0      0      0      0      0      0 #> 181      1      0      0      0      0      0      0      0      0      0 #> 182      0      1      0      0      0      0      0      0      0      0 #> 183      0      0      1      0      0      0      0      0      0      0 #> 184      0      0      0      1      0      0      0      0      0      0 #> 185      0      0      0      0      1      0      0      0      0      0 #> 186      0      0      0      0      0      1      0      0      0      0 #> 187      0      0      0      0      0      0      1      0      0      0 #> 188      0      0      0      0      0      0      0      1      0      0 #> 189      0      0      0      0      0      0      0      0      1      0 #> 190      0      0      0      0      0      0      0      0      0      1 #> 191      0      0      0      0      0      0      0      0      0      0 #> 192      0      0      0      0      0      0      0      0      0      0 #> 193      0      0      0      0      0      0      0      0      0      0 #> 194      0      0      0      0      0      0      0      0      0      0 #> 195      0      0      0      0      0      0      0      0      0      0 #> 196      0      0      0      0      0      0      0      0      0      0 #> 197      0      0      0      0      0      0      0      0      0      0 #> 198      0      0      0      0      0      0      0      0      0      0 #> 199      0      0      0      0      0      0      0      0      0      0 #> 200      0      0      0      0      0      0      0      0      0      0 #> 201      1      0      0      0      0      0      0      0      0      0 #> 202      0      1      0      0      0      0      0      0      0      0 #> 203      0      0      1      0      0      0      0      0      0      0 #> 204      0      0      0      1      0      0      0      0      0      0 #> 205      0      0      0      0      1      0      0      0      0      0 #> 206      0      0      0      0      0      1      0      0      0      0 #> 207      0      0      0      0      0      0      1      0      0      0 #> 208      0      0      0      0      0      0      0      1      0      0 #> 209      0      0      0      0      0      0      0      0      1      0 #> 210      0      0      0      0      0      0      0      0      0      1 #> 211      0      0      0      0      0      0      0      0      0      0 #> 212      0      0      0      0      0      0      0      0      0      0 #> 213      0      0      0      0      0      0      0      0      0      0 #> 214      0      0      0      0      0      0      0      0      0      0 #> 215      0      0      0      0      0      0      0      0      0      0 #> 216      0      0      0      0      0      0      0      0      0      0 #> 217      0      0      0      0      0      0      0      0      0      0 #> 218      0      0      0      0      0      0      0      0      0      0 #> 219      0      0      0      0      0      0      0      0      0      0 #> 220      0      0      0      0      0      0      0      0      0      0 #> 221      1      0      0      0      0      0      0      0      0      0 #> 222      0      1      0      0      0      0      0      0      0      0 #> 223      0      0      1      0      0      0      0      0      0      0 #> 224      0      0      0      1      0      0      0      0      0      0 #> 225      0      0      0      0      1      0      0      0      0      0 #> 226      0      0      0      0      0      1      0      0      0      0 #> 227      0      0      0      0      0      0      1      0      0      0 #> 228      0      0      0      0      0      0      0      1      0      0 #> 229      0      0      0      0      0      0      0      0      1      0 #> 230      0      0      0      0      0      0      0      0      0      1 #> 231      0      0      0      0      0      0      0      0      0      0 #> 232      0      0      0      0      0      0      0      0      0      0 #> 233      0      0      0      0      0      0      0      0      0      0 #> 234      0      0      0      0      0      0      0      0      0      0 #> 235      0      0      0      0      0      0      0      0      0      0 #> 236      0      0      0      0      0      0      0      0      0      0 #> 237      0      0      0      0      0      0      0      0      0      0 #> 238      0      0      0      0      0      0      0      0      0      0 #> 239      0      0      0      0      0      0      0      0      0      0 #> 240      0      0      0      0      0      0      0      0      0      0 #> 241      1      0      0      0      0      0      0      0      0      0 #> 242      0      1      0      0      0      0      0      0      0      0 #> 243      0      0      1      0      0      0      0      0      0      0 #> 244      0      0      0      1      0      0      0      0      0      0 #> 245      0      0      0      0      1      0      0      0      0      0 #> 246      0      0      0      0      0      1      0      0      0      0 #> 247      0      0      0      0      0      0      1      0      0      0 #> 248      0      0      0      0      0      0      0      1      0      0 #> 249      0      0      0      0      0      0      0      0      1      0 #> 250      0      0      0      0      0      0      0      0      0      1 #> 251      0      0      0      0      0      0      0      0      0      0 #> 252      0      0      0      0      0      0      0      0      0      0 #> 253      0      0      0      0      0      0      0      0      0      0 #> 254      0      0      0      0      0      0      0      0      0      0 #> 255      0      0      0      0      0      0      0      0      0      0 #> 256      0      0      0      0      0      0      0      0      0      0 #> 257      0      0      0      0      0      0      0      0      0      0 #> 258      0      0      0      0      0      0      0      0      0      0 #> 259      0      0      0      0      0      0      0      0      0      0 #> 260      0      0      0      0      0      0      0      0      0      0 #> 261      1      0      0      0      0      0      0      0      0      0 #> 262      0      1      0      0      0      0      0      0      0      0 #> 263      0      0      1      0      0      0      0      0      0      0 #> 264      0      0      0      1      0      0      0      0      0      0 #> 265      0      0      0      0      1      0      0      0      0      0 #> 266      0      0      0      0      0      1      0      0      0      0 #> 267      0      0      0      0      0      0      1      0      0      0 #> 268      0      0      0      0      0      0      0      1      0      0 #> 269      0      0      0      0      0      0      0      0      1      0 #> 270      0      0      0      0      0      0      0      0      0      1 #> 271      0      0      0      0      0      0      0      0      0      0 #> 272      0      0      0      0      0      0      0      0      0      0 #> 273      0      0      0      0      0      0      0      0      0      0 #> 274      0      0      0      0      0      0      0      0      0      0 #> 275      0      0      0      0      0      0      0      0      0      0 #> 276      0      0      0      0      0      0      0      0      0      0 #> 277      0      0      0      0      0      0      0      0      0      0 #> 278      0      0      0      0      0      0      0      0      0      0 #> 279      0      0      0      0      0      0      0      0      0      0 #> 280      0      0      0      0      0      0      0      0      0      0 #> 281      1      0      0      0      0      0      0      0      0      0 #> 282      0      1      0      0      0      0      0      0      0      0 #> 283      0      0      1      0      0      0      0      0      0      0 #> 284      0      0      0      1      0      0      0      0      0      0 #> 285      0      0      0      0      1      0      0      0      0      0 #> 286      0      0      0      0      0      1      0      0      0      0 #> 287      0      0      0      0      0      0      1      0      0      0 #> 288      0      0      0      0      0      0      0      1      0      0 #> 289      0      0      0      0      0      0      0      0      1      0 #> 290      0      0      0      0      0      0      0      0      0      1 #> 291      0      0      0      0      0      0      0      0      0      0 #> 292      0      0      0      0      0      0      0      0      0      0 #> 293      0      0      0      0      0      0      0      0      0      0 #> 294      0      0      0      0      0      0      0      0      0      0 #> 295      0      0      0      0      0      0      0      0      0      0 #> 296      0      0      0      0      0      0      0      0      0      0 #> 297      0      0      0      0      0      0      0      0      0      0 #> 298      0      0      0      0      0      0      0      0      0      0 #> 299      0      0      0      0      0      0      0      0      0      0 #> 300      0      0      0      0      0      0      0      0      0      0 #> 301      1      0      0      0      0      0      0      0      0      0 #> 302      0      1      0      0      0      0      0      0      0      0 #> 303      0      0      1      0      0      0      0      0      0      0 #> 304      0      0      0      1      0      0      0      0      0      0 #> 305      0      0      0      0      1      0      0      0      0      0 #> 306      0      0      0      0      0      1      0      0      0      0 #> 307      0      0      0      0      0      0      1      0      0      0 #> 308      0      0      0      0      0      0      0      1      0      0 #> 309      0      0      0      0      0      0      0      0      1      0 #> 310      0      0      0      0      0      0      0      0      0      1 #> 311      0      0      0      0      0      0      0      0      0      0 #> 312      0      0      0      0      0      0      0      0      0      0 #> 313      0      0      0      0      0      0      0      0      0      0 #> 314      0      0      0      0      0      0      0      0      0      0 #> 315      0      0      0      0      0      0      0      0      0      0 #> 316      0      0      0      0      0      0      0      0      0      0 #> 317      0      0      0      0      0      0      0      0      0      0 #> 318      0      0      0      0      0      0      0      0      0      0 #> 319      0      0      0      0      0      0      0      0      0      0 #> 320      0      0      0      0      0      0      0      0      0      0 #> 321      1      0      0      0      0      0      0      0      0      0 #> 322      0      1      0      0      0      0      0      0      0      0 #> 323      0      0      1      0      0      0      0      0      0      0 #> 324      0      0      0      1      0      0      0      0      0      0 #> 325      0      0      0      0      1      0      0      0      0      0 #> 326      0      0      0      0      0      1      0      0      0      0 #> 327      0      0      0      0      0      0      1      0      0      0 #> 328      0      0      0      0      0      0      0      1      0      0 #> 329      0      0      0      0      0      0      0      0      1      0 #> 330      0      0      0      0      0      0      0      0      0      1 #> 331      0      0      0      0      0      0      0      0      0      0 #> 332      0      0      0      0      0      0      0      0      0      0 #> 333      0      0      0      0      0      0      0      0      0      0 #> 334      0      0      0      0      0      0      0      0      0      0 #> 335      0      0      0      0      0      0      0      0      0      0 #> 336      0      0      0      0      0      0      0      0      0      0 #> 337      0      0      0      0      0      0      0      0      0      0 #> 338      0      0      0      0      0      0      0      0      0      0 #> 339      0      0      0      0      0      0      0      0      0      0 #> 340      0      0      0      0      0      0      0      0      0      0 #> 341      1      0      0      0      0      0      0      0      0      0 #> 342      0      1      0      0      0      0      0      0      0      0 #> 343      0      0      1      0      0      0      0      0      0      0 #> 344      0      0      0      1      0      0      0      0      0      0 #> 345      0      0      0      0      1      0      0      0      0      0 #> 346      0      0      0      0      0      1      0      0      0      0 #> 347      0      0      0      0      0      0      1      0      0      0 #> 348      0      0      0      0      0      0      0      1      0      0 #> 349      0      0      0      0      0      0      0      0      1      0 #> 350      0      0      0      0      0      0      0      0      0      1 #> 351      0      0      0      0      0      0      0      0      0      0 #> 352      0      0      0      0      0      0      0      0      0      0 #> 353      0      0      0      0      0      0      0      0      0      0 #> 354      0      0      0      0      0      0      0      0      0      0 #> 355      0      0      0      0      0      0      0      0      0      0 #> 356      0      0      0      0      0      0      0      0      0      0 #> 357      0      0      0      0      0      0      0      0      0      0 #> 358      0      0      0      0      0      0      0      0      0      0 #> 359      0      0      0      0      0      0      0      0      0      0 #> 360      0      0      0      0      0      0      0      0      0      0 #> 361      1      0      0      0      0      0      0      0      0      0 #> 362      0      1      0      0      0      0      0      0      0      0 #> 363      0      0      1      0      0      0      0      0      0      0 #> 364      0      0      0      1      0      0      0      0      0      0 #> 365      0      0      0      0      1      0      0      0      0      0 #> 366      0      0      0      0      0      1      0      0      0      0 #> 367      0      0      0      0      0      0      1      0      0      0 #> 368      0      0      0      0      0      0      0      1      0      0 #> 369      0      0      0      0      0      0      0      0      1      0 #> 370      0      0      0      0      0      0      0      0      0      1 #> 371      0      0      0      0      0      0      0      0      0      0 #> 372      0      0      0      0      0      0      0      0      0      0 #> 373      0      0      0      0      0      0      0      0      0      0 #> 374      0      0      0      0      0      0      0      0      0      0 #> 375      0      0      0      0      0      0      0      0      0      0 #> 376      0      0      0      0      0      0      0      0      0      0 #> 377      0      0      0      0      0      0      0      0      0      0 #> 378      0      0      0      0      0      0      0      0      0      0 #> 379      0      0      0      0      0      0      0      0      0      0 #> 380      0      0      0      0      0      0      0      0      0      0 #> 381      1      0      0      0      0      0      0      0      0      0 #> 382      0      1      0      0      0      0      0      0      0      0 #> 383      0      0      1      0      0      0      0      0      0      0 #> 384      0      0      0      1      0      0      0      0      0      0 #> 385      0      0      0      0      1      0      0      0      0      0 #> 386      0      0      0      0      0      1      0      0      0      0 #> 387      0      0      0      0      0      0      1      0      0      0 #> 388      0      0      0      0      0      0      0      1      0      0 #> 389      0      0      0      0      0      0      0      0      1      0 #> 390      0      0      0      0      0      0      0      0      0      1 #> 391      0      0      0      0      0      0      0      0      0      0 #> 392      0      0      0      0      0      0      0      0      0      0 #> 393      0      0      0      0      0      0      0      0      0      0 #> 394      0      0      0      0      0      0      0      0      0      0 #> 395      0      0      0      0      0      0      0      0      0      0 #> 396      0      0      0      0      0      0      0      0      0      0 #> 397      0      0      0      0      0      0      0      0      0      0 #> 398      0      0      0      0      0      0      0      0      0      0 #> 399      0      0      0      0      0      0      0      0      0      0 #> 400      0      0      0      0      0      0      0      0      0      0 #> 401      1      0      0      0      0      0      0      0      0      0 #> 402      0      1      0      0      0      0      0      0      0      0 #> 403      0      0      1      0      0      0      0      0      0      0 #> 404      0      0      0      1      0      0      0      0      0      0 #> 405      0      0      0      0      1      0      0      0      0      0 #> 406      0      0      0      0      0      1      0      0      0      0 #> 407      0      0      0      0      0      0      1      0      0      0 #> 408      0      0      0      0      0      0      0      1      0      0 #> 409      0      0      0      0      0      0      0      0      1      0 #> 410      0      0      0      0      0      0      0      0      0      1 #> 411      0      0      0      0      0      0      0      0      0      0 #> 412      0      0      0      0      0      0      0      0      0      0 #> 413      0      0      0      0      0      0      0      0      0      0 #> 414      0      0      0      0      0      0      0      0      0      0 #> 415      0      0      0      0      0      0      0      0      0      0 #> 416      0      0      0      0      0      0      0      0      0      0 #> 417      0      0      0      0      0      0      0      0      0      0 #> 418      0      0      0      0      0      0      0      0      0      0 #> 419      0      0      0      0      0      0      0      0      0      0 #> 420      0      0      0      0      0      0      0      0      0      0 #> 421      1      0      0      0      0      0      0      0      0      0 #> 422      0      1      0      0      0      0      0      0      0      0 #> 423      0      0      1      0      0      0      0      0      0      0 #> 424      0      0      0      1      0      0      0      0      0      0 #> 425      0      0      0      0      1      0      0      0      0      0 #> 426      0      0      0      0      0      1      0      0      0      0 #> 427      0      0      0      0      0      0      1      0      0      0 #> 428      0      0      0      0      0      0      0      1      0      0 #> 429      0      0      0      0      0      0      0      0      1      0 #> 430      0      0      0      0      0      0      0      0      0      1 #> 431      0      0      0      0      0      0      0      0      0      0 #> 432      0      0      0      0      0      0      0      0      0      0 #> 433      0      0      0      0      0      0      0      0      0      0 #> 434      0      0      0      0      0      0      0      0      0      0 #> 435      0      0      0      0      0      0      0      0      0      0 #> 436      0      0      0      0      0      0      0      0      0      0 #> 437      0      0      0      0      0      0      0      0      0      0 #> 438      0      0      0      0      0      0      0      0      0      0 #> 439      0      0      0      0      0      0      0      0      0      0 #> 440      0      0      0      0      0      0      0      0      0      0 #> 441      1      0      0      0      0      0      0      0      0      0 #> 442      0      1      0      0      0      0      0      0      0      0 #> 443      0      0      1      0      0      0      0      0      0      0 #> 444      0      0      0      1      0      0      0      0      0      0 #> 445      0      0      0      0      1      0      0      0      0      0 #> 446      0      0      0      0      0      1      0      0      0      0 #> 447      0      0      0      0      0      0      1      0      0      0 #> 448      0      0      0      0      0      0      0      1      0      0 #> 449      0      0      0      0      0      0      0      0      1      0 #> 450      0      0      0      0      0      0      0      0      0      1 #> 451      0      0      0      0      0      0      0      0      0      0 #> 452      0      0      0      0      0      0      0      0      0      0 #> 453      0      0      0      0      0      0      0      0      0      0 #> 454      0      0      0      0      0      0      0      0      0      0 #> 455      0      0      0      0      0      0      0      0      0      0 #> 456      0      0      0      0      0      0      0      0      0      0 #> 457      0      0      0      0      0      0      0      0      0      0 #> 458      0      0      0      0      0      0      0      0      0      0 #> 459      0      0      0      0      0      0      0      0      0      0 #> 460      0      0      0      0      0      0      0      0      0      0 #> 461      1      0      0      0      0      0      0      0      0      0 #> 462      0      1      0      0      0      0      0      0      0      0 #> 463      0      0      1      0      0      0      0      0      0      0 #> 464      0      0      0      1      0      0      0      0      0      0 #> 465      0      0      0      0      1      0      0      0      0      0 #> 466      0      0      0      0      0      1      0      0      0      0 #> 467      0      0      0      0      0      0      1      0      0      0 #> 468      0      0      0      0      0      0      0      1      0      0 #> 469      0      0      0      0      0      0      0      0      1      0 #> 470      0      0      0      0      0      0      0      0      0      1 #> 471      0      0      0      0      0      0      0      0      0      0 #> 472      0      0      0      0      0      0      0      0      0      0 #> 473      0      0      0      0      0      0      0      0      0      0 #> 474      0      0      0      0      0      0      0      0      0      0 #> 475      0      0      0      0      0      0      0      0      0      0 #> 476      0      0      0      0      0      0      0      0      0      0 #> 477      0      0      0      0      0      0      0      0      0      0 #> 478      0      0      0      0      0      0      0      0      0      0 #> 479      0      0      0      0      0      0      0      0      0      0 #> 480      0      0      0      0      0      0      0      0      0      0 #> 481      1      0      0      0      0      0      0      0      0      0 #> 482      0      1      0      0      0      0      0      0      0      0 #> 483      0      0      1      0      0      0      0      0      0      0 #> 484      0      0      0      1      0      0      0      0      0      0 #> 485      0      0      0      0      1      0      0      0      0      0 #> 486      0      0      0      0      0      1      0      0      0      0 #> 487      0      0      0      0      0      0      1      0      0      0 #> 488      0      0      0      0      0      0      0      1      0      0 #> 489      0      0      0      0      0      0      0      0      1      0 #> 490      0      0      0      0      0      0      0      0      0      1 #> 491      0      0      0      0      0      0      0      0      0      0 #> 492      0      0      0      0      0      0      0      0      0      0 #> 493      0      0      0      0      0      0      0      0      0      0 #> 494      0      0      0      0      0      0      0      0      0      0 #> 495      0      0      0      0      0      0      0      0      0      0 #> 496      0      0      0      0      0      0      0      0      0      0 #> 497      0      0      0      0      0      0      0      0      0      0 #> 498      0      0      0      0      0      0      0      0      0      0 #> 499      0      0      0      0      0      0      0      0      0      0 #> 500      0      0      0      0      0      0      0      0      0      0 #> 501      1      0      0      0      0      0      0      0      0      0 #> 502      0      1      0      0      0      0      0      0      0      0 #> 503      0      0      1      0      0      0      0      0      0      0 #> 504      0      0      0      1      0      0      0      0      0      0 #> 505      0      0      0      0      1      0      0      0      0      0 #> 506      0      0      0      0      0      1      0      0      0      0 #> 507      0      0      0      0      0      0      1      0      0      0 #> 508      0      0      0      0      0      0      0      1      0      0 #> 509      0      0      0      0      0      0      0      0      1      0 #> 510      0      0      0      0      0      0      0      0      0      1 #> 511      0      0      0      0      0      0      0      0      0      0 #> 512      0      0      0      0      0      0      0      0      0      0 #> 513      0      0      0      0      0      0      0      0      0      0 #> 514      0      0      0      0      0      0      0      0      0      0 #> 515      0      0      0      0      0      0      0      0      0      0 #> 516      0      0      0      0      0      0      0      0      0      0 #> 517      0      0      0      0      0      0      0      0      0      0 #> 518      0      0      0      0      0      0      0      0      0      0 #> 519      0      0      0      0      0      0      0      0      0      0 #> 520      0      0      0      0      0      0      0      0      0      0 #> 521      1      0      0      0      0      0      0      0      0      0 #> 522      0      1      0      0      0      0      0      0      0      0 #> 523      0      0      1      0      0      0      0      0      0      0 #> 524      0      0      0      1      0      0      0      0      0      0 #> 525      0      0      0      0      1      0      0      0      0      0 #> 526      0      0      0      0      0      1      0      0      0      0 #> 527      0      0      0      0      0      0      1      0      0      0 #> 528      0      0      0      0      0      0      0      1      0      0 #> 529      0      0      0      0      0      0      0      0      1      0 #> 530      0      0      0      0      0      0      0      0      0      1 #> 531      0      0      0      0      0      0      0      0      0      0 #> 532      0      0      0      0      0      0      0      0      0      0 #> 533      0      0      0      0      0      0      0      0      0      0 #> 534      0      0      0      0      0      0      0      0      0      0 #> 535      0      0      0      0      0      0      0      0      0      0 #> 536      0      0      0      0      0      0      0      0      0      0 #> 537      0      0      0      0      0      0      0      0      0      0 #> 538      0      0      0      0      0      0      0      0      0      0 #> 539      0      0      0      0      0      0      0      0      0      0 #> 540      0      0      0      0      0      0      0      0      0      0 #> 541      1      0      0      0      0      0      0      0      0      0 #> 542      0      1      0      0      0      0      0      0      0      0 #> 543      0      0      1      0      0      0      0      0      0      0 #> 544      0      0      0      1      0      0      0      0      0      0 #> 545      0      0      0      0      1      0      0      0      0      0 #> 546      0      0      0      0      0      1      0      0      0      0 #> 547      0      0      0      0      0      0      1      0      0      0 #> 548      0      0      0      0      0      0      0      1      0      0 #> 549      0      0      0      0      0      0      0      0      1      0 #> 550      0      0      0      0      0      0      0      0      0      1 #> 551      0      0      0      0      0      0      0      0      0      0 #> 552      0      0      0      0      0      0      0      0      0      0 #> 553      0      0      0      0      0      0      0      0      0      0 #> 554      0      0      0      0      0      0      0      0      0      0 #> 555      0      0      0      0      0      0      0      0      0      0 #> 556      0      0      0      0      0      0      0      0      0      0 #> 557      0      0      0      0      0      0      0      0      0      0 #> 558      0      0      0      0      0      0      0      0      0      0 #> 559      0      0      0      0      0      0      0      0      0      0 #> 560      0      0      0      0      0      0      0      0      0      0 #> 561      1      0      0      0      0      0      0      0      0      0 #> 562      0      1      0      0      0      0      0      0      0      0 #> 563      0      0      1      0      0      0      0      0      0      0 #> 564      0      0      0      1      0      0      0      0      0      0 #> 565      0      0      0      0      1      0      0      0      0      0 #> 566      0      0      0      0      0      1      0      0      0      0 #> 567      0      0      0      0      0      0      1      0      0      0 #> 568      0      0      0      0      0      0      0      1      0      0 #> 569      0      0      0      0      0      0      0      0      1      0 #> 570      0      0      0      0      0      0      0      0      0      1 #> 571      0      0      0      0      0      0      0      0      0      0 #> 572      0      0      0      0      0      0      0      0      0      0 #> 573      0      0      0      0      0      0      0      0      0      0 #> 574      0      0      0      0      0      0      0      0      0      0 #> 575      0      0      0      0      0      0      0      0      0      0 #> 576      0      0      0      0      0      0      0      0      0      0 #> 577      0      0      0      0      0      0      0      0      0      0 #> 578      0      0      0      0      0      0      0      0      0      0 #> 579      0      0      0      0      0      0      0      0      0      0 #> 580      0      0      0      0      0      0      0      0      0      0 #> 581      1      0      0      0      0      0      0      0      0      0 #> 582      0      1      0      0      0      0      0      0      0      0 #> 583      0      0      1      0      0      0      0      0      0      0 #> 584      0      0      0      1      0      0      0      0      0      0 #> 585      0      0      0      0      1      0      0      0      0      0 #> 586      0      0      0      0      0      1      0      0      0      0 #> 587      0      0      0      0      0      0      1      0      0      0 #> 588      0      0      0      0      0      0      0      1      0      0 #> 589      0      0      0      0      0      0      0      0      1      0 #> 590      0      0      0      0      0      0      0      0      0      1 #> 591      0      0      0      0      0      0      0      0      0      0 #> 592      0      0      0      0      0      0      0      0      0      0 #> 593      0      0      0      0      0      0      0      0      0      0 #> 594      0      0      0      0      0      0      0      0      0      0 #> 595      0      0      0      0      0      0      0      0      0      0 #> 596      0      0      0      0      0      0      0      0      0      0 #> 597      0      0      0      0      0      0      0      0      0      0 #> 598      0      0      0      0      0      0      0      0      0      0 #> 599      0      0      0      0      0      0      0      0      0      0 #> 600      0      0      0      0      0      0      0      0      0      0 #> 601      1      0      0      0      0      0      0      0      0      0 #> 602      0      1      0      0      0      0      0      0      0      0 #> 603      0      0      1      0      0      0      0      0      0      0 #> 604      0      0      0      1      0      0      0      0      0      0 #> 605      0      0      0      0      1      0      0      0      0      0 #> 606      0      0      0      0      0      1      0      0      0      0 #> 607      0      0      0      0      0      0      1      0      0      0 #> 608      0      0      0      0      0      0      0      1      0      0 #> 609      0      0      0      0      0      0      0      0      1      0 #> 610      0      0      0      0      0      0      0      0      0      1 #> 611      0      0      0      0      0      0      0      0      0      0 #> 612      0      0      0      0      0      0      0      0      0      0 #> 613      0      0      0      0      0      0      0      0      0      0 #> 614      0      0      0      0      0      0      0      0      0      0 #> 615      0      0      0      0      0      0      0      0      0      0 #> 616      0      0      0      0      0      0      0      0      0      0 #> 617      0      0      0      0      0      0      0      0      0      0 #> 618      0      0      0      0      0      0      0      0      0      0 #> 619      0      0      0      0      0      0      0      0      0      0 #> 620      0      0      0      0      0      0      0      0      0      0 #> 621      1      0      0      0      0      0      0      0      0      0 #> 622      0      1      0      0      0      0      0      0      0      0 #> 623      0      0      1      0      0      0      0      0      0      0 #> 624      0      0      0      1      0      0      0      0      0      0 #> 625      0      0      0      0      1      0      0      0      0      0 #> 626      0      0      0      0      0      1      0      0      0      0 #> 627      0      0      0      0      0      0      1      0      0      0 #> 628      0      0      0      0      0      0      0      1      0      0 #> 629      0      0      0      0      0      0      0      0      1      0 #> 630      0      0      0      0      0      0      0      0      0      1 #> 631      0      0      0      0      0      0      0      0      0      0 #> 632      0      0      0      0      0      0      0      0      0      0 #> 633      0      0      0      0      0      0      0      0      0      0 #> 634      0      0      0      0      0      0      0      0      0      0 #> 635      0      0      0      0      0      0      0      0      0      0 #> 636      0      0      0      0      0      0      0      0      0      0 #> 637      0      0      0      0      0      0      0      0      0      0 #> 638      0      0      0      0      0      0      0      0      0      0 #> 639      0      0      0      0      0      0      0      0      0      0 #> 640      0      0      0      0      0      0      0      0      0      0 #> 641      1      0      0      0      0      0      0      0      0      0 #> 642      0      1      0      0      0      0      0      0      0      0 #> 643      0      0      1      0      0      0      0      0      0      0 #> 644      0      0      0      1      0      0      0      0      0      0 #> 645      0      0      0      0      1      0      0      0      0      0 #> 646      0      0      0      0      0      1      0      0      0      0 #> 647      0      0      0      0      0      0      1      0      0      0 #> 648      0      0      0      0      0      0      0      1      0      0 #> 649      0      0      0      0      0      0      0      0      1      0 #> 650      0      0      0      0      0      0      0      0      0      1 #> 651      0      0      0      0      0      0      0      0      0      0 #> 652      0      0      0      0      0      0      0      0      0      0 #> 653      0      0      0      0      0      0      0      0      0      0 #> 654      0      0      0      0      0      0      0      0      0      0 #> 655      0      0      0      0      0      0      0      0      0      0 #> 656      0      0      0      0      0      0      0      0      0      0 #> 657      0      0      0      0      0      0      0      0      0      0 #> 658      0      0      0      0      0      0      0      0      0      0 #> 659      0      0      0      0      0      0      0      0      0      0 #> 660      0      0      0      0      0      0      0      0      0      0 #> 661      1      0      0      0      0      0      0      0      0      0 #> 662      0      1      0      0      0      0      0      0      0      0 #> 663      0      0      1      0      0      0      0      0      0      0 #> 664      0      0      0      1      0      0      0      0      0      0 #> 665      0      0      0      0      1      0      0      0      0      0 #> 666      0      0      0      0      0      1      0      0      0      0 #> 667      0      0      0      0      0      0      1      0      0      0 #> 668      0      0      0      0      0      0      0      1      0      0 #> 669      0      0      0      0      0      0      0      0      1      0 #> 670      0      0      0      0      0      0      0      0      0      1 #> 671      0      0      0      0      0      0      0      0      0      0 #> 672      0      0      0      0      0      0      0      0      0      0 #> 673      0      0      0      0      0      0      0      0      0      0 #> 674      0      0      0      0      0      0      0      0      0      0 #> 675      0      0      0      0      0      0      0      0      0      0 #> 676      0      0      0      0      0      0      0      0      0      0 #> 677      0      0      0      0      0      0      0      0      0      0 #> 678      0      0      0      0      0      0      0      0      0      0 #> 679      0      0      0      0      0      0      0      0      0      0 #> 680      0      0      0      0      0      0      0      0      0      0 #> 681      1      0      0      0      0      0      0      0      0      0 #> 682      0      1      0      0      0      0      0      0      0      0 #> 683      0      0      1      0      0      0      0      0      0      0 #> 684      0      0      0      1      0      0      0      0      0      0 #> 685      0      0      0      0      1      0      0      0      0      0 #> 686      0      0      0      0      0      1      0      0      0      0 #> 687      0      0      0      0      0      0      1      0      0      0 #> 688      0      0      0      0      0      0      0      1      0      0 #> 689      0      0      0      0      0      0      0      0      1      0 #> 690      0      0      0      0      0      0      0      0      0      1 #> 691      0      0      0      0      0      0      0      0      0      0 #> 692      0      0      0      0      0      0      0      0      0      0 #> 693      0      0      0      0      0      0      0      0      0      0 #> 694      0      0      0      0      0      0      0      0      0      0 #> 695      0      0      0      0      0      0      0      0      0      0 #> 696      0      0      0      0      0      0      0      0      0      0 #> 697      0      0      0      0      0      0      0      0      0      0 #> 698      0      0      0      0      0      0      0      0      0      0 #> 699      0      0      0      0      0      0      0      0      0      0 #> 700      0      0      0      0      0      0      0      0      0      0 #> 701      1      0      0      0      0      0      0      0      0      0 #> 702      0      1      0      0      0      0      0      0      0      0 #> 703      0      0      1      0      0      0      0      0      0      0 #> 704      0      0      0      1      0      0      0      0      0      0 #> 705      0      0      0      0      1      0      0      0      0      0 #> 706      0      0      0      0      0      1      0      0      0      0 #> 707      0      0      0      0      0      0      1      0      0      0 #> 708      0      0      0      0      0      0      0      1      0      0 #> 709      0      0      0      0      0      0      0      0      1      0 #> 710      0      0      0      0      0      0      0      0      0      1 #> 711      0      0      0      0      0      0      0      0      0      0 #> 712      0      0      0      0      0      0      0      0      0      0 #> 713      0      0      0      0      0      0      0      0      0      0 #> 714      0      0      0      0      0      0      0      0      0      0 #> 715      0      0      0      0      0      0      0      0      0      0 #> 716      0      0      0      0      0      0      0      0      0      0 #> 717      0      0      0      0      0      0      0      0      0      0 #> 718      0      0      0      0      0      0      0      0      0      0 #> 719      0      0      0      0      0      0      0      0      0      0 #> 720      0      0      0      0      0      0      0      0      0      0 #> 721      1      0      0      0      0      0      0      0      0      0 #> 722      0      1      0      0      0      0      0      0      0      0 #> 723      0      0      1      0      0      0      0      0      0      0 #> 724      0      0      0      1      0      0      0      0      0      0 #> 725      0      0      0      0      1      0      0      0      0      0 #> 726      0      0      0      0      0      1      0      0      0      0 #> 727      0      0      0      0      0      0      1      0      0      0 #> 728      0      0      0      0      0      0      0      1      0      0 #> 729      0      0      0      0      0      0      0      0      1      0 #> 730      0      0      0      0      0      0      0      0      0      1 #> 731      0      0      0      0      0      0      0      0      0      0 #> 732      0      0      0      0      0      0      0      0      0      0 #> 733      0      0      0      0      0      0      0      0      0      0 #> 734      0      0      0      0      0      0      0      0      0      0 #> 735      0      0      0      0      0      0      0      0      0      0 #> 736      0      0      0      0      0      0      0      0      0      0 #> 737      0      0      0      0      0      0      0      0      0      0 #> 738      0      0      0      0      0      0      0      0      0      0 #> 739      0      0      0      0      0      0      0      0      0      0 #> 740      0      0      0      0      0      0      0      0      0      0 #> 741      1      0      0      0      0      0      0      0      0      0 #> 742      0      1      0      0      0      0      0      0      0      0 #> 743      0      0      1      0      0      0      0      0      0      0 #> 744      0      0      0      1      0      0      0      0      0      0 #> 745      0      0      0      0      1      0      0      0      0      0 #> 746      0      0      0      0      0      1      0      0      0      0 #> 747      0      0      0      0      0      0      1      0      0      0 #> 748      0      0      0      0      0      0      0      1      0      0 #> 749      0      0      0      0      0      0      0      0      1      0 #> 750      0      0      0      0      0      0      0      0      0      1 #> 751      0      0      0      0      0      0      0      0      0      0 #> 752      0      0      0      0      0      0      0      0      0      0 #> 753      0      0      0      0      0      0      0      0      0      0 #> 754      0      0      0      0      0      0      0      0      0      0 #> 755      0      0      0      0      0      0      0      0      0      0 #> 756      0      0      0      0      0      0      0      0      0      0 #> 757      0      0      0      0      0      0      0      0      0      0 #> 758      0      0      0      0      0      0      0      0      0      0 #> 759      0      0      0      0      0      0      0      0      0      0 #> 760      0      0      0      0      0      0      0      0      0      0 #> 761      1      0      0      0      0      0      0      0      0      0 #> 762      0      1      0      0      0      0      0      0      0      0 #> 763      0      0      1      0      0      0      0      0      0      0 #> 764      0      0      0      1      0      0      0      0      0      0 #> 765      0      0      0      0      1      0      0      0      0      0 #> 766      0      0      0      0      0      1      0      0      0      0 #> 767      0      0      0      0      0      0      1      0      0      0 #> 768      0      0      0      0      0      0      0      1      0      0 #> 769      0      0      0      0      0      0      0      0      1      0 #> 770      0      0      0      0      0      0      0      0      0      1 #> 771      0      0      0      0      0      0      0      0      0      0 #> 772      0      0      0      0      0      0      0      0      0      0 #> 773      0      0      0      0      0      0      0      0      0      0 #> 774      0      0      0      0      0      0      0      0      0      0 #> 775      0      0      0      0      0      0      0      0      0      0 #> 776      0      0      0      0      0      0      0      0      0      0 #> 777      0      0      0      0      0      0      0      0      0      0 #> 778      0      0      0      0      0      0      0      0      0      0 #> 779      0      0      0      0      0      0      0      0      0      0 #> 780      0      0      0      0      0      0      0      0      0      0 #> 781      1      0      0      0      0      0      0      0      0      0 #> 782      0      1      0      0      0      0      0      0      0      0 #> 783      0      0      1      0      0      0      0      0      0      0 #> 784      0      0      0      1      0      0      0      0      0      0 #> 785      0      0      0      0      1      0      0      0      0      0 #> 786      0      0      0      0      0      1      0      0      0      0 #> 787      0      0      0      0      0      0      1      0      0      0 #> 788      0      0      0      0      0      0      0      1      0      0 #> 789      0      0      0      0      0      0      0      0      1      0 #> 790      0      0      0      0      0      0      0      0      0      1 #> 791      0      0      0      0      0      0      0      0      0      0 #> 792      0      0      0      0      0      0      0      0      0      0 #> 793      0      0      0      0      0      0      0      0      0      0 #> 794      0      0      0      0      0      0      0      0      0      0 #> 795      0      0      0      0      0      0      0      0      0      0 #> 796      0      0      0      0      0      0      0      0      0      0 #> 797      0      0      0      0      0      0      0      0      0      0 #> 798      0      0      0      0      0      0      0      0      0      0 #> 799      0      0      0      0      0      0      0      0      0      0 #> 800      0      0      0      0      0      0      0      0      0      0 #>     delay10 delay11 delay12 delay13 delay14 delay15 delay16 delay17 delay18 #> 1         0       0       0       0       0       0       0       0       0 #> 2         0       0       0       0       0       0       0       0       0 #> 3         0       0       0       0       0       0       0       0       0 #> 4         0       0       0       0       0       0       0       0       0 #> 5         0       0       0       0       0       0       0       0       0 #> 6         0       0       0       0       0       0       0       0       0 #> 7         0       0       0       0       0       0       0       0       0 #> 8         0       0       0       0       0       0       0       0       0 #> 9         0       0       0       0       0       0       0       0       0 #> 10        0       0       0       0       0       0       0       0       0 #> 11        1       0       0       0       0       0       0       0       0 #> 12        0       1       0       0       0       0       0       0       0 #> 13        0       0       1       0       0       0       0       0       0 #> 14        0       0       0       1       0       0       0       0       0 #> 15        0       0       0       0       1       0       0       0       0 #> 16        0       0       0       0       0       1       0       0       0 #> 17        0       0       0       0       0       0       1       0       0 #> 18        0       0       0       0       0       0       0       1       0 #> 19        0       0       0       0       0       0       0       0       1 #> 20        0       0       0       0       0       0       0       0       0 #> 21        0       0       0       0       0       0       0       0       0 #> 22        0       0       0       0       0       0       0       0       0 #> 23        0       0       0       0       0       0       0       0       0 #> 24        0       0       0       0       0       0       0       0       0 #> 25        0       0       0       0       0       0       0       0       0 #> 26        0       0       0       0       0       0       0       0       0 #> 27        0       0       0       0       0       0       0       0       0 #> 28        0       0       0       0       0       0       0       0       0 #> 29        0       0       0       0       0       0       0       0       0 #> 30        0       0       0       0       0       0       0       0       0 #> 31        1       0       0       0       0       0       0       0       0 #> 32        0       1       0       0       0       0       0       0       0 #> 33        0       0       1       0       0       0       0       0       0 #> 34        0       0       0       1       0       0       0       0       0 #> 35        0       0       0       0       1       0       0       0       0 #> 36        0       0       0       0       0       1       0       0       0 #> 37        0       0       0       0       0       0       1       0       0 #> 38        0       0       0       0       0       0       0       1       0 #> 39        0       0       0       0       0       0       0       0       1 #> 40        0       0       0       0       0       0       0       0       0 #> 41        0       0       0       0       0       0       0       0       0 #> 42        0       0       0       0       0       0       0       0       0 #> 43        0       0       0       0       0       0       0       0       0 #> 44        0       0       0       0       0       0       0       0       0 #> 45        0       0       0       0       0       0       0       0       0 #> 46        0       0       0       0       0       0       0       0       0 #> 47        0       0       0       0       0       0       0       0       0 #> 48        0       0       0       0       0       0       0       0       0 #> 49        0       0       0       0       0       0       0       0       0 #> 50        0       0       0       0       0       0       0       0       0 #> 51        1       0       0       0       0       0       0       0       0 #> 52        0       1       0       0       0       0       0       0       0 #> 53        0       0       1       0       0       0       0       0       0 #> 54        0       0       0       1       0       0       0       0       0 #> 55        0       0       0       0       1       0       0       0       0 #> 56        0       0       0       0       0       1       0       0       0 #> 57        0       0       0       0       0       0       1       0       0 #> 58        0       0       0       0       0       0       0       1       0 #> 59        0       0       0       0       0       0       0       0       1 #> 60        0       0       0       0       0       0       0       0       0 #> 61        0       0       0       0       0       0       0       0       0 #> 62        0       0       0       0       0       0       0       0       0 #> 63        0       0       0       0       0       0       0       0       0 #> 64        0       0       0       0       0       0       0       0       0 #> 65        0       0       0       0       0       0       0       0       0 #> 66        0       0       0       0       0       0       0       0       0 #> 67        0       0       0       0       0       0       0       0       0 #> 68        0       0       0       0       0       0       0       0       0 #> 69        0       0       0       0       0       0       0       0       0 #> 70        0       0       0       0       0       0       0       0       0 #> 71        1       0       0       0       0       0       0       0       0 #> 72        0       1       0       0       0       0       0       0       0 #> 73        0       0       1       0       0       0       0       0       0 #> 74        0       0       0       1       0       0       0       0       0 #> 75        0       0       0       0       1       0       0       0       0 #> 76        0       0       0       0       0       1       0       0       0 #> 77        0       0       0       0       0       0       1       0       0 #> 78        0       0       0       0       0       0       0       1       0 #> 79        0       0       0       0       0       0       0       0       1 #> 80        0       0       0       0       0       0       0       0       0 #> 81        0       0       0       0       0       0       0       0       0 #> 82        0       0       0       0       0       0       0       0       0 #> 83        0       0       0       0       0       0       0       0       0 #> 84        0       0       0       0       0       0       0       0       0 #> 85        0       0       0       0       0       0       0       0       0 #> 86        0       0       0       0       0       0       0       0       0 #> 87        0       0       0       0       0       0       0       0       0 #> 88        0       0       0       0       0       0       0       0       0 #> 89        0       0       0       0       0       0       0       0       0 #> 90        0       0       0       0       0       0       0       0       0 #> 91        1       0       0       0       0       0       0       0       0 #> 92        0       1       0       0       0       0       0       0       0 #> 93        0       0       1       0       0       0       0       0       0 #> 94        0       0       0       1       0       0       0       0       0 #> 95        0       0       0       0       1       0       0       0       0 #> 96        0       0       0       0       0       1       0       0       0 #> 97        0       0       0       0       0       0       1       0       0 #> 98        0       0       0       0       0       0       0       1       0 #> 99        0       0       0       0       0       0       0       0       1 #> 100       0       0       0       0       0       0       0       0       0 #> 101       0       0       0       0       0       0       0       0       0 #> 102       0       0       0       0       0       0       0       0       0 #> 103       0       0       0       0       0       0       0       0       0 #> 104       0       0       0       0       0       0       0       0       0 #> 105       0       0       0       0       0       0       0       0       0 #> 106       0       0       0       0       0       0       0       0       0 #> 107       0       0       0       0       0       0       0       0       0 #> 108       0       0       0       0       0       0       0       0       0 #> 109       0       0       0       0       0       0       0       0       0 #> 110       0       0       0       0       0       0       0       0       0 #> 111       1       0       0       0       0       0       0       0       0 #> 112       0       1       0       0       0       0       0       0       0 #> 113       0       0       1       0       0       0       0       0       0 #> 114       0       0       0       1       0       0       0       0       0 #> 115       0       0       0       0       1       0       0       0       0 #> 116       0       0       0       0       0       1       0       0       0 #> 117       0       0       0       0       0       0       1       0       0 #> 118       0       0       0       0       0       0       0       1       0 #> 119       0       0       0       0       0       0       0       0       1 #> 120       0       0       0       0       0       0       0       0       0 #> 121       0       0       0       0       0       0       0       0       0 #> 122       0       0       0       0       0       0       0       0       0 #> 123       0       0       0       0       0       0       0       0       0 #> 124       0       0       0       0       0       0       0       0       0 #> 125       0       0       0       0       0       0       0       0       0 #> 126       0       0       0       0       0       0       0       0       0 #> 127       0       0       0       0       0       0       0       0       0 #> 128       0       0       0       0       0       0       0       0       0 #> 129       0       0       0       0       0       0       0       0       0 #> 130       0       0       0       0       0       0       0       0       0 #> 131       1       0       0       0       0       0       0       0       0 #> 132       0       1       0       0       0       0       0       0       0 #> 133       0       0       1       0       0       0       0       0       0 #> 134       0       0       0       1       0       0       0       0       0 #> 135       0       0       0       0       1       0       0       0       0 #> 136       0       0       0       0       0       1       0       0       0 #> 137       0       0       0       0       0       0       1       0       0 #> 138       0       0       0       0       0       0       0       1       0 #> 139       0       0       0       0       0       0       0       0       1 #> 140       0       0       0       0       0       0       0       0       0 #> 141       0       0       0       0       0       0       0       0       0 #> 142       0       0       0       0       0       0       0       0       0 #> 143       0       0       0       0       0       0       0       0       0 #> 144       0       0       0       0       0       0       0       0       0 #> 145       0       0       0       0       0       0       0       0       0 #> 146       0       0       0       0       0       0       0       0       0 #> 147       0       0       0       0       0       0       0       0       0 #> 148       0       0       0       0       0       0       0       0       0 #> 149       0       0       0       0       0       0       0       0       0 #> 150       0       0       0       0       0       0       0       0       0 #> 151       1       0       0       0       0       0       0       0       0 #> 152       0       1       0       0       0       0       0       0       0 #> 153       0       0       1       0       0       0       0       0       0 #> 154       0       0       0       1       0       0       0       0       0 #> 155       0       0       0       0       1       0       0       0       0 #> 156       0       0       0       0       0       1       0       0       0 #> 157       0       0       0       0       0       0       1       0       0 #> 158       0       0       0       0       0       0       0       1       0 #> 159       0       0       0       0       0       0       0       0       1 #> 160       0       0       0       0       0       0       0       0       0 #> 161       0       0       0       0       0       0       0       0       0 #> 162       0       0       0       0       0       0       0       0       0 #> 163       0       0       0       0       0       0       0       0       0 #> 164       0       0       0       0       0       0       0       0       0 #> 165       0       0       0       0       0       0       0       0       0 #> 166       0       0       0       0       0       0       0       0       0 #> 167       0       0       0       0       0       0       0       0       0 #> 168       0       0       0       0       0       0       0       0       0 #> 169       0       0       0       0       0       0       0       0       0 #> 170       0       0       0       0       0       0       0       0       0 #> 171       1       0       0       0       0       0       0       0       0 #> 172       0       1       0       0       0       0       0       0       0 #> 173       0       0       1       0       0       0       0       0       0 #> 174       0       0       0       1       0       0       0       0       0 #> 175       0       0       0       0       1       0       0       0       0 #> 176       0       0       0       0       0       1       0       0       0 #> 177       0       0       0       0       0       0       1       0       0 #> 178       0       0       0       0       0       0       0       1       0 #> 179       0       0       0       0       0       0       0       0       1 #> 180       0       0       0       0       0       0       0       0       0 #> 181       0       0       0       0       0       0       0       0       0 #> 182       0       0       0       0       0       0       0       0       0 #> 183       0       0       0       0       0       0       0       0       0 #> 184       0       0       0       0       0       0       0       0       0 #> 185       0       0       0       0       0       0       0       0       0 #> 186       0       0       0       0       0       0       0       0       0 #> 187       0       0       0       0       0       0       0       0       0 #> 188       0       0       0       0       0       0       0       0       0 #> 189       0       0       0       0       0       0       0       0       0 #> 190       0       0       0       0       0       0       0       0       0 #> 191       1       0       0       0       0       0       0       0       0 #> 192       0       1       0       0       0       0       0       0       0 #> 193       0       0       1       0       0       0       0       0       0 #> 194       0       0       0       1       0       0       0       0       0 #> 195       0       0       0       0       1       0       0       0       0 #> 196       0       0       0       0       0       1       0       0       0 #> 197       0       0       0       0       0       0       1       0       0 #> 198       0       0       0       0       0       0       0       1       0 #> 199       0       0       0       0       0       0       0       0       1 #> 200       0       0       0       0       0       0       0       0       0 #> 201       0       0       0       0       0       0       0       0       0 #> 202       0       0       0       0       0       0       0       0       0 #> 203       0       0       0       0       0       0       0       0       0 #> 204       0       0       0       0       0       0       0       0       0 #> 205       0       0       0       0       0       0       0       0       0 #> 206       0       0       0       0       0       0       0       0       0 #> 207       0       0       0       0       0       0       0       0       0 #> 208       0       0       0       0       0       0       0       0       0 #> 209       0       0       0       0       0       0       0       0       0 #> 210       0       0       0       0       0       0       0       0       0 #> 211       1       0       0       0       0       0       0       0       0 #> 212       0       1       0       0       0       0       0       0       0 #> 213       0       0       1       0       0       0       0       0       0 #> 214       0       0       0       1       0       0       0       0       0 #> 215       0       0       0       0       1       0       0       0       0 #> 216       0       0       0       0       0       1       0       0       0 #> 217       0       0       0       0       0       0       1       0       0 #> 218       0       0       0       0       0       0       0       1       0 #> 219       0       0       0       0       0       0       0       0       1 #> 220       0       0       0       0       0       0       0       0       0 #> 221       0       0       0       0       0       0       0       0       0 #> 222       0       0       0       0       0       0       0       0       0 #> 223       0       0       0       0       0       0       0       0       0 #> 224       0       0       0       0       0       0       0       0       0 #> 225       0       0       0       0       0       0       0       0       0 #> 226       0       0       0       0       0       0       0       0       0 #> 227       0       0       0       0       0       0       0       0       0 #> 228       0       0       0       0       0       0       0       0       0 #> 229       0       0       0       0       0       0       0       0       0 #> 230       0       0       0       0       0       0       0       0       0 #> 231       1       0       0       0       0       0       0       0       0 #> 232       0       1       0       0       0       0       0       0       0 #> 233       0       0       1       0       0       0       0       0       0 #> 234       0       0       0       1       0       0       0       0       0 #> 235       0       0       0       0       1       0       0       0       0 #> 236       0       0       0       0       0       1       0       0       0 #> 237       0       0       0       0       0       0       1       0       0 #> 238       0       0       0       0       0       0       0       1       0 #> 239       0       0       0       0       0       0       0       0       1 #> 240       0       0       0       0       0       0       0       0       0 #> 241       0       0       0       0       0       0       0       0       0 #> 242       0       0       0       0       0       0       0       0       0 #> 243       0       0       0       0       0       0       0       0       0 #> 244       0       0       0       0       0       0       0       0       0 #> 245       0       0       0       0       0       0       0       0       0 #> 246       0       0       0       0       0       0       0       0       0 #> 247       0       0       0       0       0       0       0       0       0 #> 248       0       0       0       0       0       0       0       0       0 #> 249       0       0       0       0       0       0       0       0       0 #> 250       0       0       0       0       0       0       0       0       0 #> 251       1       0       0       0       0       0       0       0       0 #> 252       0       1       0       0       0       0       0       0       0 #> 253       0       0       1       0       0       0       0       0       0 #> 254       0       0       0       1       0       0       0       0       0 #> 255       0       0       0       0       1       0       0       0       0 #> 256       0       0       0       0       0       1       0       0       0 #> 257       0       0       0       0       0       0       1       0       0 #> 258       0       0       0       0       0       0       0       1       0 #> 259       0       0       0       0       0       0       0       0       1 #> 260       0       0       0       0       0       0       0       0       0 #> 261       0       0       0       0       0       0       0       0       0 #> 262       0       0       0       0       0       0       0       0       0 #> 263       0       0       0       0       0       0       0       0       0 #> 264       0       0       0       0       0       0       0       0       0 #> 265       0       0       0       0       0       0       0       0       0 #> 266       0       0       0       0       0       0       0       0       0 #> 267       0       0       0       0       0       0       0       0       0 #> 268       0       0       0       0       0       0       0       0       0 #> 269       0       0       0       0       0       0       0       0       0 #> 270       0       0       0       0       0       0       0       0       0 #> 271       1       0       0       0       0       0       0       0       0 #> 272       0       1       0       0       0       0       0       0       0 #> 273       0       0       1       0       0       0       0       0       0 #> 274       0       0       0       1       0       0       0       0       0 #> 275       0       0       0       0       1       0       0       0       0 #> 276       0       0       0       0       0       1       0       0       0 #> 277       0       0       0       0       0       0       1       0       0 #> 278       0       0       0       0       0       0       0       1       0 #> 279       0       0       0       0       0       0       0       0       1 #> 280       0       0       0       0       0       0       0       0       0 #> 281       0       0       0       0       0       0       0       0       0 #> 282       0       0       0       0       0       0       0       0       0 #> 283       0       0       0       0       0       0       0       0       0 #> 284       0       0       0       0       0       0       0       0       0 #> 285       0       0       0       0       0       0       0       0       0 #> 286       0       0       0       0       0       0       0       0       0 #> 287       0       0       0       0       0       0       0       0       0 #> 288       0       0       0       0       0       0       0       0       0 #> 289       0       0       0       0       0       0       0       0       0 #> 290       0       0       0       0       0       0       0       0       0 #> 291       1       0       0       0       0       0       0       0       0 #> 292       0       1       0       0       0       0       0       0       0 #> 293       0       0       1       0       0       0       0       0       0 #> 294       0       0       0       1       0       0       0       0       0 #> 295       0       0       0       0       1       0       0       0       0 #> 296       0       0       0       0       0       1       0       0       0 #> 297       0       0       0       0       0       0       1       0       0 #> 298       0       0       0       0       0       0       0       1       0 #> 299       0       0       0       0       0       0       0       0       1 #> 300       0       0       0       0       0       0       0       0       0 #> 301       0       0       0       0       0       0       0       0       0 #> 302       0       0       0       0       0       0       0       0       0 #> 303       0       0       0       0       0       0       0       0       0 #> 304       0       0       0       0       0       0       0       0       0 #> 305       0       0       0       0       0       0       0       0       0 #> 306       0       0       0       0       0       0       0       0       0 #> 307       0       0       0       0       0       0       0       0       0 #> 308       0       0       0       0       0       0       0       0       0 #> 309       0       0       0       0       0       0       0       0       0 #> 310       0       0       0       0       0       0       0       0       0 #> 311       1       0       0       0       0       0       0       0       0 #> 312       0       1       0       0       0       0       0       0       0 #> 313       0       0       1       0       0       0       0       0       0 #> 314       0       0       0       1       0       0       0       0       0 #> 315       0       0       0       0       1       0       0       0       0 #> 316       0       0       0       0       0       1       0       0       0 #> 317       0       0       0       0       0       0       1       0       0 #> 318       0       0       0       0       0       0       0       1       0 #> 319       0       0       0       0       0       0       0       0       1 #> 320       0       0       0       0       0       0       0       0       0 #> 321       0       0       0       0       0       0       0       0       0 #> 322       0       0       0       0       0       0       0       0       0 #> 323       0       0       0       0       0       0       0       0       0 #> 324       0       0       0       0       0       0       0       0       0 #> 325       0       0       0       0       0       0       0       0       0 #> 326       0       0       0       0       0       0       0       0       0 #> 327       0       0       0       0       0       0       0       0       0 #> 328       0       0       0       0       0       0       0       0       0 #> 329       0       0       0       0       0       0       0       0       0 #> 330       0       0       0       0       0       0       0       0       0 #> 331       1       0       0       0       0       0       0       0       0 #> 332       0       1       0       0       0       0       0       0       0 #> 333       0       0       1       0       0       0       0       0       0 #> 334       0       0       0       1       0       0       0       0       0 #> 335       0       0       0       0       1       0       0       0       0 #> 336       0       0       0       0       0       1       0       0       0 #> 337       0       0       0       0       0       0       1       0       0 #> 338       0       0       0       0       0       0       0       1       0 #> 339       0       0       0       0       0       0       0       0       1 #> 340       0       0       0       0       0       0       0       0       0 #> 341       0       0       0       0       0       0       0       0       0 #> 342       0       0       0       0       0       0       0       0       0 #> 343       0       0       0       0       0       0       0       0       0 #> 344       0       0       0       0       0       0       0       0       0 #> 345       0       0       0       0       0       0       0       0       0 #> 346       0       0       0       0       0       0       0       0       0 #> 347       0       0       0       0       0       0       0       0       0 #> 348       0       0       0       0       0       0       0       0       0 #> 349       0       0       0       0       0       0       0       0       0 #> 350       0       0       0       0       0       0       0       0       0 #> 351       1       0       0       0       0       0       0       0       0 #> 352       0       1       0       0       0       0       0       0       0 #> 353       0       0       1       0       0       0       0       0       0 #> 354       0       0       0       1       0       0       0       0       0 #> 355       0       0       0       0       1       0       0       0       0 #> 356       0       0       0       0       0       1       0       0       0 #> 357       0       0       0       0       0       0       1       0       0 #> 358       0       0       0       0       0       0       0       1       0 #> 359       0       0       0       0       0       0       0       0       1 #> 360       0       0       0       0       0       0       0       0       0 #> 361       0       0       0       0       0       0       0       0       0 #> 362       0       0       0       0       0       0       0       0       0 #> 363       0       0       0       0       0       0       0       0       0 #> 364       0       0       0       0       0       0       0       0       0 #> 365       0       0       0       0       0       0       0       0       0 #> 366       0       0       0       0       0       0       0       0       0 #> 367       0       0       0       0       0       0       0       0       0 #> 368       0       0       0       0       0       0       0       0       0 #> 369       0       0       0       0       0       0       0       0       0 #> 370       0       0       0       0       0       0       0       0       0 #> 371       1       0       0       0       0       0       0       0       0 #> 372       0       1       0       0       0       0       0       0       0 #> 373       0       0       1       0       0       0       0       0       0 #> 374       0       0       0       1       0       0       0       0       0 #> 375       0       0       0       0       1       0       0       0       0 #> 376       0       0       0       0       0       1       0       0       0 #> 377       0       0       0       0       0       0       1       0       0 #> 378       0       0       0       0       0       0       0       1       0 #> 379       0       0       0       0       0       0       0       0       1 #> 380       0       0       0       0       0       0       0       0       0 #> 381       0       0       0       0       0       0       0       0       0 #> 382       0       0       0       0       0       0       0       0       0 #> 383       0       0       0       0       0       0       0       0       0 #> 384       0       0       0       0       0       0       0       0       0 #> 385       0       0       0       0       0       0       0       0       0 #> 386       0       0       0       0       0       0       0       0       0 #> 387       0       0       0       0       0       0       0       0       0 #> 388       0       0       0       0       0       0       0       0       0 #> 389       0       0       0       0       0       0       0       0       0 #> 390       0       0       0       0       0       0       0       0       0 #> 391       1       0       0       0       0       0       0       0       0 #> 392       0       1       0       0       0       0       0       0       0 #> 393       0       0       1       0       0       0       0       0       0 #> 394       0       0       0       1       0       0       0       0       0 #> 395       0       0       0       0       1       0       0       0       0 #> 396       0       0       0       0       0       1       0       0       0 #> 397       0       0       0       0       0       0       1       0       0 #> 398       0       0       0       0       0       0       0       1       0 #> 399       0       0       0       0       0       0       0       0       1 #> 400       0       0       0       0       0       0       0       0       0 #> 401       0       0       0       0       0       0       0       0       0 #> 402       0       0       0       0       0       0       0       0       0 #> 403       0       0       0       0       0       0       0       0       0 #> 404       0       0       0       0       0       0       0       0       0 #> 405       0       0       0       0       0       0       0       0       0 #> 406       0       0       0       0       0       0       0       0       0 #> 407       0       0       0       0       0       0       0       0       0 #> 408       0       0       0       0       0       0       0       0       0 #> 409       0       0       0       0       0       0       0       0       0 #> 410       0       0       0       0       0       0       0       0       0 #> 411       1       0       0       0       0       0       0       0       0 #> 412       0       1       0       0       0       0       0       0       0 #> 413       0       0       1       0       0       0       0       0       0 #> 414       0       0       0       1       0       0       0       0       0 #> 415       0       0       0       0       1       0       0       0       0 #> 416       0       0       0       0       0       1       0       0       0 #> 417       0       0       0       0       0       0       1       0       0 #> 418       0       0       0       0       0       0       0       1       0 #> 419       0       0       0       0       0       0       0       0       1 #> 420       0       0       0       0       0       0       0       0       0 #> 421       0       0       0       0       0       0       0       0       0 #> 422       0       0       0       0       0       0       0       0       0 #> 423       0       0       0       0       0       0       0       0       0 #> 424       0       0       0       0       0       0       0       0       0 #> 425       0       0       0       0       0       0       0       0       0 #> 426       0       0       0       0       0       0       0       0       0 #> 427       0       0       0       0       0       0       0       0       0 #> 428       0       0       0       0       0       0       0       0       0 #> 429       0       0       0       0       0       0       0       0       0 #> 430       0       0       0       0       0       0       0       0       0 #> 431       1       0       0       0       0       0       0       0       0 #> 432       0       1       0       0       0       0       0       0       0 #> 433       0       0       1       0       0       0       0       0       0 #> 434       0       0       0       1       0       0       0       0       0 #> 435       0       0       0       0       1       0       0       0       0 #> 436       0       0       0       0       0       1       0       0       0 #> 437       0       0       0       0       0       0       1       0       0 #> 438       0       0       0       0       0       0       0       1       0 #> 439       0       0       0       0       0       0       0       0       1 #> 440       0       0       0       0       0       0       0       0       0 #> 441       0       0       0       0       0       0       0       0       0 #> 442       0       0       0       0       0       0       0       0       0 #> 443       0       0       0       0       0       0       0       0       0 #> 444       0       0       0       0       0       0       0       0       0 #> 445       0       0       0       0       0       0       0       0       0 #> 446       0       0       0       0       0       0       0       0       0 #> 447       0       0       0       0       0       0       0       0       0 #> 448       0       0       0       0       0       0       0       0       0 #> 449       0       0       0       0       0       0       0       0       0 #> 450       0       0       0       0       0       0       0       0       0 #> 451       1       0       0       0       0       0       0       0       0 #> 452       0       1       0       0       0       0       0       0       0 #> 453       0       0       1       0       0       0       0       0       0 #> 454       0       0       0       1       0       0       0       0       0 #> 455       0       0       0       0       1       0       0       0       0 #> 456       0       0       0       0       0       1       0       0       0 #> 457       0       0       0       0       0       0       1       0       0 #> 458       0       0       0       0       0       0       0       1       0 #> 459       0       0       0       0       0       0       0       0       1 #> 460       0       0       0       0       0       0       0       0       0 #> 461       0       0       0       0       0       0       0       0       0 #> 462       0       0       0       0       0       0       0       0       0 #> 463       0       0       0       0       0       0       0       0       0 #> 464       0       0       0       0       0       0       0       0       0 #> 465       0       0       0       0       0       0       0       0       0 #> 466       0       0       0       0       0       0       0       0       0 #> 467       0       0       0       0       0       0       0       0       0 #> 468       0       0       0       0       0       0       0       0       0 #> 469       0       0       0       0       0       0       0       0       0 #> 470       0       0       0       0       0       0       0       0       0 #> 471       1       0       0       0       0       0       0       0       0 #> 472       0       1       0       0       0       0       0       0       0 #> 473       0       0       1       0       0       0       0       0       0 #> 474       0       0       0       1       0       0       0       0       0 #> 475       0       0       0       0       1       0       0       0       0 #> 476       0       0       0       0       0       1       0       0       0 #> 477       0       0       0       0       0       0       1       0       0 #> 478       0       0       0       0       0       0       0       1       0 #> 479       0       0       0       0       0       0       0       0       1 #> 480       0       0       0       0       0       0       0       0       0 #> 481       0       0       0       0       0       0       0       0       0 #> 482       0       0       0       0       0       0       0       0       0 #> 483       0       0       0       0       0       0       0       0       0 #> 484       0       0       0       0       0       0       0       0       0 #> 485       0       0       0       0       0       0       0       0       0 #> 486       0       0       0       0       0       0       0       0       0 #> 487       0       0       0       0       0       0       0       0       0 #> 488       0       0       0       0       0       0       0       0       0 #> 489       0       0       0       0       0       0       0       0       0 #> 490       0       0       0       0       0       0       0       0       0 #> 491       1       0       0       0       0       0       0       0       0 #> 492       0       1       0       0       0       0       0       0       0 #> 493       0       0       1       0       0       0       0       0       0 #> 494       0       0       0       1       0       0       0       0       0 #> 495       0       0       0       0       1       0       0       0       0 #> 496       0       0       0       0       0       1       0       0       0 #> 497       0       0       0       0       0       0       1       0       0 #> 498       0       0       0       0       0       0       0       1       0 #> 499       0       0       0       0       0       0       0       0       1 #> 500       0       0       0       0       0       0       0       0       0 #> 501       0       0       0       0       0       0       0       0       0 #> 502       0       0       0       0       0       0       0       0       0 #> 503       0       0       0       0       0       0       0       0       0 #> 504       0       0       0       0       0       0       0       0       0 #> 505       0       0       0       0       0       0       0       0       0 #> 506       0       0       0       0       0       0       0       0       0 #> 507       0       0       0       0       0       0       0       0       0 #> 508       0       0       0       0       0       0       0       0       0 #> 509       0       0       0       0       0       0       0       0       0 #> 510       0       0       0       0       0       0       0       0       0 #> 511       1       0       0       0       0       0       0       0       0 #> 512       0       1       0       0       0       0       0       0       0 #> 513       0       0       1       0       0       0       0       0       0 #> 514       0       0       0       1       0       0       0       0       0 #> 515       0       0       0       0       1       0       0       0       0 #> 516       0       0       0       0       0       1       0       0       0 #> 517       0       0       0       0       0       0       1       0       0 #> 518       0       0       0       0       0       0       0       1       0 #> 519       0       0       0       0       0       0       0       0       1 #> 520       0       0       0       0       0       0       0       0       0 #> 521       0       0       0       0       0       0       0       0       0 #> 522       0       0       0       0       0       0       0       0       0 #> 523       0       0       0       0       0       0       0       0       0 #> 524       0       0       0       0       0       0       0       0       0 #> 525       0       0       0       0       0       0       0       0       0 #> 526       0       0       0       0       0       0       0       0       0 #> 527       0       0       0       0       0       0       0       0       0 #> 528       0       0       0       0       0       0       0       0       0 #> 529       0       0       0       0       0       0       0       0       0 #> 530       0       0       0       0       0       0       0       0       0 #> 531       1       0       0       0       0       0       0       0       0 #> 532       0       1       0       0       0       0       0       0       0 #> 533       0       0       1       0       0       0       0       0       0 #> 534       0       0       0       1       0       0       0       0       0 #> 535       0       0       0       0       1       0       0       0       0 #> 536       0       0       0       0       0       1       0       0       0 #> 537       0       0       0       0       0       0       1       0       0 #> 538       0       0       0       0       0       0       0       1       0 #> 539       0       0       0       0       0       0       0       0       1 #> 540       0       0       0       0       0       0       0       0       0 #> 541       0       0       0       0       0       0       0       0       0 #> 542       0       0       0       0       0       0       0       0       0 #> 543       0       0       0       0       0       0       0       0       0 #> 544       0       0       0       0       0       0       0       0       0 #> 545       0       0       0       0       0       0       0       0       0 #> 546       0       0       0       0       0       0       0       0       0 #> 547       0       0       0       0       0       0       0       0       0 #> 548       0       0       0       0       0       0       0       0       0 #> 549       0       0       0       0       0       0       0       0       0 #> 550       0       0       0       0       0       0       0       0       0 #> 551       1       0       0       0       0       0       0       0       0 #> 552       0       1       0       0       0       0       0       0       0 #> 553       0       0       1       0       0       0       0       0       0 #> 554       0       0       0       1       0       0       0       0       0 #> 555       0       0       0       0       1       0       0       0       0 #> 556       0       0       0       0       0       1       0       0       0 #> 557       0       0       0       0       0       0       1       0       0 #> 558       0       0       0       0       0       0       0       1       0 #> 559       0       0       0       0       0       0       0       0       1 #> 560       0       0       0       0       0       0       0       0       0 #> 561       0       0       0       0       0       0       0       0       0 #> 562       0       0       0       0       0       0       0       0       0 #> 563       0       0       0       0       0       0       0       0       0 #> 564       0       0       0       0       0       0       0       0       0 #> 565       0       0       0       0       0       0       0       0       0 #> 566       0       0       0       0       0       0       0       0       0 #> 567       0       0       0       0       0       0       0       0       0 #> 568       0       0       0       0       0       0       0       0       0 #> 569       0       0       0       0       0       0       0       0       0 #> 570       0       0       0       0       0       0       0       0       0 #> 571       1       0       0       0       0       0       0       0       0 #> 572       0       1       0       0       0       0       0       0       0 #> 573       0       0       1       0       0       0       0       0       0 #> 574       0       0       0       1       0       0       0       0       0 #> 575       0       0       0       0       1       0       0       0       0 #> 576       0       0       0       0       0       1       0       0       0 #> 577       0       0       0       0       0       0       1       0       0 #> 578       0       0       0       0       0       0       0       1       0 #> 579       0       0       0       0       0       0       0       0       1 #> 580       0       0       0       0       0       0       0       0       0 #> 581       0       0       0       0       0       0       0       0       0 #> 582       0       0       0       0       0       0       0       0       0 #> 583       0       0       0       0       0       0       0       0       0 #> 584       0       0       0       0       0       0       0       0       0 #> 585       0       0       0       0       0       0       0       0       0 #> 586       0       0       0       0       0       0       0       0       0 #> 587       0       0       0       0       0       0       0       0       0 #> 588       0       0       0       0       0       0       0       0       0 #> 589       0       0       0       0       0       0       0       0       0 #> 590       0       0       0       0       0       0       0       0       0 #> 591       1       0       0       0       0       0       0       0       0 #> 592       0       1       0       0       0       0       0       0       0 #> 593       0       0       1       0       0       0       0       0       0 #> 594       0       0       0       1       0       0       0       0       0 #> 595       0       0       0       0       1       0       0       0       0 #> 596       0       0       0       0       0       1       0       0       0 #> 597       0       0       0       0       0       0       1       0       0 #> 598       0       0       0       0       0       0       0       1       0 #> 599       0       0       0       0       0       0       0       0       1 #> 600       0       0       0       0       0       0       0       0       0 #> 601       0       0       0       0       0       0       0       0       0 #> 602       0       0       0       0       0       0       0       0       0 #> 603       0       0       0       0       0       0       0       0       0 #> 604       0       0       0       0       0       0       0       0       0 #> 605       0       0       0       0       0       0       0       0       0 #> 606       0       0       0       0       0       0       0       0       0 #> 607       0       0       0       0       0       0       0       0       0 #> 608       0       0       0       0       0       0       0       0       0 #> 609       0       0       0       0       0       0       0       0       0 #> 610       0       0       0       0       0       0       0       0       0 #> 611       1       0       0       0       0       0       0       0       0 #> 612       0       1       0       0       0       0       0       0       0 #> 613       0       0       1       0       0       0       0       0       0 #> 614       0       0       0       1       0       0       0       0       0 #> 615       0       0       0       0       1       0       0       0       0 #> 616       0       0       0       0       0       1       0       0       0 #> 617       0       0       0       0       0       0       1       0       0 #> 618       0       0       0       0       0       0       0       1       0 #> 619       0       0       0       0       0       0       0       0       1 #> 620       0       0       0       0       0       0       0       0       0 #> 621       0       0       0       0       0       0       0       0       0 #> 622       0       0       0       0       0       0       0       0       0 #> 623       0       0       0       0       0       0       0       0       0 #> 624       0       0       0       0       0       0       0       0       0 #> 625       0       0       0       0       0       0       0       0       0 #> 626       0       0       0       0       0       0       0       0       0 #> 627       0       0       0       0       0       0       0       0       0 #> 628       0       0       0       0       0       0       0       0       0 #> 629       0       0       0       0       0       0       0       0       0 #> 630       0       0       0       0       0       0       0       0       0 #> 631       1       0       0       0       0       0       0       0       0 #> 632       0       1       0       0       0       0       0       0       0 #> 633       0       0       1       0       0       0       0       0       0 #> 634       0       0       0       1       0       0       0       0       0 #> 635       0       0       0       0       1       0       0       0       0 #> 636       0       0       0       0       0       1       0       0       0 #> 637       0       0       0       0       0       0       1       0       0 #> 638       0       0       0       0       0       0       0       1       0 #> 639       0       0       0       0       0       0       0       0       1 #> 640       0       0       0       0       0       0       0       0       0 #> 641       0       0       0       0       0       0       0       0       0 #> 642       0       0       0       0       0       0       0       0       0 #> 643       0       0       0       0       0       0       0       0       0 #> 644       0       0       0       0       0       0       0       0       0 #> 645       0       0       0       0       0       0       0       0       0 #> 646       0       0       0       0       0       0       0       0       0 #> 647       0       0       0       0       0       0       0       0       0 #> 648       0       0       0       0       0       0       0       0       0 #> 649       0       0       0       0       0       0       0       0       0 #> 650       0       0       0       0       0       0       0       0       0 #> 651       1       0       0       0       0       0       0       0       0 #> 652       0       1       0       0       0       0       0       0       0 #> 653       0       0       1       0       0       0       0       0       0 #> 654       0       0       0       1       0       0       0       0       0 #> 655       0       0       0       0       1       0       0       0       0 #> 656       0       0       0       0       0       1       0       0       0 #> 657       0       0       0       0       0       0       1       0       0 #> 658       0       0       0       0       0       0       0       1       0 #> 659       0       0       0       0       0       0       0       0       1 #> 660       0       0       0       0       0       0       0       0       0 #> 661       0       0       0       0       0       0       0       0       0 #> 662       0       0       0       0       0       0       0       0       0 #> 663       0       0       0       0       0       0       0       0       0 #> 664       0       0       0       0       0       0       0       0       0 #> 665       0       0       0       0       0       0       0       0       0 #> 666       0       0       0       0       0       0       0       0       0 #> 667       0       0       0       0       0       0       0       0       0 #> 668       0       0       0       0       0       0       0       0       0 #> 669       0       0       0       0       0       0       0       0       0 #> 670       0       0       0       0       0       0       0       0       0 #> 671       1       0       0       0       0       0       0       0       0 #> 672       0       1       0       0       0       0       0       0       0 #> 673       0       0       1       0       0       0       0       0       0 #> 674       0       0       0       1       0       0       0       0       0 #> 675       0       0       0       0       1       0       0       0       0 #> 676       0       0       0       0       0       1       0       0       0 #> 677       0       0       0       0       0       0       1       0       0 #> 678       0       0       0       0       0       0       0       1       0 #> 679       0       0       0       0       0       0       0       0       1 #> 680       0       0       0       0       0       0       0       0       0 #> 681       0       0       0       0       0       0       0       0       0 #> 682       0       0       0       0       0       0       0       0       0 #> 683       0       0       0       0       0       0       0       0       0 #> 684       0       0       0       0       0       0       0       0       0 #> 685       0       0       0       0       0       0       0       0       0 #> 686       0       0       0       0       0       0       0       0       0 #> 687       0       0       0       0       0       0       0       0       0 #> 688       0       0       0       0       0       0       0       0       0 #> 689       0       0       0       0       0       0       0       0       0 #> 690       0       0       0       0       0       0       0       0       0 #> 691       1       0       0       0       0       0       0       0       0 #> 692       0       1       0       0       0       0       0       0       0 #> 693       0       0       1       0       0       0       0       0       0 #> 694       0       0       0       1       0       0       0       0       0 #> 695       0       0       0       0       1       0       0       0       0 #> 696       0       0       0       0       0       1       0       0       0 #> 697       0       0       0       0       0       0       1       0       0 #> 698       0       0       0       0       0       0       0       1       0 #> 699       0       0       0       0       0       0       0       0       1 #> 700       0       0       0       0       0       0       0       0       0 #> 701       0       0       0       0       0       0       0       0       0 #> 702       0       0       0       0       0       0       0       0       0 #> 703       0       0       0       0       0       0       0       0       0 #> 704       0       0       0       0       0       0       0       0       0 #> 705       0       0       0       0       0       0       0       0       0 #> 706       0       0       0       0       0       0       0       0       0 #> 707       0       0       0       0       0       0       0       0       0 #> 708       0       0       0       0       0       0       0       0       0 #> 709       0       0       0       0       0       0       0       0       0 #> 710       0       0       0       0       0       0       0       0       0 #> 711       1       0       0       0       0       0       0       0       0 #> 712       0       1       0       0       0       0       0       0       0 #> 713       0       0       1       0       0       0       0       0       0 #> 714       0       0       0       1       0       0       0       0       0 #> 715       0       0       0       0       1       0       0       0       0 #> 716       0       0       0       0       0       1       0       0       0 #> 717       0       0       0       0       0       0       1       0       0 #> 718       0       0       0       0       0       0       0       1       0 #> 719       0       0       0       0       0       0       0       0       1 #> 720       0       0       0       0       0       0       0       0       0 #> 721       0       0       0       0       0       0       0       0       0 #> 722       0       0       0       0       0       0       0       0       0 #> 723       0       0       0       0       0       0       0       0       0 #> 724       0       0       0       0       0       0       0       0       0 #> 725       0       0       0       0       0       0       0       0       0 #> 726       0       0       0       0       0       0       0       0       0 #> 727       0       0       0       0       0       0       0       0       0 #> 728       0       0       0       0       0       0       0       0       0 #> 729       0       0       0       0       0       0       0       0       0 #> 730       0       0       0       0       0       0       0       0       0 #> 731       1       0       0       0       0       0       0       0       0 #> 732       0       1       0       0       0       0       0       0       0 #> 733       0       0       1       0       0       0       0       0       0 #> 734       0       0       0       1       0       0       0       0       0 #> 735       0       0       0       0       1       0       0       0       0 #> 736       0       0       0       0       0       1       0       0       0 #> 737       0       0       0       0       0       0       1       0       0 #> 738       0       0       0       0       0       0       0       1       0 #> 739       0       0       0       0       0       0       0       0       1 #> 740       0       0       0       0       0       0       0       0       0 #> 741       0       0       0       0       0       0       0       0       0 #> 742       0       0       0       0       0       0       0       0       0 #> 743       0       0       0       0       0       0       0       0       0 #> 744       0       0       0       0       0       0       0       0       0 #> 745       0       0       0       0       0       0       0       0       0 #> 746       0       0       0       0       0       0       0       0       0 #> 747       0       0       0       0       0       0       0       0       0 #> 748       0       0       0       0       0       0       0       0       0 #> 749       0       0       0       0       0       0       0       0       0 #> 750       0       0       0       0       0       0       0       0       0 #> 751       1       0       0       0       0       0       0       0       0 #> 752       0       1       0       0       0       0       0       0       0 #> 753       0       0       1       0       0       0       0       0       0 #> 754       0       0       0       1       0       0       0       0       0 #> 755       0       0       0       0       1       0       0       0       0 #> 756       0       0       0       0       0       1       0       0       0 #> 757       0       0       0       0       0       0       1       0       0 #> 758       0       0       0       0       0       0       0       1       0 #> 759       0       0       0       0       0       0       0       0       1 #> 760       0       0       0       0       0       0       0       0       0 #> 761       0       0       0       0       0       0       0       0       0 #> 762       0       0       0       0       0       0       0       0       0 #> 763       0       0       0       0       0       0       0       0       0 #> 764       0       0       0       0       0       0       0       0       0 #> 765       0       0       0       0       0       0       0       0       0 #> 766       0       0       0       0       0       0       0       0       0 #> 767       0       0       0       0       0       0       0       0       0 #> 768       0       0       0       0       0       0       0       0       0 #> 769       0       0       0       0       0       0       0       0       0 #> 770       0       0       0       0       0       0       0       0       0 #> 771       1       0       0       0       0       0       0       0       0 #> 772       0       1       0       0       0       0       0       0       0 #> 773       0       0       1       0       0       0       0       0       0 #> 774       0       0       0       1       0       0       0       0       0 #> 775       0       0       0       0       1       0       0       0       0 #> 776       0       0       0       0       0       1       0       0       0 #> 777       0       0       0       0       0       0       1       0       0 #> 778       0       0       0       0       0       0       0       1       0 #> 779       0       0       0       0       0       0       0       0       1 #> 780       0       0       0       0       0       0       0       0       0 #> 781       0       0       0       0       0       0       0       0       0 #> 782       0       0       0       0       0       0       0       0       0 #> 783       0       0       0       0       0       0       0       0       0 #> 784       0       0       0       0       0       0       0       0       0 #> 785       0       0       0       0       0       0       0       0       0 #> 786       0       0       0       0       0       0       0       0       0 #> 787       0       0       0       0       0       0       0       0       0 #> 788       0       0       0       0       0       0       0       0       0 #> 789       0       0       0       0       0       0       0       0       0 #> 790       0       0       0       0       0       0       0       0       0 #> 791       1       0       0       0       0       0       0       0       0 #> 792       0       1       0       0       0       0       0       0       0 #> 793       0       0       1       0       0       0       0       0       0 #> 794       0       0       0       1       0       0       0       0       0 #> 795       0       0       0       0       1       0       0       0       0 #> 796       0       0       0       0       0       1       0       0       0 #> 797       0       0       0       0       0       0       1       0       0 #> 798       0       0       0       0       0       0       0       1       0 #> 799       0       0       0       0       0       0       0       0       1 #> 800       0       0       0       0       0       0       0       0       0 #>     delay19 #> 1         0 #> 2         0 #> 3         0 #> 4         0 #> 5         0 #> 6         0 #> 7         0 #> 8         0 #> 9         0 #> 10        0 #> 11        0 #> 12        0 #> 13        0 #> 14        0 #> 15        0 #> 16        0 #> 17        0 #> 18        0 #> 19        0 #> 20        1 #> 21        0 #> 22        0 #> 23        0 #> 24        0 #> 25        0 #> 26        0 #> 27        0 #> 28        0 #> 29        0 #> 30        0 #> 31        0 #> 32        0 #> 33        0 #> 34        0 #> 35        0 #> 36        0 #> 37        0 #> 38        0 #> 39        0 #> 40        1 #> 41        0 #> 42        0 #> 43        0 #> 44        0 #> 45        0 #> 46        0 #> 47        0 #> 48        0 #> 49        0 #> 50        0 #> 51        0 #> 52        0 #> 53        0 #> 54        0 #> 55        0 #> 56        0 #> 57        0 #> 58        0 #> 59        0 #> 60        1 #> 61        0 #> 62        0 #> 63        0 #> 64        0 #> 65        0 #> 66        0 #> 67        0 #> 68        0 #> 69        0 #> 70        0 #> 71        0 #> 72        0 #> 73        0 #> 74        0 #> 75        0 #> 76        0 #> 77        0 #> 78        0 #> 79        0 #> 80        1 #> 81        0 #> 82        0 #> 83        0 #> 84        0 #> 85        0 #> 86        0 #> 87        0 #> 88        0 #> 89        0 #> 90        0 #> 91        0 #> 92        0 #> 93        0 #> 94        0 #> 95        0 #> 96        0 #> 97        0 #> 98        0 #> 99        0 #> 100       1 #> 101       0 #> 102       0 #> 103       0 #> 104       0 #> 105       0 #> 106       0 #> 107       0 #> 108       0 #> 109       0 #> 110       0 #> 111       0 #> 112       0 #> 113       0 #> 114       0 #> 115       0 #> 116       0 #> 117       0 #> 118       0 #> 119       0 #> 120       1 #> 121       0 #> 122       0 #> 123       0 #> 124       0 #> 125       0 #> 126       0 #> 127       0 #> 128       0 #> 129       0 #> 130       0 #> 131       0 #> 132       0 #> 133       0 #> 134       0 #> 135       0 #> 136       0 #> 137       0 #> 138       0 #> 139       0 #> 140       1 #> 141       0 #> 142       0 #> 143       0 #> 144       0 #> 145       0 #> 146       0 #> 147       0 #> 148       0 #> 149       0 #> 150       0 #> 151       0 #> 152       0 #> 153       0 #> 154       0 #> 155       0 #> 156       0 #> 157       0 #> 158       0 #> 159       0 #> 160       1 #> 161       0 #> 162       0 #> 163       0 #> 164       0 #> 165       0 #> 166       0 #> 167       0 #> 168       0 #> 169       0 #> 170       0 #> 171       0 #> 172       0 #> 173       0 #> 174       0 #> 175       0 #> 176       0 #> 177       0 #> 178       0 #> 179       0 #> 180       1 #> 181       0 #> 182       0 #> 183       0 #> 184       0 #> 185       0 #> 186       0 #> 187       0 #> 188       0 #> 189       0 #> 190       0 #> 191       0 #> 192       0 #> 193       0 #> 194       0 #> 195       0 #> 196       0 #> 197       0 #> 198       0 #> 199       0 #> 200       1 #> 201       0 #> 202       0 #> 203       0 #> 204       0 #> 205       0 #> 206       0 #> 207       0 #> 208       0 #> 209       0 #> 210       0 #> 211       0 #> 212       0 #> 213       0 #> 214       0 #> 215       0 #> 216       0 #> 217       0 #> 218       0 #> 219       0 #> 220       1 #> 221       0 #> 222       0 #> 223       0 #> 224       0 #> 225       0 #> 226       0 #> 227       0 #> 228       0 #> 229       0 #> 230       0 #> 231       0 #> 232       0 #> 233       0 #> 234       0 #> 235       0 #> 236       0 #> 237       0 #> 238       0 #> 239       0 #> 240       1 #> 241       0 #> 242       0 #> 243       0 #> 244       0 #> 245       0 #> 246       0 #> 247       0 #> 248       0 #> 249       0 #> 250       0 #> 251       0 #> 252       0 #> 253       0 #> 254       0 #> 255       0 #> 256       0 #> 257       0 #> 258       0 #> 259       0 #> 260       1 #> 261       0 #> 262       0 #> 263       0 #> 264       0 #> 265       0 #> 266       0 #> 267       0 #> 268       0 #> 269       0 #> 270       0 #> 271       0 #> 272       0 #> 273       0 #> 274       0 #> 275       0 #> 276       0 #> 277       0 #> 278       0 #> 279       0 #> 280       1 #> 281       0 #> 282       0 #> 283       0 #> 284       0 #> 285       0 #> 286       0 #> 287       0 #> 288       0 #> 289       0 #> 290       0 #> 291       0 #> 292       0 #> 293       0 #> 294       0 #> 295       0 #> 296       0 #> 297       0 #> 298       0 #> 299       0 #> 300       1 #> 301       0 #> 302       0 #> 303       0 #> 304       0 #> 305       0 #> 306       0 #> 307       0 #> 308       0 #> 309       0 #> 310       0 #> 311       0 #> 312       0 #> 313       0 #> 314       0 #> 315       0 #> 316       0 #> 317       0 #> 318       0 #> 319       0 #> 320       1 #> 321       0 #> 322       0 #> 323       0 #> 324       0 #> 325       0 #> 326       0 #> 327       0 #> 328       0 #> 329       0 #> 330       0 #> 331       0 #> 332       0 #> 333       0 #> 334       0 #> 335       0 #> 336       0 #> 337       0 #> 338       0 #> 339       0 #> 340       1 #> 341       0 #> 342       0 #> 343       0 #> 344       0 #> 345       0 #> 346       0 #> 347       0 #> 348       0 #> 349       0 #> 350       0 #> 351       0 #> 352       0 #> 353       0 #> 354       0 #> 355       0 #> 356       0 #> 357       0 #> 358       0 #> 359       0 #> 360       1 #> 361       0 #> 362       0 #> 363       0 #> 364       0 #> 365       0 #> 366       0 #> 367       0 #> 368       0 #> 369       0 #> 370       0 #> 371       0 #> 372       0 #> 373       0 #> 374       0 #> 375       0 #> 376       0 #> 377       0 #> 378       0 #> 379       0 #> 380       1 #> 381       0 #> 382       0 #> 383       0 #> 384       0 #> 385       0 #> 386       0 #> 387       0 #> 388       0 #> 389       0 #> 390       0 #> 391       0 #> 392       0 #> 393       0 #> 394       0 #> 395       0 #> 396       0 #> 397       0 #> 398       0 #> 399       0 #> 400       1 #> 401       0 #> 402       0 #> 403       0 #> 404       0 #> 405       0 #> 406       0 #> 407       0 #> 408       0 #> 409       0 #> 410       0 #> 411       0 #> 412       0 #> 413       0 #> 414       0 #> 415       0 #> 416       0 #> 417       0 #> 418       0 #> 419       0 #> 420       1 #> 421       0 #> 422       0 #> 423       0 #> 424       0 #> 425       0 #> 426       0 #> 427       0 #> 428       0 #> 429       0 #> 430       0 #> 431       0 #> 432       0 #> 433       0 #> 434       0 #> 435       0 #> 436       0 #> 437       0 #> 438       0 #> 439       0 #> 440       1 #> 441       0 #> 442       0 #> 443       0 #> 444       0 #> 445       0 #> 446       0 #> 447       0 #> 448       0 #> 449       0 #> 450       0 #> 451       0 #> 452       0 #> 453       0 #> 454       0 #> 455       0 #> 456       0 #> 457       0 #> 458       0 #> 459       0 #> 460       1 #> 461       0 #> 462       0 #> 463       0 #> 464       0 #> 465       0 #> 466       0 #> 467       0 #> 468       0 #> 469       0 #> 470       0 #> 471       0 #> 472       0 #> 473       0 #> 474       0 #> 475       0 #> 476       0 #> 477       0 #> 478       0 #> 479       0 #> 480       1 #> 481       0 #> 482       0 #> 483       0 #> 484       0 #> 485       0 #> 486       0 #> 487       0 #> 488       0 #> 489       0 #> 490       0 #> 491       0 #> 492       0 #> 493       0 #> 494       0 #> 495       0 #> 496       0 #> 497       0 #> 498       0 #> 499       0 #> 500       1 #> 501       0 #> 502       0 #> 503       0 #> 504       0 #> 505       0 #> 506       0 #> 507       0 #> 508       0 #> 509       0 #> 510       0 #> 511       0 #> 512       0 #> 513       0 #> 514       0 #> 515       0 #> 516       0 #> 517       0 #> 518       0 #> 519       0 #> 520       1 #> 521       0 #> 522       0 #> 523       0 #> 524       0 #> 525       0 #> 526       0 #> 527       0 #> 528       0 #> 529       0 #> 530       0 #> 531       0 #> 532       0 #> 533       0 #> 534       0 #> 535       0 #> 536       0 #> 537       0 #> 538       0 #> 539       0 #> 540       1 #> 541       0 #> 542       0 #> 543       0 #> 544       0 #> 545       0 #> 546       0 #> 547       0 #> 548       0 #> 549       0 #> 550       0 #> 551       0 #> 552       0 #> 553       0 #> 554       0 #> 555       0 #> 556       0 #> 557       0 #> 558       0 #> 559       0 #> 560       1 #> 561       0 #> 562       0 #> 563       0 #> 564       0 #> 565       0 #> 566       0 #> 567       0 #> 568       0 #> 569       0 #> 570       0 #> 571       0 #> 572       0 #> 573       0 #> 574       0 #> 575       0 #> 576       0 #> 577       0 #> 578       0 #> 579       0 #> 580       1 #> 581       0 #> 582       0 #> 583       0 #> 584       0 #> 585       0 #> 586       0 #> 587       0 #> 588       0 #> 589       0 #> 590       0 #> 591       0 #> 592       0 #> 593       0 #> 594       0 #> 595       0 #> 596       0 #> 597       0 #> 598       0 #> 599       0 #> 600       1 #> 601       0 #> 602       0 #> 603       0 #> 604       0 #> 605       0 #> 606       0 #> 607       0 #> 608       0 #> 609       0 #> 610       0 #> 611       0 #> 612       0 #> 613       0 #> 614       0 #> 615       0 #> 616       0 #> 617       0 #> 618       0 #> 619       0 #> 620       1 #> 621       0 #> 622       0 #> 623       0 #> 624       0 #> 625       0 #> 626       0 #> 627       0 #> 628       0 #> 629       0 #> 630       0 #> 631       0 #> 632       0 #> 633       0 #> 634       0 #> 635       0 #> 636       0 #> 637       0 #> 638       0 #> 639       0 #> 640       1 #> 641       0 #> 642       0 #> 643       0 #> 644       0 #> 645       0 #> 646       0 #> 647       0 #> 648       0 #> 649       0 #> 650       0 #> 651       0 #> 652       0 #> 653       0 #> 654       0 #> 655       0 #> 656       0 #> 657       0 #> 658       0 #> 659       0 #> 660       1 #> 661       0 #> 662       0 #> 663       0 #> 664       0 #> 665       0 #> 666       0 #> 667       0 #> 668       0 #> 669       0 #> 670       0 #> 671       0 #> 672       0 #> 673       0 #> 674       0 #> 675       0 #> 676       0 #> 677       0 #> 678       0 #> 679       0 #> 680       1 #> 681       0 #> 682       0 #> 683       0 #> 684       0 #> 685       0 #> 686       0 #> 687       0 #> 688       0 #> 689       0 #> 690       0 #> 691       0 #> 692       0 #> 693       0 #> 694       0 #> 695       0 #> 696       0 #> 697       0 #> 698       0 #> 699       0 #> 700       1 #> 701       0 #> 702       0 #> 703       0 #> 704       0 #> 705       0 #> 706       0 #> 707       0 #> 708       0 #> 709       0 #> 710       0 #> 711       0 #> 712       0 #> 713       0 #> 714       0 #> 715       0 #> 716       0 #> 717       0 #> 718       0 #> 719       0 #> 720       1 #> 721       0 #> 722       0 #> 723       0 #> 724       0 #> 725       0 #> 726       0 #> 727       0 #> 728       0 #> 729       0 #> 730       0 #> 731       0 #> 732       0 #> 733       0 #> 734       0 #> 735       0 #> 736       0 #> 737       0 #> 738       0 #> 739       0 #> 740       1 #> 741       0 #> 742       0 #> 743       0 #> 744       0 #> 745       0 #> 746       0 #> 747       0 #> 748       0 #> 749       0 #> 750       0 #> 751       0 #> 752       0 #> 753       0 #> 754       0 #> 755       0 #> 756       0 #> 757       0 #> 758       0 #> 759       0 #> 760       1 #> 761       0 #> 762       0 #> 763       0 #> 764       0 #> 765       0 #> 766       0 #> 767       0 #> 768       0 #> 769       0 #> 770       0 #> 771       0 #> 772       0 #> 773       0 #> 774       0 #> 775       0 #> 776       0 #> 777       0 #> 778       0 #> 779       0 #> 780       1 #> 781       0 #> 782       0 #> 783       0 #> 784       0 #> 785       0 #> 786       0 #> 787       0 #> 788       0 #> 789       0 #> 790       0 #> 791       0 #> 792       0 #> 793       0 #> 794       0 #> 795       0 #> 796       0 #> 797       0 #> 798       0 #> 799       0 #> 800       1 #>  #> $data$refnp_rdesign #>    fixed delay #> 1      0     1 #> 2      0     1 #> 3      0     1 #> 4      0     1 #> 5      0     1 #> 6      0     1 #> 7      0     1 #> 8      0     1 #> 9      0     1 #> 10     0     1 #> 11     0     1 #> 12     0     1 #> 13     0     1 #> 14     0     1 #> 15     0     1 #> 16     0     1 #> 17     0     1 #> 18     0     1 #> 19     0     1 #> 20     0     1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $data$model_refnp #> [1] 1 #>  #>  #> $priors #>             variable #>               <char> #> 1:     refp_mean_int #> 2:       refp_sd_int #> 3: refp_mean_beta_sd #> 4:   refp_sd_beta_sd #> 5:         refnp_int #> 6:     refnp_beta_sd #>                                                       description #>                                                            <char> #> 1:         Log mean intercept for parametric reference date delay #> 2: Log standard deviation for the parametric reference date delay #> 3:    Standard deviation of scaled pooled parametric mean effects #> 4:      Standard deviation of scaled pooled parametric sd effects #> 5:              Intercept for non-parametric reference date delay #> 6:     Standard deviation of scaled pooled non-parametric effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   1.0     1 #> 2: Zero truncated normal   0.5     1 #> 3: Zero truncated normal   0.0     1 #> 4: Zero truncated normal   0.0     1 #> 5:                Normal   0.0     1 #> 6: Zero truncated normal   0.0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(refp_mean_int = numeric(0), refp_sd_int = numeric(0),  #>             refp_mean_beta = numeric(0), refp_sd_beta = numeric(0),  #>             refp_mean_beta_sd = numeric(0), refp_sd_beta_sd = numeric(0),  #>             refnp_int = numeric(0), refnp_beta = numeric(0),  #>             refnp_beta_sd = numeric(0)) #>         if (data$model_refp > 0) { #>             init$refp_mean_int <- array(rnorm(1, priors$refp_mean_int_p[1],  #>                 priors$refp_mean_int_p[2]/10)) #>         } #>         if (data$model_refp > 1) { #>             init$refp_sd_int <- array(abs(rnorm(1, priors$refp_sd_int_p[1],  #>                 priors$refp_sd_int_p[2]/10))) #>         } #>         init$refp_mean <- rep(init$refp_mean_int, data$refp_fnrow) #>         init$refp_sd <- rep(init$refp_sd_int, data$refp_fnrow) #>         if (data$refp_fncol > 0) { #>             init$refp_mean_beta <- array(rnorm(data$refp_fncol,  #>                 0, 0.01)) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta <- array(rnorm(data$refp_fncol,  #>                   0, 0.01)) #>             } #>         } #>         if (data$refp_rncol > 0) { #>             init$refp_mean_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                 priors$refp_mean_beta_sd_p[1], priors$refp_mean_beta_sd_p[2]/10))) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                   priors$refp_sd_beta_sd_p[1], priors$refp_sd_beta_sd_p[2]/10))) #>             } #>         } #>         if (data$model_refnp > 0) { #>             if (data$refnp_fintercept > 0) { #>                 init$refnp_int <- array(rnorm(1, priors$refnp_int_p[1],  #>                   priors$refnp_int_p[2]/10)) #>             } #>             if (data$refnp_fncol > 0) { #>                 init$refnp_beta <- array(rnorm(data$refnp_fncol,  #>                   0, 0.01)) #>             } #>             if (data$refnp_rncol > 0) { #>                 init$refnp_beta_sd <- array(abs(rnorm(data$refnp_rncol,  #>                   priors$refnp_beta_sd_p[1], priors$refnp_beta_sd_p[2]/10))) #>             } #>         } #>         init #>     } #>     fn #> } #> <bytecode: 0x55d527481040> #> <environment: 0x55d527972a18> #>   # Combined parametric and non-parametric model enw_reference(  parametric = ~ 1, non_parametric = ~ 0 + (1 | delay_cat),  data = enw_example(\"preprocessed\") ) #> $formula #> $formula$parametric #> [1] \"~1\" #>  #> $formula$non_parametric #> [1] \"~0 + (1 | delay_cat)\" #>  #>  #> $data #> $data$refp_fintercept #> [1] 1 #>  #> $data$refp_fnrow #> [1] 1 #>  #> $data$refp_findex #>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 #> [39] 1 1 #>  #> $data$refp_fnindex #> [1] 40 #>  #> $data$refp_fncol #> [1] 0 #>  #> $data$refp_rncol #> [1] 0 #>  #> $data$refp_fdesign #> numeric(0) #>  #> $data$refp_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$model_refp #> [1] 2 #>  #> $data$refnp_fintercept #> [1] 0 #>  #> $data$refnp_fnrow #> [1] 800 #>  #> $data$refnp_findex #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108 #> [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 #> [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 #> [145] 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 #> [163] 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 #> [181] 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 #> [199] 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 #> [217] 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 #> [235] 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 #> [253] 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 #> [271] 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 #> [289] 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 #> [307] 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 #> [325] 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 #> [343] 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 #> [361] 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 #> [379] 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 #> [397] 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 #> [415] 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 #> [433] 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 #> [451] 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 #> [469] 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 #> [487] 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 #> [505] 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 #> [523] 523 524 525 526 527 528 529 530 531 532 533 534 535 536 537 538 539 540 #> [541] 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 #> [559] 559 560 561 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 #> [577] 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 #> [595] 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 #> [613] 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 #> [631] 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 #> [649] 649 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 #> [667] 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 #> [685] 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 701 702 #> [703] 703 704 705 706 707 708 709 710 711 712 713 714 715 716 717 718 719 720 #> [721] 721 722 723 724 725 726 727 728 729 730 731 732 733 734 735 736 737 738 #> [739] 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 #> [757] 757 758 759 760 761 762 763 764 765 766 767 768 769 770 771 772 773 774 #> [775] 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 #> [793] 793 794 795 796 797 798 799 800 #>  #> $data$refnp_fnindex #> [1] 800 #>  #> $data$refnp_fncol #> [1] 4 #>  #> $data$refnp_rncol #> [1] 1 #>  #> $data$refnp_fdesign #>     delay_cat[0,5) delay_cat[5,10) delay_cat[10,15) delay_cat[15,20) #> 1                1               0                0                0 #> 2                1               0                0                0 #> 3                1               0                0                0 #> 4                1               0                0                0 #> 5                1               0                0                0 #> 6                0               1                0                0 #> 7                0               1                0                0 #> 8                0               1                0                0 #> 9                0               1                0                0 #> 10               0               1                0                0 #> 11               0               0                1                0 #> 12               0               0                1                0 #> 13               0               0                1                0 #> 14               0               0                1                0 #> 15               0               0                1                0 #> 16               0               0                0                1 #> 17               0               0                0                1 #> 18               0               0                0                1 #> 19               0               0                0                1 #> 20               0               0                0                1 #> 21               1               0                0                0 #> 22               1               0                0                0 #> 23               1               0                0                0 #> 24               1               0                0                0 #> 25               1               0                0                0 #> 26               0               1                0                0 #> 27               0               1                0                0 #> 28               0               1                0                0 #> 29               0               1                0                0 #> 30               0               1                0                0 #> 31               0               0                1                0 #> 32               0               0                1                0 #> 33               0               0                1                0 #> 34               0               0                1                0 #> 35               0               0                1                0 #> 36               0               0                0                1 #> 37               0               0                0                1 #> 38               0               0                0                1 #> 39               0               0                0                1 #> 40               0               0                0                1 #> 41               1               0                0                0 #> 42               1               0                0                0 #> 43               1               0                0                0 #> 44               1               0                0                0 #> 45               1               0                0                0 #> 46               0               1                0                0 #> 47               0               1                0                0 #> 48               0               1                0                0 #> 49               0               1                0                0 #> 50               0               1                0                0 #> 51               0               0                1                0 #> 52               0               0                1                0 #> 53               0               0                1                0 #> 54               0               0                1                0 #> 55               0               0                1                0 #> 56               0               0                0                1 #> 57               0               0                0                1 #> 58               0               0                0                1 #> 59               0               0                0                1 #> 60               0               0                0                1 #> 61               1               0                0                0 #> 62               1               0                0                0 #> 63               1               0                0                0 #> 64               1               0                0                0 #> 65               1               0                0                0 #> 66               0               1                0                0 #> 67               0               1                0                0 #> 68               0               1                0                0 #> 69               0               1                0                0 #> 70               0               1                0                0 #> 71               0               0                1                0 #> 72               0               0                1                0 #> 73               0               0                1                0 #> 74               0               0                1                0 #> 75               0               0                1                0 #> 76               0               0                0                1 #> 77               0               0                0                1 #> 78               0               0                0                1 #> 79               0               0                0                1 #> 80               0               0                0                1 #> 81               1               0                0                0 #> 82               1               0                0                0 #> 83               1               0                0                0 #> 84               1               0                0                0 #> 85               1               0                0                0 #> 86               0               1                0                0 #> 87               0               1                0                0 #> 88               0               1                0                0 #> 89               0               1                0                0 #> 90               0               1                0                0 #> 91               0               0                1                0 #> 92               0               0                1                0 #> 93               0               0                1                0 #> 94               0               0                1                0 #> 95               0               0                1                0 #> 96               0               0                0                1 #> 97               0               0                0                1 #> 98               0               0                0                1 #> 99               0               0                0                1 #> 100              0               0                0                1 #> 101              1               0                0                0 #> 102              1               0                0                0 #> 103              1               0                0                0 #> 104              1               0                0                0 #> 105              1               0                0                0 #> 106              0               1                0                0 #> 107              0               1                0                0 #> 108              0               1                0                0 #> 109              0               1                0                0 #> 110              0               1                0                0 #> 111              0               0                1                0 #> 112              0               0                1                0 #> 113              0               0                1                0 #> 114              0               0                1                0 #> 115              0               0                1                0 #> 116              0               0                0                1 #> 117              0               0                0                1 #> 118              0               0                0                1 #> 119              0               0                0                1 #> 120              0               0                0                1 #> 121              1               0                0                0 #> 122              1               0                0                0 #> 123              1               0                0                0 #> 124              1               0                0                0 #> 125              1               0                0                0 #> 126              0               1                0                0 #> 127              0               1                0                0 #> 128              0               1                0                0 #> 129              0               1                0                0 #> 130              0               1                0                0 #> 131              0               0                1                0 #> 132              0               0                1                0 #> 133              0               0                1                0 #> 134              0               0                1                0 #> 135              0               0                1                0 #> 136              0               0                0                1 #> 137              0               0                0                1 #> 138              0               0                0                1 #> 139              0               0                0                1 #> 140              0               0                0                1 #> 141              1               0                0                0 #> 142              1               0                0                0 #> 143              1               0                0                0 #> 144              1               0                0                0 #> 145              1               0                0                0 #> 146              0               1                0                0 #> 147              0               1                0                0 #> 148              0               1                0                0 #> 149              0               1                0                0 #> 150              0               1                0                0 #> 151              0               0                1                0 #> 152              0               0                1                0 #> 153              0               0                1                0 #> 154              0               0                1                0 #> 155              0               0                1                0 #> 156              0               0                0                1 #> 157              0               0                0                1 #> 158              0               0                0                1 #> 159              0               0                0                1 #> 160              0               0                0                1 #> 161              1               0                0                0 #> 162              1               0                0                0 #> 163              1               0                0                0 #> 164              1               0                0                0 #> 165              1               0                0                0 #> 166              0               1                0                0 #> 167              0               1                0                0 #> 168              0               1                0                0 #> 169              0               1                0                0 #> 170              0               1                0                0 #> 171              0               0                1                0 #> 172              0               0                1                0 #> 173              0               0                1                0 #> 174              0               0                1                0 #> 175              0               0                1                0 #> 176              0               0                0                1 #> 177              0               0                0                1 #> 178              0               0                0                1 #> 179              0               0                0                1 #> 180              0               0                0                1 #> 181              1               0                0                0 #> 182              1               0                0                0 #> 183              1               0                0                0 #> 184              1               0                0                0 #> 185              1               0                0                0 #> 186              0               1                0                0 #> 187              0               1                0                0 #> 188              0               1                0                0 #> 189              0               1                0                0 #> 190              0               1                0                0 #> 191              0               0                1                0 #> 192              0               0                1                0 #> 193              0               0                1                0 #> 194              0               0                1                0 #> 195              0               0                1                0 #> 196              0               0                0                1 #> 197              0               0                0                1 #> 198              0               0                0                1 #> 199              0               0                0                1 #> 200              0               0                0                1 #> 201              1               0                0                0 #> 202              1               0                0                0 #> 203              1               0                0                0 #> 204              1               0                0                0 #> 205              1               0                0                0 #> 206              0               1                0                0 #> 207              0               1                0                0 #> 208              0               1                0                0 #> 209              0               1                0                0 #> 210              0               1                0                0 #> 211              0               0                1                0 #> 212              0               0                1                0 #> 213              0               0                1                0 #> 214              0               0                1                0 #> 215              0               0                1                0 #> 216              0               0                0                1 #> 217              0               0                0                1 #> 218              0               0                0                1 #> 219              0               0                0                1 #> 220              0               0                0                1 #> 221              1               0                0                0 #> 222              1               0                0                0 #> 223              1               0                0                0 #> 224              1               0                0                0 #> 225              1               0                0                0 #> 226              0               1                0                0 #> 227              0               1                0                0 #> 228              0               1                0                0 #> 229              0               1                0                0 #> 230              0               1                0                0 #> 231              0               0                1                0 #> 232              0               0                1                0 #> 233              0               0                1                0 #> 234              0               0                1                0 #> 235              0               0                1                0 #> 236              0               0                0                1 #> 237              0               0                0                1 #> 238              0               0                0                1 #> 239              0               0                0                1 #> 240              0               0                0                1 #> 241              1               0                0                0 #> 242              1               0                0                0 #> 243              1               0                0                0 #> 244              1               0                0                0 #> 245              1               0                0                0 #> 246              0               1                0                0 #> 247              0               1                0                0 #> 248              0               1                0                0 #> 249              0               1                0                0 #> 250              0               1                0                0 #> 251              0               0                1                0 #> 252              0               0                1                0 #> 253              0               0                1                0 #> 254              0               0                1                0 #> 255              0               0                1                0 #> 256              0               0                0                1 #> 257              0               0                0                1 #> 258              0               0                0                1 #> 259              0               0                0                1 #> 260              0               0                0                1 #> 261              1               0                0                0 #> 262              1               0                0                0 #> 263              1               0                0                0 #> 264              1               0                0                0 #> 265              1               0                0                0 #> 266              0               1                0                0 #> 267              0               1                0                0 #> 268              0               1                0                0 #> 269              0               1                0                0 #> 270              0               1                0                0 #> 271              0               0                1                0 #> 272              0               0                1                0 #> 273              0               0                1                0 #> 274              0               0                1                0 #> 275              0               0                1                0 #> 276              0               0                0                1 #> 277              0               0                0                1 #> 278              0               0                0                1 #> 279              0               0                0                1 #> 280              0               0                0                1 #> 281              1               0                0                0 #> 282              1               0                0                0 #> 283              1               0                0                0 #> 284              1               0                0                0 #> 285              1               0                0                0 #> 286              0               1                0                0 #> 287              0               1                0                0 #> 288              0               1                0                0 #> 289              0               1                0                0 #> 290              0               1                0                0 #> 291              0               0                1                0 #> 292              0               0                1                0 #> 293              0               0                1                0 #> 294              0               0                1                0 #> 295              0               0                1                0 #> 296              0               0                0                1 #> 297              0               0                0                1 #> 298              0               0                0                1 #> 299              0               0                0                1 #> 300              0               0                0                1 #> 301              1               0                0                0 #> 302              1               0                0                0 #> 303              1               0                0                0 #> 304              1               0                0                0 #> 305              1               0                0                0 #> 306              0               1                0                0 #> 307              0               1                0                0 #> 308              0               1                0                0 #> 309              0               1                0                0 #> 310              0               1                0                0 #> 311              0               0                1                0 #> 312              0               0                1                0 #> 313              0               0                1                0 #> 314              0               0                1                0 #> 315              0               0                1                0 #> 316              0               0                0                1 #> 317              0               0                0                1 #> 318              0               0                0                1 #> 319              0               0                0                1 #> 320              0               0                0                1 #> 321              1               0                0                0 #> 322              1               0                0                0 #> 323              1               0                0                0 #> 324              1               0                0                0 #> 325              1               0                0                0 #> 326              0               1                0                0 #> 327              0               1                0                0 #> 328              0               1                0                0 #> 329              0               1                0                0 #> 330              0               1                0                0 #> 331              0               0                1                0 #> 332              0               0                1                0 #> 333              0               0                1                0 #> 334              0               0                1                0 #> 335              0               0                1                0 #> 336              0               0                0                1 #> 337              0               0                0                1 #> 338              0               0                0                1 #> 339              0               0                0                1 #> 340              0               0                0                1 #> 341              1               0                0                0 #> 342              1               0                0                0 #> 343              1               0                0                0 #> 344              1               0                0                0 #> 345              1               0                0                0 #> 346              0               1                0                0 #> 347              0               1                0                0 #> 348              0               1                0                0 #> 349              0               1                0                0 #> 350              0               1                0                0 #> 351              0               0                1                0 #> 352              0               0                1                0 #> 353              0               0                1                0 #> 354              0               0                1                0 #> 355              0               0                1                0 #> 356              0               0                0                1 #> 357              0               0                0                1 #> 358              0               0                0                1 #> 359              0               0                0                1 #> 360              0               0                0                1 #> 361              1               0                0                0 #> 362              1               0                0                0 #> 363              1               0                0                0 #> 364              1               0                0                0 #> 365              1               0                0                0 #> 366              0               1                0                0 #> 367              0               1                0                0 #> 368              0               1                0                0 #> 369              0               1                0                0 #> 370              0               1                0                0 #> 371              0               0                1                0 #> 372              0               0                1                0 #> 373              0               0                1                0 #> 374              0               0                1                0 #> 375              0               0                1                0 #> 376              0               0                0                1 #> 377              0               0                0                1 #> 378              0               0                0                1 #> 379              0               0                0                1 #> 380              0               0                0                1 #> 381              1               0                0                0 #> 382              1               0                0                0 #> 383              1               0                0                0 #> 384              1               0                0                0 #> 385              1               0                0                0 #> 386              0               1                0                0 #> 387              0               1                0                0 #> 388              0               1                0                0 #> 389              0               1                0                0 #> 390              0               1                0                0 #> 391              0               0                1                0 #> 392              0               0                1                0 #> 393              0               0                1                0 #> 394              0               0                1                0 #> 395              0               0                1                0 #> 396              0               0                0                1 #> 397              0               0                0                1 #> 398              0               0                0                1 #> 399              0               0                0                1 #> 400              0               0                0                1 #> 401              1               0                0                0 #> 402              1               0                0                0 #> 403              1               0                0                0 #> 404              1               0                0                0 #> 405              1               0                0                0 #> 406              0               1                0                0 #> 407              0               1                0                0 #> 408              0               1                0                0 #> 409              0               1                0                0 #> 410              0               1                0                0 #> 411              0               0                1                0 #> 412              0               0                1                0 #> 413              0               0                1                0 #> 414              0               0                1                0 #> 415              0               0                1                0 #> 416              0               0                0                1 #> 417              0               0                0                1 #> 418              0               0                0                1 #> 419              0               0                0                1 #> 420              0               0                0                1 #> 421              1               0                0                0 #> 422              1               0                0                0 #> 423              1               0                0                0 #> 424              1               0                0                0 #> 425              1               0                0                0 #> 426              0               1                0                0 #> 427              0               1                0                0 #> 428              0               1                0                0 #> 429              0               1                0                0 #> 430              0               1                0                0 #> 431              0               0                1                0 #> 432              0               0                1                0 #> 433              0               0                1                0 #> 434              0               0                1                0 #> 435              0               0                1                0 #> 436              0               0                0                1 #> 437              0               0                0                1 #> 438              0               0                0                1 #> 439              0               0                0                1 #> 440              0               0                0                1 #> 441              1               0                0                0 #> 442              1               0                0                0 #> 443              1               0                0                0 #> 444              1               0                0                0 #> 445              1               0                0                0 #> 446              0               1                0                0 #> 447              0               1                0                0 #> 448              0               1                0                0 #> 449              0               1                0                0 #> 450              0               1                0                0 #> 451              0               0                1                0 #> 452              0               0                1                0 #> 453              0               0                1                0 #> 454              0               0                1                0 #> 455              0               0                1                0 #> 456              0               0                0                1 #> 457              0               0                0                1 #> 458              0               0                0                1 #> 459              0               0                0                1 #> 460              0               0                0                1 #> 461              1               0                0                0 #> 462              1               0                0                0 #> 463              1               0                0                0 #> 464              1               0                0                0 #> 465              1               0                0                0 #> 466              0               1                0                0 #> 467              0               1                0                0 #> 468              0               1                0                0 #> 469              0               1                0                0 #> 470              0               1                0                0 #> 471              0               0                1                0 #> 472              0               0                1                0 #> 473              0               0                1                0 #> 474              0               0                1                0 #> 475              0               0                1                0 #> 476              0               0                0                1 #> 477              0               0                0                1 #> 478              0               0                0                1 #> 479              0               0                0                1 #> 480              0               0                0                1 #> 481              1               0                0                0 #> 482              1               0                0                0 #> 483              1               0                0                0 #> 484              1               0                0                0 #> 485              1               0                0                0 #> 486              0               1                0                0 #> 487              0               1                0                0 #> 488              0               1                0                0 #> 489              0               1                0                0 #> 490              0               1                0                0 #> 491              0               0                1                0 #> 492              0               0                1                0 #> 493              0               0                1                0 #> 494              0               0                1                0 #> 495              0               0                1                0 #> 496              0               0                0                1 #> 497              0               0                0                1 #> 498              0               0                0                1 #> 499              0               0                0                1 #> 500              0               0                0                1 #> 501              1               0                0                0 #> 502              1               0                0                0 #> 503              1               0                0                0 #> 504              1               0                0                0 #> 505              1               0                0                0 #> 506              0               1                0                0 #> 507              0               1                0                0 #> 508              0               1                0                0 #> 509              0               1                0                0 #> 510              0               1                0                0 #> 511              0               0                1                0 #> 512              0               0                1                0 #> 513              0               0                1                0 #> 514              0               0                1                0 #> 515              0               0                1                0 #> 516              0               0                0                1 #> 517              0               0                0                1 #> 518              0               0                0                1 #> 519              0               0                0                1 #> 520              0               0                0                1 #> 521              1               0                0                0 #> 522              1               0                0                0 #> 523              1               0                0                0 #> 524              1               0                0                0 #> 525              1               0                0                0 #> 526              0               1                0                0 #> 527              0               1                0                0 #> 528              0               1                0                0 #> 529              0               1                0                0 #> 530              0               1                0                0 #> 531              0               0                1                0 #> 532              0               0                1                0 #> 533              0               0                1                0 #> 534              0               0                1                0 #> 535              0               0                1                0 #> 536              0               0                0                1 #> 537              0               0                0                1 #> 538              0               0                0                1 #> 539              0               0                0                1 #> 540              0               0                0                1 #> 541              1               0                0                0 #> 542              1               0                0                0 #> 543              1               0                0                0 #> 544              1               0                0                0 #> 545              1               0                0                0 #> 546              0               1                0                0 #> 547              0               1                0                0 #> 548              0               1                0                0 #> 549              0               1                0                0 #> 550              0               1                0                0 #> 551              0               0                1                0 #> 552              0               0                1                0 #> 553              0               0                1                0 #> 554              0               0                1                0 #> 555              0               0                1                0 #> 556              0               0                0                1 #> 557              0               0                0                1 #> 558              0               0                0                1 #> 559              0               0                0                1 #> 560              0               0                0                1 #> 561              1               0                0                0 #> 562              1               0                0                0 #> 563              1               0                0                0 #> 564              1               0                0                0 #> 565              1               0                0                0 #> 566              0               1                0                0 #> 567              0               1                0                0 #> 568              0               1                0                0 #> 569              0               1                0                0 #> 570              0               1                0                0 #> 571              0               0                1                0 #> 572              0               0                1                0 #> 573              0               0                1                0 #> 574              0               0                1                0 #> 575              0               0                1                0 #> 576              0               0                0                1 #> 577              0               0                0                1 #> 578              0               0                0                1 #> 579              0               0                0                1 #> 580              0               0                0                1 #> 581              1               0                0                0 #> 582              1               0                0                0 #> 583              1               0                0                0 #> 584              1               0                0                0 #> 585              1               0                0                0 #> 586              0               1                0                0 #> 587              0               1                0                0 #> 588              0               1                0                0 #> 589              0               1                0                0 #> 590              0               1                0                0 #> 591              0               0                1                0 #> 592              0               0                1                0 #> 593              0               0                1                0 #> 594              0               0                1                0 #> 595              0               0                1                0 #> 596              0               0                0                1 #> 597              0               0                0                1 #> 598              0               0                0                1 #> 599              0               0                0                1 #> 600              0               0                0                1 #> 601              1               0                0                0 #> 602              1               0                0                0 #> 603              1               0                0                0 #> 604              1               0                0                0 #> 605              1               0                0                0 #> 606              0               1                0                0 #> 607              0               1                0                0 #> 608              0               1                0                0 #> 609              0               1                0                0 #> 610              0               1                0                0 #> 611              0               0                1                0 #> 612              0               0                1                0 #> 613              0               0                1                0 #> 614              0               0                1                0 #> 615              0               0                1                0 #> 616              0               0                0                1 #> 617              0               0                0                1 #> 618              0               0                0                1 #> 619              0               0                0                1 #> 620              0               0                0                1 #> 621              1               0                0                0 #> 622              1               0                0                0 #> 623              1               0                0                0 #> 624              1               0                0                0 #> 625              1               0                0                0 #> 626              0               1                0                0 #> 627              0               1                0                0 #> 628              0               1                0                0 #> 629              0               1                0                0 #> 630              0               1                0                0 #> 631              0               0                1                0 #> 632              0               0                1                0 #> 633              0               0                1                0 #> 634              0               0                1                0 #> 635              0               0                1                0 #> 636              0               0                0                1 #> 637              0               0                0                1 #> 638              0               0                0                1 #> 639              0               0                0                1 #> 640              0               0                0                1 #> 641              1               0                0                0 #> 642              1               0                0                0 #> 643              1               0                0                0 #> 644              1               0                0                0 #> 645              1               0                0                0 #> 646              0               1                0                0 #> 647              0               1                0                0 #> 648              0               1                0                0 #> 649              0               1                0                0 #> 650              0               1                0                0 #> 651              0               0                1                0 #> 652              0               0                1                0 #> 653              0               0                1                0 #> 654              0               0                1                0 #> 655              0               0                1                0 #> 656              0               0                0                1 #> 657              0               0                0                1 #> 658              0               0                0                1 #> 659              0               0                0                1 #> 660              0               0                0                1 #> 661              1               0                0                0 #> 662              1               0                0                0 #> 663              1               0                0                0 #> 664              1               0                0                0 #> 665              1               0                0                0 #> 666              0               1                0                0 #> 667              0               1                0                0 #> 668              0               1                0                0 #> 669              0               1                0                0 #> 670              0               1                0                0 #> 671              0               0                1                0 #> 672              0               0                1                0 #> 673              0               0                1                0 #> 674              0               0                1                0 #> 675              0               0                1                0 #> 676              0               0                0                1 #> 677              0               0                0                1 #> 678              0               0                0                1 #> 679              0               0                0                1 #> 680              0               0                0                1 #> 681              1               0                0                0 #> 682              1               0                0                0 #> 683              1               0                0                0 #> 684              1               0                0                0 #> 685              1               0                0                0 #> 686              0               1                0                0 #> 687              0               1                0                0 #> 688              0               1                0                0 #> 689              0               1                0                0 #> 690              0               1                0                0 #> 691              0               0                1                0 #> 692              0               0                1                0 #> 693              0               0                1                0 #> 694              0               0                1                0 #> 695              0               0                1                0 #> 696              0               0                0                1 #> 697              0               0                0                1 #> 698              0               0                0                1 #> 699              0               0                0                1 #> 700              0               0                0                1 #> 701              1               0                0                0 #> 702              1               0                0                0 #> 703              1               0                0                0 #> 704              1               0                0                0 #> 705              1               0                0                0 #> 706              0               1                0                0 #> 707              0               1                0                0 #> 708              0               1                0                0 #> 709              0               1                0                0 #> 710              0               1                0                0 #> 711              0               0                1                0 #> 712              0               0                1                0 #> 713              0               0                1                0 #> 714              0               0                1                0 #> 715              0               0                1                0 #> 716              0               0                0                1 #> 717              0               0                0                1 #> 718              0               0                0                1 #> 719              0               0                0                1 #> 720              0               0                0                1 #> 721              1               0                0                0 #> 722              1               0                0                0 #> 723              1               0                0                0 #> 724              1               0                0                0 #> 725              1               0                0                0 #> 726              0               1                0                0 #> 727              0               1                0                0 #> 728              0               1                0                0 #> 729              0               1                0                0 #> 730              0               1                0                0 #> 731              0               0                1                0 #> 732              0               0                1                0 #> 733              0               0                1                0 #> 734              0               0                1                0 #> 735              0               0                1                0 #> 736              0               0                0                1 #> 737              0               0                0                1 #> 738              0               0                0                1 #> 739              0               0                0                1 #> 740              0               0                0                1 #> 741              1               0                0                0 #> 742              1               0                0                0 #> 743              1               0                0                0 #> 744              1               0                0                0 #> 745              1               0                0                0 #> 746              0               1                0                0 #> 747              0               1                0                0 #> 748              0               1                0                0 #> 749              0               1                0                0 #> 750              0               1                0                0 #> 751              0               0                1                0 #> 752              0               0                1                0 #> 753              0               0                1                0 #> 754              0               0                1                0 #> 755              0               0                1                0 #> 756              0               0                0                1 #> 757              0               0                0                1 #> 758              0               0                0                1 #> 759              0               0                0                1 #> 760              0               0                0                1 #> 761              1               0                0                0 #> 762              1               0                0                0 #> 763              1               0                0                0 #> 764              1               0                0                0 #> 765              1               0                0                0 #> 766              0               1                0                0 #> 767              0               1                0                0 #> 768              0               1                0                0 #> 769              0               1                0                0 #> 770              0               1                0                0 #> 771              0               0                1                0 #> 772              0               0                1                0 #> 773              0               0                1                0 #> 774              0               0                1                0 #> 775              0               0                1                0 #> 776              0               0                0                1 #> 777              0               0                0                1 #> 778              0               0                0                1 #> 779              0               0                0                1 #> 780              0               0                0                1 #> 781              1               0                0                0 #> 782              1               0                0                0 #> 783              1               0                0                0 #> 784              1               0                0                0 #> 785              1               0                0                0 #> 786              0               1                0                0 #> 787              0               1                0                0 #> 788              0               1                0                0 #> 789              0               1                0                0 #> 790              0               1                0                0 #> 791              0               0                1                0 #> 792              0               0                1                0 #> 793              0               0                1                0 #> 794              0               0                1                0 #> 795              0               0                1                0 #> 796              0               0                0                1 #> 797              0               0                0                1 #> 798              0               0                0                1 #> 799              0               0                0                1 #> 800              0               0                0                1 #> attr(,\"assign\") #> [1] 1 1 1 1 #> attr(,\"contrasts\") #> attr(,\"contrasts\")$delay_cat #>         [0,5) [5,10) [10,15) [15,20) #> [0,5)       1      0       0       0 #> [5,10)      0      1       0       0 #> [10,15)     0      0       1       0 #> [15,20)     0      0       0       1 #>  #>  #> $data$refnp_rdesign #>   fixed delay_cat #> 1     0         1 #> 2     0         1 #> 3     0         1 #> 4     0         1 #> attr(,\"assign\") #> [1] 1 2 #>  #> $data$model_refnp #> [1] 1 #>  #>  #> $priors #>             variable #>               <char> #> 1:     refp_mean_int #> 2:       refp_sd_int #> 3: refp_mean_beta_sd #> 4:   refp_sd_beta_sd #> 5:         refnp_int #> 6:     refnp_beta_sd #>                                                       description #>                                                            <char> #> 1:         Log mean intercept for parametric reference date delay #> 2: Log standard deviation for the parametric reference date delay #> 3:    Standard deviation of scaled pooled parametric mean effects #> 4:      Standard deviation of scaled pooled parametric sd effects #> 5:              Intercept for non-parametric reference date delay #> 6:     Standard deviation of scaled pooled non-parametric effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   1.0     1 #> 2: Zero truncated normal   0.5     1 #> 3: Zero truncated normal   0.0     1 #> 4: Zero truncated normal   0.0     1 #> 5:                Normal   0.0     1 #> 6: Zero truncated normal   0.0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(refp_mean_int = numeric(0), refp_sd_int = numeric(0),  #>             refp_mean_beta = numeric(0), refp_sd_beta = numeric(0),  #>             refp_mean_beta_sd = numeric(0), refp_sd_beta_sd = numeric(0),  #>             refnp_int = numeric(0), refnp_beta = numeric(0),  #>             refnp_beta_sd = numeric(0)) #>         if (data$model_refp > 0) { #>             init$refp_mean_int <- array(rnorm(1, priors$refp_mean_int_p[1],  #>                 priors$refp_mean_int_p[2]/10)) #>         } #>         if (data$model_refp > 1) { #>             init$refp_sd_int <- array(abs(rnorm(1, priors$refp_sd_int_p[1],  #>                 priors$refp_sd_int_p[2]/10))) #>         } #>         init$refp_mean <- rep(init$refp_mean_int, data$refp_fnrow) #>         init$refp_sd <- rep(init$refp_sd_int, data$refp_fnrow) #>         if (data$refp_fncol > 0) { #>             init$refp_mean_beta <- array(rnorm(data$refp_fncol,  #>                 0, 0.01)) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta <- array(rnorm(data$refp_fncol,  #>                   0, 0.01)) #>             } #>         } #>         if (data$refp_rncol > 0) { #>             init$refp_mean_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                 priors$refp_mean_beta_sd_p[1], priors$refp_mean_beta_sd_p[2]/10))) #>             if (data$model_refp > 1) { #>                 init$refp_sd_beta_sd <- array(abs(rnorm(data$refp_rncol,  #>                   priors$refp_sd_beta_sd_p[1], priors$refp_sd_beta_sd_p[2]/10))) #>             } #>         } #>         if (data$model_refnp > 0) { #>             if (data$refnp_fintercept > 0) { #>                 init$refnp_int <- array(rnorm(1, priors$refnp_int_p[1],  #>                   priors$refnp_int_p[2]/10)) #>             } #>             if (data$refnp_fncol > 0) { #>                 init$refnp_beta <- array(rnorm(data$refnp_fncol,  #>                   0, 0.01)) #>             } #>             if (data$refnp_rncol > 0) { #>                 init$refnp_beta_sd <- array(abs(rnorm(data$refnp_rncol,  #>                   priors$refnp_beta_sd_p[1], priors$refnp_beta_sd_p[2]/10))) #>             } #>         } #>         init #>     } #>     fn #> } #> <bytecode: 0x55d527481040> #> <environment: 0x55d528436ef0> #>"},{"path":"https://package.epinowcast.org/dev/reference/enw_reference_by_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Construct a lookup of references dates by report — enw_reference_by_report","title":"Construct a lookup of references dates by report — enw_reference_by_report","text":"Construct lookup references dates report","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reference_by_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Construct a lookup of references dates by report — enw_reference_by_report","text":"","code":"enw_reference_by_report(   missing_reference,   reps_with_complete_refs,   metareference,   max_delay )"},{"path":"https://package.epinowcast.org/dev/reference/enw_reference_by_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Construct a lookup of references dates by report — enw_reference_by_report","text":"missing_reference missing_reference data.frame output enw_preprocess_data(). reps_with_complete_refs data.frame report dates complete (.e fully reported) reference dates produced using enw_reps_with_complete_refs(). metareference metareference data.frame output enw_preprocess_data(). max_delay maximum delay model delay distribution, specified units timestep (e.g., timestep = \"week\", max_delay = 3 means 3 weeks). specified maximum observed delay assumed true maximum delay model. Otherwise, integer greater equal 1 can specified. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Steps take determine maximum delay: Consider realistic relevant application. Check proportion observations reported (prop_reported) delay new_confirm output enw_preprocess_obs. Use check_max_delay() check coverage candidate max_delay. doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 intervals (.e. max_delay 1 corresponds delay).","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reference_by_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Construct a lookup of references dates by report — enw_reference_by_report","text":"wide data.frame row complete report date ' columns observation index reporting delay","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_replace_priors.html","id":null,"dir":"Reference","previous_headings":"","what":"Replace default priors with user specified priors — enw_replace_priors","title":"Replace default priors with user specified priors — enw_replace_priors","text":"function used internally epinowcast replace default model priors users specified ones (restricted normal priors specified mean standard deviations). common use extracting posterior previous epinowcast() run (using summary(nowcast, type = fit)) using prior.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_replace_priors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Replace default priors with user specified priors — enw_replace_priors","text":"","code":"enw_replace_priors(priors, custom_priors)"},{"path":"https://package.epinowcast.org/dev/reference/enw_replace_priors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Replace default priors with user specified priors — enw_replace_priors","text":"priors data.frame following variables: variable, mean, sd describing normal priors. Priors appropriate format returned enw_reference() well similar model specification functions. custom_priors data.frame following variables: variable, mean, sd describing normal priors. Priors appropriate format returned enw_reference() well similar model specification functions. Priors data.frame replace default priors. Note currently vectorised prior names (.e form variable[n] treated variable).","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_replace_priors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Replace default priors with user specified priors — enw_replace_priors","text":"data.table prior definitions (variable, mean sd).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_replace_priors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Replace default priors with user specified priors — enw_replace_priors","text":"","code":"# Update priors from a data.frame priors <- data.frame(variable = c(\"x\", \"y\"), mean = c(1, 2), sd = c(1, 2)) custom_priors <- data.frame(variable = \"x[1]\", mean = 10, sd = 2) enw_replace_priors(priors, custom_priors) #>    variable  mean    sd #>      <char> <num> <num> #> 1:        y     2     2 #> 2:        x    10     2  # Update priors from a previous model fit default_priors <- enw_reference(  distribution = \"lognormal\",  data = enw_example(\"preprocessed\"), )$priors print(default_priors) #>             variable #>               <char> #> 1:     refp_mean_int #> 2:       refp_sd_int #> 3: refp_mean_beta_sd #> 4:   refp_sd_beta_sd #> 5:         refnp_int #> 6:     refnp_beta_sd #>                                                       description #>                                                            <char> #> 1:         Log mean intercept for parametric reference date delay #> 2: Log standard deviation for the parametric reference date delay #> 3:    Standard deviation of scaled pooled parametric mean effects #> 4:      Standard deviation of scaled pooled parametric sd effects #> 5:              Intercept for non-parametric reference date delay #> 6:     Standard deviation of scaled pooled non-parametric effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1:                Normal   1.0     1 #> 2: Zero truncated normal   0.5     1 #> 3: Zero truncated normal   0.0     1 #> 4: Zero truncated normal   0.0     1 #> 5:                Normal   0.0     1 #> 6: Zero truncated normal   0.0     1  fit_priors <- summary(  enw_example(\"nowcast\"), type = \"fit\",  variables = c(\"refp_mean_int\", \"refp_sd_int\", \"sqrt_phi\") ) fit_priors #>            variable      mean    median         sd        mad        q5 #>              <char>     <num>     <num>      <num>      <num>     <num> #> 1: refp_mean_int[1] 2.8538466 2.8339088 0.60299691 0.62443435 1.9172352 #> 2:   refp_sd_int[1] 3.6893646 3.6917677 0.30337736 0.30959601 3.2030695 #> 3:      sqrt_phi[1] 0.3492024 0.3481456 0.03164753 0.03011692 0.2989725 #>          q20       q80       q95     rhat  ess_bulk ess_tail #>        <num>     <num>     <num>    <num>     <num>    <num> #> 1: 2.3202662 3.3509946 3.9807851 1.003710  606.3893 555.9773 #> 2: 3.4216331 3.9414908 4.2085437 1.001962  671.3773 487.2159 #> 3: 0.3228929 0.3739743 0.4046854 1.002404 1084.4296 806.2026  enw_replace_priors(default_priors, fit_priors) #>             variable #>               <char> #> 1: refp_mean_beta_sd #> 2:   refp_sd_beta_sd #> 3:         refnp_int #> 4:     refnp_beta_sd #> 5:     refp_mean_int #> 6:       refp_sd_int #> 7:          sqrt_phi #>                                                    description #>                                                         <char> #> 1: Standard deviation of scaled pooled parametric mean effects #> 2:   Standard deviation of scaled pooled parametric sd effects #> 3:           Intercept for non-parametric reference date delay #> 4:  Standard deviation of scaled pooled non-parametric effects #> 5:                                                        <NA> #> 6:                                                        <NA> #> 7:                                                        <NA> #>             distribution      mean         sd #>                   <char>     <num>      <num> #> 1: Zero truncated normal 0.0000000 1.00000000 #> 2: Zero truncated normal 0.0000000 1.00000000 #> 3:                Normal 0.0000000 1.00000000 #> 4: Zero truncated normal 0.0000000 1.00000000 #> 5:                  <NA> 2.8538466 0.60299691 #> 6:                  <NA> 3.6893646 0.30337736 #> 7:                  <NA> 0.3492024 0.03164753"},{"path":"https://package.epinowcast.org/dev/reference/enw_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Report date logit hazard reporting model module — enw_report","title":"Report date logit hazard reporting model module — enw_report","text":"Report date logit hazard reporting  model module","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Report date logit hazard reporting model module — enw_report","text":"","code":"enw_report(non_parametric = ~0, structural = NULL, data)"},{"path":"https://package.epinowcast.org/dev/reference/enw_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Report date logit hazard reporting model module — enw_report","text":"non_parametric formula (implemented enw_formula()) describing non-parametric logit hazard model report date effects. can use features defined report date defined metareport produced enw_preprocess_data(). Note intercept model set 0 used specifying report date related hazards rather time-invariant hazards, instead modelled using non_parametric argument enw_reference(). Set ~0 disable (internally converted ~1 flagged inactive). See enw_formula() details formula syntax. structural data.table describing known reporting structure (e.g., weekday-reporting). created using enw_dayofweek_structural_reporting() day--week patterns, enw_structural_reporting_metadata() base custom patterns. data.table must columns: .group, date, report_date, report (binary indicator 1 = reporting occurs). particularly useful modeling fixed reporting cycles, Wednesday-reporting. Set NULL disable (default). data Output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Report date logit hazard reporting model module — enw_report","text":"list containing supplied formulas, data passed list describing models, data.frame describing priors used, function takes output data priors returns function can used sample tightened version prior distribution.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Report date logit hazard reporting model module — enw_report","text":"","code":"# Basic report model enw_report(data = enw_example(\"preprocessed\")) #> $formula #> $formula$non_parametric #> [1] \"~1\" #>  #>  #> $data #> $data$rep_fintercept #> [1] 1 #>  #> $data$rep_fnrow #> [1] 1 #>  #> $data$rep_findex #>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] #> [1,]    1    1    1    1    1    1    1    1    1     1     1     1     1     1 #>      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26] #> [1,]     1     1     1     1     1     1     1     1     1     1     1     1 #>      [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38] #> [1,]     1     1     1     1     1     1     1     1     1     1     1     1 #>      [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50] #> [1,]     1     1     1     1     1     1     1     1     1     1     1     1 #>      [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] #> [1,]     1     1     1     1     1     1     1     1     1 #>  #> $data$rep_fnindex #> [1] 59 #>  #> $data$rep_fncol #> [1] 0 #>  #> $data$rep_rncol #> [1] 0 #>  #> $data$rep_fdesign #> numeric(0) #>  #> $data$rep_rdesign #>      (Intercept) #> attr(,\"assign\") #> [1] 0 #>  #> $data$rep_agg_p #> [1] 0 #>  #> $data$rep_agg_n_selected #> <0 x 0 x 0 array of integer> #>      #>  #>  #> $data$rep_agg_selected_idx #> <0 x 0 x 0 x 0 array of integer> #>      #>  #>  #> $data$rep_t #> [1] 59 #>  #> $data$model_rep #> [1] 0 #>  #>  #> $priors #>       variable                                             description #>         <char>                                                  <char> #> 1: rep_beta_sd Standard deviation of scaled pooled report date effects #>             distribution  mean    sd #>                   <char> <num> <num> #> 1: Zero truncated normal     0     1 #>  #> $inits #> function (data, priors)  #> { #>     priors <- enw_priors_as_data_list(priors) #>     fn <- function() { #>         init <- list(rep_beta = numeric(0), rep_beta_sd = numeric(0)) #>         if (data$rep_fncol > 0) { #>             init$rep_beta <- array(rnorm(data$rep_fncol, 0, 0.01)) #>         } #>         if (data$rep_rncol > 0) { #>             init$rep_beta_sd <- array(abs(rnorm(data$rep_rncol,  #>                 priors$rep_beta_sd_p[1], priors$rep_beta_sd_p[2]/10))) #>         } #>         init #>     } #>     fn #> } #> <bytecode: 0x55d51dc583c8> #> <environment: 0x55d51da2a8a0> #>   if (FALSE) { # \\dontrun{ # With Wednesday-only reporting structure pobs <- enw_example(\"preprocessed\") structural <- enw_dayofweek_structural_reporting(   pobs, day_of_week = \"Wednesday\" ) enw_report(structural = structural, data = pobs) } # }"},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle.html","id":null,"dir":"Reference","previous_headings":"","what":"Construct the reporting triangle — enw_reporting_triangle","title":"Construct the reporting triangle — enw_reporting_triangle","text":"Constructs reporting triangle row representing reference date columns observations report date","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Construct the reporting triangle — enw_reporting_triangle","text":"","code":"enw_reporting_triangle(obs)"},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Construct the reporting triangle — enw_reporting_triangle","text":"obs data.frame produced enw_add_incidence(). Must contain following variables: reference_date, .group, delay.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Construct the reporting triangle — enw_reporting_triangle","text":"data.frame row reference date, columns observations reporting delay.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Construct the reporting triangle — enw_reporting_triangle","text":"","code":"obs <- enw_example(\"preprocessed\")$new_confirm enw_reporting_triangle(obs) #> Key: <.group, reference_date> #>     .group reference_date     0     1     2     3     4     5     6     7     8 #>      <num>         <IDat> <int> <int> <int> <int> <int> <int> <int> <int> <int> #>  1:      1     2021-07-14    22    12     4     5     0     1    10     2     5 #>  2:      1     2021-07-15    28    15     3     3     0     1     3     2     3 #>  3:      1     2021-07-16    19    13     0     0     0     4     2     2     2 #>  4:      1     2021-07-17    20     7     1     3    10     3     0     4     3 #>  5:      1     2021-07-18     9     6     6     0     4     5     4     0     1 #>  6:      1     2021-07-19     3    16     4     4     1     1     2     0     0 #>  7:      1     2021-07-20    36    19    10     4     2     3     0     3     2 #>  8:      1     2021-07-21    28    18     8     4     1     2     3     6     1 #>  9:      1     2021-07-22    34    19     2     1     5     2     4     3     7 #> 10:      1     2021-07-23    30    12     4     1    10     6     0     2     2 #> 11:      1     2021-07-24    31     8     4     9     8     2     5     2     1 #> 12:      1     2021-07-25     8     4    14     8     6     5     1     3     0 #> 13:      1     2021-07-26     9     6     2     3     0     0     0     0     1 #> 14:      1     2021-07-27    35    11     6     4     4     1     0     2     2 #> 15:      1     2021-07-28    51    28    25     3     5     2     3     5     5 #> 16:      1     2021-07-29    47    37     9     2     2     3     4     4     4 #> 17:      1     2021-07-30    36    20     2     4    11     8     8     3     5 #> 18:      1     2021-07-31    38    16     3    15    14     7     5     5     0 #> 19:      1     2021-08-01     7     5     5    11     7     5     1     3     1 #> 20:      1     2021-08-02    13    13     8     6     1     3     2     0     0 #> 21:      1     2021-08-03    51    43     6     4     4     3     1     6     4 #> 22:      1     2021-08-04    51    43    18     5     6     1     2     8     7 #> 23:      1     2021-08-05    45    21     6     2     2    11    17     5     7 #> 24:      1     2021-08-06    47    31     5     4    20     6     1     9     3 #> 25:      1     2021-08-07    40    15     6    23    14    13     8     9     0 #> 26:      1     2021-08-08    13    14    27    14     7     7     0     0     0 #> 27:      1     2021-08-09    14    23    11     3     1     1     0     0     0 #> 28:      1     2021-08-10    78    43    23    11     5     1     0     5     2 #> 29:      1     2021-08-11    80    53    17    15     7     3    14    12    13 #> 30:      1     2021-08-12    89    48    28     8     1    14    13    13    10 #> 31:      1     2021-08-13    86    44     9     3    27    13     7    11     4 #> 32:      1     2021-08-14    79    36     7    16    19    13     8     8     3 #> 33:      1     2021-08-15    22    24    35    18    10     4     7     5     0 #> 34:      1     2021-08-16    23    32    22    10     8     2     1     0     0 #> 35:      1     2021-08-17    96    85    30    18    10     3     0     0     0 #> 36:      1     2021-08-18    92    86    23    18     4     0     0     0     0 #> 37:      1     2021-08-19    84    87    27     4     0     0     0     0     0 #> 38:      1     2021-08-20    98    61    12     0     0     0     0     0     0 #> 39:      1     2021-08-21    69    43     0     0     0     0     0     0     0 #> 40:      1     2021-08-22    45     0     0     0     0     0     0     0     0 #>     .group reference_date     0     1     2     3     4     5     6     7     8 #>      <num>         <IDat> <int> <int> <int> <int> <int> <int> <int> <int> <int> #>         9    10    11    12    13    14    15    16    17    18    19 #>     <int> <int> <int> <int> <int> <int> <int> <int> <int> <int> <int> #>  1:     3     0     1     0     3     1     0     1     0     0     0 #>  2:     2     1     0     2     3     0     3     0     0     0     0 #>  3:     1     1     1     0     1     0     0     1     0     0     0 #>  4:     3     2     0     1     2     0     1     2     1     0     0 #>  5:     4     0     0     1     1     1     2     0     0     0     2 #>  6:     0     0     1     1     1     1     0     0     0     1     0 #>  7:     3     0     2     1     1     2     2     0     0     1     0 #>  8:     5     2     2     3     0     2     0     1     0     0     0 #>  9:     3     1     0     4     3     3     1     2     0     0     1 #> 10:     1     2     1     4     0     2     3     0     0     4     0 #> 11:     1     2     4     1     3     1     0     1     2     2     2 #> 12:     4     1     2     4     2     0     1     2     2     2     0 #> 13:     2     4     1     0     0     0     0     0     0     0     0 #> 14:     2     2     0     0     1     4     1     0     0     0     0 #> 15:     7     1     0     0     4     5     5     1     1     0     0 #> 16:     3     0     2     0    10     4     3     0     0     0     0 #> 17:     2     0     2     4     4     0     2     2     0     0     1 #> 18:     0     5     0     5     1     6     0     0     3     1     0 #> 19:     6     3     3     4     1     1     7     2     3     2     0 #> 20:     2     0     2     0     5     3     0     0     0     0     1 #> 21:     5     5     4     0     4     5     0     2     2     0     0 #> 22:     7     6     1     0     4     3     1     3     0     0     0 #> 23:     4     1     0     5     3     0     2     2     0     0     0 #> 24:     1     0     2     1     5     2     0     0     0     0     0 #> 25:     1     3     3     2     0     1     1     0     0     0     0 #> 26:     7     1     4     2     1     0     0     0     0     0     0 #> 27:     1     0     2     2     0     0     0     0     0     0     0 #> 28:     2     1     4     0     0     0     0     0     0     0     0 #> 29:    13     6     0     0     0     0     0     0     0     0     0 #> 30:    12     1     0     0     0     0     0     0     0     0     0 #> 31:     0     0     0     0     0     0     0     0     0     0     0 #> 32:     0     0     0     0     0     0     0     0     0     0     0 #> 33:     0     0     0     0     0     0     0     0     0     0     0 #> 34:     0     0     0     0     0     0     0     0     0     0     0 #> 35:     0     0     0     0     0     0     0     0     0     0     0 #> 36:     0     0     0     0     0     0     0     0     0     0     0 #> 37:     0     0     0     0     0     0     0     0     0     0     0 #> 38:     0     0     0     0     0     0     0     0     0     0     0 #> 39:     0     0     0     0     0     0     0     0     0     0     0 #> 40:     0     0     0     0     0     0     0     0     0     0     0 #>         9    10    11    12    13    14    15    16    17    18    19 #>     <int> <int> <int> <int> <int> <int> <int> <int> <int> <int> <int>"},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle_to_long.html","id":null,"dir":"Reference","previous_headings":"","what":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"Recast reporting triangle wide long format","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle_to_long.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"","code":"enw_reporting_triangle_to_long(obs)"},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle_to_long.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"obs data.frame format produced enw_reporting_triangle().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle_to_long.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"long format reporting triangle data.frame additional variables new_confirm delay.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_reporting_triangle_to_long.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Recast the reporting triangle from wide to long format — enw_reporting_triangle_to_long","text":"","code":"obs <- enw_example(\"preprocessed\")$new_confirm rt <- enw_reporting_triangle(obs) enw_reporting_triangle_to_long(rt) #> Key: <.group, reference_date, delay> #>      reference_date .group  delay new_confirm #>              <IDat>  <num> <fctr>       <int> #>   1:     2021-07-14      1      0          22 #>   2:     2021-07-14      1      1          12 #>   3:     2021-07-14      1      2           4 #>   4:     2021-07-14      1      3           5 #>   5:     2021-07-14      1      4           0 #>  ---                                          #> 796:     2021-08-22      1     15           0 #> 797:     2021-08-22      1     16           0 #> 798:     2021-08-22      1     17           0 #> 799:     2021-08-22      1     18           0 #> 800:     2021-08-22      1     19           0"},{"path":"https://package.epinowcast.org/dev/reference/enw_reps_with_complete_refs.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","title":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","text":"Identify report dates complete (.e maximum delay) reference dates","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reps_with_complete_refs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","text":"","code":"enw_reps_with_complete_refs(new_confirm, max_delay, by = NULL, copy = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/enw_reps_with_complete_refs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","text":"new_confirm new_confirm data.frame output enw_preprocess_data(). max_delay maximum delay model delay distribution, specified units timestep (e.g., timestep = \"week\", max_delay = 3 means 3 weeks). specified maximum observed delay assumed true maximum delay model. Otherwise, integer greater equal 1 can specified. Observations delays larger maximum delay dropped. specified maximum delay short, nowcasts can biased important parts true delay distribution cut . time, computational cost scales non-linearly setting, want maximum delay long necessary, much longer. Steps take determine maximum delay: Consider realistic relevant application. Check proportion observations reported (prop_reported) delay new_confirm output enw_preprocess_obs. Use check_max_delay() check coverage candidate max_delay. doubt, check increasing maximum delay noticeably changes delay distribution nowcasts estimated epinowcast. , maximum delay may still short. Note delays zero indexed include reference date max_delay - 1 intervals (.e. max_delay 1 corresponds delay). character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling copy logical; TRUE (default) creates copy; otherwise, modifies obs place.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_reps_with_complete_refs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify report dates with complete (i.e up to the maximum delay) reference dates — enw_reps_with_complete_refs","text":"data.frame containing report_date variable, grouping variables specified report dates complete reporting.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_rolling_sum.html","id":null,"dir":"Reference","previous_headings":"","what":"Perform rolling sum aggregation — enw_rolling_sum","title":"Perform rolling sum aggregation — enw_rolling_sum","text":"function takes data.table applies rolling sum given timestep, aggregating specified columns. particularly useful aggregating observations certain periods.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_rolling_sum.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perform rolling sum aggregation — enw_rolling_sum","text":"","code":"enw_rolling_sum(dt, internal_timestep, by = NULL, value_col = \"confirm\")"},{"path":"https://package.epinowcast.org/dev/reference/enw_rolling_sum.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perform rolling sum aggregation — enw_rolling_sum","text":"dt data.table aggregated. internal_timestep integer indicating period aggregate. character vector specifying columns aggregate . value_col character string specifying column aggregate. Defaults \"confirm\".","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_rolling_sum.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perform rolling sum aggregation — enw_rolling_sum","text":"modified data.table aggregated observations.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_sample.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a CmdStan model using NUTS — enw_sample","title":"Fit a CmdStan model using NUTS — enw_sample","text":"Fit CmdStan model using NUTS","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a CmdStan model using NUTS — enw_sample","text":"","code":"enw_sample(   data,   model = epinowcast::enw_model(),   init = NULL,   init_method = c(\"prior\", \"pathfinder\"),   init_method_args = list(),   diagnostics = TRUE,   ... )"},{"path":"https://package.epinowcast.org/dev/reference/enw_sample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a CmdStan model using NUTS — enw_sample","text":"data list data produced model modules (example enw_expectation(), enw_obs(), etc.) required use model used. model cmdstanr model object loaded enw_model() supplied user. init list initial values function generate initial values. provided, model attempt generate initial values init_method method use initializing model. Defaults \"prior\" samples initial values prior. \"pathfinder\", uses pathfinder algorithm (enw_pathfinder()) initialize model. init_method_args list additional arguments pass initialization method. diagnostics Logical, defaults TRUE. fitting diagnostics returned data.frame. ... Additional parameters passed sample method cmdstanr.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_sample.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a CmdStan model using NUTS — enw_sample","text":"data.frame containing cmdstanr fit, input data, fitting arguments, optionally summary diagnostics.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_sample.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit a CmdStan model using NUTS — enw_sample","text":"","code":"if (FALSE) { # interactive() pobs <- enw_example(\"preprocessed\")  nowcast <- epinowcast(pobs,  expectation = enw_expectation(~1, data = pobs),  fit = enw_fit_opts(enw_sample, pp = TRUE),  obs = enw_obs(family = \"poisson\", data = pobs), )  summary(nowcast)  # Use pathfinder initialization nowcast_pathfinder <- epinowcast(pobs,  expectation = enw_expectation(~1, data = pobs),  fit = enw_fit_opts(enw_sample, pp = TRUE, init_method = \"pathfinder\"),  obs = enw_obs(family = \"poisson\", data = pobs), )  summary(nowcast_pathfinder) }"},{"path":"https://package.epinowcast.org/dev/reference/enw_set_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Set caching location for Stan models — enw_set_cache","title":"Set caching location for Stan models — enw_set_cache","text":"function allows user set cache location Stan models rather temporary directory. can reduce need model compilation every new model run across sessions within session. R version 4.0.0 , recommended use persistent cache shown example.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_set_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set caching location for Stan models — enw_set_cache","text":"","code":"enw_set_cache(path, type = c(\"session\", \"persistent\", \"all\"))"},{"path":"https://package.epinowcast.org/dev/reference/enw_set_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set caching location for Stan models — enw_set_cache","text":"path valid filepath representing desired cache location. directory exist created. type character string specifying cache type. can one \"session\", \"persistent\", \"\". Default \"session\". \"session\" sets cache current session, \"persistent\" writes cache location user's .Renviron file,  \"\" .","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_set_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set caching location for Stan models — enw_set_cache","text":"string filepath set.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_set_cache.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set caching location for Stan models — enw_set_cache","text":"","code":"if (FALSE) { # interactive() # Set to local directory my_enw_cache <- enw_set_cache(file.path(tempdir(), \"test\")) enw_get_cache() if (FALSE) { # \\dontrun{ # Use the package cache in R >= 4.0 if (R.version.string >= \"4.0.0\") {  enw_set_cache(    tools::R_user_dir(package = \"epinowcast\", \"cache\"), type = \"all\"  ) }  } # } }"},{"path":"https://package.epinowcast.org/dev/reference/enw_simulate_missing_reference.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"simple binomial simulator missing data reference date using simulated observed data input. function may used validate missing data models, part examples case studies, explore implications missing data use case.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_simulate_missing_reference.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"","code":"enw_simulate_missing_reference(obs, proportion = 0.2, by = NULL)"},{"path":"https://package.epinowcast.org/dev/reference/enw_simulate_missing_reference.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"obs data.frame containing least following variables: reference date (index date interest), report_date (report date observations), confirm (cumulative observations reference report date). proportion Numeric, proportion observations missing reference date, indexed reference date. Currently fixed proportion supported defaults 0.2. character vector describing stratification observations. defaults grouping. used modelling multiple time series order identify downstream modelling","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_simulate_missing_reference.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"data.table format input simulated proportion observations now missing reference date.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_simulate_missing_reference.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Simulate observations with a missing reference date. — enw_simulate_missing_reference","text":"","code":"# Load and filter germany hospitalisations nat_germany_hosp <- subset(   germany_covid19_hosp, location == \"DE\" & age_group == \"00+\" ) nat_germany_hosp <- enw_filter_report_dates(   nat_germany_hosp,   latest_date = \"2021-08-01\" )  # Make sure observations are complete nat_germany_hosp <- enw_complete_dates(   nat_germany_hosp,   by = c(\"location\", \"age_group\"), missing_reference = FALSE )  # Simulate enw_simulate_missing_reference(   nat_germany_hosp,   proportion = 0.35, by = c(\"location\", \"age_group\") ) #> Key: <location, age_group, reference_date, report_date> #>       location age_group report_date reference_date confirm #>         <fctr>    <fctr>      <IDat>         <IDat>   <num> #>    1:       DE       00+  2021-04-06           <NA>      51 #>    2:       DE       00+  2021-04-07           <NA>     151 #>    3:       DE       00+  2021-04-08           <NA>     231 #>    4:       DE       00+  2021-04-09           <NA>     230 #>    5:       DE       00+  2021-04-10           <NA>     226 #>   ---                                                       #> 7135:       DE       00+  2021-07-31     2021-07-30      37 #> 7136:       DE       00+  2021-08-01     2021-07-30      37 #> 7137:       DE       00+  2021-07-31     2021-07-31      19 #> 7138:       DE       00+  2021-08-01     2021-07-31      26 #> 7139:       DE       00+  2021-08-01     2021-08-01       4"},{"path":"https://package.epinowcast.org/dev/reference/enw_stan_to_r.html","id":null,"dir":"Reference","previous_headings":"","what":"Expose epinowcast stan functions in R — enw_stan_to_r","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"function facilitates exposure Stan functions epinowcast package R. utilizes expose_functions method cmdstanr::CmdStanModel purpose. function useful developers contributors epinowcast package, well users interested exploring prototyping model functionalities.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_stan_to_r.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"","code":"enw_stan_to_r(   files = list.files(include),   include = system.file(\"stan\", \"functions\", package = \"epinowcast\"),   global = TRUE,   verbose = TRUE,   ... )"},{"path":"https://package.epinowcast.org/dev/reference/enw_stan_to_r.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"files character vector specifying names Stan files exposed. must include directory. Defaults Stan files include directory. Note following files contain overloaded functions exposed: \"delay_lpmf.stan\", \"allocate_observed_obs.stan\", \"obs_lpmf.stan\", \"effects_priors_lp.stan\". include character string specifying directory containing Stan files. Defaults 'stan/functions' directory epinowcast() package. global logical value indicating whether expose functions globally. Defaults TRUE. Passed expose_functions method CmdStanModel. verbose Logical, defaults TRUE. verbose messages shown. ... Additional arguments passed enw_model.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_stan_to_r.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"object class CmdStanModel functions model exposed use R.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_stan_to_r.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Expose epinowcast stan functions in R — enw_stan_to_r","text":"","code":"if (FALSE) { # interactive() # Compile functions in stan/functions/hazard.stan stan_functions <- enw_stan_to_r(\"hazard.stan\") # These functions can now be used in R stan_functions$functions$prob_to_hazard(c(0.5, 0.1, 0.1)) # or exposed globally and used directly prob_to_hazard(c(0.5, 0.1, 0.1)) }"},{"path":"https://package.epinowcast.org/dev/reference/enw_structural_reporting_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Create structural reporting metadata grid — enw_structural_reporting_metadata","title":"Create structural reporting metadata grid — enw_structural_reporting_metadata","text":"Creates base metadata grid structural reporting patterns generating combinations reference dates, delays, report dates. grid serves foundation defining custom reporting patterns.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_structural_reporting_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create structural reporting metadata grid — enw_structural_reporting_metadata","text":"","code":"enw_structural_reporting_metadata(pobs)"},{"path":"https://package.epinowcast.org/dev/reference/enw_structural_reporting_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create structural reporting metadata grid — enw_structural_reporting_metadata","text":"pobs preprocessed observation list enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_structural_reporting_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create structural reporting metadata grid — enw_structural_reporting_metadata","text":"data.table columns: .group: Group identifier date: Reference date report_date: Report date (reference date + delay)","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_structural_reporting_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create structural reporting metadata grid — enw_structural_reporting_metadata","text":"","code":"if (FALSE) { # \\dontrun{ pobs <- enw_preprocess_data(obs, max_delay = 30) metadata <- enw_structural_reporting_metadata(pobs)  # Add custom reporting pattern (e.g., only report on first day of month) metadata[, report := as.integer(format(report_date, \"%d\") == \"01\")] } # }"},{"path":"https://package.epinowcast.org/dev/reference/enw_summarise_samples.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise posterior samples — enw_summarise_samples","title":"Summarise posterior samples — enw_summarise_samples","text":"function summarises posterior samples arbitrary strata. optionally holds observed data (variables \".draw\", \".iteration\", \".sample\", \".chain\" ) joins summarised posterior.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_summarise_samples.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise posterior samples — enw_summarise_samples","text":"","code":"enw_summarise_samples(   samples,   probs = c(0.05, 0.2, 0.35, 0.5, 0.65, 0.8, 0.95),   by = c(\"reference_date\", \".group\"),   link_with_obs = TRUE )"},{"path":"https://package.epinowcast.org/dev/reference/enw_summarise_samples.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise posterior samples — enw_summarise_samples","text":"samples data.frame posterior samples least numeric sample variable. probs vector numeric probabilities produce quantile summaries . default 5%, 20%, 80%, 95% quantiles also minimum set required plotting functions work. character vector variables summarise . Defaults c(\"reference_date\", \".group\"). link_with_obs Logical, observed data linked posterior summary? useful plotting posterior observed data. Defaults TRUE.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_summarise_samples.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise posterior samples — enw_summarise_samples","text":"data.frame summarising posterior samples.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_summarise_samples.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summarise posterior samples — enw_summarise_samples","text":"","code":"fit <- enw_example(\"nowcast\") samples <- summary(fit, type = \"nowcast_sample\") enw_summarise_samples(samples, probs = c(0.05, 0.5, 0.95)) #> Key: <reference_date, .group> #>     reference_date .group report_date max_confirm location age_group confirm #>             <IDat>  <num>      <IDat>       <int>   <fctr>    <fctr>   <int> #>  1:     2021-08-03      1  2021-08-22         149       DE       00+     149 #>  2:     2021-08-04      1  2021-08-22         166       DE       00+     166 #>  3:     2021-08-05      1  2021-08-22         133       DE       00+     133 #>  4:     2021-08-06      1  2021-08-22         137       DE       00+     137 #>  5:     2021-08-07      1  2021-08-22         139       DE       00+     139 #>  6:     2021-08-08      1  2021-08-22          97       DE       00+      97 #>  7:     2021-08-09      1  2021-08-22          58       DE       00+      58 #>  8:     2021-08-10      1  2021-08-22         175       DE       00+     175 #>  9:     2021-08-11      1  2021-08-22         233       DE       00+     233 #> 10:     2021-08-12      1  2021-08-22         237       DE       00+     237 #> 11:     2021-08-13      1  2021-08-22         204       DE       00+     204 #> 12:     2021-08-14      1  2021-08-22         189       DE       00+     189 #> 13:     2021-08-15      1  2021-08-22         125       DE       00+     125 #> 14:     2021-08-16      1  2021-08-22          98       DE       00+      98 #> 15:     2021-08-17      1  2021-08-22         242       DE       00+     242 #> 16:     2021-08-18      1  2021-08-22         223       DE       00+     223 #> 17:     2021-08-19      1  2021-08-22         202       DE       00+     202 #> 18:     2021-08-20      1  2021-08-22         171       DE       00+     171 #> 19:     2021-08-21      1  2021-08-22         112       DE       00+     112 #> 20:     2021-08-22      1  2021-08-22          45       DE       00+      45 #>     reference_date .group report_date max_confirm location age_group confirm #>             <IDat>  <num>      <IDat>       <int>   <fctr>    <fctr>   <int> #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>                 <num> <num>         <num>   <num>  <num>      <num>   <num> #>  1:                 1    19   0.000000000 149.000  149.0   0.000000  0.0000 #>  2:                 1    18   0.000000000 167.480  167.0   1.403414  1.4826 #>  3:                 1    17   0.000000000 135.797  136.0   1.858291  1.4826 #>  4:                 1    16   0.000000000 141.272  141.0   2.414507  2.9652 #>  5:                 1    15   0.007194245 145.764  145.0   3.070461  2.9652 #>  6:                 1    14   0.000000000 103.614  103.0   2.892987  2.9652 #>  7:                 1    13   0.000000000  62.838   63.0   2.595475  2.9652 #>  8:                 1    12   0.000000000 185.149  185.0   3.655155  2.9652 #>  9:                 1    11   0.000000000 256.191  256.0   7.084540  7.4130 #> 10:                 1    10   0.004219409 267.189  266.0   8.269563  7.4130 #> 11:                 1     9   0.000000000 236.218  235.0   8.635453  8.8956 #> 12:                 1     8   0.015873016 230.463  230.0  10.395995 10.3782 #> 13:                 1     7   0.040000000 165.184  165.0   9.660925  8.8956 #> 14:                 1     6   0.010204082 129.535  129.0   8.499354  8.8956 #> 15:                 1     5   0.012396694 293.236  292.0  11.922603 11.8608 #> 16:                 1     4   0.017937220 293.392  292.0  15.981231 14.8260 #> 17:                 1     3   0.019801980 291.537  290.0  20.271200 20.7564 #> 18:                 1     2   0.070175439 295.258  292.5  29.356997 27.4281 #> 19:                 1     1   0.383928571 310.440  304.0  50.020660 47.4432 #> 20:                 1     0   1.000000000 384.142  368.0 115.713601 97.8516 #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>                 <num> <num>         <num>   <num>  <num>      <num>   <num> #>         q5   q50    q95 #>      <num> <num>  <num> #>  1: 149.00 149.0 149.00 #>  2: 166.00 167.0 170.00 #>  3: 133.00 136.0 139.00 #>  4: 138.00 141.0 146.00 #>  5: 141.00 145.0 151.00 #>  6:  99.00 103.0 109.00 #>  7:  59.00  63.0  68.00 #>  8: 180.00 185.0 192.00 #>  9: 246.00 256.0 269.00 #> 10: 255.00 266.0 282.00 #> 11: 224.00 235.0 252.00 #> 12: 215.00 230.0 249.00 #> 13: 150.00 165.0 182.00 #> 14: 117.00 129.0 144.00 #> 15: 276.00 292.0 315.00 #> 16: 269.00 292.0 321.00 #> 17: 262.00 290.0 327.05 #> 18: 252.00 292.5 350.00 #> 19: 238.95 304.0 396.10 #> 20: 235.00 368.0 602.00 #>         q5   q50    q95 #>      <num> <num>  <num>"},{"path":"https://package.epinowcast.org/dev/reference/enw_unset_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Unset Stan cache location — enw_unset_cache","title":"Unset Stan cache location — enw_unset_cache","text":"Optionally removes enw_cache_location environment variable user .Renviron file /removes local environment. unset local cache want switch back using persistent cache, can reload .Renviron file using readRenviron(\"~/.Renviron\").","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_unset_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Unset Stan cache location — enw_unset_cache","text":"","code":"enw_unset_cache(type = c(\"session\", \"persistent\", \"all\"))"},{"path":"https://package.epinowcast.org/dev/reference/enw_unset_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Unset Stan cache location — enw_unset_cache","text":"type character string specifying type cache unset. can one \"session\", \"persistent\", \"\". Default \"session\". \"session\" unsets cache current session, \"persistent\" removes cache location user's .Renviron file,\"\" options.","code":""},{"path":"https://package.epinowcast.org/dev/reference/enw_unset_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Unset Stan cache location — enw_unset_cache","text":"prior cache location, existed otherwise NULL.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/enw_unset_cache.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Unset Stan cache location — enw_unset_cache","text":"","code":"if (FALSE) { # interactive() enw_unset_cache() }"},{"path":"https://package.epinowcast.org/dev/reference/epinowcast-package.html","id":null,"dir":"Reference","previous_headings":"","what":"epinowcast: A Bayesian Framework for Real-time Infectious Disease Surveillance — epinowcast-package","title":"epinowcast: A Bayesian Framework for Real-time Infectious Disease Surveillance — epinowcast-package","text":"modular Bayesian framework real-time infectious disease surveillance. Provides tools nowcasting, reproduction number estimation, delay estimation, forecasting data subject reporting delays, right-truncation, missing data, incomplete ascertainment. Users can build models suited setting using flexible formula interface supporting fixed effects, random effects, random walks, time-varying parameters, options including parametric non-parametric delay distributions optional modifiers (via discrete-time hazard models), renewal processes, observation models, missing data imputation, stratified analyses partial pooling. jointly estimating disease dynamics reporting patterns, framework enables earlier reliable detection trends. designed epidemiological applications mind, framework can applied right-truncated time series count data.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/epinowcast-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"epinowcast: A Bayesian Framework for Real-time Infectious Disease Surveillance — epinowcast-package","text":"Maintainer: Sam Abbott contact@samabbott.co.uk (ORCID) Authors: Adrian Lison adrian.lison@bsse.ethz.ch (ORCID) Sebastian Funk sebastian.funk@lshtm.ac.uk Carl Pearson carl.ab.pearson@gmail.com (ORCID) Hugo Gruson hugo.gruson@normalesup.org (ORCID) Felix Guenther felixguenther1@gmx.de (ORCID) Michael DeWitt .dewitt.jr@gmail.com (ORCID) James Mba Azam james.azam@lshtm.ac.uk (ORCID) Jessalyn Sebastian jessalynsebastian@gmail.com (ORCID) contributors: Hannah Choi hannah.choi1@lshtm.ac.uk [contributor] Pratik Gupte pratik.gupte@lshtm.ac.uk (ORCID) [contributor] Joel Hellewell joel@ebi.ac.uk (ORCID) [contributor] Luis Rivas luisnicolasrivas@gmail.com [contributor] Sang Woo Park swp2@princeton.edu (ORCID) [contributor] Nathan McIntosh natemcintosh@gmail.com [contributor] Kath Sherratt katharine.sherratt@lshtm.ac.uk (ORCID) [contributor] Nikos Bosse nikos.bosse@lshtm.ac.uk (ORCID) [contributor] Adam Howes adamthowes@gmail.com (ORCID) [contributor] Kaitlyn Johnson johnsonkaitlyne9@gmail.com (ORCID) [contributor] Barbora Nemcova barbora.nemcova@kit.edu (ORCID) [contributor]","code":""},{"path":"https://package.epinowcast.org/dev/reference/epinowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Nowcast using partially observed data — epinowcast","title":"Nowcast using partially observed data — epinowcast","text":"Provides user friendly interface around package functionality produce nowcast observed preprocessed data, series user defined models. default model assumes fixed parametric reporting distribution flexible expectation model used. Explore individual model components additional documentation see package case studies example model specifications different tasks.","code":""},{"path":"https://package.epinowcast.org/dev/reference/epinowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Nowcast using partially observed data — epinowcast","text":"","code":"epinowcast(   data,   reference = epinowcast::enw_reference(parametric = ~1, distribution = \"lognormal\",     non_parametric = ~0, data = data),   report = epinowcast::enw_report(non_parametric = ~0, structural = NULL, data = data),   expectation = epinowcast::enw_expectation(r = ~0 + (1 | day:.group), generation_time =     1, observation = ~1, latent_reporting_delay = 1, data = data),   missing = epinowcast::enw_missing(formula = ~0, data = data),   obs = epinowcast::enw_obs(family = \"negbin\", data = data),   fit = epinowcast::enw_fit_opts(sampler = epinowcast::enw_sample, nowcast = TRUE, pp =     FALSE, likelihood = TRUE, debug = FALSE, output_loglik = FALSE),   model = epinowcast::enw_model(),   priors,   ... )"},{"path":"https://package.epinowcast.org/dev/reference/epinowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Nowcast using partially observed data — epinowcast","text":"data Output enw_preprocess_data(). reference reference date indexed reporting process model specification defined using enw_reference(). report report date indexed reporting process model specification defined using enw_report(). expectation expectation model specification defined using enw_expectation(). default set highly flexible random effect reference date group thus weakly informed. Depending context (particular density data reporting) choices enforce assumptions may appropriate (example weekly random walk (specified using rw(week, = .group))). missing missing reference date model specification defined using enw_missing(). default set used. obs observation model defined enw_obs(). Observations also processed within function use modelling. fit Model fit options defined using enw_fit_opts(). includes sampler function use (package default enw_sample()), whether now nowcast used, etc. See enw_fit_opts() details. model model use within fit. default uses enw_model(). priors data.frame following variables: variable, mean, sd describing normal priors. Priors appropriate format returned enw_reference() well similar model specification functions. Priors data.frame replace default priors specified model component. ... Additional model modules pass model. User modules may used currently require supplied model adapted.","code":""},{"path":"https://package.epinowcast.org/dev/reference/epinowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Nowcast using partially observed data — epinowcast","text":"object class \"epinowcast\" inherits enw_preprocess_data() data.table, combines input data, priors, output sampler specified enw_fit_opts().","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/epinowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Nowcast using partially observed data — epinowcast","text":"","code":"if (FALSE) { # interactive() # Load data.table and ggplot2 library(data.table) library(ggplot2)  # Use 2 cores options(mc.cores = 2) # Load and filter germany hospitalisations nat_germany_hosp <-   germany_covid19_hosp[location == \"DE\"][age_group == \"00+\"] nat_germany_hosp <- enw_filter_report_dates(   nat_germany_hosp,   latest_date = \"2021-10-01\" ) # Make sure observations are complete nat_germany_hosp <- enw_complete_dates(   nat_germany_hosp,   by = c(\"location\", \"age_group\") ) # Make a retrospective dataset retro_nat_germany <- enw_filter_report_dates(   nat_germany_hosp,   remove_days = 40 ) retro_nat_germany <- enw_filter_reference_dates(   retro_nat_germany,   include_days = 40 ) # Get latest observations for the same time period latest_obs <- enw_latest_data(nat_germany_hosp) latest_obs <- enw_filter_reference_dates(   latest_obs,   remove_days = 40, include_days = 20 ) # Preprocess observations (note this maximum delay is likely too short) pobs <- enw_preprocess_data(retro_nat_germany, max_delay = 20) # Fit the default nowcast model and produce a nowcast # Note that we have reduced samples for this example to reduce runtimes nowcast <- epinowcast(pobs,   fit = enw_fit_opts(     save_warmup = FALSE, pp = TRUE,     chains = 2, iter_warmup = 500, iter_sampling = 500   ) ) nowcast # plot the nowcast vs latest available observations plot(nowcast, latest_obs = latest_obs)  # plot posterior predictions for the delay distribution by date plot(nowcast, type = \"posterior\") +   facet_wrap(vars(reference_date), scale = \"free\") }"},{"path":"https://package.epinowcast.org/dev/reference/extract_obs_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract observation metadata — extract_obs_metadata","title":"Extract observation metadata — extract_obs_metadata","text":"function extracts metadata provided dataset used observation model.","code":""},{"path":"https://package.epinowcast.org/dev/reference/extract_obs_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract observation metadata — extract_obs_metadata","text":"","code":"extract_obs_metadata(new_confirm, observation_indicator = NULL)"},{"path":"https://package.epinowcast.org/dev/reference/extract_obs_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract observation metadata — extract_obs_metadata","text":"new_confirm data.table containing columns: \"reference_date\", \"delay\", \".group\", \"new_confirm\", \"max_obs_delay\". produced enw_preprocess_data() new_confirm output addition \"max_obs_delay\" column produced add_max_observed_delay(). observation_indicator character string specifying column name new_confirm indicates whether observation observed . column logical vector. NULL (default), observations considered observed.","code":""},{"path":"https://package.epinowcast.org/dev/reference/extract_obs_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract observation metadata — extract_obs_metadata","text":"list containing: st: time index snapshot (snapshot time). ts: snapshot index time group. sl: number reported observations per snapshot (snapshot length). csl: cumulative version sl. lsl: number consecutive reported observations per snapshot accounting missing data. clsl: cumulative version lsl. nsl: number observed observations per snapshot (snapshot length). cnsl: cumulative version nsl. sg: group index snapshot (snapshot group).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/extract_sparse_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract sparse matrix elements — extract_sparse_matrix","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"helper function allows extraction sparse matrix matrix using similar approach implemented rstan::extract_sparse_parts() returns elements named list use stan. function used construction expectation model (see enw_expectation()).","code":""},{"path":"https://package.epinowcast.org/dev/reference/extract_sparse_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"","code":"extract_sparse_matrix(mat, prefix = \"\")"},{"path":"https://package.epinowcast.org/dev/reference/extract_sparse_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"mat matrix extract sparse matrix . prefix character string prefix names returned list.","code":""},{"path":"https://package.epinowcast.org/dev/reference/extract_sparse_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"list representing sparse matrix, containing: nw: Count non-zero elements mat. w: Vector non-zero elements mat. Equivalent numeric values mat excluding zeros. nv: Length v. v: Vector row indices corresponding non-zero element w. Indicates row location mat non-zero value. nu: Length u. u: Vector indicating starting indices w non-zero elements row mat. Helps identify partition w different rows mat.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/extract_sparse_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract sparse matrix elements — extract_sparse_matrix","text":"","code":"mat <- matrix(1:12, nrow = 4) mat[2, 2] <- 0 mat[3, 1] <- 0 extract_sparse_matrix(mat) #> Warning: `extract_sparse_matrix()` was deprecated in epinowcast 0.5.0. #> $nw #> [1] 10 #>  #> $w #>  [1]  1  5  9  2 10  7 11  4  8 12 #>  #> $nv #> [1] 10 #>  #> $v #>  [1] 1 2 3 1 3 2 3 1 2 3 #>  #> $nu #> [1] 5 #>  #> $u #> [1]  1  4  6  8 11 #>"},{"path":"https://package.epinowcast.org/dev/reference/germany_covid19_hosp.html","id":null,"dir":"Reference","previous_headings":"","what":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","title":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","text":"Hospitalisations Germany date report reference","code":""},{"path":"https://package.epinowcast.org/dev/reference/germany_covid19_hosp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","text":"","code":"germany_covid19_hosp"},{"path":"https://package.epinowcast.org/dev/reference/germany_covid19_hosp.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","text":"object class data.table (inherits data.frame) 1536885 rows 5 columns.","code":""},{"path":"https://package.epinowcast.org/dev/reference/germany_covid19_hosp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Hospitalisations in Germany by date of report and reference — germany_covid19_hosp","text":"data.table","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/get_internal_timestep.html","id":null,"dir":"Reference","previous_headings":"","what":"Get internal timestep — get_internal_timestep","title":"Get internal timestep — get_internal_timestep","text":"function converts string representation timestep corresponding numeric value returns numeric input (whole number). \"day\", \"week\", returns 1 7 respectively. \"month\" supported throw error. input numeric whole number, returned .","code":""},{"path":"https://package.epinowcast.org/dev/reference/get_internal_timestep.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get internal timestep — get_internal_timestep","text":"","code":"get_internal_timestep(timestep)"},{"path":"https://package.epinowcast.org/dev/reference/get_internal_timestep.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get internal timestep — get_internal_timestep","text":"timestep timestep used. can string (\"day\", \"week\") numeric whole number representing number days. Note \"month\" currently supported user-facing functions throw error used.","code":""},{"path":"https://package.epinowcast.org/dev/reference/get_internal_timestep.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get internal timestep — get_internal_timestep","text":"numeric value representing number days \"day\" \"week\", input value numeric whole number.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/get_renviron_contents.html","id":null,"dir":"Reference","previous_headings":"","what":"Identify cache location in .Renviron — get_renviron_contents","title":"Identify cache location in .Renviron — get_renviron_contents","text":"function retrieves environment variable settings manages .Renviron file user's project home directory. project directory examined first, exists.","code":""},{"path":"https://package.epinowcast.org/dev/reference/get_renviron_contents.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Identify cache location in .Renviron — get_renviron_contents","text":"","code":"get_renviron_contents()"},{"path":"https://package.epinowcast.org/dev/reference/get_renviron_contents.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Identify cache location in .Renviron — get_renviron_contents","text":"list containing contents .Renviron file path.","code":""},{"path":"https://package.epinowcast.org/dev/reference/is.Date.html","id":null,"dir":"Reference","previous_headings":"","what":"Check an object is a Date — is.Date","title":"Check an object is a Date — is.Date","text":"Checks object date","code":""},{"path":"https://package.epinowcast.org/dev/reference/is.Date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check an object is a Date — is.Date","text":"","code":"is.Date(x)"},{"path":"https://package.epinowcast.org/dev/reference/is.Date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check an object is a Date — is.Date","text":"x object","code":""},{"path":"https://package.epinowcast.org/dev/reference/is.Date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check an object is a Date — is.Date","text":"logical","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/latest_obs_as_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert latest observed data to a matrix — latest_obs_as_matrix","title":"Convert latest observed data to a matrix — latest_obs_as_matrix","text":"Convert latest observed data matrix","code":""},{"path":"https://package.epinowcast.org/dev/reference/latest_obs_as_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert latest observed data to a matrix — latest_obs_as_matrix","text":"","code":"latest_obs_as_matrix(latest)"},{"path":"https://package.epinowcast.org/dev/reference/latest_obs_as_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert latest observed data to a matrix — latest_obs_as_matrix","text":"latest latest data.frame output enw_preprocess_data().","code":""},{"path":"https://package.epinowcast.org/dev/reference/latest_obs_as_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert latest observed data to a matrix — latest_obs_as_matrix","text":"matrix column group row reference date","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/parse_formula.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse a formula into components — parse_formula","title":"Parse a formula into components — parse_formula","text":"function uses series internal functions break input formula component parts can handled separately. Currently supported components fixed effects, lme4 style random effects, random walks using rw() helper function.","code":""},{"path":"https://package.epinowcast.org/dev/reference/parse_formula.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse a formula into components — parse_formula","text":"","code":"parse_formula(formula)"},{"path":"https://package.epinowcast.org/dev/reference/parse_formula.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse a formula into components — parse_formula","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function. See Details section comprehensive explanation supported syntax.","code":""},{"path":"https://package.epinowcast.org/dev/reference/parse_formula.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse a formula into components — parse_formula","text":"list formula components. currently include: fixed: character vector fixed effect terms random: list lme4 style random effects rw: character vector rw() random walk terms.","code":""},{"path":"https://package.epinowcast.org/dev/reference/parse_formula.html","id":"reference","dir":"Reference","previous_headings":"","what":"Reference","title":"Parse a formula into components — parse_formula","text":"random walk functions used internally function adapted code written J Scott (MIT license) part epidemia package (https://github.com/ImperialCollegeLondon/epidemia/).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/parse_formula.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parse a formula into components — parse_formula","text":"","code":"epinowcast:::parse_formula(~ 1 + age_group + location) #> $fixed #> [1] \"1\"         \"age_group\" \"location\"  #>  #> $random #> NULL #>  #> $rw #> character(0) #>   epinowcast:::parse_formula(~ 1 + age_group + (1 | location)) #> $fixed #> [1] \"1\"         \"age_group\" #>  #> $random #> $random[[1]] #> 1 | location #>  #>  #> $rw #> character(0) #>   epinowcast:::parse_formula(~ 1 + (age_group | location)) #> $fixed #> [1] \"1\" #>  #> $random #> $random[[1]] #> age_group | location #>  #>  #> $rw #> character(0) #>   epinowcast:::parse_formula(~ 1 + (1 | location) + rw(week, location)) #> $fixed #> [1] \"1\" #>  #> $random #> $random[[1]] #> 1 | location #>  #>  #> $rw #> [1] \"rw(week, location)\" #>"},{"path":"https://package.epinowcast.org/dev/reference/plot.epinowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot method for epinowcast — plot.epinowcast","title":"Plot method for epinowcast — plot.epinowcast","text":"plot method class \"epinowcast\".","code":""},{"path":"https://package.epinowcast.org/dev/reference/plot.epinowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot method for epinowcast — plot.epinowcast","text":"","code":"# S3 method for class 'epinowcast' plot(   x,   latest_obs = NULL,   type = c(\"nowcast\", \"posterior_prediction\"),   log = FALSE,   ... )"},{"path":"https://package.epinowcast.org/dev/reference/plot.epinowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot method for epinowcast — plot.epinowcast","text":"x data.table output produced epinowcast(). latest_obs data.frame observed data may passed lower level methods. type Character string indicating plot required; enforced base::match.arg(). Currently supported options: \"nowcast\" plots nowcast dataset along latest available observed data using enw_plot_nowcast_quantiles(), \"posterior_prediction\" plots observations reported time simulated observations model using enw_plot_pp_quantiles(). log Logical, defaults FALSE. counts plot log scale. ... Additional arguments plot function specified type.","code":""},{"path":"https://package.epinowcast.org/dev/reference/plot.epinowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot method for epinowcast — plot.epinowcast","text":"ggplot2 object","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/plot.epinowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot method for epinowcast — plot.epinowcast","text":"","code":"nowcast <- enw_example(\"nowcast\") latest_obs <- enw_example(\"obs\")  # Plot nowcast plot(nowcast, latest_obs = latest_obs, type = \"nowcast\")   # Plot posterior predictions by reference date plot(nowcast, type = \"posterior_prediction\") +  ggplot2::facet_wrap(ggplot2::vars(reference_date), scales = \"free\") #> `geom_line()`: Each group consists of only one observation. #> ℹ Do you need to adjust the group aesthetic? #> `geom_line()`: Each group consists of only one observation. #> ℹ Do you need to adjust the group aesthetic?"},{"path":"https://package.epinowcast.org/dev/reference/re.html","id":null,"dir":"Reference","previous_headings":"","what":"Defines random effect terms using the lme4 syntax — re","title":"Defines random effect terms using the lme4 syntax — re","text":"Defines random effect terms using lme4 syntax","code":""},{"path":"https://package.epinowcast.org/dev/reference/re.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Defines random effect terms using the lme4 syntax — re","text":"","code":"re(formula)"},{"path":"https://package.epinowcast.org/dev/reference/re.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Defines random effect terms using the lme4 syntax — re","text":"formula random effect returned findbars random effect defined using lme4 syntax formula. Currently simplified random effects (.e LHS | RHS) supported.","code":""},{"path":"https://package.epinowcast.org/dev/reference/re.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Defines random effect terms using the lme4 syntax — re","text":"list defining fixed random effects specified random effect","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/re.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Defines random effect terms using the lme4 syntax — re","text":"","code":"form <- epinowcast:::parse_formula(~ 1 + (1 | age_group)) re(form$random[[1]]) #> $fixed #> [1] \"1\" #>  #> $random #> [1] \"age_group\" #>  #> attr(,\"class\") #> [1] \"enw_re_term\"  form <- epinowcast:::parse_formula(~ 1 + (location | age_group)) re(form$random[[1]]) #> $fixed #> [1] \"location\" #>  #> $random #> [1] \"age_group\" #>  #> attr(,\"class\") #> [1] \"enw_re_term\""},{"path":"https://package.epinowcast.org/dev/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. scoringutils as_forecast_sample","code":""},{"path":"https://package.epinowcast.org/dev/reference/remove_profiling.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove profiling statements from a character vector representing stan code — remove_profiling","title":"Remove profiling statements from a character vector representing stan code — remove_profiling","text":"Remove profiling statements character vector representing stan code","code":""},{"path":"https://package.epinowcast.org/dev/reference/remove_profiling.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove profiling statements from a character vector representing stan code — remove_profiling","text":"","code":"remove_profiling(s)"},{"path":"https://package.epinowcast.org/dev/reference/remove_profiling.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove profiling statements from a character vector representing stan code — remove_profiling","text":"s Character vector representing stan code","code":""},{"path":"https://package.epinowcast.org/dev/reference/remove_profiling.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove profiling statements from a character vector representing stan code — remove_profiling","text":"character vector stan code without profiling statements","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/remove_rw_terms.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove random walk terms from a formula object — remove_rw_terms","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"function removes random walk terms denoted using rw() formula can processed .","code":""},{"path":"https://package.epinowcast.org/dev/reference/remove_rw_terms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"","code":"remove_rw_terms(formula)"},{"path":"https://package.epinowcast.org/dev/reference/remove_rw_terms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function. See Details section comprehensive explanation supported syntax.","code":""},{"path":"https://package.epinowcast.org/dev/reference/remove_rw_terms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"formula object random walk terms removed.","code":""},{"path":"https://package.epinowcast.org/dev/reference/remove_rw_terms.html","id":"reference","dir":"Reference","previous_headings":"","what":"Reference","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"function adapted code written J Scott (MIT license) part epidemia package (https://github.com/ImperialCollegeLondon/epidemia/).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/remove_rw_terms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Remove random walk terms from a formula object — remove_rw_terms","text":"","code":"epinowcast:::remove_rw_terms(~ 1 + age_group + location) #> ~1 + age_group + location #> <environment: 0x55d522ba6a78>  epinowcast:::remove_rw_terms(~ 1 + age_group + location + rw(week, location)) #> ~1 + age_group + location #> <environment: 0x55d522b00a20>"},{"path":"https://package.epinowcast.org/dev/reference/rw.html","id":null,"dir":"Reference","previous_headings":"","what":"Adds random walks with Gaussian steps to the model. — rw","title":"Adds random walks with Gaussian steps to the model. — rw","text":"call rw() can used 'formula' argument model construction functions epinowcast package enw_formula(). evaluate arguments instead simply passes information use model construction.","code":""},{"path":"https://package.epinowcast.org/dev/reference/rw.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adds random walks with Gaussian steps to the model. — rw","text":"","code":"rw(time, by, type = c(\"independent\", \"dependent\"))"},{"path":"https://package.epinowcast.org/dev/reference/rw.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adds random walks with Gaussian steps to the model. — rw","text":"time Defines random walk time period. Defines grouping parameter used random walk. specified grouping used. Currently limited single variable. type Character string, standard deviation grouped random walks estimated: \"independent\", \"dependent\" across groups; enforced base::match.arg().","code":""},{"path":"https://package.epinowcast.org/dev/reference/rw.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adds random walks with Gaussian steps to the model. — rw","text":"list defining time frame, group, type class \"enw_rw_term\" can interpreted construct_rw().","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/rw.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Adds random walks with Gaussian steps to the model. — rw","text":"","code":"rw(time) #> $time #> [1] \"time\" #>  #> $by #> NULL #>  #> $type #> [1] \"independent\" #>  #> attr(,\"class\") #> [1] \"enw_rw_term\"  rw(time, location) #> $time #> [1] \"time\" #>  #> $by #> [1] \"location\" #>  #> $type #> [1] \"independent\" #>  #> attr(,\"class\") #> [1] \"enw_rw_term\"  rw(time, location, type = \"dependent\") #> $time #> [1] \"time\" #>  #> $by #> [1] \"location\" #>  #> $type #> [1] \"dependent\" #>  #> attr(,\"class\") #> [1] \"enw_rw_term\""},{"path":"https://package.epinowcast.org/dev/reference/rw_terms.html","id":null,"dir":"Reference","previous_headings":"","what":"Finds random walk terms in a formula object — rw_terms","title":"Finds random walk terms in a formula object — rw_terms","text":"function extracts random walk terms denoted using rw() formula can processed .","code":""},{"path":"https://package.epinowcast.org/dev/reference/rw_terms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finds random walk terms in a formula object — rw_terms","text":"","code":"rw_terms(formula)"},{"path":"https://package.epinowcast.org/dev/reference/rw_terms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finds random walk terms in a formula object — rw_terms","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function. See Details section comprehensive explanation supported syntax.","code":""},{"path":"https://package.epinowcast.org/dev/reference/rw_terms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Finds random walk terms in a formula object — rw_terms","text":"character vector containing random walk terms identified supplied formula.","code":""},{"path":"https://package.epinowcast.org/dev/reference/rw_terms.html","id":"reference","dir":"Reference","previous_headings":"","what":"Reference","title":"Finds random walk terms in a formula object — rw_terms","text":"function adapted code written J Scott (MIT license) part epidemia package (https://github.com/ImperialCollegeLondon/epidemia/).","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/rw_terms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Finds random walk terms in a formula object — rw_terms","text":"","code":"epinowcast:::rw_terms(~ 1 + age_group + location) #> character(0)  epinowcast:::rw_terms(~ 1 + age_group + location + rw(week, location)) #> [1] \"rw(week, location)\""},{"path":"https://package.epinowcast.org/dev/reference/split_formula_to_terms.html","id":null,"dir":"Reference","previous_headings":"","what":"Split formula into individual terms — split_formula_to_terms","title":"Split formula into individual terms — split_formula_to_terms","text":"Split formula individual terms","code":""},{"path":"https://package.epinowcast.org/dev/reference/split_formula_to_terms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Split formula into individual terms — split_formula_to_terms","text":"","code":"split_formula_to_terms(formula)"},{"path":"https://package.epinowcast.org/dev/reference/split_formula_to_terms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Split formula into individual terms — split_formula_to_terms","text":"formula model formula may use standard fixed effects, random effects using lme4 syntax (see re()), random walks defined using rw() helper function. See Details section comprehensive explanation supported syntax.","code":""},{"path":"https://package.epinowcast.org/dev/reference/split_formula_to_terms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Split formula into individual terms — split_formula_to_terms","text":"character vector formula terms","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/split_formula_to_terms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Split formula into individual terms — split_formula_to_terms","text":"","code":"epinowcast:::split_formula_to_terms(~ 1 + age_group + location) #> [1] \"1\"         \"age_group\" \"location\""},{"path":"https://package.epinowcast.org/dev/reference/stan_fns_as_string.html","id":null,"dir":"Reference","previous_headings":"","what":"Read in a stan function file as a character string — stan_fns_as_string","title":"Read in a stan function file as a character string — stan_fns_as_string","text":"Read stan function file character string","code":""},{"path":"https://package.epinowcast.org/dev/reference/stan_fns_as_string.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read in a stan function file as a character string — stan_fns_as_string","text":"","code":"stan_fns_as_string(files, include)"},{"path":"https://package.epinowcast.org/dev/reference/stan_fns_as_string.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read in a stan function file as a character string — stan_fns_as_string","text":"files character vector specifying names Stan files exposed. must include directory. Defaults Stan files include directory. Note following files contain overloaded functions exposed: \"delay_lpmf.stan\", \"allocate_observed_obs.stan\", \"obs_lpmf.stan\", \"effects_priors_lp.stan\". include character string specifying directory containing Stan files. Defaults 'stan/functions' directory epinowcast() package.","code":""},{"path":"https://package.epinowcast.org/dev/reference/stan_fns_as_string.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read in a stan function file as a character string — stan_fns_as_string","text":"character string stan functions.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/subset_obs.html","id":null,"dir":"Reference","previous_headings":"","what":"Subset observations data table for either modelled dates or not-modelled earlier dates. — subset_obs","title":"Subset observations data table for either modelled dates or not-modelled earlier dates. — subset_obs","text":"Subset observations data table either modelled dates -modelled earlier dates.","code":""},{"path":"https://package.epinowcast.org/dev/reference/subset_obs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subset observations data table for either modelled dates or not-modelled earlier dates. — subset_obs","text":"","code":"subset_obs(ord_obs, max_delay, internal_timestep, reference_subset)"},{"path":"https://package.epinowcast.org/dev/reference/subset_obs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subset observations data table for either modelled dates or not-modelled earlier dates. — subset_obs","text":"ord_obs observations data.table subset, pulled result calling epinowcast() coerced data table. max_delay Whole number representing maximum delay units timestep. internal_timestep numeric value representing number days timestep, e.g. 7 timesteps weeks. reference_subset String giving relational operator subset ord_obs reference date; e.g. > keep modelled reference dates max_delay.","code":""},{"path":"https://package.epinowcast.org/dev/reference/subset_obs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subset observations data table for either modelled dates or not-modelled earlier dates. — subset_obs","text":"data.frame subset desired observations","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/summary.epinowcast.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary method for epinowcast — summary.epinowcast","title":"Summary method for epinowcast — summary.epinowcast","text":"summary method class \"epinowcast\".","code":""},{"path":"https://package.epinowcast.org/dev/reference/summary.epinowcast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary method for epinowcast — summary.epinowcast","text":"","code":"# S3 method for class 'epinowcast' summary(   object,   type = c(\"nowcast\", \"nowcast_samples\", \"fit\", \"posterior_prediction\"),   max_delay = object$max_delay,   ... )"},{"path":"https://package.epinowcast.org/dev/reference/summary.epinowcast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary method for epinowcast — summary.epinowcast","text":"object data.table output epinowcast(). type Character string indicating summary return; enforced base::match.arg(). Supported options : \"nowcast\" summarises nowcast posterior enw_nowcast_summary(), \"nowcast_samples\" samples latest enw_nowcast_samples(), \"fit\" returns summarised cmdstanr fit enw_posterior(), \"posterior_prediction\" returns summarised posterior predictions observations fitting using enw_pp_summary(). max_delay Maximum delay nowcasts summarised, units timestep used preprocessing. Must equal (default) larger modelled maximum delay. larger, nowcasts unmodelled dates added assuming case counts beyond modelled maximum delay fully observed. ... Additional arguments passed summary specified type.","code":""},{"path":"https://package.epinowcast.org/dev/reference/summary.epinowcast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary method for epinowcast — summary.epinowcast","text":"summary data.frame","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/summary.epinowcast.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Summary method for epinowcast — summary.epinowcast","text":"","code":"nowcast <- enw_example(\"nowcast\")  # Summarise nowcast posterior summary(nowcast, type = \"nowcast\") #>     reference_date report_date .group max_confirm location age_group confirm #>             <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>  1:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>  2:     2021-08-04  2021-08-22      1         166       DE       00+     166 #>  3:     2021-08-05  2021-08-22      1         133       DE       00+     133 #>  4:     2021-08-06  2021-08-22      1         137       DE       00+     137 #>  5:     2021-08-07  2021-08-22      1         139       DE       00+     139 #>  6:     2021-08-08  2021-08-22      1          97       DE       00+      97 #>  7:     2021-08-09  2021-08-22      1          58       DE       00+      58 #>  8:     2021-08-10  2021-08-22      1         175       DE       00+     175 #>  9:     2021-08-11  2021-08-22      1         233       DE       00+     233 #> 10:     2021-08-12  2021-08-22      1         237       DE       00+     237 #> 11:     2021-08-13  2021-08-22      1         204       DE       00+     204 #> 12:     2021-08-14  2021-08-22      1         189       DE       00+     189 #> 13:     2021-08-15  2021-08-22      1         125       DE       00+     125 #> 14:     2021-08-16  2021-08-22      1          98       DE       00+      98 #> 15:     2021-08-17  2021-08-22      1         242       DE       00+     242 #> 16:     2021-08-18  2021-08-22      1         223       DE       00+     223 #> 17:     2021-08-19  2021-08-22      1         202       DE       00+     202 #> 18:     2021-08-20  2021-08-22      1         171       DE       00+     171 #> 19:     2021-08-21  2021-08-22      1         112       DE       00+     112 #> 20:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>     reference_date report_date .group max_confirm location age_group confirm #>             <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>                 <num> <num>         <num>   <num>  <num>      <num>   <num> #>  1:                 1    19   0.000000000 149.000  149.0   0.000000  0.0000 #>  2:                 1    18   0.000000000 167.480  167.0   1.403414  1.4826 #>  3:                 1    17   0.000000000 135.797  136.0   1.858291  1.4826 #>  4:                 1    16   0.000000000 141.272  141.0   2.414507  2.9652 #>  5:                 1    15   0.007194245 145.764  145.0   3.070461  2.9652 #>  6:                 1    14   0.000000000 103.614  103.0   2.892987  2.9652 #>  7:                 1    13   0.000000000  62.838   63.0   2.595475  2.9652 #>  8:                 1    12   0.000000000 185.149  185.0   3.655155  2.9652 #>  9:                 1    11   0.000000000 256.191  256.0   7.084540  7.4130 #> 10:                 1    10   0.004219409 267.189  266.0   8.269563  7.4130 #> 11:                 1     9   0.000000000 236.218  235.0   8.635453  8.8956 #> 12:                 1     8   0.015873016 230.463  230.0  10.395995 10.3782 #> 13:                 1     7   0.040000000 165.184  165.0   9.660925  8.8956 #> 14:                 1     6   0.010204082 129.535  129.0   8.499354  8.8956 #> 15:                 1     5   0.012396694 293.236  292.0  11.922603 11.8608 #> 16:                 1     4   0.017937220 293.392  292.0  15.981231 14.8260 #> 17:                 1     3   0.019801980 291.537  290.0  20.271200 20.7564 #> 18:                 1     2   0.070175439 295.258  292.5  29.356997 27.4281 #> 19:                 1     1   0.383928571 310.440  304.0  50.020660 47.4432 #> 20:                 1     0   1.000000000 384.142  368.0 115.713601 97.8516 #>     cum_prop_reported delay prop_reported    mean median         sd     mad #>                 <num> <num>         <num>   <num>  <num>      <num>   <num> #>         q5   q20    q35   q50   q65   q80    q95      rhat  ess_bulk  ess_tail #>      <num> <num>  <num> <num> <num> <num>  <num>     <num>     <num>     <num> #>  1: 149.00   149 149.00 149.0   149 149.0 149.00        NA        NA        NA #>  2: 166.00   166 167.00 167.0   168 168.0 170.00 1.0011717 1032.9494 1005.1434 #>  3: 133.00   134 135.00 136.0   136 137.0 139.00 1.0023790  927.8688  880.2070 #>  4: 138.00   139 140.00 141.0   142 143.0 146.00 0.9997357 1024.0598  943.1194 #>  5: 141.00   143 144.00 145.0   147 148.0 151.00 1.0009523 1192.6161  903.2221 #>  6:  99.00   101 102.00 103.0   105 106.0 109.00 1.0056338 1020.5322 1049.4998 #>  7:  59.00    61  62.00  63.0    64  65.0  68.00 0.9989559 1026.9068  976.3448 #>  8: 180.00   182 183.00 185.0   186 188.0 192.00 1.0008924  874.1838  752.9787 #>  9: 246.00   250 253.00 256.0   258 262.0 269.00 1.0019152  840.3245  950.3159 #> 10: 255.00   260 264.00 266.0   270 274.0 282.00 0.9991677 1046.7181  969.9759 #> 11: 224.00   229 232.00 235.0   239 243.0 252.00 1.0025829  884.3839  943.4474 #> 12: 215.00   222 226.00 230.0   234 239.0 249.00 1.0004028  857.4908  808.3249 #> 13: 150.00   157 161.00 165.0   168 173.0 182.00 1.0063929  942.5139  877.8069 #> 14: 117.00   122 125.00 129.0   132 136.0 144.00 1.0015131 1034.7024  934.5488 #> 15: 276.00   283 288.00 292.0   297 302.0 315.00 1.0036606  886.4727  919.5960 #> 16: 269.00   280 286.00 292.0   299 306.0 321.00 0.9996327 1073.2110 1004.6946 #> 17: 262.00   274 282.00 290.0   298 308.0 327.05 0.9994497 1455.4791 1067.2793 #> 18: 252.00   271 282.00 292.5   304 317.0 350.00 0.9986679 1075.3975  898.2947 #> 19: 238.95   269 287.00 304.0   324 349.0 396.10 0.9996761 1254.5799  923.0215 #> 20: 235.00   288 329.65 368.0   406 462.2 602.00 1.0026839 1616.8851  595.4893 #>         q5   q20    q35   q50   q65   q80    q95      rhat  ess_bulk  ess_tail #>      <num> <num>  <num> <num> <num> <num>  <num>     <num>     <num>     <num>  # Nowcast posterior samples summary(nowcast, type = \"nowcast_samples\") #>        reference_date report_date .group max_confirm location age_group confirm #>                <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>     1:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     2:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     3:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     4:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>     5:     2021-08-03  2021-08-22      1         149       DE       00+     149 #>    ---                                                                          #> 19996:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19997:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19998:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 19999:     2021-08-22  2021-08-22      1          45       DE       00+      45 #> 20000:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>        cum_prop_reported delay prop_reported .chain .iteration .draw sample #>                    <num> <num>         <num>  <int>      <int> <int>  <num> #>     1:                 1    19             0      1          1     1    149 #>     2:                 1    19             0      1          2     2    149 #>     3:                 1    19             0      1          3     3    149 #>     4:                 1    19             0      1          4     4    149 #>     5:                 1    19             0      1          5     5    149 #>    ---                                                                      #> 19996:                 1     0             1      2        496   996    453 #> 19997:                 1     0             1      2        497   997    274 #> 19998:                 1     0             1      2        498   998    250 #> 19999:                 1     0             1      2        499   999    432 #> 20000:                 1     0             1      2        500  1000    491  # Nowcast model fit summary(nowcast, type = \"fit\") #>                    variable          mean        median          sd        mad #>                      <char>         <num>         <num>       <num>      <num> #>   1:                   lp__ -1342.1526185 -1341.9203500   7.6412418  7.4105537 #>   2: expr_lelatent_int[1,1]     4.3131287     4.3123787   0.1671607  0.1600364 #>   3:           expr_beta[1]    -0.3623124    -0.3515119   0.5850323  0.6006064 #>   4:           expr_beta[2]    -0.8195613    -0.8131383   0.5819066  0.5560748 #>   5:           expr_beta[3]     0.4661264     0.4954509   0.5655799  0.5622846 #>  ---                                                                           #> 828:       pp_inf_obs[16,1]   293.3920000   292.0000000  15.9812307 14.8260000 #> 829:       pp_inf_obs[17,1]   291.5370000   290.0000000  20.2712001 20.7564000 #> 830:       pp_inf_obs[18,1]   295.2580000   292.5000000  29.3569969 27.4281000 #> 831:       pp_inf_obs[19,1]   310.4400000   304.0000000  50.0206604 47.4432000 #> 832:       pp_inf_obs[20,1]   384.1420000   368.0000000 115.7136011 97.8516000 #>                 q5           q20           q80           q95      rhat #>              <num>         <num>         <num>         <num>     <num> #>   1: -1354.6056450 -1.348156e+03 -1335.8619000 -1329.9947250 1.0049158 #>   2:     4.0221140  4.180943e+00     4.4570597     4.5882174 0.9991704 #>   3:    -1.3159711 -8.713397e-01     0.1255573     0.5650805 0.9989587 #>   4:    -1.7628072 -1.277935e+00    -0.3512899     0.1031575 1.0012032 #>   5:    -0.4949055 -1.216879e-02     0.9360700     1.3583852 1.0007621 #>  ---                                                                   #> 828:   269.0000000  2.800000e+02   306.0000000   321.0000000 0.9996327 #> 829:   262.0000000  2.740000e+02   308.0000000   327.0500000 0.9994497 #> 830:   252.0000000  2.710000e+02   317.0000000   350.0000000 0.9986679 #> 831:   238.9500000  2.690000e+02   349.0000000   396.1000000 0.9996761 #> 832:   235.0000000  2.880000e+02   462.2000000   602.0000000 1.0026839 #>       ess_bulk  ess_tail #>          <num>     <num> #>   1:  240.9219  374.9920 #>   2: 1006.7816  735.6759 #>   3: 1034.8155  784.3484 #>   4: 1219.4900  659.5294 #>   5: 1436.5899  628.6754 #>  ---                     #> 828: 1073.2110 1004.6946 #> 829: 1455.4791 1067.2793 #> 830: 1075.3975  898.2947 #> 831: 1254.5799  923.0215 #> 832: 1616.8851  595.4893  # Posterior predictions summary(nowcast, type = \"posterior_prediction\") #>      reference_date report_date .group max_confirm location age_group confirm #>              <IDat>      <IDat>  <num>       <int>   <fctr>    <fctr>   <int> #>   1:     2021-07-14  2021-07-14      1          72       DE       00+      22 #>   2:     2021-07-14  2021-07-15      1          72       DE       00+      34 #>   3:     2021-07-14  2021-07-16      1          72       DE       00+      38 #>   4:     2021-07-14  2021-07-17      1          72       DE       00+      43 #>   5:     2021-07-14  2021-07-18      1          72       DE       00+      43 #>  ---                                                                          #> 606:     2021-08-20  2021-08-21      1         171       DE       00+     159 #> 607:     2021-08-20  2021-08-22      1         171       DE       00+     171 #> 608:     2021-08-21  2021-08-21      1         112       DE       00+      69 #> 609:     2021-08-21  2021-08-22      1         112       DE       00+     112 #> 610:     2021-08-22  2021-08-22      1          45       DE       00+      45 #>      cum_prop_reported delay new_confirm prop_reported   mean median        sd #>                  <num> <num>       <int>         <num>  <num>  <num>     <num> #>   1:         0.3055556     0          22    0.30555556 22.049     20 10.447476 #>   2:         0.4722222     1          12    0.16666667 22.031     21 10.062370 #>   3:         0.5277778     2           4    0.05555556  7.992      8  4.118361 #>   4:         0.5972222     3           5    0.06944444  4.261      4  2.692978 #>   5:         0.5972222     4           0    0.00000000  1.326      1  1.258295 #>  ---                                                                           #> 606:         0.9298246     1          61    0.35672515 81.048     77 33.870413 #> 607:         1.0000000     2          12    0.07017544 12.586     11  6.299229 #> 608:         0.6160714     0          69    0.61607143 73.471     69 32.792995 #> 609:         1.0000000     1          43    0.38392857 47.332     44 20.074730 #> 610:         1.0000000     0          45    1.00000000 40.534     37 20.435911 #>          mad    q5   q20   q35   q50   q65   q80    q95      rhat  ess_bulk #>        <num> <num> <num> <num> <num> <num> <num>  <num>     <num>     <num> #>   1:  8.8956  8.00    14    17    20 24.35    30  41.00 1.0007087  981.0605 #>   2: 10.3782  8.00    13    17    21 25.00    30  40.00 1.0006400 1010.0549 #>   3:  4.4478  2.00     4     6     8  9.00    11  16.00 1.0018374 1046.7610 #>   4:  2.9652  1.00     2     3     4  5.00     6   9.00 1.0008338  959.7921 #>   5:  1.4826  0.00     0     1     1  2.00     2   4.00 1.0003294  999.1432 #>  ---                                                                        #> 606: 31.1346 36.95    52    65    77 90.00   105 143.00 0.9999674 1016.8230 #> 607:  5.9304  4.00     7    10    11 14.00    17  24.00 1.0006309  965.7202 #> 608: 29.6520 31.00    46    57    69 80.00    95 133.00 0.9983329 1072.1422 #> 609: 19.2738 20.00    31    37    44 53.00    63  84.00 0.9993679 1127.5257 #> 610: 17.7912 15.00    24    30    37 45.00    54  81.05 1.0003136 1372.2704 #>       ess_tail #>          <num> #>   1:  957.4820 #>   2:  860.7285 #>   3:  956.3804 #>   4:  978.0414 #>   5:  873.2038 #>  ---           #> 606: 1000.9385 #> 607:  850.5506 #> 608:  973.6582 #> 609:  906.6164 #> 610: 1042.6714"},{"path":"https://package.epinowcast.org/dev/reference/unset_cache_from_environ.html","id":null,"dir":"Reference","previous_headings":"","what":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","title":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","text":"function searches removes enw_cache_location setting .Renviron file located user's project home directory. utilizes get_renviron_contents function access modify contents .Renviron file. enw_cache_location setting found successfully removed, success message displayed. setting found, warning message displayed.","code":""},{"path":"https://package.epinowcast.org/dev/reference/unset_cache_from_environ.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","text":"","code":"unset_cache_from_environ(alert_on_not_set = TRUE)"},{"path":"https://package.epinowcast.org/dev/reference/unset_cache_from_environ.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","text":"alert_on_not_set logical value indicating whether display warning message enw_cache_location setting found .Renviron file. Defaults TRUE.","code":""},{"path":"https://package.epinowcast.org/dev/reference/unset_cache_from_environ.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Remove Cache Location Setting from .Renviron — unset_cache_from_environ","text":"Invisible NULL. function used side effect modifying .Renviron file.","code":""},{"path":[]},{"path":"https://package.epinowcast.org/dev/reference/update_inits.html","id":null,"dir":"Reference","previous_headings":"","what":"Update initial values for model fitting — update_inits","title":"Update initial values for model fitting — update_inits","text":"function updates initial values model fitting based specified initialization method.","code":""},{"path":"https://package.epinowcast.org/dev/reference/update_inits.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update initial values for model fitting — update_inits","text":"","code":"update_inits(   data,   model,   init,   init_method = c(\"prior\", \"pathfinder\"),   init_method_args = list(),   ... )"},{"path":"https://package.epinowcast.org/dev/reference/update_inits.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update initial values for model fitting — update_inits","text":"data list data produced model modules (example enw_expectation(), enw_obs(), etc.) required use model used. model cmdstanr model object loaded enw_model() supplied user. init list initial values function generate initial values. provided, model attempt generate initial values init_method method use initializing model. Defaults \"prior\" samples initial values prior. \"pathfinder\", uses pathfinder algorithm (enw_pathfinder()) initialize model. init_method_args list additional arguments pass initialization method. ... Additional arguments passed initialization methods.","code":""},{"path":"https://package.epinowcast.org/dev/reference/update_inits.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Update initial values for model fitting — update_inits","text":"list containing updated initial values method-specific output.","code":""},{"path":"https://package.epinowcast.org/dev/reference/write_stan_files_no_profile.html","id":null,"dir":"Reference","previous_headings":"","what":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","title":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","text":"Write copies .stan files Stan model #include files profiling statements removed.","code":""},{"path":"https://package.epinowcast.org/dev/reference/write_stan_files_no_profile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","text":"","code":"write_stan_files_no_profile(   stan_file,   include_paths = NULL,   target_dir = epinowcast::enw_get_cache() )"},{"path":"https://package.epinowcast.org/dev/reference/write_stan_files_no_profile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","text":"stan_file path .stan file containing Stan program. include_paths Paths directories Stan look files specified #include directives Stan program. target_dir path directory manipulated .stan files without profiling statements stored. avoid overriding original .stan files, different directory original model include_paths.","code":""},{"path":"https://package.epinowcast.org/dev/reference/write_stan_files_no_profile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write copies of the .stan files of a Stan model and its #include files with all profiling statements removed. — write_stan_files_no_profile","text":"list containing path .stan file without profiling statements include_paths included .stan files without profiling statements","code":""},{"path":[]},{"path":[]},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"contributors-0-4-0-1000","dir":"Changelog","previous_headings":"","what":"Contributors","title":"epinowcast 0.4.0.1000","text":"@jessalynnsebastian @seabbs contributed code release. @seabbs reviewed pull requests release. @jessalynnsebastian @seabbs reported bugs, made suggestions, contributed discussions led improvements release.","code":""},{"path":[]},{"path":[]},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"package-0-4-0-1000","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.4.0.1000","text":"Exported enw_rolling_sum() function aggregating observations timesteps. function previously internal needed users working non-daily reporting cycles. See #528 @seabbs self-reviewed.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"model-0-4-0-1000","dir":"Changelog","previous_headings":"","what":"Model","title":"epinowcast 0.4.0.1000","text":"Added support structural reporting patterns enw_report() via new helper functions enw_structural_reporting_metadata() enw_dayofweek_structural_reporting(). enables modelling non-daily reporting cycles (e.g., weekly) daily underlying generative model. Stan optimizations include precomputing sparse index lookups aggregation operations improve computational efficiency numerical stability. See #528 @seabbs self-reviewed.","code":""},{"path":[]},{"path":[]},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-040","dir":"Changelog","previous_headings":"","what":"epinowcast 0.4.0","title":"epinowcast 0.4.0","text":"release adds new use cases vignette help users understand apply package different problems. Documentation enhanced clearer guidance formula interface, including details fixed effects, random effects, random walks, making package accessible users unfamiliar formula syntax. Performance improvements include optimised Stan functions, support sparse design matrices memory-intensive models, tightened priors improve run times. Experimental pathfinder support added rapid prototyping informing initialisation HMC runs. Model enhancements include negative binomial observation model linear mean-variance relationship improved probability aggregation support. package lifecycle updated experimental stable, interface stability expected version. release single breaking change fixes --one error enw_filter_reference_dates() include_days = n incorrectly returned n + 1 dates. Functions deprecated version 0.4.0 earlier removed. range bug fixes implemented, including fixes enw_aggregate_cumulative() counting maximum delay even multiple timestep IDate storage mode compatibility dplyr workflows. Full details changes release can found following sections GitHub release notes.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"contributors-0-4-0","dir":"Changelog","previous_headings":"","what":"Contributors","title":"epinowcast 0.4.0","text":"@athowes, @kaitejohnson, @jamesmbaazam, @jessalynnsebastian, @Bisaloo, @barbora-sobolova @seabbs contributed code release. @medewitt, @jessalynnsebastian, @pearsonca, @jamesmbaazam, @seabbs reviewed pull requests release. @pearsonca, @jessalynnsebastian, @athowes, @medewitt, @seabbs reported bugs, made suggestions, contributed discussions led improvements release.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"breaking-changes-0-4-0","dir":"Changelog","previous_headings":"","what":"Breaking changes","title":"epinowcast 0.4.0","text":"Fixed --one error enw_filter_reference_dates() include_days = n incorrectly returned n + 1 dates instead exactly n dates. Now include_days = 10 returns exactly 10 reference dates, 11. brings function behaviour line documentation user expectations. Users relying previous behaviour need adjust include_days arguments subtracting 1 maintain date range. See issue #352 details. enw_cumulative_to_incidence() (deprecated 0.2.1, use enw_add_incidence()) enw_incidence_to_cumulative() (deprecated 0.2.1, use enw_add_cumulative()) enw_delay_filter() (deprecated 0.2.3, use enw_filter_delay()) enw_delay_metadata() (deprecated 0.2.3, use enw_metadata_delay()) enw_score_nowcast() (deprecated 0.4.0, use as_forecast_sample()) Removed simulate_double_censored_pmf(). Users use primarycensored::dprimarycensored() instead generating double censored PMFs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"bugs-0-4-0","dir":"Changelog","previous_headings":"","what":"Bugs","title":"epinowcast 0.4.0","text":"Fixed enw_aggregate_cumulative() incorrectly counting max_delay even multiple timestep. function now completes dates aggregation adds missing incidence counts aggregation ensure cumulative sums correctly calculated. Fixes #511. Fixed IDate storage mode error using dplyr::filter() enw_preprocess_data(). coerce_dt() function now explicitly restores integer storage mode IDate columns may converted double storage dplyr operations whilst preserving IDate class. ensures compatibility dplyr data.table workflows. Fixes #557. Fixed bug enw_nowcast_summary() enw_nowcast_samples() incorrectly selected reference dates include outputs time steps days. See #473 @jessalynnsebastian reviewed @seabbs. Fixed bug enw_expose_stan_fns() deprecated used stan docs expected_obs(). See #488 @seabbs reviewed @jessalynnsebastian. Fixed error enw_preprocess_data() processing data predominantly zero counts across multiple groups. function now handles sparse data gracefully provides informative warnings delay coverage statistics computed. See #541 @seabbs self-reviewed. Fixed stacked bar chart Rt estimation vignette extending beyond actual reference date range. plot now correctly limits x-axis range dates data. See #634 @seabbs self-reviewed.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"package-0-4-0","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.4.0","text":"package lifecycle updated experimental stable. current interface stabilised users can expect interface stability version, though future major versions may include interface changes. See #370 @seabbs. Experimental support CmdStanModel$pathfinder added package via enw_pathfinder(). fitting method approximates posterior distribution using variational inference method. may useful rapid prototyping, informing initialisation HMC runs, settings compute time limited. Likely downsides poorly calibrated estimates instability complex model formulations. See #464 @seabbs reviewed @medewitt. Added support initialising methods enw_sample(). Currently allows either default “random” draws priors (previously option) “pathfinder” approximates posterior distribution using pathfinder variational inference method. Currently support initialising mass matrix HMC support available cmdstan. See #504 @seabbs reviewed @jamesmbaazam. Added checks partial argument matching fixed instances. See #343 @Bisaloo reviewed @seabbs. Support probability aggregation added expected_obs(). See #482 @jessalynnsebastian reviewed @seabbs. Added actions build precompiled actions updated pushed main schedule. aims avoid issues precompiled actions date latest changes. See #494 @seabbs reviewed @sbfnk. new interface added scoringutils allow scoring nowcasts. now available epinowcast via as_forecast_sample(). See #550 @seabbs self-reviewed.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"model-0-4-0","dir":"Changelog","previous_headings":"","what":"Model","title":"epinowcast 0.4.0","text":"Performance tuned expected_obs() related functions improve speed reduce memory usage. See #501 @seabbs reviewed @jessalynnsebastian. Used offset multiplier stan translation functions improve speed model. See #501 @seabbs reviewed @jessalynnsebastian. Removed normalisation truncated priors required inference increases run time. See #501 @seabbs reviewed @jessalynnsebastian. Tightened prior overdispersion parameter provide less support extreme overdispersion. change unlikely impact results users help improve run time. See #501 @seabbs reviewed @jessalynnsebastian. Optimised internal performance critical stan functions improve speed reduce memory usage. See #513 @seabbs reviewed @pearsonca. Added support sparse design matrices model (see sparse_design enw_fit_opts()). sparse design matrices can reduce memory requirements computation time. heuristic added inform users sparse design matrices useful . See #514 @seabbs reviewed @pearsonca. Added support negative binomial observation model linear mean-variance relationship option model_obs argument epinowcast(). See #590 @barbora-sobolova reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"documentation-0-4-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.4.0","text":"Clarified enw_aggregate_cumulative() documentation observations report dates form complete timestep dropped aggregated output. behaviour design ensure consistent timestep alignment. Addresses #427. Improved documentation formula interface make accessible users unfamiliar formula syntax. Enhanced enw_formula() documentation details fixed effects, random effects (lme4 syntax), random walks, including explanation ~0 convention disabling model components formulas map model structure. Added references relevant R resources expanded examples. Updated model module documentation (enw_reference(), enw_report(), enw_expectation(), enw_missing()) clarify formula usage cross-reference main formula documentation. Addresses #468 @seabbs self-reviewed. Linked Stan function documentation package website. @jamesmbaazam #529 reviewed @seabbs. Added support render deploy stan documentation using doxygen GitHub Actions workflow. See #500 #502 @jamesmbaazam @seabbs respectively, cross-reviewed. Standardised punctuation pkgdown reference. See #458 @athowes reviewed @seabbs. Reduced adapt_delta max_treedepth arguments vignettes examples tested see impact results. See #501 @seabbs reviewed @jessalynnsebastian. Made vignette progress messaging dependent user interactive. See #501 @seabbs reviewed @jessalynnsebastian. Added vignette document package use cases. See #524 @kaitejohnson reviewed @seabbs. Switched using primarycensored simulating primary censored right truncated processes needed correctly model discrete delays. See #549 @seabbs self-reviewed.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"deprecations-0-4-0","dir":"Changelog","previous_headings":"","what":"Deprecations","title":"epinowcast 0.4.0","text":"enw_score_nowcast() deprecated favour scoringutils::score(). See #550 @seabbs self-reviewed.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-030","dir":"Changelog","previous_headings":"","what":"epinowcast 0.3.0","title":"epinowcast 0.3.0","text":"release brings range enhancements, new features, bug fixes, reflecting effort large number contributors. single breaking change, adjusts default max_delay parameter enw_process_data() maximum observed delay input data. change aims encourage users tailor setting specific datasets give reasonable default . package infrastructure also significant updates, including improved search functionality pkgdown website, adoption organization-level pkgdown theme, ability cache Stan models across R sessions, additional continuous integration tests. Model enhancements include updated internal handling PMF discretization support non-parametric reference date models, alongside documentation improvements provide clearer guidance examples users. range bug fixes implemented, including fix bug enw_expectation() module causing issues models containing multiple time series. Full details changes release can found following sections GitHub release notes. see development timeline release see 0.3.0 project.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"contributors-0-3-0","dir":"Changelog","previous_headings":"","what":"Contributors","title":"epinowcast 0.3.0","text":"@jamesmbaazam, @medewitt, @sbfnk, @adrian-lison, @kathsherratt, @natemcintosh, @Bisaloo @seabbs contributed code release. @jamesmbaazam, @adrian-lison, @sbfnk, @bisaloo, @pearsonca, @natemcintosh, @seabbs reviewed pull requests release. @jbracher, @medewitt, @kathsherratt, @jamesmbaazam, @zsusswein, @TimTaylor, @sbfnk, @natemcintosh, @pearsonca, @bisaloo, @parksw3, @adrian-lison, @seabbs reported bugs, made suggestions, contributed discussions led improvements release.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"breaking-changes-0-3-0","dir":"Changelog","previous_headings":"","what":"Breaking changes","title":"epinowcast 0.3.0","text":"default max_delay enw_process_data() changed maximum observed delay input data rather 20 days. default used warning now thrown general users setting based data application. See documentation enw_preprocess_data() details. See #224 @adrianlison reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"bugs-0-3-0","dir":"Changelog","previous_headings":"","what":"Bugs","title":"epinowcast 0.3.0","text":"Fixed bug identified @jbracher enw_expectation() module appropriately defining initial conditions multiple groups present. issue related recent changes cmdstan 2.32.1 required order use versions cmdstan beyond 2.32.0 models contain multiple time series. See #282 @seabbs self-reviewed. Fixed typos model vignette. See #292 @medewitt reviewed @seabbs. Fixed bug snapshots (.e. returned metadata enw_preprocess_data()) defined based report vs reference date. won’t impacted usage problem trying fit model retrospective (completely reported) data. See #312 @seabbs self-reviewed. Fixed bug non-data.table passed enw_quantile_to_long() throw error. See #324 @natemcintosh reviewed @pearsonca. Fixed bug enw_aggregate_cumulative() initialised time step first reference date + 1 day rather first reference date. See #336 @seabbs self-reviewed. Fixed bug enw_filter_reference_dates using remove_days data missing reference dates. See #351 @adrian-lison reviewed @seabbs. Resolved code quality issues related use %% scale right hand side similar issues. See #382 @seabbs reviewed @pearsonca @Bisaloo.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"package-0-3-0","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.3.0","text":"Search functionality pkgdown website longer directs non-existent pages. issue resulted incorrect URL specified pkgdown configuration file. See #449 @Bisaloo, based report @zsusswein. pkgdown theming elements moved organization-level pkgdown theme increase re-usability DRY-ness across organization. See #419 @Bisaloo reviewed @pearsonca @seabbs. lintr checks now run also tests/ directory. See #418 @Bisaloo reviewed @seabbs. Fixed typos single-timeseries-rt-estimation.Rmd. WORDLIST used spelling also updated eliminate false positives. Future typos now generate error continuous integration check can catch early possible. See #341 @Bisaloo reviewed @seabbs. Added extra checks continuous integration tests: now test partial matching used global state left unchanged (restored correctly). See #338 @Bisaloo reviewed @seabbs. Added additional tests ensure enw_expectation() module appropriately defining initial conditions multiple groups present. See #282 @seabbs self-reviewed. Added integration test epinowcast() check models multiple time series can fit expected example data. See #282 @seabbs reviewed @adrian-lison. Added {touchstone} benchmark includes multiple time-series ensure functionality appropriately tested. See #282 @seabbs reviewed @adrian-lison. Added merge_group option required GitHub Actions. enables use merge queue pull requests. See #300 @seabbs self-reviewed. Added internal check_group_date_unique() function ensures user supplied groups result unique combinations group dates. function used enw_preprocess_data() enw_complete_dates() ensure user supplied groups valid. See #295 @adrian-lison reviewed @seabbs. Added support non-daily reference date models (.e., process models). example, allows modelling weekly data weekly. may desirable delays long, computational resources limited, possible specify sufficiently flexible daily model account observed reporting patterns either reference report dates. model unit less entails changes model . See #303 @seabbs self-reviewed. Added new helper function simulate_double_censored_pmf() helps users define “correct” probability mass functions double censored delays based work epidist @parksw3 @seabbs. Note function likely spun package near future. See #312 @seabbs self-reviewed. Added min_reference_date argument enw_aggregate_cumulative() allow users specify minimum reference date include output. useful users want aggregate timestep specified initialisation date default. example users data already reported weekly cadence use min(data$report_date) + 1 preserve timestep. See #340 @seabbs reviewed @natemcintosh. Added support enw_complete_dates() min_date max_date arguments. arguments allow users specify minimum maximum dates include output. may useful users want ensure data complete specified time period. See #340 @seabbs reviewed @natemcintosh. Added new helper function enw_one_hot_encode_feature() one hot encoding variables binding original data. useful users want include parts variables models binary indicators - example giving specific delay effect. See #348 @seabbs self-reviewed. Enabled compiling multithreading default found cause deterioration performance even 1 thread per chain. likelihood calculation now longer parallelised threads_per_chain = 1 offer small performance improvement. See #366 @sbfnk reviewed @seabbs. Added new action check cmdstan model can compiled correct syntax. runs pull requests whenever stan code changed, code merged onto main altered stan code, weekly schedule latest main branch. See #386 @seabbs. Switched cli package package messaging order modern pretty notifications. See #188 @nikosbosse @seabbs reviewed @pearsonca. Increased minimum supported R version >= R 3.6.0 R 3.5.0 ensured existing function code tests compiled dependency. Vignettes continue allow use R >= 4.1.0 syntax (.e., native pipe lambda function syntax). See #389 @medewitt @seabbs reviewed @pearsonca. Add documentation custom stan functions. See #422 @seabbs reviewed @sbfnk. Added function check_max_delay() allows obtain coverage statistics assumed maximum delay based observed data. Enhanced postprocessing functions accept different max_delay used model, adding artificial samples/summaries -modeled dates. improved documentation warnings around max_delay. See #224 @adrian-lison @seabbs reviewed @seabbs. Exposed enw_stan_to_r() user. function used testing development expose epinowcast stan code R. Users may find function useful allows explore stan code used epinowcast models easily. Note functionality known unstable rstan loaded R session. See #431 @seabbs reviewed @sbfnk. Refactored extract_sparse_matrix() allow us drop rstan dependency. See #431 @seabbs reviewed @sbfnk. Allow caching Stan models across R sessions reduce compilation time use environment variable, enw_cache_location, can set using set_enw_cache() function. See #407 @medewitt @seabbs reviewed @sbfnk @pearsonca.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"model-0-3-0","dir":"Changelog","previous_headings":"","what":"Model","title":"epinowcast 0.3.0","text":"Update internal handling PMF discretisation assume uniform window two days centred delay interest rather window one day starting delay interest. better approximates underlying continuous distribution primary secondary event censoring. Due change models may perform slightly differently versions delay distribution estimates means half day longer (note corrects previous bias). See #288 @seabbs reviewed @adrian-lison. Updated default prior initialising model include ascertainment rate inferred latent reporting delay distribution can improper probability mass function (.e. one sum 1). See #312 @seabbs self-reviewed. Added support non-parametric reference date models well mixed models parametric non-parametric reference date models. enables use popular models discrete time cox proportional hazards model. See #313 @seabbs self-reviewed. Added support missing data (excluding missing reference date model) using observation_indicator argument enw_obs(). Support also added enw_complete_dates() flag missing data part new helper functions (enw_flag_observed_observations() enw_impute_na_observations()) also added. support likely useful used conjunction known reporting structure. See #327 @seabbs self-reviewed. Added support using maximum delay longer largest observed delay data. may useful start outbreak, data sparse user expects delays longer observed far. Note requires extrapolating delay distribution beyond support data, users cautious using feature. new example, inst/examples/germany_max_delay_greater_than_data.R, added demonstrate feature. See #346 @seabbs reviewed @adrian-lison. Added priors used model fitting <epinowcast> object. object returned epinowcast() now variable called priors can accessed inspection downstream analyses. See #399 @jamesmbaazam reviewed @pearsonca @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"documentation-0-3-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.3.0","text":"Updated distributions vignette match updated handling discretisation. See #288 @seabbs reviewed @adrian-lison. Updated use citation() function README command shown users output treated like normal text. See #272 @seabbs self-reviewed. Added vignette walking estimate effective reproduction number real-time (comparing retrospective estimates) data source right truncated. See #312 @seabbs self-reviewed. Switched using bookdown pkgdown vignettes moved flatly theme pkgdown rather preferably theme. See #312 @seabbs self-reviewed. Updated README include non-parametric reference date model option also added new example showing use model. See #313 @seabbs self-reviewed. Added new example showcasing fit model data reported weekly 3 day delay reports non-zero weekly process model mixture parametric non-parametric reference date model. See #348 @seabbs self-reviewed. Split README focus package-level issues moved quick start getting started vignette. See #375 @pearsonca reviewed @jamesmbaazam @seabbs. Added code CITATION file automatically pull relevant citation fields DESCRIPTION file. Also added GitHub Actions workflow auto-generate citation.cff file whenever CITATION DESCRIPTION change. way, three files always date. See #369 @jamesmbazam reviewed @seabbs. Removed reference pull request template updating development version found cause issues multiple pull requests open . See #391 @seabbs reviewed @Bisaloo. Added note Getting Started vignette clarify usability alternatives data.table. See #406 @kathsherratt reviewed @seabbs. Added new vignette provide users configuration troubleshooting guide Stan working epinowcast. See #405 @medewitt reviewed @seabbs, @zsusswein, @pearsonca. Removed named individuals vignettes moved team authorship. See #421 @seabbs self-reviewed. Improved documentation maximum delay stan code. See #425 @adrianlison reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"deprecations-0-3-0","dir":"Changelog","previous_headings":"","what":"Deprecations","title":"epinowcast 0.3.0","text":"enw_delay_filter(): Deprecated warning favour enw_filter_delay(). renaming better reflect function’s purpose. See #365 @kathsherratt reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-022","dir":"Changelog","previous_headings":"","what":"epinowcast 0.2.2","title":"epinowcast 0.2.2","text":"minor release fixes bug handling optional initial conditions introduced recent change cmdstan 2.32.1. Upgrading recommended users wish use versions cmdstan beyond 2.32.0. addition fixing issue, release also includes minor documentation vignette improvements, along enhancements input checking.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"contributors-0-2-2","dir":"Changelog","previous_headings":"","what":"Contributors","title":"epinowcast 0.2.2","text":"@sbfnk @seabbs contributed code release. @seabbs reviewed pull requests release. @sbfnk @seabbs reported bugs, made suggestions, contributed discussions led improvements release.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"bugs-0-2-2","dir":"Changelog","previous_headings":"","what":"Bugs","title":"epinowcast 0.2.2","text":"Improved handling optional initial conditions consistently passed arrays stan required cmdstan 2.32.1. fix required order use versions cmdstan beyond 2.32.0. See #276 @seabbs self-reviewed.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"package-0-2-2","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.2.2","text":"Added input checking max_delay enw_preprocess_data() ensure maximum delay greater equal 1 can coerced integer. See #274 @sbfnk reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"documentation-0-2-2","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.2.2","text":"Improved discrete delay distributions vignette including escaping functions improve readibility right-closing discretised bins. See #275 @sbfnk reviewed @seabbs. Improved documentation max_delay enw_preprocess_data() fixed typo documentation. See #274 @sbfnk reviewed @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-021","dir":"Changelog","previous_headings":"","what":"epinowcast 0.2.1","title":"epinowcast 0.2.1","text":"release, focused improving internal code structure, documentation, development infrastructure package make easier maintain extend functionality future. also fixed number bugs made minor improvements interface. changes included extending test documentation coverage across package functions, improving internal data checking internalization, removing deprecated functions. changes expected impact users, recommend users upgrade version. also suggest users fitted models random effects random walks refit models compare output previous fits order understand impact bug specification models fixed release. release lays groundwork planned features 0.3.0 0.4.0 including: support non-parametric delays, non-daily data non-daily process model (.e. weekly data weekly process model), additional flexibility specifying generation times latent reporting delays, improved case studies, adding support forecasting. Full details changes release can found following sections GitHub release notes. see development timeline release see 0.2.1 project.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"contributors-0-2-1","dir":"Changelog","previous_headings":"","what":"Contributors","title":"epinowcast 0.2.1","text":"@adrian-lison, @Bisaloo, @pearsonca, @FelixGuenther, @Lnrivas, @seabbs, @sbfnk, @jhellewell14 made code contributions release. @pearsonca, @Bisaloo, @adrian-lison, @seabbs reviewed pull requests release. @Gulfa, @WardBrian, @parkws3, @adrian-lison, @Bisaloo, @pearsonca, @FelixGuenther, @Lnrivas, @seabbs, @sbfnk @jhellewell14 reported bugs, made suggestions, contributed discussions led improvements release.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"potentially-breaking-changes-0-2-1","dir":"Changelog","previous_headings":"","what":"Potentially breaking changes","title":"epinowcast 0.2.1","text":"enw_add_pooling_effect(): replaced string argument ... argument, enable passing arbitrary arguments finder_fn argument. general usage supported, now e.g. default argument supply prefix = \"somevalue\" vs string = \"somevalue\" argument positions changed. function primarily internal use expect small subset advanced users creating models outside currently supported formula interface impacted See #222 @pearsonca reviewed @seabbs. enw_dates_to_factors(): Deprecated removed longer needed. expect function little external use little impact users. See #216 @seabbs reviewed @adrian-lison.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"bugs-0-2-1","dir":"Changelog","previous_headings":"","what":"Bugs","title":"epinowcast 0.2.1","text":"Fixed bug first highlighted @Gulfa #166 localised investigation #223 random effects random walks improperly constructed enw_formula() variances parameters shared correct parameters used together. impacts models used formulas random effects random walks models appears led increased run-times, fitting issues, potentially unreliable posterior estimates less significant impact actual nowcasts. suggest refitting models comparing output previous fits order understand impact usage. See #228 @seabbs self-reviewed. Fixed bug enw_replace_priors() function deal epinowcast summarised posterior estimates due new use pillar class. Added tests catch issue reoccurs future. See #228 @seabbs self-reviewed. Fixed issue (#198) interface scoringutils. unknown reason example data contained pillar classes (likely due upstream change). caused issue internal scoringutils using implicit type conversion (see ). See #201 @seabbs reviewed @pearsonca. Fixed bug enw_plot_quantiles() documented default log FALSE actual default TRUE. See #209 @seabbs self-reviewed. Fixed bug enw_expectation() models specified zero intercept initial condition still specified intercept growth rate (expr_r_int, #246). flagged issue cmdstan 2.31.0 cmdstan 2.32.0, due improvements initial conditions read (stan-dev/stan#3182), throws error causing models fail. Solution suggested @WardBrian, implemented #255 @seabbs, reviewed @pearsonca.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"deprecations-0-2-1","dir":"Changelog","previous_headings":"","what":"Deprecations","title":"epinowcast 0.2.1","text":"enw_incidence_to_cumulative(): Deprecated warning favour enw_add_cumulative(). renaming better reflect function’s purpose. enw_incidence_to_cumulative() removed 0.3.0. See #247 @seabbs reviewed @pearsonca. enw_cumulative_to_incidence(): Deprecated warning favour enw_add_incidence(). renaming better reflect function’s purpose. enw_cumulative_to_incidence() removed 0.3.0. See #247 @seabbs reviewed @pearsonca.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"package-0-2-1","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.2.1","text":"Fixed typos README.md, NEWS.md, model.Rmd vignette convolution_matrix() documentation. WORDLIST used spelling also updated eliminate false positives. See #221 @Bisaloo reviewed @seabbs @adrian-lison. Added non-default linters .lintr configuration file. file used lintr::lint_package() run new lint-changed-files.yaml GitHub Actions workflow. See #220 @Bisaloo reviewed @pearsonca @seabbs. Switched lint-changed-files.yaml GitHub Actions workflow instead regular lint.yaml avoid annotations unrelated changes made PR. See #220 @Bisaloo reviewed @pearsonca @seabbs. Added tests summary.epinowcast() plot.epinowcast() methods. See #209 @seabbs reviewed @pearsonca. Added tests enw_plot_obs() otherwise covered plot.epinowcast() tests. See #209 @seabbs reviewed @pearsonca. Refactored consolidate data checking internalization single internal function coerce_dt(), addressing issues #242, #241, #214, #149. eliminates need add_group(), check_by(), check_dates() (associated documentation, tests - intermediate capabilities introduced within minor version; see #208) removed. Also starts enable internal versus external use exposed methods copy = ... argument. See #239 @pearsonca, reviewed @seabbs. Resolved spurious test warnings snapshot tests linked unstated formatting requirements. See #208 @seabbs reviewed @pearsonca. Removed unused internal plot helpers. See #217 @seabbs reviewed @adrian-lison. Added tests internal check_ functions used check inputs. See #217 @seabbs reviewed @adrian-lison. Removed problematic double specification default arguments target_date enw_metadata() flagged #212 @pearsonca using formals() instead detect default values function specification. See #232 @seabbs self-reviewed. words Jenny Bryan: “else, .” else return() stop() increases number branches code, makes harder read. also translates higher cyclomatic complexity. removed else statements return() stop() package. See #229 @Bisaloo reviewed @seabbs. Removed internal definition no_contrasts enw_formula() unused. Identified @bisaloo #220 raised #223. See #228 @seabbs self-reviewed. Added tests enw_replace_priors() check can handle epinowcast summarised posterior estimates. See #228 @seabbs self-reviewed. Added prefix (rw__) enw_formula() construct_rw() indicate random effect variance random walk versus random effect. See #228 @seabbs reviewed . Added support using variable random effect random walk. settings advised. See #228 @seabbs self-reviewed. Added error message construct_rw() random walk specified variable numeric variable. See #228 @seabbs self-reviewed. Added support preprocessing model fitting benchmarking using touchstone based implementation EpiNow2 @sbfnk. See #200 @seabbs, @adrian-lison, @sbfnk, self-reviewed. Added complete set data converters map line list (.e. row case) count data (.e incidence cumulative counts reference report date). particular, help workflows individual line list data available can now formatted ready preprocessing using single call enw_linelist_to_incidence() previously took several steps. See #247 @seabbs @jhellewell14 reviewed @pearsonca. Dropped use develop branch development versions package. change discussed #250 major motivator since introduction release builds R Universe longer need stable main branch GitHub control releases. See #256 @seabbs reviewed @Bisaloo @pearsonca. Cleaned enw_formula_as_data_list() better align DRY principles. See #245 @Lnrivas, reviewed @pearsonca, @Bisaloo, @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"documentation-0-2-1","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.2.1","text":"Added examples summary.epinowcast() plot.epinowcast() methods documentation. See #209 @seabbs reviewed @pearsonca. Extended documentation, examples, tests internal, preprocessing, postprocessing functions. See #208 @seabbs reviewed @pearsonca. Added examples plot functions. See #209 @seabbs reviewed @pearsonca. Added example enw_replace_priors() showing use nowcast posterior update default priors. See #228 @seabbs self-reviewed. Updated package citation documentation include new authors 0.2.1 release use recommended bibentry() approach. See #236 #237 @seabbs reviewed @Bisaloo. Added package style guide (STYLE_GUIDE.md) document style conventions used package. See #64 @seabbs reviewed @pearsonca @Bisaloo. Improved extended documentation discretized, parametric delay distributions. Changed structure package vignettes (two categories, model definition vignettes case study vignettes). See #265 @FelixGuenther @adrian-lison reviewed @seabbs. Improved extended README quick start feedback @parksw3 #260. See #267 @seabbs reviewed @adrian-lison @parksw3.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-020","dir":"Changelog","previous_headings":"","what":"epinowcast 0.2.0","title":"epinowcast 0.2.0","text":"release adds several extensions modelling framework, including modelling missing data, flexible modelling generative process underlying case counts, optional renewal equation-based generative process (enabling direct estimation effective reproduction number), convolution-based latent reporting delays (enabling modelling directly observed unobserved delays well partial ascertainment). Much methodology used extensions based work done Adrian Lison currently evaluated. top model extensions release also adds range quality life features, helper functions constructing convolution matrices combining probability mass functions. also comes improved computational efficiency, thanks refactoring hazard model computations log scale extended parallelisation likelihood optimised structure input data. also extended package documentation streamlined contribution process. large-scale project, package remains experimental state, though sufficiently stable research production usage. core development needed improve post-processing, pre-processing, documentation coverage, evaluate optimal configurations different settings) please see community site, contributing guide, list issues/proposed features interested involved (scale contribution warmly welcomed including user feedback, requests extend functionality cover setting, evaluating package context). community project needs support users order provide improved tools real-time infectious disease surveillance. thank @adrian-lison, @choi-hannah, @sbfnk, @Bisaloo, @seabbs, @pearsonca, @pratikunterwegs code contributions release. also thank community members contributions including @jhellewell14, @FelixGuenther, @parksw3, @jbracher. Full details changes release can found following sections.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"package-0-2-0","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.2.0","text":"Added .Rhistory .gitignore file. See #132 @choi-hannah. Fixed indentations authors contributors DESCRIPTION file. See #132 @choi-hannah. Renamed enw_new_reports() enw_cumulative_to_incidence() added reverse function enw_incidence_to_cumulative() functions use argument allow specification variable groupings. See #157 @seabbs. Switched class checking inherits(x, \"class\") rather class(x) %% \"class\". See #155 @Bisaloo. Changed enw_add_metaobs_features() interface holidays argument series dates. Changed interface enw_preprocess_data() pass ... enw_add_metaobs_features(). Interface changes come internal rewrite unit tests. part internal rewrite, introduces coerce_date() R/utils.R, wraps data.table::.IDate() error handling. See #151 @pearsonca. Changed style using match.arg validating inputs. Briefly, preference now define options via function arguments validate automatic match.arg idiom corresponding enumerated documentation options. idiom, first item definition default. approach applies string-based arguments; different types arguments matched way, can arguments allow vector-valued options (e.g., somearg = c(\"option1\", \"option2\") legal argument indicating use options). See #162 @pearsonca addressing issue #156 @Bisaloo. Refined use data ordering throughout preprocessing functions. See #147 @seabbs. Skipped tests use cmdstan locally improve developer/contributor experience. See #147 @seabbs @adrian-lison. Added basic simulator function missing reference data. See #147 @seabbs @adrian-lison. Added support right hand side interactions syntax sugar random effects. allows specification , example, independent random effects day strata another variable. See #169 @seabbs. Added support passing cpp_options cmdstanr::cmdstan_model(). See #182 @seabbs. Add function, convolution_matrix() constructing convolution matrices. See #183 @seabbs. Add pass enw_model() write_stan_files_no_profile() target_dir argument. allows users compile model share compiled model across sessions rather recompile time temporary directory cleared. See #185 @seabbs. Added add_pmfs(), sum probability mass functions new probability mass function. Initial implementation @seabbs #183, refactored @pratikunterwegs #187, following suggestion issue #186 @pearsonca. Added warning observed empirical maximum delay less specified maximum delay. See #190 @seabbs. Added nested support converting array syntax convert_cmdstan_to_rstan. See #192 @sbfnk.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"model-0-2-0","dir":"Changelog","previous_headings":"","what":"Model","title":"epinowcast 0.2.0","text":"Added support parametric log-logistic delay distributions. See #128 @adrian-lison. Implemented direct specification parametric baseline hazards. See #134 @adrian-lison. Refactored observation model, combination logit hazards, effects priors contained generic functions make extending package functionality easier. See #137 @seabbs. Implemented specification parametric baseline hazards probabilities log scale increase robustness efficiency. Also includes refactoring functions reorganisation inst/stan/epinowcast.stan increase modularity clarity. See #140 @seabbs. Introduced two new delay likelihoods delay_snap_lmpf delay_group_lmpf. stratify either snapshots groups. helpful models (missingness module). ability choose function used exposed user enw_fit_opts() via likelihood_aggregation argument. functions rely newly added expected_obs_from_snaps function vectorises expected_obs_from_index. See #138 @seabbs @adrian-lison. Added support supplying missingness model parameters model well optional priors effect estimation. See #138 @seabbs @adrian-lison. Refactored model generated quantities functional. See #138 @seabbs @adrian-lison. Added support modelling missing reference dates likelihood. See #147 @seabbs @adrian-lison. Added additional functionality delay_group_lmpf support modelling observations missing reference dates. Also updated generated quantities support mode. See #147 @seabbs @adrian-lison based #64 @adrian-lison. Added flexible expectation process growth rate scale. default expectation model updated group-wise random walk growth rate. See #152 @seabbs @adrian-lison. Added deterministic renewal equation, latent reporting process. See #152 #183 @seabbs @adrian-lison. Added support intercept expectation model general formula support enable feature modules going forward. See #170 @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"documentation-0-2-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.2.0","text":"Removed explicit links authors issues NEWS.md file. See #132 @choi-hannah. Added new example using simulated data enw_missing() model module. See #138 @seabbs @adrian-lison. Update model definition vignette include missing reference date model. See #147 @seabbs @adrian-lison. Added use expectation model “Hierarchical nowcasting age stratified COVID-19 hospitalisations Germany” vignette. See #193 @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"bugs-0-2-0","dir":"Changelog","previous_headings":"","what":"Bugs","title":"epinowcast 0.2.0","text":"probability-model (.e parametric distribution used hence hazard scale needed) used due mistake specifying ref_as_p stan code. additional issue enw_report() module currently self-declares regardless . bug impact results increased runtimes simple models. issues fixed #142 @seabbs. addition meta features week month properly sequentially number weeks months time series crossed year boundaries. impact models included effects expecting fact sequentially numbered (e.g. random walks). Fixed #151 @pearsonca. #151 also corrects minor issue enw_example() pointing old file name type=\"script\". @pearsonca.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-010","dir":"Changelog","previous_headings":"","what":"epinowcast 0.1.0","title":"epinowcast 0.1.0","text":"major release focusing improving user experience, preparing future package extensions, increase modularity, development flexible full-featured formula interface, hopefully future-proofing far possible. prepares ground future model extensions allow broad range real-time infectious disease questions better answered. extensions include: Modelling missing data (#43). Non-parametric modelling delay reference date logit hazard (#4). Flexible expectation modelling (#5). Forecasting beyond horizon data (#3). Known reporting structures (#33). Renewal equation-based reproduction number estimation (potentially part #5). Latent infections (.e implemented packages EpiNow2, epidemia, etc.). Convolution-based delay models (.e hospitalisations deaths) partially reported data. Additional observation models. interested contributing features, aspects package development (example improving post-processing, coverage documentation, contributing case studies) please see contributing guide /just reach . community project needs support users order provide improved tools real-time infectious disease surveillance. release contains multiple breaking changes. needing old interface please install 0.0.7 GitHub. ease, stratified changes interface, package, documentation, model changes. Note package still flagged experimental regular use authors. @adrian-lison, @sbfnk, @seabbs contributed release.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"interface-0-1-0","dir":"Changelog","previous_headings":"","what":"Interface","title":"epinowcast 0.1.0","text":"fully featured flexible formula interface added allows specification fixed effects, lme4 random effects, random walks. See #27 @seabbs. major overhaul, described #57, interface epinowcast() particular focus improving modularity model components (described modules documentation). package documentation vignettes updated reflect new interface. See #112 @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"package-0-1-0","dir":"Changelog","previous_headings":"","what":"Package","title":"epinowcast 0.1.0","text":"Renamed package updated description give clarity problem space focusses . See #110 @seabbs. new helper function enw_delay_metadata() added. produces metadata delay distribution vector may helpful future modelling. prepares way #4 data.frame combined reference metadata order build non-parametric hazard reference delay-based models. addition adding function, also added output enw_preprocess_data() order make metadata readily available end-users. See #80 @seabbs. Two new helper functions enw_filter_reference_dates() enw_filter_report_dates() added. replace enw_retrospective_data() allow users similarly construct retrospective data. Splitting functions components also allows additional use cases previously possible. Note definition assumed report date given reference date must equal greater (.e report happen event reported occurs). See #82 @sbfnk @seabbs. internal grouping variables refactored reduce chance clashes columns data.frames supplied user. also error thrown case variable clash, making preprocessing safer. See #102 @adrian-lison @seabbs, solves #99. Support preprocessing observations missing reference dates added along new data object returned enw_preprocess_data() highlights information user (alternatively can accessed users using enw_missing_reference()). addition, missing observations setup passed stan order allow use modelling. feature preparation adding full support missing observations (see #43). See #106 @adrian-lison @seabbs. discretised reporting probability function extended handle delays beyond maximum delay three different ways: ignore, add maximum, normalize. nowcasting model uses “normalise” though work ongoing. See #113 @adrian-lison #121 @seabbs. Fixed issue (#105) cmdstan 2.30.0 passing optimisation flags stanc_options default causing compilation error passing flags default. See #117 @sbfnk @seabbs. Addition regression/integration tests example data epinowcast() enw_preprocess_data() convergence checking several example nowcasting models. Lower level tests model tools model modules also added. See #112 @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"model-0-1-0","dir":"Changelog","previous_headings":"","what":"Model","title":"epinowcast 0.1.0","text":"Added support parametric exponential delay distributions (note comparable intercept-non-parametric hazard model) potentially parametric delay (though currently throw error due lack appropriate non-parametric hazard). See #84 @seabbs. Added support Poisson observation model though recommended users make use default negative binomial model. See #120 @seabbs. Updated expectation random walk model use efficient cumulative_sum implementation suggested @adrian-lison #98. See #103 @seabbs. Aligned implementation overdispersion prior prior choice recommendations stan wiki. See #111 @adrian-lison.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"documentation-0-1-0","dir":"Changelog","previous_headings":"","what":"Documentation","title":"epinowcast 0.1.0","text":"model description updated reflect currently implemented model improve readability. use reference report date nomenclature also standardised across package. See #71 @sbfnk @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"internals-0-1-0","dir":"Changelog","previous_headings":"","what":"Internals","title":"epinowcast 0.1.0","text":"Array declarations stan model updated. maintain compatibility expose_stan_fns() (depends rstan), additional functionality added parse stan code function. See #74, #85, #93 @sbfnk @seabbs. Remove spurious warnings due missing initial values optional parameters. See #76 @sbfnk @seabbs.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-007","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.7","title":"epinowcast 0.0.7","text":"Adds additional quality life data processing maximum number (max_confirm) notifications available every row (cumulative incidence notifications) cumulative daily empirical proportion reported calculated user pre-processing (see #62 @seabbs). default approach handling reported notifications beyond maximum delay changed. 0.0.6 previous versions notifications beyond maximum delay silently dropped. 0.0.7 now optional behaviour (set using max_delay_strat enw_preprocess_data()) default instead add notifications last included delay present. produce accurate long-term nowcasts data available means reported notifications maximum delay need interpreted mind. See #62 @seabbs. Adds basic testing documentation preprocessing functions. See #62 @seabbs. Stabilises calculation expected observations increasing proportion calculation performed log scale. results reduced computation time majority coming switching using neg_binomial_2_log family functions (natural scale counterparts). See #65 @seabbs","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-006","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.6","title":"epinowcast 0.0.6","text":"Simplifies optimises internal functions used estimate parametric daily reporting probability. now exposed user via distribution parameter Lognormal Gamma families tested work. Note parameterisations use standard parameterisations given stan manual (see #42 @adrian-lison @seabbs) Add profiling switch model compilation, allowing toggle profiling (https://mc-stan.org/cmdstanr/articles/profiling.html) /model. Also supports .stan files found include_paths (see #41 #54 @adrian-lison). Fully vectorise likelihood flattening observations pre-specify expected observations vector calculating log-likelihood (see #40 @seabbs). Adds vectorisation zero truncated normal distributions (see #38 @seabbs) hazard_to_prob optimised using vectorisation (see #53 @adrian-lison @seabbs). prob_to_hazard optimised required cumulative probabilities calculated (see #53 @adrian-lison @seabbs). Updated use inv_sqrt stan function (see #60 @seabbs). Added support scoringutils 1.0.0 (see #61 @seabbs). Added basic example helper function, enw_example(), power examples tests based work done forecast.vocs (see #61 @seabbs).","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-005","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.5","title":"epinowcast 0.0.5","text":"Convert retrospective data date fields class IDate utilising enw_retrospective_data solve esoteric error. Added full argument name include_paths avoid console chatter Adds stanc_options argument enw_model() specifies new default list(\"01\") enables simple pre-compilation optimisations. See optimisation details. Remove inv_logit logit may instead use base R plogit qlogit.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-004","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.4","title":"epinowcast 0.0.4","text":"Add support extracting summarising posterior nowcast samples Package spell check Update read quick start use 40 days delay vs 30 Add section read quick start showing example handling nowcast samples. Add support passing custom models included files enw_model(). Fix bug enw_summarise_samples() returned duplicate samples. Add support passing holidays variable adjusting converting holiday day custom day week (default Sunday set user). Added support scoring natural log scale. represents absolute relative scoring respectively.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-003","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.3","title":"epinowcast 0.0.3","text":"Add support passing priors Add case study vignette Add model definition implementation details. Add support sample scoring (using scoringutils).","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-002","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.2","title":"epinowcast 0.0.2","text":"Initial version package broadly working functionality first draft vignettes.","code":""},{"path":"https://package.epinowcast.org/dev/news/index.html","id":"epinowcast-001","dir":"Changelog","previous_headings":"","what":"epinowcast 0.0.1","title":"epinowcast 0.0.1","text":"Initial package version development code","code":""}]
