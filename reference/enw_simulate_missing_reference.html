<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Simulate observations with a missing reference date. — enw_simulate_missing_reference • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate observations with a missing reference date. — enw_simulate_missing_reference"><meta property="og:description" content="A simple binomial simulator of missing data by reference date using simulated
or observed data as an input. This function may be used to validate missing
data models, as part of examples and case studies, or to explore the
implications of missing data for your use case."><meta property="og:image" content="https://package.epinowcast.org/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epinowcast</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/epinowcast.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Model details</li>
    <li>
      <a href="../articles/model.html">Model definition and implementation</a>
    </li>
    <li>
      <a href="../articles/distributions.html">Discretised distributions</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Case studies</li>
    <li>
      <a href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a>
    </li>
    <li>
      <a href="../articles/single-timeseries-rt-estimation.html">Estimating the effective reproduction number in real-time for a single timeseries with reporting delays</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Working with epinowcast</li>
    <li>
      <a href="../articles/stan-help.html">Resources to help with model fitting using Stan</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/epinowcast/epinowcast/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simulate observations with a missing reference date.</h1>
    <small class="dont-index">Source: <a href="https://github.com/epinowcast/epinowcast/blob/HEAD/R/simulate.R" class="external-link"><code>R/simulate.R</code></a></small>
    <div class="hidden name"><code>enw_simulate_missing_reference.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A simple binomial simulator of missing data by reference date using simulated
or observed data as an input. This function may be used to validate missing
data models, as part of examples and case studies, or to explore the
implications of missing data for your use case.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_simulate_missing_reference</span><span class="op">(</span><span class="va">obs</span>, proportion <span class="op">=</span> <span class="fl">0.2</span>, by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>obs</dt>
<dd><p>A <code>data.frame</code> containing at least the following variables:
<code>reference date</code> (index date of interest), <code>report_date</code> (report date for
observations), and <code>confirm</code> (cumulative observations by reference and report
date).</p></dd>


<dt>proportion</dt>
<dd><p>Numeric, the proportion of observations that are missing a
reference date, indexed by reference date. Currently only a fixed proportion
are supported and this defaults to 0.2.</p></dd>


<dt>by</dt>
<dd><p>A character vector describing the stratification of
observations. This defaults to no grouping. This should be used
when modelling multiple time series in order to identify them for
downstream modelling</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>data.table</code> of the same format as the input but with a simulated
proportion of observations now having a missing reference date.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load and filter germany hospitalisations</span></span></span>
<span class="r-in"><span><span class="va">nat_germany_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">germany_covid19_hosp</span>, <span class="va">location</span> <span class="op">==</span> <span class="st">"DE"</span> <span class="op">&amp;</span> <span class="va">age_group</span> <span class="op">==</span> <span class="st">"00+"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nat_germany_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_filter_report_dates.html">enw_filter_report_dates</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">nat_germany_hosp</span>,</span></span>
<span class="r-in"><span>  latest_date <span class="op">=</span> <span class="st">"2021-08-01"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make sure observations are complete</span></span></span>
<span class="r-in"><span><span class="va">nat_germany_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_complete_dates.html">enw_complete_dates</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">nat_germany_hosp</span>,</span></span>
<span class="r-in"><span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"location"</span>, <span class="st">"age_group"</span><span class="op">)</span>, missing_reference <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simulate</span></span></span>
<span class="r-in"><span><span class="fu">enw_simulate_missing_reference</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">nat_germany_hosp</span>,</span></span>
<span class="r-in"><span>  proportion <span class="op">=</span> <span class="fl">0.35</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"location"</span>, <span class="st">"age_group"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;location, age_group, reference_date, report_date&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       location age_group report_date reference_date confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;fctr&gt;    &lt;fctr&gt;      &lt;IDat&gt;         &lt;IDat&gt;   &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1:       DE       00+  2021-04-06           &lt;NA&gt;      50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2:       DE       00+  2021-04-07           &lt;NA&gt;     159</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    3:       DE       00+  2021-04-08           &lt;NA&gt;     247</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    4:       DE       00+  2021-04-09           &lt;NA&gt;     233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    5:       DE       00+  2021-04-10           &lt;NA&gt;     241</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ---                                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7135:       DE       00+  2021-07-31     2021-07-30      33</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7136:       DE       00+  2021-08-01     2021-07-30      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7137:       DE       00+  2021-07-31     2021-07-31      25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7138:       DE       00+  2021-08-01     2021-07-31      38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7139:       DE       00+  2021-08-01     2021-08-01       6</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk, Carl Pearson, Hugo Gruson, Felix Guenther, Michael DeWitt.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

