<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simulate observations with a missing reference date. — enw_simulate_missing_reference • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate observations with a missing reference date. — enw_simulate_missing_reference"><meta name="description" content="A simple binomial simulator of missing data by reference date using simulated
or observed data as an input. This function may be used to validate missing
data models, as part of examples and case studies, or to explore the
implications of missing data for your use case."><meta property="og:description" content="A simple binomial simulator of missing data by reference date using simulated
or observed data as an input. This function may be used to validate missing
data models, as part of examples and case studies, or to explore the
implications of missing data for your use case."><meta property="og:image" content="https://package.epinowcast.org/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epinowcast</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/epinowcast.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reference" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reference</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reference"><li><a class="dropdown-item" href="../reference/index.html">R Reference</a></li>
    <li><a class="dropdown-item" href="https://package.epinowcast.org/stan/globals.html">Stan Reference</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Model details</h6></li>
    <li><a class="dropdown-item" href="../articles/model.html">Model definition and implementation</a></li>
    <li><a class="dropdown-item" href="../articles/features.html">Model features summary</a></li>
    <li><a class="dropdown-item" href="../articles/distributions.html">Discretised distributions</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Case studies</h6></li>
    <li><a class="dropdown-item" href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a></li>
    <li><a class="dropdown-item" href="../articles/single-timeseries-rt-estimation.html">Estimating the effective reproduction number in real-time for a single timeseries with reporting delays</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Working with epinowcast</h6></li>
    <li><a class="dropdown-item" href="../articles/stan-help.html">Resources to help with model fitting using Stan</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epinowcast/epinowcast/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simulate observations with a missing reference date.</h1>
      <small class="dont-index">Source: <a href="https://github.com/epinowcast/epinowcast/blob/main/R/simulate.R" class="external-link"><code>R/simulate.R</code></a></small>
      <div class="d-none name"><code>enw_simulate_missing_reference.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A simple binomial simulator of missing data by reference date using simulated
or observed data as an input. This function may be used to validate missing
data models, as part of examples and case studies, or to explore the
implications of missing data for your use case.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_simulate_missing_reference</span><span class="op">(</span><span class="va">obs</span>, proportion <span class="op">=</span> <span class="fl">0.2</span>, by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-obs">obs<a class="anchor" aria-label="anchor" href="#arg-obs"></a></dt>
<dd><p>A <code>data.frame</code> containing at least the following variables:
<code>reference date</code> (index date of interest), <code>report_date</code> (report date for
observations), and <code>confirm</code> (cumulative observations by reference and report
date).</p></dd>


<dt id="arg-proportion">proportion<a class="anchor" aria-label="anchor" href="#arg-proportion"></a></dt>
<dd><p>Numeric, the proportion of observations that are missing a
reference date, indexed by reference date. Currently only a fixed proportion
are supported and this defaults to 0.2.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>A character vector describing the stratification of
observations. This defaults to no grouping. This should be used
when modelling multiple time series in order to identify them for
downstream modelling</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.table</code> of the same format as the input but with a simulated
proportion of observations now having a missing reference date.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load and filter germany hospitalisations</span></span></span>
<span class="r-in"><span><span class="va">nat_germany_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">germany_covid19_hosp</span>, <span class="va">location</span> <span class="op">==</span> <span class="st">"DE"</span> <span class="op">&amp;</span> <span class="va">age_group</span> <span class="op">==</span> <span class="st">"00+"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nat_germany_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_filter_report_dates.html">enw_filter_report_dates</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">nat_germany_hosp</span>,</span></span>
<span class="r-in"><span>  latest_date <span class="op">=</span> <span class="st">"2021-08-01"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make sure observations are complete</span></span></span>
<span class="r-in"><span><span class="va">nat_germany_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_complete_dates.html">enw_complete_dates</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">nat_germany_hosp</span>,</span></span>
<span class="r-in"><span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"location"</span>, <span class="st">"age_group"</span><span class="op">)</span>, missing_reference <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Simulate</span></span></span>
<span class="r-in"><span><span class="fu">enw_simulate_missing_reference</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">nat_germany_hosp</span>,</span></span>
<span class="r-in"><span>  proportion <span class="op">=</span> <span class="fl">0.35</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"location"</span>, <span class="st">"age_group"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;location, age_group, reference_date, report_date&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       location age_group report_date reference_date confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;fctr&gt;    &lt;fctr&gt;      &lt;IDat&gt;         &lt;IDat&gt;   &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1:       DE       00+  2021-04-06           &lt;NA&gt;      51</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2:       DE       00+  2021-04-07           &lt;NA&gt;     151</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    3:       DE       00+  2021-04-08           &lt;NA&gt;     231</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    4:       DE       00+  2021-04-09           &lt;NA&gt;     230</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    5:       DE       00+  2021-04-10           &lt;NA&gt;     226</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ---                                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7135:       DE       00+  2021-07-31     2021-07-30      37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7136:       DE       00+  2021-08-01     2021-07-30      37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7137:       DE       00+  2021-07-31     2021-07-31      19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7138:       DE       00+  2021-08-01     2021-07-31      26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7139:       DE       00+  2021-08-01     2021-08-01       4</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk, Carl Pearson, Hugo Gruson, Felix Guenther, Michael DeWitt, James Mba Azam, Jessalyn Sebastian.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

