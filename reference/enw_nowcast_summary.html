<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summarise the posterior nowcast prediction — enw_nowcast_summary • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarise the posterior nowcast prediction — enw_nowcast_summary"><meta name="description" content='A generic wrapper around enw_posterior() with
opinionated defaults to extract the posterior prediction for the
nowcast ("pp_inf_obs" from the stan code). The functionality of
this function can be used directly on the output of epinowcast() using
the supplied summary.epinowcast() method.'><meta property="og:description" content='A generic wrapper around enw_posterior() with
opinionated defaults to extract the posterior prediction for the
nowcast ("pp_inf_obs" from the stan code). The functionality of
this function can be used directly on the output of epinowcast() using
the supplied summary.epinowcast() method.'><meta property="og:image" content="https://package.epinowcast.org/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epinowcast</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/epinowcast.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reference" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reference</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reference"><li><a class="dropdown-item" href="../reference/index.html">R Reference</a></li>
    <li><a class="dropdown-item" href="https://package.epinowcast.org/stan/globals.html">Stan Reference</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><h6 class="dropdown-header" data-toc-skip>Model details</h6></li>
    <li><a class="dropdown-item" href="../articles/model.html">Model definition and implementation</a></li>
    <li><a class="dropdown-item" href="../articles/features.html">Model features summary</a></li>
    <li><a class="dropdown-item" href="../articles/distributions.html">Discretised distributions</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Case studies</h6></li>
    <li><a class="dropdown-item" href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a></li>
    <li><a class="dropdown-item" href="../articles/single-timeseries-rt-estimation.html">Estimating the effective reproduction number in real-time for a single timeseries with reporting delays</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Working with epinowcast</h6></li>
    <li><a class="dropdown-item" href="../articles/stan-help.html">Resources to help with model fitting using Stan</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epinowcast/epinowcast/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarise the posterior nowcast prediction</h1>
      <small class="dont-index">Source: <a href="https://github.com/epinowcast/epinowcast/blob/main/R/postprocess.R" class="external-link"><code>R/postprocess.R</code></a></small>
      <div class="d-none name"><code>enw_nowcast_summary.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A generic wrapper around <code><a href="enw_posterior.html">enw_posterior()</a></code> with
opinionated defaults to extract the posterior prediction for the
nowcast (<code>"pp_inf_obs"</code> from the <code>stan</code> code). The functionality of
this function can be used directly on the output of <code><a href="epinowcast.html">epinowcast()</a></code> using
the supplied <code><a href="summary.epinowcast.html">summary.epinowcast()</a></code> method.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_nowcast_summary</span><span class="op">(</span></span>
<span>  <span class="va">fit</span>,</span>
<span>  <span class="va">obs</span>,</span>
<span>  max_delay <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timestep <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.2</span>, <span class="fl">0.35</span>, <span class="fl">0.5</span>, <span class="fl">0.65</span>, <span class="fl">0.8</span>, <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fit">fit<a class="anchor" aria-label="anchor" href="#arg-fit"></a></dt>
<dd><p>A <code>cmdstanr</code> fit object.</p></dd>


<dt id="arg-obs">obs<a class="anchor" aria-label="anchor" href="#arg-obs"></a></dt>
<dd><p>An observation <code>data.frame</code> containing <code>reference_date</code>
columns of the same length as the number of rows in the posterior and the
most up to date observation for each date. This is used to align the
posterior with the observations. The easiest source of this data is the
output of latest output of <code><a href="enw_preprocess_data.html">enw_preprocess_data()</a></code> or <code><a href="enw_latest_data.html">enw_latest_data()</a></code>.</p></dd>


<dt id="arg-max-delay">max_delay<a class="anchor" aria-label="anchor" href="#arg-max-delay"></a></dt>
<dd><p>Maximum delay to which nowcasts should be
summarised, in units of the timestep used during preprocessing. Must
be equal (default) or larger than the modelled maximum delay. If it is
larger, then nowcasts for unmodelled dates are added by assuming that
case counts beyond the modelled maximum delay are fully observed.</p></dd>


<dt id="arg-timestep">timestep<a class="anchor" aria-label="anchor" href="#arg-timestep"></a></dt>
<dd><p>The timestep to used. This can be a string ("day",
"week") or a numeric whole number representing the number of days.
Note that "month" is not currently supported in user-facing functions
and will throw an error if used.</p></dd>


<dt id="arg-probs">probs<a class="anchor" aria-label="anchor" href="#arg-probs"></a></dt>
<dd><p>A vector of numeric probabilities to produce
quantile summaries for. By default these are the 5%, 20%, 80%,
and 95% quantiles which are also the minimum set required for
plotting functions to work.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> summarising the model posterior nowcast prediction.
This uses observed data where available and the posterior prediction
where not.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="summary.epinowcast.html">summary.epinowcast()</a></code></p>
<p>Functions used for postprocessing of model fits
<code><a href="build_ord_obs.html">build_ord_obs</a>()</code>,
<code><a href="enw_add_latest_obs_to_nowcast.html">enw_add_latest_obs_to_nowcast</a>()</code>,
<code><a href="enw_nowcast_samples.html">enw_nowcast_samples</a>()</code>,
<code><a href="enw_posterior.html">enw_posterior</a>()</code>,
<code><a href="enw_pp_summary.html">enw_pp_summary</a>()</code>,
<code><a href="enw_quantiles_to_long.html">enw_quantiles_to_long</a>()</code>,
<code><a href="enw_summarise_samples.html">enw_summarise_samples</a>()</code>,
<code><a href="subset_obs.html">subset_obs</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_example.html">enw_example</a></span><span class="op">(</span><span class="st">"nowcast"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">enw_nowcast_summary</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">fit</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">latest</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">max_delay</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reference_date report_date .group max_confirm location age_group confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;IDat&gt;      &lt;IDat&gt;  &lt;num&gt;       &lt;int&gt;   &lt;fctr&gt;    &lt;fctr&gt;   &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     2021-08-03  2021-08-22      1         149       DE       00+     149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     2021-08-04  2021-08-22      1         166       DE       00+     166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     2021-08-05  2021-08-22      1         133       DE       00+     133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     2021-08-06  2021-08-22      1         137       DE       00+     137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     2021-08-07  2021-08-22      1         139       DE       00+     139</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     2021-08-08  2021-08-22      1          97       DE       00+      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     2021-08-09  2021-08-22      1          58       DE       00+      58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     2021-08-10  2021-08-22      1         175       DE       00+     175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     2021-08-11  2021-08-22      1         233       DE       00+     233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     2021-08-12  2021-08-22      1         237       DE       00+     237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     2021-08-13  2021-08-22      1         204       DE       00+     204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     2021-08-14  2021-08-22      1         189       DE       00+     189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:     2021-08-15  2021-08-22      1         125       DE       00+     125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:     2021-08-16  2021-08-22      1          98       DE       00+      98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:     2021-08-17  2021-08-22      1         242       DE       00+     242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:     2021-08-18  2021-08-22      1         223       DE       00+     223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:     2021-08-19  2021-08-22      1         202       DE       00+     202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:     2021-08-20  2021-08-22      1         171       DE       00+     171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:     2021-08-21  2021-08-22      1         112       DE       00+     112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:     2021-08-22  2021-08-22      1          45       DE       00+      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reference_date report_date .group max_confirm location age_group confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cum_prop_reported delay prop_reported    mean median         sd     mad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 &lt;num&gt; &lt;num&gt;         &lt;num&gt;   &lt;num&gt;  &lt;num&gt;      &lt;num&gt;   &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:                 1    19   0.000000000 149.000  149.0   0.000000  0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:                 1    18   0.000000000 167.480  167.0   1.403414  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:                 1    17   0.000000000 135.797  136.0   1.858291  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:                 1    16   0.000000000 141.272  141.0   2.414507  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:                 1    15   0.007194245 145.764  145.0   3.070461  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:                 1    14   0.000000000 103.614  103.0   2.892987  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:                 1    13   0.000000000  62.838   63.0   2.595475  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:                 1    12   0.000000000 185.149  185.0   3.655155  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:                 1    11   0.000000000 256.191  256.0   7.084540  7.4130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:                 1    10   0.004219409 267.189  266.0   8.269563  7.4130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:                 1     9   0.000000000 236.218  235.0   8.635453  8.8956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:                 1     8   0.015873016 230.463  230.0  10.395995 10.3782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:                 1     7   0.040000000 165.184  165.0   9.660925  8.8956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:                 1     6   0.010204082 129.535  129.0   8.499354  8.8956</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:                 1     5   0.012396694 293.236  292.0  11.922603 11.8608</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:                 1     4   0.017937220 293.392  292.0  15.981231 14.8260</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:                 1     3   0.019801980 291.537  290.0  20.271200 20.7564</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:                 1     2   0.070175439 295.258  292.5  29.356997 27.4281</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:                 1     1   0.383928571 310.440  304.0  50.020660 47.4432</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:                 1     0   1.000000000 384.142  368.0 115.713601 97.8516</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cum_prop_reported delay prop_reported    mean median         sd     mad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         q5   q20    q35   q50   q65   q80    q95      rhat  ess_bulk  ess_tail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;num&gt; &lt;num&gt;  &lt;num&gt; &lt;num&gt; &lt;num&gt; &lt;num&gt;  &lt;num&gt;     &lt;num&gt;     &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 149.00   149 149.00 149.0   149 149.0 149.00        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 166.00   166 167.00 167.0   168 168.0 170.00 1.0011717 1032.9494 1005.1434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 133.00   134 135.00 136.0   136 137.0 139.00 1.0023790  927.8688  880.2070</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 138.00   139 140.00 141.0   142 143.0 146.00 0.9997357 1024.0598  943.1194</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 141.00   143 144.00 145.0   147 148.0 151.00 1.0009523 1192.6161  903.2221</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  99.00   101 102.00 103.0   105 106.0 109.00 1.0056338 1020.5322 1049.4998</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  59.00    61  62.00  63.0    64  65.0  68.00 0.9989559 1026.9068  976.3448</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 180.00   182 183.00 185.0   186 188.0 192.00 1.0008924  874.1838  752.9787</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 246.00   250 253.00 256.0   258 262.0 269.00 1.0019152  840.3245  950.3159</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 255.00   260 264.00 266.0   270 274.0 282.00 0.9991677 1046.7181  969.9759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 224.00   229 232.00 235.0   239 243.0 252.00 1.0025829  884.3839  943.4474</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: 215.00   222 226.00 230.0   234 239.0 249.00 1.0004028  857.4908  808.3249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: 150.00   157 161.00 165.0   168 173.0 182.00 1.0063929  942.5139  877.8069</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: 117.00   122 125.00 129.0   132 136.0 144.00 1.0015131 1034.7024  934.5488</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: 276.00   283 288.00 292.0   297 302.0 315.00 1.0036606  886.4727  919.5960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: 269.00   280 286.00 292.0   299 306.0 321.00 0.9996327 1073.2110 1004.6946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17: 262.00   274 282.00 290.0   298 308.0 327.05 0.9994497 1455.4791 1067.2793</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18: 252.00   271 282.00 292.5   304 317.0 350.00 0.9986679 1075.3975  898.2947</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19: 238.95   269 287.00 304.0   324 349.0 396.10 0.9996761 1254.5799  923.0215</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20: 235.00   288 329.65 368.0   406 462.2 602.00 1.0026839 1616.8851  595.4893</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         q5   q20    q35   q50   q65   q80    q95      rhat  ess_bulk  ess_tail</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk, Carl Pearson, Hugo Gruson, Felix Guenther, Michael DeWitt, James Mba Azam, Jessalyn Sebastian.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

