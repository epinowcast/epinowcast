<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Summarise the posterior nowcast prediction — enw_nowcast_summary • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Summarise the posterior nowcast prediction — enw_nowcast_summary"><meta property="og:description" content='A generic wrapper around enw_posterior() with
opinionated defaults to extract the posterior prediction for the
nowcast ("pp_inf_obs" from the stan code). The functionality of
this function can be used directly on the output of epinowcast() using
the supplied summary.epinowcast() method.'><meta property="og:image" content="https://package.epinowcast.org/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epinowcast</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/epinowcast.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Model details</li>
    <li>
      <a href="../articles/model.html">Model definition and implementation</a>
    </li>
    <li>
      <a href="../articles/distributions.html">Discretised distributions</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Case studies</li>
    <li>
      <a href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a>
    </li>
    <li>
      <a href="../articles/single-timeseries-rt-estimation.html">Estimating the effective reproduction number in real-time for a single timeseries with reporting delays</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Working with epinowcast</li>
    <li>
      <a href="../articles/stan-help.html">Resources to help with model fitting using Stan</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/epinowcast/epinowcast/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summarise the posterior nowcast prediction</h1>
    <small class="dont-index">Source: <a href="https://github.com/epinowcast/epinowcast/blob/HEAD/R/postprocess.R" class="external-link"><code>R/postprocess.R</code></a></small>
    <div class="hidden name"><code>enw_nowcast_summary.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A generic wrapper around <code><a href="enw_posterior.html">enw_posterior()</a></code> with
opinionated defaults to extract the posterior prediction for the
nowcast (<code>"pp_inf_obs"</code> from the <code>stan</code> code). The functionality of
this function can be used directly on the output of <code><a href="epinowcast.html">epinowcast()</a></code> using
the supplied <code><a href="summary.epinowcast.html">summary.epinowcast()</a></code> method.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_nowcast_summary</span><span class="op">(</span></span>
<span>  <span class="va">fit</span>,</span>
<span>  <span class="va">obs</span>,</span>
<span>  max_delay <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timestep <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.2</span>, <span class="fl">0.35</span>, <span class="fl">0.5</span>, <span class="fl">0.65</span>, <span class="fl">0.8</span>, <span class="fl">0.95</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>fit</dt>
<dd><p>A <code>cmdstanr</code> fit object.</p></dd>


<dt>obs</dt>
<dd><p>An observation <code>data.frame</code> containing <code>reference_date</code>
columns of the same length as the number of rows in the posterior and the
most up to date observation for each date. This is used to align the
posterior with the observations. The easiest source of this data is the
output of latest output of <code><a href="enw_preprocess_data.html">enw_preprocess_data()</a></code> or <code><a href="enw_latest_data.html">enw_latest_data()</a></code>.</p></dd>


<dt>max_delay</dt>
<dd><p>Maximum delay to which nowcasts should be summarised. Must
be equal (default) or larger than the modelled maximum delay. If it is
larger, then nowcasts for unmodelled dates are added by assuming that case
counts beyond the modelled maximum delay are fully observed.</p></dd>


<dt>timestep</dt>
<dd><p>The timestep to used. This can be a string ("day",
"week", "month") or a numeric whole number representing the number of days.</p></dd>


<dt>probs</dt>
<dd><p>A vector of numeric probabilities to produce
quantile summaries for. By default these are the 5%, 20%, 80%,
and 95% quantiles which are also the minimum set required for
plotting functions to work.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>data.frame</code> summarising the model posterior nowcast prediction.
This uses observed data where available and the posterior prediction
where not.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="summary.epinowcast.html">summary.epinowcast()</a></code></p>
<p>Functions used for postprocessing of model fits
<code><a href="enw_add_latest_obs_to_nowcast.html">enw_add_latest_obs_to_nowcast</a>()</code>,
<code><a href="enw_nowcast_samples.html">enw_nowcast_samples</a>()</code>,
<code><a href="enw_posterior.html">enw_posterior</a>()</code>,
<code><a href="enw_pp_summary.html">enw_pp_summary</a>()</code>,
<code><a href="enw_quantiles_to_long.html">enw_quantiles_to_long</a>()</code>,
<code><a href="enw_summarise_samples.html">enw_summarise_samples</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_example.html">enw_example</a></span><span class="op">(</span><span class="st">"nowcast"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">enw_nowcast_summary</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">fit</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">latest</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">fit</span><span class="op">$</span><span class="va">max_delay</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reference_date report_date .group max_confirm location age_group confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;IDat&gt;      &lt;IDat&gt;  &lt;num&gt;       &lt;int&gt;   &lt;fctr&gt;    &lt;fctr&gt;   &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:     2021-08-03  2021-08-22      1         149       DE       00+     149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:     2021-08-04  2021-08-22      1         166       DE       00+     166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:     2021-08-05  2021-08-22      1         133       DE       00+     133</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:     2021-08-06  2021-08-22      1         137       DE       00+     137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:     2021-08-07  2021-08-22      1         139       DE       00+     139</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:     2021-08-08  2021-08-22      1          97       DE       00+      97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:     2021-08-09  2021-08-22      1          58       DE       00+      58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:     2021-08-10  2021-08-22      1         175       DE       00+     175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:     2021-08-11  2021-08-22      1         233       DE       00+     233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:     2021-08-12  2021-08-22      1         237       DE       00+     237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:     2021-08-13  2021-08-22      1         204       DE       00+     204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:     2021-08-14  2021-08-22      1         189       DE       00+     189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:     2021-08-15  2021-08-22      1         125       DE       00+     125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:     2021-08-16  2021-08-22      1          98       DE       00+      98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:     2021-08-17  2021-08-22      1         242       DE       00+     242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:     2021-08-18  2021-08-22      1         223       DE       00+     223</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:     2021-08-19  2021-08-22      1         202       DE       00+     202</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:     2021-08-20  2021-08-22      1         171       DE       00+     171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:     2021-08-21  2021-08-22      1         112       DE       00+     112</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:     2021-08-22  2021-08-22      1          45       DE       00+      45</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     reference_date report_date .group max_confirm location age_group confirm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cum_prop_reported delay prop_reported    mean median         sd     mad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 &lt;num&gt; &lt;num&gt;         &lt;num&gt;   &lt;num&gt;  &lt;num&gt;      &lt;num&gt;   &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:                 1    19   0.000000000 149.000    149   0.000000  0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:                 1    18   0.000000000 167.426    167   1.318432  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:                 1    17   0.000000000 135.789    136   1.854162  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:                 1    16   0.000000000 141.288    141   2.378805  1.4826</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:                 1    15   0.007194245 146.019    146   3.079630  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:                 1    14   0.000000000 103.853    104   2.969884  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:                 1    13   0.000000000  62.766     63   2.432110  2.9652</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:                 1    12   0.000000000 185.035    185   3.847932  4.4478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:                 1    11   0.000000000 256.031    256   6.498790  5.9304</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:                 1    10   0.004219409 267.692    267   7.713536  7.4130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:                 1     9   0.000000000 236.057    235   8.508004  7.4130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:                 1     8   0.015873016 231.407    231  10.083304 10.3782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:                 1     7   0.040000000 164.876    164   9.848127 10.3782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:                 1     6   0.010204082 128.858    128   8.134495  7.4130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:                 1     5   0.012396694 293.309    292  11.938427 11.8608</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:                 1     4   0.017937220 293.042    292  15.799489 14.8260</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:                 1     3   0.019801980 291.478    290  21.108128 19.2738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:                 1     2   0.070175439 293.178    291  29.440398 28.1694</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:                 1     1   0.383928571 308.518    302  51.151522 46.7019</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:                 1     0   1.000000000 375.644    363 103.424281 91.1799</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cum_prop_reported delay prop_reported    mean median         sd     mad</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         q5   q20    q35   q50    q65   q80    q95      rhat  ess_bulk  ess_tail</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;num&gt; &lt;num&gt;  &lt;num&gt; &lt;num&gt;  &lt;num&gt; &lt;num&gt;  &lt;num&gt;     &lt;num&gt;     &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 149.00   149 149.00   149 149.00   149 149.00        NA        NA        NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 166.00   166 167.00   167 168.00   168 170.00 0.9997778 1003.5643  828.2026</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 133.00   134 135.00   136 136.00   137 139.00 1.0005878  991.0805  916.0962</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 138.00   139 140.00   141 142.00   143 146.00 1.0056729 1041.2029  872.9772</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 141.00   143 145.00   146 147.00   148 152.00 1.0001025  991.1639  885.1056</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 100.00   101 102.65   104 105.00   106 109.00 0.9991163  982.3833  917.3468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  59.00    61  62.00    63  63.00    65  67.00 1.0009067  911.2098  793.6687</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 179.00   182 183.00   185 186.00   188 192.00 1.0002531 1004.7790  972.0392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 246.00   251 253.00   256 258.00   261 268.00 0.9997137 1025.3311  936.5679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 256.00   261 265.00   267 270.00   274 282.00 1.0004951 1040.1417 1008.8448</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 223.00   229 233.00   235 239.00   243 251.00 0.9985724 1201.4893  863.9704</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: 216.00   222 227.00   231 234.00   240 250.00 1.0035756  751.4194  655.0188</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: 150.00   157 160.00   164 168.00   173 181.00 1.0025186  927.9122  920.9413</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: 117.00   122 125.00   128 131.00   135 143.00 1.0010009 1080.4014  964.2083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: 276.00   283 288.00   292 297.00   303 315.00 1.0002316 1159.2978  984.6276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: 268.00   280 286.00   292 299.00   306 320.00 1.0047058 1087.6045  957.9921</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17: 260.00   274 282.00   290 298.35   308 330.00 1.0002334 1129.6391  914.6275</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18: 250.00   269 280.00   291 301.00   316 344.00 0.9993186 1126.3831  903.3288</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19: 239.00   267 286.00   302 322.00   343 399.10 0.9992178 1328.2832  998.7573</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20: 233.95   292 327.00   363 397.00   447 565.05 0.9991666 1554.0485  999.3402</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         q5   q20    q35   q50    q65   q80    q95      rhat  ess_bulk  ess_tail</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk, Carl Pearson, Hugo Gruson, Felix Guenther, Michael DeWitt.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

