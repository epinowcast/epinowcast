<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function allows models to be defined using a
flexible formula interface that supports fixed effects, random effects
(using lme4 syntax). Note that the returned fixed effects design matrix is
sparse and so the index supplied is required to link observations to the
appropriate design matrix row."><!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light"><script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/5/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Define a model using a formula interface — enw_formula • epinowcast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Define a model using a formula interface — enw_formula"><meta property="og:description" content="This function allows models to be defined using a
flexible formula interface that supports fixed effects, random effects
(using lme4 syntax). Note that the returned fixed effects design matrix is
sparse and so the index supplied is required to link observations to the
appropriate design matrix row."><meta property="og:image" content="epiforecasts.io/epinowcast/reference/figures/README-nowcast-1.png"><meta property="og:image:alt" content="An R package for flexible hierarchical nowcasting"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@seabbs"><meta name="twitter:site" content="@seabbs"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/5/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/5/darkly/bootstrap.css" media="(prefers-color-scheme: dark)"><!-- preferably CSS --><link rel="stylesheet" href="../preferably.css"><link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)"><link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)"><script src="../darkswitch.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">epinowcast</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/germany-age-stratified-nowcasting.html">Hierarchical nowcasting of age stratified COVID-19 hospitalisations in Germany</a>
    <a class="dropdown-item" href="../articles/model.html">Model definition and implementation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiforecasts/epinowcast/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>

        
        <li>
          <a class="external-link nav-link" id="css-toggle-btn" aria-label="github">
            <span class="fas fa fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        
        
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Define a model using a formula interface</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/epinowcast/blob/HEAD/R/formula-tools.R" class="external-link"><code>R/formula-tools.R</code></a></small>
      <div class="d-none name"><code>enw_formula.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function allows models to be defined using a
flexible formula interface that supports fixed effects, random effects
(using lme4 syntax). Note that the returned fixed effects design matrix is
sparse and so the index supplied is required to link observations to the
appropriate design matrix row.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">enw_formula</span><span class="op">(</span><span class="va">formula</span>, <span class="va">data</span>, sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>formula</dt>
<dd><p>A model formula that may use standard fixed
effects, random effects using lme4 syntax (see <code><a href="re.html">re()</a></code>), and random walks
defined using the <code><a href="rw.html">rw()</a></code> helper function.</p></dd>


<dt>data</dt>
<dd><p>A <code>data.frame</code> of observations. It must include all
variables used in the supplied formula.</p></dd>


<dt>sparse</dt>
<dd><p>Logical, defaults to  <code>TRUE</code>. Should the fixed effects design
matrix be sparely defined.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list containing the following:</p><ul><li><p><code>formula</code>: The user supplied formula</p></li>
<li><p><code>parsed_formula</code>: The formula as parsed by <code><a href="parse_formula.html">parse_formula()</a></code></p></li>
<li><p><code>extended_formula</code>: The flattened version of the formula with
both user supplied terms and terms added for the user supplied
complex model components.</p></li>
<li><p><code>fixed</code>:  A list containing the fixed effect formula, sparse design
matrix, and the index linking the design matrix with observations.</p></li>
<li><p><code>random</code>: A list containing the random effect formula, sparse design
matrix, and the index linking the design matrix with random effects.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Functions used to help convert formulas into model designs
<code><a href="as_string_formula.html">as_string_formula</a>()</code>,
<code><a href="construct_re.html">construct_re</a>()</code>,
<code><a href="construct_rw.html">construct_rw</a>()</code>,
<code><a href="enw_manual_formula.html">enw_manual_formula</a>()</code>,
<code><a href="parse_formula.html">parse_formula</a>()</code>,
<code><a href="remove_rw_terms.html">remove_rw_terms</a>()</code>,
<code><a href="re.html">re</a>()</code>,
<code><a href="rw_terms.html">rw_terms</a>()</code>,
<code><a href="rw.html">rw</a>()</code>,
<code><a href="split_formula_to_terms.html">split_formula_to_terms</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Use meta data for references dates from the Germany COVID-19</span></span></span>
<span class="r-in"><span><span class="co"># hospitalisation data.</span></span></span>
<span class="r-in"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_filter_report_dates.html">enw_filter_report_dates</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">germany_covid19_hosp</span><span class="op">[</span><span class="va">location</span> <span class="op">==</span> <span class="st">"DE"</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  remove_days <span class="op">=</span> <span class="fl">40</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_filter_reference_dates.html">enw_filter_reference_dates</a></span><span class="op">(</span><span class="va">obs</span>, include_days <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="enw_preprocess_data.html">enw_preprocess_data</a></span><span class="op">(</span><span class="va">obs</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age_group"</span>, <span class="st">"location"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">pobs</span><span class="op">$</span><span class="va">metareference</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model with fixed effects for age group</span></span></span>
<span class="r-in"><span><span class="fu">enw_formula</span><span class="op">(</span><span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="va">age_group</span>, <span class="va">data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1 + age_group"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$fixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1"         "age_group"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$rw</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $expanded_formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1 + age_group"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1 + age_group"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     (Intercept) age_group00+ age_group05-14 age_group15-34 age_group35-59</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             1            0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42            1            1              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83            1            0              1              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124           1            0              0              1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 165           1            0              0              0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 206           1            0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247           1            0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     age_group60-79 age_group80+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42               0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83               0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124              0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 165              0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 206              1            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247              0            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [38] 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [75] 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [112] 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [149] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [186] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [223] 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7 7 7 7 7 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [260] 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   (Intercept)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"assign")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4 5 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "enw_formula" "list"       </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model with random effects for age group</span></span></span>
<span class="r-in"><span><span class="fu">enw_formula</span><span class="op">(</span><span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">age_group</span><span class="op">)</span>, <span class="va">data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1 + (1 | age_group)"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$fixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$random[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 | age_group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$rw</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $expanded_formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1 + age_group"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1 + age_group"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     (Intercept) age_group00-04 age_group00+ age_group05-14 age_group15-34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             1              1            0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42            1              0            1              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83            1              0            0              1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124           1              0            0              0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 165           1              0            0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 206           1              0            0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247           1              0            0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     age_group35-59 age_group60-79 age_group80+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                0              0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42               0              0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83               0              0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124              0              0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 165              1              0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 206              0              1            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247              0              0            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [38] 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [75] 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [112] 3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [149] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [186] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [223] 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 6 7 7 7 7 7 7 7 7 7 7 7 7 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [260] 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~0 + fixed + age_group"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   fixed age_group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     0         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"assign")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4 5 6 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "enw_formula" "list"       </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model with a random effect for age group and a random walk</span></span></span>
<span class="r-in"><span><span class="fu">enw_formula</span><span class="op">(</span><span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">age_group</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="rw.html">rw</a></span><span class="op">(</span><span class="va">week</span><span class="op">)</span>, <span class="va">data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1 + (1 | age_group) + rw(week)"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$fixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$random[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 | age_group</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$rw</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "rw(week)"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $expanded_formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1 + cweek1 + cweek2 + cweek3 + cweek4 + cweek5 + cweek6 + age_group"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1 + cweek1 + cweek2 + cweek3 + cweek4 + cweek5 + cweek6 + age_group"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     (Intercept) cweek1 cweek2 cweek3 cweek4 cweek5 cweek6 age_group00-04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1             1      0      0      0      0      0      0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6             1      1      0      0      0      0      0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13            1      1      1      0      0      0      0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20            1      1      1      1      0      0      0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27            1      1      1      1      1      0      0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34            1      1      1      1      1      1      0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41            1      1      1      1      1      1      1              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42            1      0      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47            1      1      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54            1      1      1      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61            1      1      1      1      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68            1      1      1      1      1      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75            1      1      1      1      1      1      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82            1      1      1      1      1      1      1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83            1      0      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 88            1      1      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95            1      1      1      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 102           1      1      1      1      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109           1      1      1      1      1      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 116           1      1      1      1      1      1      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 123           1      1      1      1      1      1      1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124           1      0      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 129           1      1      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 136           1      1      1      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 143           1      1      1      1      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150           1      1      1      1      1      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 157           1      1      1      1      1      1      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 164           1      1      1      1      1      1      1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 165           1      0      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 170           1      1      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 177           1      1      1      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 184           1      1      1      1      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 191           1      1      1      1      1      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198           1      1      1      1      1      1      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 205           1      1      1      1      1      1      1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 206           1      0      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 211           1      1      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 218           1      1      1      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 225           1      1      1      1      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 232           1      1      1      1      1      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 239           1      1      1      1      1      1      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 246           1      1      1      1      1      1      1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247           1      0      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 252           1      1      0      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 259           1      1      1      0      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 266           1      1      1      1      0      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 273           1      1      1      1      1      0      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 280           1      1      1      1      1      1      0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 287           1      1      1      1      1      1      1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     age_group00+ age_group05-14 age_group15-34 age_group35-59 age_group60-79</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1              0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6              0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13             0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20             0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27             0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34             0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41             0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42             1              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47             1              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54             1              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61             1              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68             1              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75             1              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82             1              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83             0              1              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 88             0              1              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95             0              1              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 102            0              1              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109            0              1              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 116            0              1              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 123            0              1              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124            0              0              1              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 129            0              0              1              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 136            0              0              1              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 143            0              0              1              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150            0              0              1              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 157            0              0              1              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 164            0              0              1              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 165            0              0              0              1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 170            0              0              0              1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 177            0              0              0              1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 184            0              0              0              1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 191            0              0              0              1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198            0              0              0              1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 205            0              0              0              1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 206            0              0              0              0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 211            0              0              0              0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 218            0              0              0              0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 225            0              0              0              0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 232            0              0              0              0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 239            0              0              0              0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 246            0              0              0              0              1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247            0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 252            0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 259            0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 266            0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 273            0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 280            0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 287            0              0              0              0              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     age_group80+</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6              0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 75             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 82             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 83             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 88             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 95             0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 102            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 109            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 116            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 123            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 124            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 129            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 136            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 143            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 157            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 164            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 165            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 170            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 177            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 184            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 191            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 198            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 205            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 206            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 211            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 218            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 225            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 232            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 239            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 246            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 247            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 252            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 259            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 266            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 273            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 280            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 287            1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1]  1  1  1  1  1  2  2  2  2  2  2  2  3  3  3  3  3  3  3  4  4  4  4  4  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [26]  4  5  5  5  5  5  5  5  6  6  6  6  6  6  6  7  8  8  8  8  8  9  9  9  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [51]  9  9  9 10 10 10 10 10 10 10 11 11 11 11 11 11 11 12 12 12 12 12 12 12 13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [76] 13 13 13 13 13 13 14 15 15 15 15 15 16 16 16 16 16 16 16 17 17 17 17 17 17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [101] 17 18 18 18 18 18 18 18 19 19 19 19 19 19 19 20 20 20 20 20 20 20 21 22 22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [126] 22 22 22 23 23 23 23 23 23 23 24 24 24 24 24 24 24 25 25 25 25 25 25 25 26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [151] 26 26 26 26 26 26 27 27 27 27 27 27 27 28 29 29 29 29 29 30 30 30 30 30 30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [176] 30 31 31 31 31 31 31 31 32 32 32 32 32 32 32 33 33 33 33 33 33 33 34 34 34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [201] 34 34 34 34 35 36 36 36 36 36 37 37 37 37 37 37 37 38 38 38 38 38 38 38 39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [226] 39 39 39 39 39 39 40 40 40 40 40 40 40 41 41 41 41 41 41 41 42 43 43 43 43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [251] 43 44 44 44 44 44 44 44 45 45 45 45 45 45 45 46 46 46 46 46 46 46 47 47 47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [276] 47 47 47 47 48 48 48 48 48 48 48 49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~0 + fixed + age_group + week"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    fixed age_group week</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      0         1    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      0         1    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      0         1    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      0         1    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      0         1    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      0         1    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      0         1    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      0         0    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      0         0    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     0         0    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     0         0    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     0         0    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     0         0    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"assign")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "enw_formula" "list"       </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model defined without a sparse fixed effects design matrix</span></span></span>
<span class="r-in"><span><span class="fu">enw_formula</span><span class="op">(</span><span class="op">~</span><span class="fl">1</span>, <span class="va">data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$fixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $parsed_formula$rw</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $expanded_formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   (Intercept)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $fixed$index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$formula</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "~1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      (Intercept)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"assign")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $random$index</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer(0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "enw_formula" "list"       </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Adrian Lison, Sebastian Funk.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.9000.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

    </footer></div>

  

  

  </body></html>

